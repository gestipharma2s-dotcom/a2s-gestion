function H1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function XO(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var V1={exports:{}},Id={},G1={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gl=Symbol.for("react.element"),YO=Symbol.for("react.portal"),JO=Symbol.for("react.fragment"),QO=Symbol.for("react.strict_mode"),ZO=Symbol.for("react.profiler"),e2=Symbol.for("react.provider"),t2=Symbol.for("react.context"),r2=Symbol.for("react.forward_ref"),n2=Symbol.for("react.suspense"),i2=Symbol.for("react.memo"),a2=Symbol.for("react.lazy"),l0=Symbol.iterator;function s2(e){return e===null||typeof e!="object"?null:(e=l0&&e[l0]||e["@@iterator"],typeof e=="function"?e:null)}var K1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X1=Object.assign,Y1={};function Ps(e,t,r){this.props=e,this.context=t,this.refs=Y1,this.updater=r||K1}Ps.prototype.isReactComponent={};Ps.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ps.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J1(){}J1.prototype=Ps.prototype;function Gg(e,t,r){this.props=e,this.context=t,this.refs=Y1,this.updater=r||K1}var Kg=Gg.prototype=new J1;Kg.constructor=Gg;X1(Kg,Ps.prototype);Kg.isPureReactComponent=!0;var c0=Array.isArray,Q1=Object.prototype.hasOwnProperty,Xg={current:null},Z1={key:!0,ref:!0,__self:!0,__source:!0};function ej(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)Q1.call(t,n)&&!Z1.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Gl,type:e,key:a,ref:s,props:i,_owner:Xg.current}}function o2(e,t){return{$$typeof:Gl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Gl}function l2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var u0=/\/+/g;function Yf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?l2(""+e.key):t.toString(36)}function Jc(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Gl:case YO:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+Yf(s,0):n,c0(i)?(r="",e!=null&&(r=e.replace(u0,"$&/")+"/"),Jc(i,t,r,"",function(u){return u})):i!=null&&(Yg(i)&&(i=o2(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(u0,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",c0(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Yf(a,l);s+=Jc(a,t,r,c,i)}else if(c=s2(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Yf(a,l++),s+=Jc(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function uc(e,t,r){if(e==null)return e;var n=[],i=0;return Jc(e,n,"","",function(a){return t.call(r,a,i++)}),n}function c2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ht={current:null},Qc={transition:null},u2={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:Qc,ReactCurrentOwner:Xg};function tj(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:uc,forEach:function(e,t,r){uc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return uc(e,function(){t++}),t},toArray:function(e){return uc(e,function(t){return t})||[]},only:function(e){if(!Yg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=Ps;Te.Fragment=JO;Te.Profiler=ZO;Te.PureComponent=Gg;Te.StrictMode=QO;Te.Suspense=n2;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2;Te.act=tj;Te.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=X1({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=Xg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Q1.call(t,c)&&!Z1.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Gl,type:e.type,key:i,ref:a,props:n,_owner:s}};Te.createContext=function(e){return e={$$typeof:t2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:e2,_context:e},e.Consumer=e};Te.createElement=ej;Te.createFactory=function(e){var t=ej.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:r2,render:e}};Te.isValidElement=Yg;Te.lazy=function(e){return{$$typeof:a2,_payload:{_status:-1,_result:e},_init:c2}};Te.memo=function(e,t){return{$$typeof:i2,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=Qc.transition;Qc.transition={};try{e()}finally{Qc.transition=t}};Te.unstable_act=tj;Te.useCallback=function(e,t){return Ht.current.useCallback(e,t)};Te.useContext=function(e){return Ht.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return Ht.current.useDeferredValue(e)};Te.useEffect=function(e,t){return Ht.current.useEffect(e,t)};Te.useId=function(){return Ht.current.useId()};Te.useImperativeHandle=function(e,t,r){return Ht.current.useImperativeHandle(e,t,r)};Te.useInsertionEffect=function(e,t){return Ht.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return Ht.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return Ht.current.useMemo(e,t)};Te.useReducer=function(e,t,r){return Ht.current.useReducer(e,t,r)};Te.useRef=function(e){return Ht.current.useRef(e)};Te.useState=function(e){return Ht.current.useState(e)};Te.useSyncExternalStore=function(e,t,r){return Ht.current.useSyncExternalStore(e,t,r)};Te.useTransition=function(){return Ht.current.useTransition()};Te.version="18.3.1";G1.exports=Te;var N=G1.exports;const z=Fe(N),d2=H1({__proto__:null,default:z},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f2=N,h2=Symbol.for("react.element"),p2=Symbol.for("react.fragment"),m2=Object.prototype.hasOwnProperty,g2=f2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y2={key:!0,ref:!0,__self:!0,__source:!0};function rj(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)m2.call(t,n)&&!y2.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:h2,type:e,key:a,ref:s,props:i,_owner:g2.current}}Id.Fragment=p2;Id.jsx=rj;Id.jsxs=rj;V1.exports=Id;var o=V1.exports,dp={},nj={exports:{}},pr={},ij={exports:{}},aj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,D){var W=R.length;R.push(D);e:for(;0<W;){var Y=W-1>>>1,F=R[Y];if(0<i(F,D))R[Y]=D,R[W]=F,W=Y;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var D=R[0],W=R.pop();if(W!==D){R[0]=W;e:for(var Y=0,F=R.length,V=F>>>1;Y<V;){var U=2*(Y+1)-1,ge=R[U],le=U+1,Se=R[le];if(0>i(ge,W))le<F&&0>i(Se,ge)?(R[Y]=Se,R[le]=W,Y=le):(R[Y]=ge,R[U]=W,Y=U);else if(le<F&&0>i(Se,W))R[Y]=Se,R[le]=W,Y=le;else break e}}return D}function i(R,D){var W=R.sortIndex-D.sortIndex;return W!==0?W:R.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],f=1,d=null,h=3,p=!1,b=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=R)n(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(u)}}function S(R){if(v=!1,g(R),!b)if(r(c)!==null)b=!0,L(w);else{var D=r(u);D!==null&&G(S,D.startTime-R)}}function w(R,D){b=!1,v&&(v=!1,y(E),E=-1),p=!0;var W=h;try{for(g(D),d=r(c);d!==null&&(!(d.expirationTime>D)||R&&!O());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var F=Y(d.expirationTime<=D);D=e.unstable_now(),typeof F=="function"?d.callback=F:d===r(c)&&n(c),g(D)}else n(c);d=r(c)}if(d!==null)var V=!0;else{var U=r(u);U!==null&&G(S,U.startTime-D),V=!1}return V}finally{d=null,h=W,p=!1}}var _=!1,j=null,E=-1,A=5,P=-1;function O(){return!(e.unstable_now()-P<A)}function T(){if(j!==null){var R=e.unstable_now();P=R;var D=!0;try{D=j(!0,R)}finally{D?M():(_=!1,j=null)}}else _=!1}var M;if(typeof x=="function")M=function(){x(T)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,C=B.port2;B.port1.onmessage=T,M=function(){C.postMessage(null)}}else M=function(){m(T,0)};function L(R){j=R,_||(_=!0,M())}function G(R,D){E=m(function(){R(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,L(w))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var W=h;h=D;try{return R()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var W=h;h=R;try{return D()}finally{h=W}},e.unstable_scheduleCallback=function(R,D,W){var Y=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Y+W:Y):W=Y,R){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=W+F,R={id:f++,callback:D,priorityLevel:R,startTime:W,expirationTime:F,sortIndex:-1},W>Y?(R.sortIndex=W,t(u,R),r(c)===null&&R===r(u)&&(v?(y(E),E=-1):v=!0,G(S,W-Y))):(R.sortIndex=F,t(c,R),b||p||(b=!0,L(w))),R},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(R){var D=h;return function(){var W=h;h=D;try{return R.apply(this,arguments)}finally{h=W}}}})(aj);ij.exports=aj;var v2=ij.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2=N,hr=v2;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sj=new Set,zo={};function ia(e,t){Ja(e,t),Ja(e+"Capture",t)}function Ja(e,t){for(zo[e]=t,e=0;e<t.length;e++)sj.add(t[e])}var En=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fp=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d0={},f0={};function w2(e){return fp.call(f0,e)?!0:fp.call(d0,e)?!1:b2.test(e)?f0[e]=!0:(d0[e]=!0,!1)}function _2(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j2(e,t,r,n){if(t===null||typeof t>"u"||_2(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Vt(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$t[e]=new Vt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$t[t]=new Vt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$t[e]=new Vt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$t[e]=new Vt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$t[e]=new Vt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$t[e]=new Vt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$t[e]=new Vt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$t[e]=new Vt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$t[e]=new Vt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Jg=/[\-:]([a-z])/g;function Qg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Jg,Qg);$t[t]=new Vt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Jg,Qg);$t[t]=new Vt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Jg,Qg);$t[t]=new Vt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$t[e]=new Vt(e,1,!1,e.toLowerCase(),null,!1,!1)});$t.xlinkHref=new Vt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$t[e]=new Vt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zg(e,t,r,n){var i=$t.hasOwnProperty(t)?$t[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j2(t,r,i,n)&&(r=null),n||i===null?w2(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var In=x2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dc=Symbol.for("react.element"),Sa=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),ey=Symbol.for("react.strict_mode"),hp=Symbol.for("react.profiler"),oj=Symbol.for("react.provider"),lj=Symbol.for("react.context"),ty=Symbol.for("react.forward_ref"),pp=Symbol.for("react.suspense"),mp=Symbol.for("react.suspense_list"),ry=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),cj=Symbol.for("react.offscreen"),h0=Symbol.iterator;function Ys(e){return e===null||typeof e!="object"?null:(e=h0&&e[h0]||e["@@iterator"],typeof e=="function"?e:null)}var at=Object.assign,Jf;function go(e){if(Jf===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Jf=t&&t[1]||""}return`
`+Jf+e}var Qf=!1;function Zf(e,t){if(!e||Qf)return"";Qf=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,l=a.length-1;1<=s&&0<=l&&i[s]!==a[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==a[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==a[l]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{Qf=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?go(e):""}function S2(e){switch(e.tag){case 5:return go(e.type);case 16:return go("Lazy");case 13:return go("Suspense");case 19:return go("SuspenseList");case 0:case 2:case 15:return e=Zf(e.type,!1),e;case 11:return e=Zf(e.type.render,!1),e;case 1:return e=Zf(e.type,!0),e;default:return""}}function gp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Na:return"Fragment";case Sa:return"Portal";case hp:return"Profiler";case ey:return"StrictMode";case pp:return"Suspense";case mp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case lj:return(e.displayName||"Context")+".Consumer";case oj:return(e._context.displayName||"Context")+".Provider";case ty:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ry:return t=e.displayName||null,t!==null?t:gp(e.type)||"Memo";case qn:t=e._payload,e=e._init;try{return gp(e(t))}catch{}}return null}function N2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gp(t);case 8:return t===ey?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ui(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E2(e){var t=uj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fc(e){e._valueTracker||(e._valueTracker=E2(e))}function dj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=uj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function hu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function yp(e,t){var r=t.checked;return at({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function p0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ui(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fj(e,t){t=t.checked,t!=null&&Zg(e,"checked",t,!1)}function vp(e,t){fj(e,t);var r=ui(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xp(e,t.type,r):t.hasOwnProperty("defaultValue")&&xp(e,t.type,ui(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function m0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function xp(e,t,r){(t!=="number"||hu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yo=Array.isArray;function Fa(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ui(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return at({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function g0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(yo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ui(r)}}function hj(e,t){var r=ui(t.value),n=ui(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function y0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hc,mj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hc=hc||document.createElement("div"),hc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var No={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},A2=["Webkit","ms","Moz","O"];Object.keys(No).forEach(function(e){A2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),No[t]=No[e]})});function gj(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||No.hasOwnProperty(e)&&No[e]?(""+t).trim():t+"px"}function yj(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=gj(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var P2=at({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _p(e,t){if(t){if(P2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function jp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sp=null;function ny(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Np=null,qa=null,za=null;function v0(e){if(e=Yl(e)){if(typeof Np!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Bd(t),Np(e.stateNode,e.type,t))}}function vj(e){qa?za?za.push(e):za=[e]:qa=e}function xj(){if(qa){var e=qa,t=za;if(za=qa=null,v0(e),t)for(e=0;e<t.length;e++)v0(t[e])}}function bj(e,t){return e(t)}function wj(){}var eh=!1;function _j(e,t,r){if(eh)return e(t,r);eh=!0;try{return bj(e,t,r)}finally{eh=!1,(qa!==null||za!==null)&&(wj(),xj())}}function Ho(e,t){var r=e.stateNode;if(r===null)return null;var n=Bd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var Ep=!1;if(En)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Ep=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Ep=!1}function O2(e,t,r,n,i,a,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Eo=!1,pu=null,mu=!1,Ap=null,T2={onError:function(e){Eo=!0,pu=e}};function C2(e,t,r,n,i,a,s,l,c){Eo=!1,pu=null,O2.apply(T2,arguments)}function k2(e,t,r,n,i,a,s,l,c){if(C2.apply(this,arguments),Eo){if(Eo){var u=pu;Eo=!1,pu=null}else throw Error(ne(198));mu||(mu=!0,Ap=u)}}function aa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function jj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x0(e){if(aa(e)!==e)throw Error(ne(188))}function $2(e){var t=e.alternate;if(!t){if(t=aa(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return x0(i),e;if(a===n)return x0(i),t;a=a.sibling}throw Error(ne(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function Sj(e){return e=$2(e),e!==null?Nj(e):null}function Nj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Nj(e);if(t!==null)return t;e=e.sibling}return null}var Ej=hr.unstable_scheduleCallback,b0=hr.unstable_cancelCallback,I2=hr.unstable_shouldYield,M2=hr.unstable_requestPaint,ct=hr.unstable_now,R2=hr.unstable_getCurrentPriorityLevel,iy=hr.unstable_ImmediatePriority,Aj=hr.unstable_UserBlockingPriority,gu=hr.unstable_NormalPriority,D2=hr.unstable_LowPriority,Pj=hr.unstable_IdlePriority,Md=null,an=null;function L2(e){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Md,e,void 0,(e.current.flags&128)===128)}catch{}}var Vr=Math.clz32?Math.clz32:F2,B2=Math.log,U2=Math.LN2;function F2(e){return e>>>=0,e===0?32:31-(B2(e)/U2|0)|0}var pc=64,mc=4194304;function vo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~i;l!==0?n=vo(l):(a&=s,a!==0&&(n=vo(a)))}else s=r&~i,s!==0?n=vo(s):a!==0&&(n=vo(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Vr(t),i=1<<r,n|=e[r],t&=~i;return n}function q2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z2(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vr(a),l=1<<s,c=i[s];c===-1?(!(l&r)||l&n)&&(i[s]=q2(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Pp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Oj(){var e=pc;return pc<<=1,!(pc&4194240)&&(pc=64),e}function th(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Kl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vr(t),e[t]=r}function W2(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Vr(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function ay(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Vr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var De=0;function Tj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cj,sy,kj,$j,Ij,Op=!1,gc=[],ei=null,ti=null,ri=null,Vo=new Map,Go=new Map,Hn=[],H2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(e,t){switch(e){case"focusin":case"focusout":ei=null;break;case"dragenter":case"dragleave":ti=null;break;case"mouseover":case"mouseout":ri=null;break;case"pointerover":case"pointerout":Vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function Qs(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Yl(t),t!==null&&sy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function V2(e,t,r,n,i){switch(t){case"focusin":return ei=Qs(ei,e,t,r,n,i),!0;case"dragenter":return ti=Qs(ti,e,t,r,n,i),!0;case"mouseover":return ri=Qs(ri,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Vo.set(a,Qs(Vo.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Go.set(a,Qs(Go.get(a)||null,e,t,r,n,i)),!0}return!1}function Mj(e){var t=Li(e.target);if(t!==null){var r=aa(t);if(r!==null){if(t=r.tag,t===13){if(t=jj(r),t!==null){e.blockedOn=t,Ij(e.priority,function(){kj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Zc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Sp=n,r.target.dispatchEvent(n),Sp=null}else return t=Yl(r),t!==null&&sy(t),e.blockedOn=r,!1;t.shift()}return!0}function _0(e,t,r){Zc(e)&&r.delete(t)}function G2(){Op=!1,ei!==null&&Zc(ei)&&(ei=null),ti!==null&&Zc(ti)&&(ti=null),ri!==null&&Zc(ri)&&(ri=null),Vo.forEach(_0),Go.forEach(_0)}function Zs(e,t){e.blockedOn===t&&(e.blockedOn=null,Op||(Op=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,G2)))}function Ko(e){function t(i){return Zs(i,e)}if(0<gc.length){Zs(gc[0],e);for(var r=1;r<gc.length;r++){var n=gc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ei!==null&&Zs(ei,e),ti!==null&&Zs(ti,e),ri!==null&&Zs(ri,e),Vo.forEach(t),Go.forEach(t),r=0;r<Hn.length;r++)n=Hn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hn.length&&(r=Hn[0],r.blockedOn===null);)Mj(r),r.blockedOn===null&&Hn.shift()}var Wa=In.ReactCurrentBatchConfig,vu=!0;function K2(e,t,r,n){var i=De,a=Wa.transition;Wa.transition=null;try{De=1,oy(e,t,r,n)}finally{De=i,Wa.transition=a}}function X2(e,t,r,n){var i=De,a=Wa.transition;Wa.transition=null;try{De=4,oy(e,t,r,n)}finally{De=i,Wa.transition=a}}function oy(e,t,r,n){if(vu){var i=Tp(e,t,r,n);if(i===null)dh(e,t,n,xu,r),w0(e,n);else if(V2(i,e,t,r,n))n.stopPropagation();else if(w0(e,n),t&4&&-1<H2.indexOf(e)){for(;i!==null;){var a=Yl(i);if(a!==null&&Cj(a),a=Tp(e,t,r,n),a===null&&dh(e,t,n,xu,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else dh(e,t,n,null,r)}}var xu=null;function Tp(e,t,r,n){if(xu=null,e=ny(n),e=Li(e),e!==null)if(t=aa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=jj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xu=e,null}function Rj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R2()){case iy:return 1;case Aj:return 4;case gu:case D2:return 16;case Pj:return 536870912;default:return 16}default:return 16}}var Jn=null,ly=null,eu=null;function Dj(){if(eu)return eu;var e,t=ly,r=t.length,n,i="value"in Jn?Jn.value:Jn.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return eu=i.slice(e,1<n?1-n:void 0)}function tu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function yc(){return!0}function j0(){return!1}function mr(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?yc:j0,this.isPropagationStopped=j0,this}return at(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yc)},persist:function(){},isPersistent:yc}),t}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cy=mr(Os),Xl=at({},Os,{view:0,detail:0}),Y2=mr(Xl),rh,nh,eo,Rd=at({},Xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eo&&(eo&&e.type==="mousemove"?(rh=e.screenX-eo.screenX,nh=e.screenY-eo.screenY):nh=rh=0,eo=e),rh)},movementY:function(e){return"movementY"in e?e.movementY:nh}}),S0=mr(Rd),J2=at({},Rd,{dataTransfer:0}),Q2=mr(J2),Z2=at({},Xl,{relatedTarget:0}),ih=mr(Z2),eT=at({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),tT=mr(eT),rT=at({},Os,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nT=mr(rT),iT=at({},Os,{data:0}),N0=mr(iT),aT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lT(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oT[e])?!!t[e]:!1}function uy(){return lT}var cT=at({},Xl,{key:function(e){if(e.key){var t=aT[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=tu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sT[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uy,charCode:function(e){return e.type==="keypress"?tu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?tu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uT=mr(cT),dT=at({},Rd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E0=mr(dT),fT=at({},Xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uy}),hT=mr(fT),pT=at({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),mT=mr(pT),gT=at({},Rd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),yT=mr(gT),vT=[9,13,27,32],dy=En&&"CompositionEvent"in window,Ao=null;En&&"documentMode"in document&&(Ao=document.documentMode);var xT=En&&"TextEvent"in window&&!Ao,Lj=En&&(!dy||Ao&&8<Ao&&11>=Ao),A0=" ",P0=!1;function Bj(e,t){switch(e){case"keyup":return vT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ea=!1;function bT(e,t){switch(e){case"compositionend":return Uj(t);case"keypress":return t.which!==32?null:(P0=!0,A0);case"textInput":return e=t.data,e===A0&&P0?null:e;default:return null}}function wT(e,t){if(Ea)return e==="compositionend"||!dy&&Bj(e,t)?(e=Dj(),eu=ly=Jn=null,Ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lj&&t.locale!=="ko"?null:t.data;default:return null}}var _T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function O0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_T[e.type]:t==="textarea"}function Fj(e,t,r,n){vj(n),t=bu(t,"onChange"),0<t.length&&(r=new cy("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Po=null,Xo=null;function jT(e){Qj(e,0)}function Dd(e){var t=Oa(e);if(dj(t))return e}function ST(e,t){if(e==="change")return t}var qj=!1;if(En){var ah;if(En){var sh="oninput"in document;if(!sh){var T0=document.createElement("div");T0.setAttribute("oninput","return;"),sh=typeof T0.oninput=="function"}ah=sh}else ah=!1;qj=ah&&(!document.documentMode||9<document.documentMode)}function C0(){Po&&(Po.detachEvent("onpropertychange",zj),Xo=Po=null)}function zj(e){if(e.propertyName==="value"&&Dd(Xo)){var t=[];Fj(t,Xo,e,ny(e)),_j(jT,t)}}function NT(e,t,r){e==="focusin"?(C0(),Po=t,Xo=r,Po.attachEvent("onpropertychange",zj)):e==="focusout"&&C0()}function ET(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dd(Xo)}function AT(e,t){if(e==="click")return Dd(t)}function PT(e,t){if(e==="input"||e==="change")return Dd(t)}function OT(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xr=typeof Object.is=="function"?Object.is:OT;function Yo(e,t){if(Xr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!fp.call(t,i)||!Xr(e[i],t[i]))return!1}return!0}function k0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $0(e,t){var r=k0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=k0(r)}}function Wj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hj(){for(var e=window,t=hu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=hu(e.document)}return t}function fy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function TT(e){var t=Hj(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wj(r.ownerDocument.documentElement,r)){if(n!==null&&fy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=$0(r,a);var s=$0(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CT=En&&"documentMode"in document&&11>=document.documentMode,Aa=null,Cp=null,Oo=null,kp=!1;function I0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;kp||Aa==null||Aa!==hu(n)||(n=Aa,"selectionStart"in n&&fy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oo&&Yo(Oo,n)||(Oo=n,n=bu(Cp,"onSelect"),0<n.length&&(t=new cy("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Aa)))}function vc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Pa={animationend:vc("Animation","AnimationEnd"),animationiteration:vc("Animation","AnimationIteration"),animationstart:vc("Animation","AnimationStart"),transitionend:vc("Transition","TransitionEnd")},oh={},Vj={};En&&(Vj=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);function Ld(e){if(oh[e])return oh[e];if(!Pa[e])return e;var t=Pa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Vj)return oh[e]=t[r];return e}var Gj=Ld("animationend"),Kj=Ld("animationiteration"),Xj=Ld("animationstart"),Yj=Ld("transitionend"),Jj=new Map,M0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pi(e,t){Jj.set(e,t),ia(t,[e])}for(var lh=0;lh<M0.length;lh++){var ch=M0[lh],kT=ch.toLowerCase(),$T=ch[0].toUpperCase()+ch.slice(1);pi(kT,"on"+$T)}pi(Gj,"onAnimationEnd");pi(Kj,"onAnimationIteration");pi(Xj,"onAnimationStart");pi("dblclick","onDoubleClick");pi("focusin","onFocus");pi("focusout","onBlur");pi(Yj,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IT=new Set("cancel close invalid load scroll toggle".split(" ").concat(xo));function R0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,k2(n,t,void 0,e),e.currentTarget=null}function Qj(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;R0(i,l,u),a=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;R0(i,l,u),a=c}}}if(mu)throw e=Ap,mu=!1,Ap=null,e}function Ke(e,t){var r=t[Dp];r===void 0&&(r=t[Dp]=new Set);var n=e+"__bubble";r.has(n)||(Zj(t,e,2,!1),r.add(n))}function uh(e,t,r){var n=0;t&&(n|=4),Zj(r,e,n,t)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Jo(e){if(!e[xc]){e[xc]=!0,sj.forEach(function(r){r!=="selectionchange"&&(IT.has(r)||uh(r,!1,e),uh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xc]||(t[xc]=!0,uh("selectionchange",!1,t))}}function Zj(e,t,r,n){switch(Rj(t)){case 1:var i=K2;break;case 4:i=X2;break;default:i=oy}r=i.bind(null,t,r,e),i=void 0,!Ep||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function dh(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Li(l),s===null)return;if(c=s.tag,c===5||c===6){n=a=s;continue e}l=l.parentNode}}n=n.return}_j(function(){var u=a,f=ny(r),d=[];e:{var h=Jj.get(e);if(h!==void 0){var p=cy,b=e;switch(e){case"keypress":if(tu(r)===0)break e;case"keydown":case"keyup":p=uT;break;case"focusin":b="focus",p=ih;break;case"focusout":b="blur",p=ih;break;case"beforeblur":case"afterblur":p=ih;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=Q2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=hT;break;case Gj:case Kj:case Xj:p=tT;break;case Yj:p=mT;break;case"scroll":p=Y2;break;case"wheel":p=yT;break;case"copy":case"cut":case"paste":p=nT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=E0}var v=(t&4)!==0,m=!v&&e==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var x=u,g;x!==null;){g=x;var S=g.stateNode;if(g.tag===5&&S!==null&&(g=S,y!==null&&(S=Ho(x,y),S!=null&&v.push(Qo(x,S,g)))),m)break;x=x.return}0<v.length&&(h=new p(h,b,null,r,f),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Sp&&(b=r.relatedTarget||r.fromElement)&&(Li(b)||b[An]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=u,b=b?Li(b):null,b!==null&&(m=aa(b),b!==m||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(v=S0,S="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(v=E0,S="onPointerLeave",y="onPointerEnter",x="pointer"),m=p==null?h:Oa(p),g=b==null?h:Oa(b),h=new v(S,x+"leave",p,r,f),h.target=m,h.relatedTarget=g,S=null,Li(f)===u&&(v=new v(y,x+"enter",b,r,f),v.target=g,v.relatedTarget=m,S=v),m=S,p&&b)t:{for(v=p,y=b,x=0,g=v;g;g=fa(g))x++;for(g=0,S=y;S;S=fa(S))g++;for(;0<x-g;)v=fa(v),x--;for(;0<g-x;)y=fa(y),g--;for(;x--;){if(v===y||y!==null&&v===y.alternate)break t;v=fa(v),y=fa(y)}v=null}else v=null;p!==null&&D0(d,h,p,v,!1),b!==null&&m!==null&&D0(d,m,b,v,!0)}}e:{if(h=u?Oa(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=ST;else if(O0(h))if(qj)w=PT;else{w=ET;var _=NT}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=AT);if(w&&(w=w(e,u))){Fj(d,w,r,f);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&xp(h,"number",h.value)}switch(_=u?Oa(u):window,e){case"focusin":(O0(_)||_.contentEditable==="true")&&(Aa=_,Cp=u,Oo=null);break;case"focusout":Oo=Cp=Aa=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,I0(d,r,f);break;case"selectionchange":if(CT)break;case"keydown":case"keyup":I0(d,r,f)}var j;if(dy)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ea?Bj(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Lj&&r.locale!=="ko"&&(Ea||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ea&&(j=Dj()):(Jn=f,ly="value"in Jn?Jn.value:Jn.textContent,Ea=!0)),_=bu(u,E),0<_.length&&(E=new N0(E,e,null,r,f),d.push({event:E,listeners:_}),j?E.data=j:(j=Uj(r),j!==null&&(E.data=j)))),(j=xT?bT(e,r):wT(e,r))&&(u=bu(u,"onBeforeInput"),0<u.length&&(f=new N0("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=j))}Qj(d,t)})}function Qo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function bu(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Ho(e,r),a!=null&&n.unshift(Qo(e,a,i)),a=Ho(e,t),a!=null&&n.push(Qo(e,a,i))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function D0(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=Ho(r,a),c!=null&&s.unshift(Qo(r,c,l))):i||(c=Ho(r,a),c!=null&&s.push(Qo(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var MT=/\r\n?/g,RT=/\u0000|\uFFFD/g;function L0(e){return(typeof e=="string"?e:""+e).replace(MT,`
`).replace(RT,"")}function bc(e,t,r){if(t=L0(t),L0(e)!==t&&r)throw Error(ne(425))}function wu(){}var $p=null,Ip=null;function Mp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rp=typeof setTimeout=="function"?setTimeout:void 0,DT=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,LT=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(e){return B0.resolve(null).then(e).catch(BT)}:Rp;function BT(e){setTimeout(function(){throw e})}function fh(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Ko(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ko(t)}function ni(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function U0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ts=Math.random().toString(36).slice(2),tn="__reactFiber$"+Ts,Zo="__reactProps$"+Ts,An="__reactContainer$"+Ts,Dp="__reactEvents$"+Ts,UT="__reactListeners$"+Ts,FT="__reactHandles$"+Ts;function Li(e){var t=e[tn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[An]||r[tn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=U0(e);e!==null;){if(r=e[tn])return r;e=U0(e)}return t}e=r,r=e.parentNode}return null}function Yl(e){return e=e[tn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Bd(e){return e[Zo]||null}var Lp=[],Ta=-1;function mi(e){return{current:e}}function Qe(e){0>Ta||(e.current=Lp[Ta],Lp[Ta]=null,Ta--)}function Ve(e,t){Ta++,Lp[Ta]=e.current,e.current=t}var di={},Bt=mi(di),Zt=mi(!1),Qi=di;function Qa(e,t){var r=e.type.contextTypes;if(!r)return di;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function er(e){return e=e.childContextTypes,e!=null}function _u(){Qe(Zt),Qe(Bt)}function F0(e,t,r){if(Bt.current!==di)throw Error(ne(168));Ve(Bt,t),Ve(Zt,r)}function eS(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ne(108,N2(e)||"Unknown",i));return at({},r,n)}function ju(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||di,Qi=Bt.current,Ve(Bt,e),Ve(Zt,Zt.current),!0}function q0(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=eS(e,t,Qi),n.__reactInternalMemoizedMergedChildContext=e,Qe(Zt),Qe(Bt),Ve(Bt,e)):Qe(Zt),Ve(Zt,r)}var gn=null,Ud=!1,hh=!1;function tS(e){gn===null?gn=[e]:gn.push(e)}function qT(e){Ud=!0,tS(e)}function gi(){if(!hh&&gn!==null){hh=!0;var e=0,t=De;try{var r=gn;for(De=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gn=null,Ud=!1}catch(i){throw gn!==null&&(gn=gn.slice(e+1)),Ej(iy,gi),i}finally{De=t,hh=!1}}return null}var Ca=[],ka=0,Su=null,Nu=0,br=[],wr=0,Zi=null,vn=1,xn="";function Oi(e,t){Ca[ka++]=Nu,Ca[ka++]=Su,Su=e,Nu=t}function rS(e,t,r){br[wr++]=vn,br[wr++]=xn,br[wr++]=Zi,Zi=e;var n=vn;e=xn;var i=32-Vr(n)-1;n&=~(1<<i),r+=1;var a=32-Vr(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,vn=1<<32-Vr(t)+i|r<<i|n,xn=a+e}else vn=1<<a|r<<i|n,xn=e}function hy(e){e.return!==null&&(Oi(e,1),rS(e,1,0))}function py(e){for(;e===Su;)Su=Ca[--ka],Ca[ka]=null,Nu=Ca[--ka],Ca[ka]=null;for(;e===Zi;)Zi=br[--wr],br[wr]=null,xn=br[--wr],br[wr]=null,vn=br[--wr],br[wr]=null}var fr=null,dr=null,Ze=!1,Wr=null;function nS(e,t){var r=Sr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function z0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fr=e,dr=ni(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fr=e,dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Zi!==null?{id:vn,overflow:xn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Sr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,fr=e,dr=null,!0):!1;default:return!1}}function Bp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Up(e){if(Ze){var t=dr;if(t){var r=t;if(!z0(e,t)){if(Bp(e))throw Error(ne(418));t=ni(r.nextSibling);var n=fr;t&&z0(e,t)?nS(n,r):(e.flags=e.flags&-4097|2,Ze=!1,fr=e)}}else{if(Bp(e))throw Error(ne(418));e.flags=e.flags&-4097|2,Ze=!1,fr=e}}}function W0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fr=e}function wc(e){if(e!==fr)return!1;if(!Ze)return W0(e),Ze=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Mp(e.type,e.memoizedProps)),t&&(t=dr)){if(Bp(e))throw iS(),Error(ne(418));for(;t;)nS(e,t),t=ni(t.nextSibling)}if(W0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){dr=ni(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}dr=null}}else dr=fr?ni(e.stateNode.nextSibling):null;return!0}function iS(){for(var e=dr;e;)e=ni(e.nextSibling)}function Za(){dr=fr=null,Ze=!1}function my(e){Wr===null?Wr=[e]:Wr.push(e)}var zT=In.ReactCurrentBatchConfig;function to(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var l=i.refs;s===null?delete l[a]:l[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function _c(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function H0(e){var t=e._init;return t(e._payload)}function aS(e){function t(y,x){if(e){var g=y.deletions;g===null?(y.deletions=[x],y.flags|=16):g.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=oi(y,x),y.index=0,y.sibling=null,y}function a(y,x,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<x?(y.flags|=2,x):g):(y.flags|=2,x)):(y.flags|=1048576,x)}function s(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,g,S){return x===null||x.tag!==6?(x=bh(g,y.mode,S),x.return=y,x):(x=i(x,g),x.return=y,x)}function c(y,x,g,S){var w=g.type;return w===Na?f(y,x,g.props.children,S,g.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qn&&H0(w)===x.type)?(S=i(x,g.props),S.ref=to(y,x,g),S.return=y,S):(S=lu(g.type,g.key,g.props,null,y.mode,S),S.ref=to(y,x,g),S.return=y,S)}function u(y,x,g,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=wh(g,y.mode,S),x.return=y,x):(x=i(x,g.children||[]),x.return=y,x)}function f(y,x,g,S,w){return x===null||x.tag!==7?(x=Vi(g,y.mode,S,w),x.return=y,x):(x=i(x,g),x.return=y,x)}function d(y,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=bh(""+x,y.mode,g),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case dc:return g=lu(x.type,x.key,x.props,null,y.mode,g),g.ref=to(y,null,x),g.return=y,g;case Sa:return x=wh(x,y.mode,g),x.return=y,x;case qn:var S=x._init;return d(y,S(x._payload),g)}if(yo(x)||Ys(x))return x=Vi(x,y.mode,g,null),x.return=y,x;_c(y,x)}return null}function h(y,x,g,S){var w=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:l(y,x,""+g,S);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case dc:return g.key===w?c(y,x,g,S):null;case Sa:return g.key===w?u(y,x,g,S):null;case qn:return w=g._init,h(y,x,w(g._payload),S)}if(yo(g)||Ys(g))return w!==null?null:f(y,x,g,S,null);_c(y,g)}return null}function p(y,x,g,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(g)||null,l(x,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case dc:return y=y.get(S.key===null?g:S.key)||null,c(x,y,S,w);case Sa:return y=y.get(S.key===null?g:S.key)||null,u(x,y,S,w);case qn:var _=S._init;return p(y,x,g,_(S._payload),w)}if(yo(S)||Ys(S))return y=y.get(g)||null,f(x,y,S,w,null);_c(x,S)}return null}function b(y,x,g,S){for(var w=null,_=null,j=x,E=x=0,A=null;j!==null&&E<g.length;E++){j.index>E?(A=j,j=null):A=j.sibling;var P=h(y,j,g[E],S);if(P===null){j===null&&(j=A);break}e&&j&&P.alternate===null&&t(y,j),x=a(P,x,E),_===null?w=P:_.sibling=P,_=P,j=A}if(E===g.length)return r(y,j),Ze&&Oi(y,E),w;if(j===null){for(;E<g.length;E++)j=d(y,g[E],S),j!==null&&(x=a(j,x,E),_===null?w=j:_.sibling=j,_=j);return Ze&&Oi(y,E),w}for(j=n(y,j);E<g.length;E++)A=p(j,y,E,g[E],S),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?E:A.key),x=a(A,x,E),_===null?w=A:_.sibling=A,_=A);return e&&j.forEach(function(O){return t(y,O)}),Ze&&Oi(y,E),w}function v(y,x,g,S){var w=Ys(g);if(typeof w!="function")throw Error(ne(150));if(g=w.call(g),g==null)throw Error(ne(151));for(var _=w=null,j=x,E=x=0,A=null,P=g.next();j!==null&&!P.done;E++,P=g.next()){j.index>E?(A=j,j=null):A=j.sibling;var O=h(y,j,P.value,S);if(O===null){j===null&&(j=A);break}e&&j&&O.alternate===null&&t(y,j),x=a(O,x,E),_===null?w=O:_.sibling=O,_=O,j=A}if(P.done)return r(y,j),Ze&&Oi(y,E),w;if(j===null){for(;!P.done;E++,P=g.next())P=d(y,P.value,S),P!==null&&(x=a(P,x,E),_===null?w=P:_.sibling=P,_=P);return Ze&&Oi(y,E),w}for(j=n(y,j);!P.done;E++,P=g.next())P=p(j,y,E,P.value,S),P!==null&&(e&&P.alternate!==null&&j.delete(P.key===null?E:P.key),x=a(P,x,E),_===null?w=P:_.sibling=P,_=P);return e&&j.forEach(function(T){return t(y,T)}),Ze&&Oi(y,E),w}function m(y,x,g,S){if(typeof g=="object"&&g!==null&&g.type===Na&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case dc:e:{for(var w=g.key,_=x;_!==null;){if(_.key===w){if(w=g.type,w===Na){if(_.tag===7){r(y,_.sibling),x=i(_,g.props.children),x.return=y,y=x;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===qn&&H0(w)===_.type){r(y,_.sibling),x=i(_,g.props),x.ref=to(y,_,g),x.return=y,y=x;break e}r(y,_);break}else t(y,_);_=_.sibling}g.type===Na?(x=Vi(g.props.children,y.mode,S,g.key),x.return=y,y=x):(S=lu(g.type,g.key,g.props,null,y.mode,S),S.ref=to(y,x,g),S.return=y,y=S)}return s(y);case Sa:e:{for(_=g.key;x!==null;){if(x.key===_)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){r(y,x.sibling),x=i(x,g.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=wh(g,y.mode,S),x.return=y,y=x}return s(y);case qn:return _=g._init,m(y,x,_(g._payload),S)}if(yo(g))return b(y,x,g,S);if(Ys(g))return v(y,x,g,S);_c(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(r(y,x.sibling),x=i(x,g),x.return=y,y=x):(r(y,x),x=bh(g,y.mode,S),x.return=y,y=x),s(y)):r(y,x)}return m}var es=aS(!0),sS=aS(!1),Eu=mi(null),Au=null,$a=null,gy=null;function yy(){gy=$a=Au=null}function vy(e){var t=Eu.current;Qe(Eu),e._currentValue=t}function Fp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ha(e,t){Au=e,gy=$a=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xt=!0),e.firstContext=null)}function Cr(e){var t=e._currentValue;if(gy!==e)if(e={context:e,memoizedValue:t,next:null},$a===null){if(Au===null)throw Error(ne(308));$a=e,Au.dependencies={lanes:0,firstContext:e}}else $a=$a.next=e;return t}var Bi=null;function xy(e){Bi===null?Bi=[e]:Bi.push(e)}function oS(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,xy(t)):(r.next=i.next,i.next=r),t.interleaved=r,Pn(e,n)}function Pn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var zn=!1;function by(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _n(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ii(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$e&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Pn(e,r)}return i=n.interleaved,i===null?(t.next=t,xy(n)):(t.next=i.next,i.next=t),n.interleaved=t,Pn(e,r)}function ru(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ay(e,r)}}function V0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Pu(e,t,r,n){var i=e.updateQueue;zn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;s=0,f=u=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,v=l;switch(h=t,p=r,v.tag){case 1:if(b=v.payload,typeof b=="function"){d=b.call(p,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,h=typeof b=="function"?b.call(p,d,h):b,h==null)break e;d=at({},d,h);break e;case 2:zn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,c=d):f=f.next=p,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ta|=s,e.lanes=s,e.memoizedState=d}}function G0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ne(191,i));i.call(n)}}}var Jl={},sn=mi(Jl),el=mi(Jl),tl=mi(Jl);function Ui(e){if(e===Jl)throw Error(ne(174));return e}function wy(e,t){switch(Ve(tl,t),Ve(el,e),Ve(sn,Jl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wp(t,e)}Qe(sn),Ve(sn,t)}function ts(){Qe(sn),Qe(el),Qe(tl)}function cS(e){Ui(tl.current);var t=Ui(sn.current),r=wp(t,e.type);t!==r&&(Ve(el,e),Ve(sn,r))}function _y(e){el.current===e&&(Qe(sn),Qe(el))}var rt=mi(0);function Ou(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ph=[];function jy(){for(var e=0;e<ph.length;e++)ph[e]._workInProgressVersionPrimary=null;ph.length=0}var nu=In.ReactCurrentDispatcher,mh=In.ReactCurrentBatchConfig,ea=0,it=null,vt=null,jt=null,Tu=!1,To=!1,rl=0,WT=0;function It(){throw Error(ne(321))}function Sy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Xr(e[r],t[r]))return!1;return!0}function Ny(e,t,r,n,i,a){if(ea=a,it=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,nu.current=e===null||e.memoizedState===null?KT:XT,e=r(n,i),To){a=0;do{if(To=!1,rl=0,25<=a)throw Error(ne(301));a+=1,jt=vt=null,t.updateQueue=null,nu.current=YT,e=r(n,i)}while(To)}if(nu.current=Cu,t=vt!==null&&vt.next!==null,ea=0,jt=vt=it=null,Tu=!1,t)throw Error(ne(300));return e}function Ey(){var e=rl!==0;return rl=0,e}function Zr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?it.memoizedState=jt=e:jt=jt.next=e,jt}function kr(){if(vt===null){var e=it.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=jt===null?it.memoizedState:jt.next;if(t!==null)jt=t,vt=e;else{if(e===null)throw Error(ne(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},jt===null?it.memoizedState=jt=e:jt=jt.next=e}return jt}function nl(e,t){return typeof t=="function"?t(e):t}function gh(e){var t=kr(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=vt,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=s=null,c=null,u=a;do{var f=u.lane;if((ea&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,s=n):c=c.next=d,it.lanes|=f,ta|=f}u=u.next}while(u!==null&&u!==a);c===null?s=n:c.next=l,Xr(n,t.memoizedState)||(Xt=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,it.lanes|=a,ta|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yh(e){var t=kr(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Xr(a,t.memoizedState)||(Xt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function uS(){}function dS(e,t){var r=it,n=kr(),i=t(),a=!Xr(n.memoizedState,i);if(a&&(n.memoizedState=i,Xt=!0),n=n.queue,Ay(pS.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||jt!==null&&jt.memoizedState.tag&1){if(r.flags|=2048,il(9,hS.bind(null,r,n,i,t),void 0,null),St===null)throw Error(ne(349));ea&30||fS(r,t,i)}return i}function fS(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function hS(e,t,r,n){t.value=r,t.getSnapshot=n,mS(t)&&gS(e)}function pS(e,t,r){return r(function(){mS(t)&&gS(e)})}function mS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Xr(e,r)}catch{return!0}}function gS(e){var t=Pn(e,1);t!==null&&Gr(t,e,1,-1)}function K0(e){var t=Zr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=GT.bind(null,it,e),[t.memoizedState,e]}function il(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=it.updateQueue,t===null?(t={lastEffect:null,stores:null},it.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function yS(){return kr().memoizedState}function iu(e,t,r,n){var i=Zr();it.flags|=e,i.memoizedState=il(1|t,r,void 0,n===void 0?null:n)}function Fd(e,t,r,n){var i=kr();n=n===void 0?null:n;var a=void 0;if(vt!==null){var s=vt.memoizedState;if(a=s.destroy,n!==null&&Sy(n,s.deps)){i.memoizedState=il(t,r,a,n);return}}it.flags|=e,i.memoizedState=il(1|t,r,a,n)}function X0(e,t){return iu(8390656,8,e,t)}function Ay(e,t){return Fd(2048,8,e,t)}function vS(e,t){return Fd(4,2,e,t)}function xS(e,t){return Fd(4,4,e,t)}function bS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wS(e,t,r){return r=r!=null?r.concat([e]):null,Fd(4,4,bS.bind(null,t,e),r)}function Py(){}function _S(e,t){var r=kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function jS(e,t){var r=kr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Sy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function SS(e,t,r){return ea&21?(Xr(r,t)||(r=Oj(),it.lanes|=r,ta|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xt=!0),e.memoizedState=r)}function HT(e,t){var r=De;De=r!==0&&4>r?r:4,e(!0);var n=mh.transition;mh.transition={};try{e(!1),t()}finally{De=r,mh.transition=n}}function NS(){return kr().memoizedState}function VT(e,t,r){var n=si(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},ES(e))AS(t,r);else if(r=oS(e,t,r,n),r!==null){var i=Wt();Gr(r,e,n,i),PS(r,t,n)}}function GT(e,t,r){var n=si(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(ES(e))AS(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,l=a(s,r);if(i.hasEagerState=!0,i.eagerState=l,Xr(l,s)){var c=t.interleaved;c===null?(i.next=i,xy(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=oS(e,t,i,n),r!==null&&(i=Wt(),Gr(r,e,n,i),PS(r,t,n))}}function ES(e){var t=e.alternate;return e===it||t!==null&&t===it}function AS(e,t){To=Tu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function PS(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ay(e,r)}}var Cu={readContext:Cr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},KT={readContext:Cr,useCallback:function(e,t){return Zr().memoizedState=[e,t===void 0?null:t],e},useContext:Cr,useEffect:X0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,iu(4194308,4,bS.bind(null,t,e),r)},useLayoutEffect:function(e,t){return iu(4194308,4,e,t)},useInsertionEffect:function(e,t){return iu(4,2,e,t)},useMemo:function(e,t){var r=Zr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Zr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=VT.bind(null,it,e),[n.memoizedState,e]},useRef:function(e){var t=Zr();return e={current:e},t.memoizedState=e},useState:K0,useDebugValue:Py,useDeferredValue:function(e){return Zr().memoizedState=e},useTransition:function(){var e=K0(!1),t=e[0];return e=HT.bind(null,e[1]),Zr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=it,i=Zr();if(Ze){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),St===null)throw Error(ne(349));ea&30||fS(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,X0(pS.bind(null,n,a,e),[e]),n.flags|=2048,il(9,hS.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Zr(),t=St.identifierPrefix;if(Ze){var r=xn,n=vn;r=(n&~(1<<32-Vr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=rl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=WT++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},XT={readContext:Cr,useCallback:_S,useContext:Cr,useEffect:Ay,useImperativeHandle:wS,useInsertionEffect:vS,useLayoutEffect:xS,useMemo:jS,useReducer:gh,useRef:yS,useState:function(){return gh(nl)},useDebugValue:Py,useDeferredValue:function(e){var t=kr();return SS(t,vt.memoizedState,e)},useTransition:function(){var e=gh(nl)[0],t=kr().memoizedState;return[e,t]},useMutableSource:uS,useSyncExternalStore:dS,useId:NS,unstable_isNewReconciler:!1},YT={readContext:Cr,useCallback:_S,useContext:Cr,useEffect:Ay,useImperativeHandle:wS,useInsertionEffect:vS,useLayoutEffect:xS,useMemo:jS,useReducer:yh,useRef:yS,useState:function(){return yh(nl)},useDebugValue:Py,useDeferredValue:function(e){var t=kr();return vt===null?t.memoizedState=e:SS(t,vt.memoizedState,e)},useTransition:function(){var e=yh(nl)[0],t=kr().memoizedState;return[e,t]},useMutableSource:uS,useSyncExternalStore:dS,useId:NS,unstable_isNewReconciler:!1};function Ur(e,t){if(e&&e.defaultProps){t=at({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function qp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:at({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qd={isMounted:function(e){return(e=e._reactInternals)?aa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Wt(),i=si(e),a=_n(n,i);a.payload=t,r!=null&&(a.callback=r),t=ii(e,a,i),t!==null&&(Gr(t,e,i,n),ru(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Wt(),i=si(e),a=_n(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ii(e,a,i),t!==null&&(Gr(t,e,i,n),ru(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Wt(),n=si(e),i=_n(r,n);i.tag=2,t!=null&&(i.callback=t),t=ii(e,i,n),t!==null&&(Gr(t,e,n,r),ru(t,e,n))}};function Y0(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Yo(r,n)||!Yo(i,a):!0}function OS(e,t,r){var n=!1,i=di,a=t.contextType;return typeof a=="object"&&a!==null?a=Cr(a):(i=er(t)?Qi:Bt.current,n=t.contextTypes,a=(n=n!=null)?Qa(e,i):di),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function J0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&qd.enqueueReplaceState(t,t.state,null)}function zp(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},by(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Cr(a):(a=er(t)?Qi:Bt.current,i.context=Qa(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(qp(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&qd.enqueueReplaceState(i,i.state,null),Pu(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function rs(e,t){try{var r="",n=t;do r+=S2(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function vh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var JT=typeof WeakMap=="function"?WeakMap:Map;function TS(e,t,r){r=_n(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){$u||($u=!0,em=n),Wp(e,t)},r}function CS(e,t,r){r=_n(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Wp(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Wp(e,t),typeof n!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function Q0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new JT;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=dC.bind(null,e,t,r),t.then(e,e))}function Z0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ex(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_n(-1,1),t.tag=2,ii(r,t,1))),r.lanes|=1),e)}var QT=In.ReactCurrentOwner,Xt=!1;function Ut(e,t,r,n){t.child=e===null?sS(t,null,r,n):es(t,e.child,r,n)}function tx(e,t,r,n,i){r=r.render;var a=t.ref;return Ha(t,i),n=Ny(e,t,r,n,a,i),r=Ey(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,On(e,t,i)):(Ze&&r&&hy(t),t.flags|=1,Ut(e,t,n,i),t.child)}function rx(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Ry(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,kS(e,t,a,n,i)):(e=lu(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Yo,r(s,n)&&e.ref===t.ref)return On(e,t,i)}return t.flags|=1,e=oi(a,n),e.ref=t.ref,e.return=t,t.child=e}function kS(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Yo(a,n)&&e.ref===t.ref)if(Xt=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Xt=!0);else return t.lanes=e.lanes,On(e,t,i)}return Hp(e,t,r,n,i)}function $S(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ma,ar),ar|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Ma,ar),ar|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,Ve(Ma,ar),ar|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,Ve(Ma,ar),ar|=n;return Ut(e,t,i,r),t.child}function IS(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Hp(e,t,r,n,i){var a=er(r)?Qi:Bt.current;return a=Qa(t,a),Ha(t,i),r=Ny(e,t,r,n,a,i),n=Ey(),e!==null&&!Xt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,On(e,t,i)):(Ze&&n&&hy(t),t.flags|=1,Ut(e,t,r,i),t.child)}function nx(e,t,r,n,i){if(er(r)){var a=!0;ju(t)}else a=!1;if(Ha(t,i),t.stateNode===null)au(e,t),OS(t,r,n),zp(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Cr(u):(u=er(r)?Qi:Bt.current,u=Qa(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&J0(t,s,n,u),zn=!1;var h=t.memoizedState;s.state=h,Pu(t,n,s,i),c=t.memoizedState,l!==n||h!==c||Zt.current||zn?(typeof f=="function"&&(qp(t,r,f,n),c=t.memoizedState),(l=zn||Y0(t,r,l,n,h,c,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,lS(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ur(t.type,l),s.props=u,d=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=Cr(c):(c=er(r)?Qi:Bt.current,c=Qa(t,c));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==c)&&J0(t,s,n,c),zn=!1,h=t.memoizedState,s.state=h,Pu(t,n,s,i);var b=t.memoizedState;l!==d||h!==b||Zt.current||zn?(typeof p=="function"&&(qp(t,r,p,n),b=t.memoizedState),(u=zn||Y0(t,r,u,n,h,b,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,b,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,b,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),s.props=n,s.state=b,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Vp(e,t,r,n,a,i)}function Vp(e,t,r,n,i,a){IS(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&q0(t,r,!1),On(e,t,a);n=t.stateNode,QT.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=es(t,e.child,null,a),t.child=es(t,null,l,a)):Ut(e,t,l,a),t.memoizedState=n.state,i&&q0(t,r,!0),t.child}function MS(e){var t=e.stateNode;t.pendingContext?F0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&F0(e,t.context,!1),wy(e,t.containerInfo)}function ix(e,t,r,n,i){return Za(),my(i),t.flags|=256,Ut(e,t,r,n),t.child}var Gp={dehydrated:null,treeContext:null,retryLane:0};function Kp(e){return{baseLanes:e,cachePool:null,transitions:null}}function RS(e,t,r){var n=t.pendingProps,i=rt.current,a=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ve(rt,i&1),e===null)return Up(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=Hd(s,n,0,null),e=Vi(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Kp(r),t.memoizedState=Gp,e):Oy(t,s));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return ZT(e,t,s,n,l,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=oi(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=oi(l,a):(a=Vi(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?Kp(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=Gp,n}return a=e.child,e=a.sibling,n=oi(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Oy(e,t){return t=Hd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jc(e,t,r,n){return n!==null&&my(n),es(t,e.child,null,r),e=Oy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ZT(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=vh(Error(ne(422))),jc(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=Hd({mode:"visible",children:n.children},i,0,null),a=Vi(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&es(t,e.child,null,s),t.child.memoizedState=Kp(s),t.memoizedState=Gp,a);if(!(t.mode&1))return jc(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ne(419)),n=vh(a,n,void 0),jc(e,t,s,n)}if(l=(s&e.childLanes)!==0,Xt||l){if(n=St,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Pn(e,i),Gr(n,e,i,-1))}return My(),n=vh(Error(ne(421))),jc(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=fC.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,dr=ni(i.nextSibling),fr=t,Ze=!0,Wr=null,e!==null&&(br[wr++]=vn,br[wr++]=xn,br[wr++]=Zi,vn=e.id,xn=e.overflow,Zi=t),t=Oy(t,n.children),t.flags|=4096,t)}function ax(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Fp(e.return,t,r)}function xh(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function DS(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(Ut(e,t,n.children,r),n=rt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ax(e,r,t);else if(e.tag===19)ax(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ve(rt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ou(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),xh(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ou(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}xh(t,!0,r,null,a);break;case"together":xh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function au(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function On(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ta|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=oi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=oi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function eC(e,t,r){switch(t.tag){case 3:MS(t),Za();break;case 5:cS(t);break;case 1:er(t.type)&&ju(t);break;case 4:wy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ve(Eu,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ve(rt,rt.current&1),t.flags|=128,null):r&t.child.childLanes?RS(e,t,r):(Ve(rt,rt.current&1),e=On(e,t,r),e!==null?e.sibling:null);Ve(rt,rt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return DS(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(rt,rt.current),n)break;return null;case 22:case 23:return t.lanes=0,$S(e,t,r)}return On(e,t,r)}var LS,Xp,BS,US;LS=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xp=function(){};BS=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Ui(sn.current);var a=null;switch(r){case"input":i=yp(e,i),n=yp(e,n),a=[];break;case"select":i=at({},i,{value:void 0}),n=at({},n,{value:void 0}),a=[];break;case"textarea":i=bp(e,i),n=bp(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=wu)}_p(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zo.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ke("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};US=function(e,t,r,n){r!==n&&(t.flags|=4)};function ro(e,t){if(!Ze)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Mt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function tC(e,t,r){var n=t.pendingProps;switch(py(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(t),null;case 1:return er(t.type)&&_u(),Mt(t),null;case 3:return n=t.stateNode,ts(),Qe(Zt),Qe(Bt),jy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wr!==null&&(nm(Wr),Wr=null))),Xp(e,t),Mt(t),null;case 5:_y(t);var i=Ui(tl.current);if(r=t.type,e!==null&&t.stateNode!=null)BS(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return Mt(t),null}if(e=Ui(sn.current),wc(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[tn]=t,n[Zo]=a,e=(t.mode&1)!==0,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(i=0;i<xo.length;i++)Ke(xo[i],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":p0(n,a),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ke("invalid",n);break;case"textarea":g0(n,a),Ke("invalid",n)}_p(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&bc(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&bc(n.textContent,l,e),i=["children",""+l]):zo.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ke("scroll",n)}switch(r){case"input":fc(n),m0(n,a,!0);break;case"textarea":fc(n),y0(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=wu)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pj(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[tn]=t,e[Zo]=n,LS(e,t,!1,!1),t.stateNode=e;e:{switch(s=jp(r,n),r){case"dialog":Ke("cancel",e),Ke("close",e),i=n;break;case"iframe":case"object":case"embed":Ke("load",e),i=n;break;case"video":case"audio":for(i=0;i<xo.length;i++)Ke(xo[i],e);i=n;break;case"source":Ke("error",e),i=n;break;case"img":case"image":case"link":Ke("error",e),Ke("load",e),i=n;break;case"details":Ke("toggle",e),i=n;break;case"input":p0(e,n),i=yp(e,n),Ke("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=at({},n,{value:void 0}),Ke("invalid",e);break;case"textarea":g0(e,n),i=bp(e,n),Ke("invalid",e);break;default:i=n}_p(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?yj(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mj(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Wo(e,c):typeof c=="number"&&Wo(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(zo.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ke("scroll",e):c!=null&&Zg(e,a,c,s))}switch(r){case"input":fc(e),m0(e,n,!1);break;case"textarea":fc(e),y0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ui(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Fa(e,!!n.multiple,a,!1):n.defaultValue!=null&&Fa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=wu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mt(t),null;case 6:if(e&&t.stateNode!=null)US(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=Ui(tl.current),Ui(sn.current),wc(t)){if(n=t.stateNode,r=t.memoizedProps,n[tn]=t,(a=n.nodeValue!==r)&&(e=fr,e!==null))switch(e.tag){case 3:bc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bc(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tn]=t,t.stateNode=n}return Mt(t),null;case 13:if(Qe(rt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ze&&dr!==null&&t.mode&1&&!(t.flags&128))iS(),Za(),t.flags|=98560,a=!1;else if(a=wc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ne(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[tn]=t}else Za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mt(t),a=!1}else Wr!==null&&(nm(Wr),Wr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||rt.current&1?xt===0&&(xt=3):My())),t.updateQueue!==null&&(t.flags|=4),Mt(t),null);case 4:return ts(),Xp(e,t),e===null&&Jo(t.stateNode.containerInfo),Mt(t),null;case 10:return vy(t.type._context),Mt(t),null;case 17:return er(t.type)&&_u(),Mt(t),null;case 19:if(Qe(rt),a=t.memoizedState,a===null)return Mt(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)ro(a,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ou(e),s!==null){for(t.flags|=128,ro(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ve(rt,rt.current&1|2),t.child}e=e.sibling}a.tail!==null&&ct()>ns&&(t.flags|=128,n=!0,ro(a,!1),t.lanes=4194304)}else{if(!n)if(e=Ou(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ro(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ze)return Mt(t),null}else 2*ct()-a.renderingStartTime>ns&&r!==1073741824&&(t.flags|=128,n=!0,ro(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=ct(),t.sibling=null,r=rt.current,Ve(rt,n?r&1|2:r&1),t):(Mt(t),null);case 22:case 23:return Iy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ar&1073741824&&(Mt(t),t.subtreeFlags&6&&(t.flags|=8192)):Mt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function rC(e,t){switch(py(t),t.tag){case 1:return er(t.type)&&_u(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ts(),Qe(Zt),Qe(Bt),jy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _y(t),null;case 13:if(Qe(rt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));Za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qe(rt),null;case 4:return ts(),null;case 10:return vy(t.type._context),null;case 22:case 23:return Iy(),null;case 24:return null;default:return null}}var Sc=!1,Dt=!1,nC=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ia(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){st(e,t,n)}else r.current=null}function Yp(e,t,r){try{r()}catch(n){st(e,t,n)}}var sx=!1;function iC(e,t){if($p=vu,e=Hj(),fy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(l=s+i),d!==a||n!==0&&d.nodeType!==3||(c=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===i&&(l=s),h===a&&++f===n&&(c=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ip={focusedElem:e,selectionRange:r},vu=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,m=b.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ur(t.type,v),m);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(S){st(t,t.return,S)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return b=sx,sx=!1,b}function Co(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Yp(t,r,a)}i=i.next}while(i!==n)}}function zd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Jp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function FS(e){var t=e.alternate;t!==null&&(e.alternate=null,FS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[tn],delete t[Zo],delete t[Dp],delete t[UT],delete t[FT])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qS(e){return e.tag===5||e.tag===3||e.tag===4}function ox(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=wu));else if(n!==4&&(e=e.child,e!==null))for(Qp(e,t,r),e=e.sibling;e!==null;)Qp(e,t,r),e=e.sibling}function Zp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Zp(e,t,r),e=e.sibling;e!==null;)Zp(e,t,r),e=e.sibling}var Pt=null,qr=!1;function Un(e,t,r){for(r=r.child;r!==null;)zS(e,t,r),r=r.sibling}function zS(e,t,r){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Md,r)}catch{}switch(r.tag){case 5:Dt||Ia(r,t);case 6:var n=Pt,i=qr;Pt=null,Un(e,t,r),Pt=n,qr=i,Pt!==null&&(qr?(e=Pt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Pt.removeChild(r.stateNode));break;case 18:Pt!==null&&(qr?(e=Pt,r=r.stateNode,e.nodeType===8?fh(e.parentNode,r):e.nodeType===1&&fh(e,r),Ko(e)):fh(Pt,r.stateNode));break;case 4:n=Pt,i=qr,Pt=r.stateNode.containerInfo,qr=!0,Un(e,t,r),Pt=n,qr=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Yp(r,t,s),i=i.next}while(i!==n)}Un(e,t,r);break;case 1:if(!Dt&&(Ia(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){st(r,t,l)}Un(e,t,r);break;case 21:Un(e,t,r);break;case 22:r.mode&1?(Dt=(n=Dt)||r.memoizedState!==null,Un(e,t,r),Dt=n):Un(e,t,r);break;default:Un(e,t,r)}}function lx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new nC),t.forEach(function(n){var i=hC.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Rr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,qr=!1;break e;case 3:Pt=l.stateNode.containerInfo,qr=!0;break e;case 4:Pt=l.stateNode.containerInfo,qr=!0;break e}l=l.return}if(Pt===null)throw Error(ne(160));zS(a,s,i),Pt=null,qr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){st(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)WS(t,e),t=t.sibling}function WS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Rr(t,e),Qr(e),n&4){try{Co(3,e,e.return),zd(3,e)}catch(v){st(e,e.return,v)}try{Co(5,e,e.return)}catch(v){st(e,e.return,v)}}break;case 1:Rr(t,e),Qr(e),n&512&&r!==null&&Ia(r,r.return);break;case 5:if(Rr(t,e),Qr(e),n&512&&r!==null&&Ia(r,r.return),e.flags&32){var i=e.stateNode;try{Wo(i,"")}catch(v){st(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&fj(i,a),jp(l,s);var u=jp(l,a);for(s=0;s<c.length;s+=2){var f=c[s],d=c[s+1];f==="style"?yj(i,d):f==="dangerouslySetInnerHTML"?mj(i,d):f==="children"?Wo(i,d):Zg(i,f,d,u)}switch(l){case"input":vp(i,a);break;case"textarea":hj(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Fa(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?Fa(i,!!a.multiple,a.defaultValue,!0):Fa(i,!!a.multiple,a.multiple?[]:"",!1))}i[Zo]=a}catch(v){st(e,e.return,v)}}break;case 6:if(Rr(t,e),Qr(e),n&4){if(e.stateNode===null)throw Error(ne(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){st(e,e.return,v)}}break;case 3:if(Rr(t,e),Qr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ko(t.containerInfo)}catch(v){st(e,e.return,v)}break;case 4:Rr(t,e),Qr(e);break;case 13:Rr(t,e),Qr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ky=ct())),n&4&&lx(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Dt=(u=Dt)||f,Rr(t,e),Dt=u):Rr(t,e),Qr(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(he=e,f=e.child;f!==null;){for(d=he=f;he!==null;){switch(h=he,p=h.child,h.tag){case 0:case 11:case 14:case 15:Co(4,h,h.return);break;case 1:Ia(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(v){st(n,r,v)}}break;case 5:Ia(h,h.return);break;case 22:if(h.memoizedState!==null){ux(d);continue}}p!==null?(p.return=h,he=p):ux(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=gj("display",s))}catch(v){st(e,e.return,v)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(v){st(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Rr(t,e),Qr(e),n&4&&lx(e);break;case 21:break;default:Rr(t,e),Qr(e)}}function Qr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(qS(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Wo(i,""),n.flags&=-33);var a=ox(e);Zp(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,l=ox(e);Qp(e,l,s);break;default:throw Error(ne(161))}}catch(c){st(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aC(e,t,r){he=e,HS(e)}function HS(e,t,r){for(var n=(e.mode&1)!==0;he!==null;){var i=he,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||Sc;if(!s){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=Sc;var u=Dt;if(Sc=s,(Dt=c)&&!u)for(he=i;he!==null;)s=he,c=s.child,s.tag===22&&s.memoizedState!==null?dx(i):c!==null?(c.return=s,he=c):dx(i);for(;a!==null;)he=a,HS(a),a=a.sibling;he=i,Sc=l,Dt=u}cx(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,he=a):cx(e)}}function cx(e){for(;he!==null;){var t=he;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||zd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Dt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Ur(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&G0(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}G0(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&Ko(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Dt||t.flags&512&&Jp(t)}catch(h){st(t,t.return,h)}}if(t===e){he=null;break}if(r=t.sibling,r!==null){r.return=t.return,he=r;break}he=t.return}}function ux(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var r=t.sibling;if(r!==null){r.return=t.return,he=r;break}he=t.return}}function dx(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{zd(4,t)}catch(c){st(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){st(t,i,c)}}var a=t.return;try{Jp(t)}catch(c){st(t,a,c)}break;case 5:var s=t.return;try{Jp(t)}catch(c){st(t,s,c)}}}catch(c){st(t,t.return,c)}if(t===e){he=null;break}var l=t.sibling;if(l!==null){l.return=t.return,he=l;break}he=t.return}}var sC=Math.ceil,ku=In.ReactCurrentDispatcher,Ty=In.ReactCurrentOwner,Tr=In.ReactCurrentBatchConfig,$e=0,St=null,ft=null,kt=0,ar=0,Ma=mi(0),xt=0,al=null,ta=0,Wd=0,Cy=0,ko=null,Kt=null,ky=0,ns=1/0,hn=null,$u=!1,em=null,ai=null,Nc=!1,Qn=null,Iu=0,$o=0,tm=null,su=-1,ou=0;function Wt(){return $e&6?ct():su!==-1?su:su=ct()}function si(e){return e.mode&1?$e&2&&kt!==0?kt&-kt:zT.transition!==null?(ou===0&&(ou=Oj()),ou):(e=De,e!==0||(e=window.event,e=e===void 0?16:Rj(e.type)),e):1}function Gr(e,t,r,n){if(50<$o)throw $o=0,tm=null,Error(ne(185));Kl(e,r,n),(!($e&2)||e!==St)&&(e===St&&(!($e&2)&&(Wd|=r),xt===4&&Vn(e,kt)),tr(e,n),r===1&&$e===0&&!(t.mode&1)&&(ns=ct()+500,Ud&&gi()))}function tr(e,t){var r=e.callbackNode;z2(e,t);var n=yu(e,e===St?kt:0);if(n===0)r!==null&&b0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&b0(r),t===1)e.tag===0?qT(fx.bind(null,e)):tS(fx.bind(null,e)),LT(function(){!($e&6)&&gi()}),r=null;else{switch(Tj(n)){case 1:r=iy;break;case 4:r=Aj;break;case 16:r=gu;break;case 536870912:r=Pj;break;default:r=gu}r=ZS(r,VS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function VS(e,t){if(su=-1,ou=0,$e&6)throw Error(ne(327));var r=e.callbackNode;if(Va()&&e.callbackNode!==r)return null;var n=yu(e,e===St?kt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Mu(e,n);else{t=n;var i=$e;$e|=2;var a=KS();(St!==e||kt!==t)&&(hn=null,ns=ct()+500,Hi(e,t));do try{cC();break}catch(l){GS(e,l)}while(!0);yy(),ku.current=a,$e=i,ft!==null?t=0:(St=null,kt=0,t=xt)}if(t!==0){if(t===2&&(i=Pp(e),i!==0&&(n=i,t=rm(e,i))),t===1)throw r=al,Hi(e,0),Vn(e,n),tr(e,ct()),r;if(t===6)Vn(e,n);else{if(i=e.current.alternate,!(n&30)&&!oC(i)&&(t=Mu(e,n),t===2&&(a=Pp(e),a!==0&&(n=a,t=rm(e,a))),t===1))throw r=al,Hi(e,0),Vn(e,n),tr(e,ct()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:Ti(e,Kt,hn);break;case 3:if(Vn(e,n),(n&130023424)===n&&(t=ky+500-ct(),10<t)){if(yu(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Wt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Rp(Ti.bind(null,e,Kt,hn),t);break}Ti(e,Kt,hn);break;case 4:if(Vn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Vr(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sC(n/1960))-n,10<n){e.timeoutHandle=Rp(Ti.bind(null,e,Kt,hn),n);break}Ti(e,Kt,hn);break;case 5:Ti(e,Kt,hn);break;default:throw Error(ne(329))}}}return tr(e,ct()),e.callbackNode===r?VS.bind(null,e):null}function rm(e,t){var r=ko;return e.current.memoizedState.isDehydrated&&(Hi(e,t).flags|=256),e=Mu(e,t),e!==2&&(t=Kt,Kt=r,t!==null&&nm(t)),e}function nm(e){Kt===null?Kt=e:Kt.push.apply(Kt,e)}function oC(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Xr(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t){for(t&=~Cy,t&=~Wd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Vr(t),n=1<<r;e[r]=-1,t&=~n}}function fx(e){if($e&6)throw Error(ne(327));Va();var t=yu(e,0);if(!(t&1))return tr(e,ct()),null;var r=Mu(e,t);if(e.tag!==0&&r===2){var n=Pp(e);n!==0&&(t=n,r=rm(e,n))}if(r===1)throw r=al,Hi(e,0),Vn(e,t),tr(e,ct()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ti(e,Kt,hn),tr(e,ct()),null}function $y(e,t){var r=$e;$e|=1;try{return e(t)}finally{$e=r,$e===0&&(ns=ct()+500,Ud&&gi())}}function ra(e){Qn!==null&&Qn.tag===0&&!($e&6)&&Va();var t=$e;$e|=1;var r=Tr.transition,n=De;try{if(Tr.transition=null,De=1,e)return e()}finally{De=n,Tr.transition=r,$e=t,!($e&6)&&gi()}}function Iy(){ar=Ma.current,Qe(Ma)}function Hi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,DT(r)),ft!==null)for(r=ft.return;r!==null;){var n=r;switch(py(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_u();break;case 3:ts(),Qe(Zt),Qe(Bt),jy();break;case 5:_y(n);break;case 4:ts();break;case 13:Qe(rt);break;case 19:Qe(rt);break;case 10:vy(n.type._context);break;case 22:case 23:Iy()}r=r.return}if(St=e,ft=e=oi(e.current,null),kt=ar=t,xt=0,al=null,Cy=Wd=ta=0,Kt=ko=null,Bi!==null){for(t=0;t<Bi.length;t++)if(r=Bi[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Bi=null}return e}function GS(e,t){do{var r=ft;try{if(yy(),nu.current=Cu,Tu){for(var n=it.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Tu=!1}if(ea=0,jt=vt=it=null,To=!1,rl=0,Ty.current=null,r===null||r.return===null){xt=1,al=t,ft=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=kt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Z0(s);if(p!==null){p.flags&=-257,ex(p,s,l,a,t),p.mode&1&&Q0(a,u,t),t=p,c=u;var b=t.updateQueue;if(b===null){var v=new Set;v.add(c),t.updateQueue=v}else b.add(c);break e}else{if(!(t&1)){Q0(a,u,t),My();break e}c=Error(ne(426))}}else if(Ze&&l.mode&1){var m=Z0(s);if(m!==null){!(m.flags&65536)&&(m.flags|=256),ex(m,s,l,a,t),my(rs(c,l));break e}}a=c=rs(c,l),xt!==4&&(xt=2),ko===null?ko=[a]:ko.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var y=TS(a,c,t);V0(a,y);break e;case 1:l=c;var x=a.type,g=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ai===null||!ai.has(g)))){a.flags|=65536,t&=-t,a.lanes|=t;var S=CS(a,l,t);V0(a,S);break e}}a=a.return}while(a!==null)}YS(r)}catch(w){t=w,ft===r&&r!==null&&(ft=r=r.return);continue}break}while(!0)}function KS(){var e=ku.current;return ku.current=Cu,e===null?Cu:e}function My(){(xt===0||xt===3||xt===2)&&(xt=4),St===null||!(ta&268435455)&&!(Wd&268435455)||Vn(St,kt)}function Mu(e,t){var r=$e;$e|=2;var n=KS();(St!==e||kt!==t)&&(hn=null,Hi(e,t));do try{lC();break}catch(i){GS(e,i)}while(!0);if(yy(),$e=r,ku.current=n,ft!==null)throw Error(ne(261));return St=null,kt=0,xt}function lC(){for(;ft!==null;)XS(ft)}function cC(){for(;ft!==null&&!I2();)XS(ft)}function XS(e){var t=QS(e.alternate,e,ar);e.memoizedProps=e.pendingProps,t===null?YS(e):ft=t,Ty.current=null}function YS(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=rC(r,t),r!==null){r.flags&=32767,ft=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ft=null;return}}else if(r=tC(r,t,ar),r!==null){ft=r;return}if(t=t.sibling,t!==null){ft=t;return}ft=t=e}while(t!==null);xt===0&&(xt=5)}function Ti(e,t,r){var n=De,i=Tr.transition;try{Tr.transition=null,De=1,uC(e,t,r,n)}finally{Tr.transition=i,De=n}return null}function uC(e,t,r,n){do Va();while(Qn!==null);if($e&6)throw Error(ne(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(W2(e,a),e===St&&(ft=St=null,kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Nc||(Nc=!0,ZS(gu,function(){return Va(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Tr.transition,Tr.transition=null;var s=De;De=1;var l=$e;$e|=4,Ty.current=null,iC(e,r),WS(r,e),TT(Ip),vu=!!$p,Ip=$p=null,e.current=r,aC(r),M2(),$e=l,De=s,Tr.transition=a}else e.current=r;if(Nc&&(Nc=!1,Qn=e,Iu=i),a=e.pendingLanes,a===0&&(ai=null),L2(r.stateNode),tr(e,ct()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,e=em,em=null,e;return Iu&1&&e.tag!==0&&Va(),a=e.pendingLanes,a&1?e===tm?$o++:($o=0,tm=e):$o=0,gi(),null}function Va(){if(Qn!==null){var e=Tj(Iu),t=Tr.transition,r=De;try{if(Tr.transition=null,De=16>e?16:e,Qn===null)var n=!1;else{if(e=Qn,Qn=null,Iu=0,$e&6)throw Error(ne(331));var i=$e;for($e|=4,he=e.current;he!==null;){var a=he,s=a.child;if(he.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var f=he;switch(f.tag){case 0:case 11:case 15:Co(8,f,a)}var d=f.child;if(d!==null)d.return=f,he=d;else for(;he!==null;){f=he;var h=f.sibling,p=f.return;if(FS(f),f===u){he=null;break}if(h!==null){h.return=p,he=h;break}he=p}}}var b=a.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var m=v.sibling;v.sibling=null,v=m}while(v!==null)}}he=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,he=s;else e:for(;he!==null;){if(a=he,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Co(9,a,a.return)}var y=a.sibling;if(y!==null){y.return=a.return,he=y;break e}he=a.return}}var x=e.current;for(he=x;he!==null;){s=he;var g=s.child;if(s.subtreeFlags&2064&&g!==null)g.return=s,he=g;else e:for(s=x;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:zd(9,l)}}catch(w){st(l,l.return,w)}if(l===s){he=null;break e}var S=l.sibling;if(S!==null){S.return=l.return,he=S;break e}he=l.return}}if($e=i,gi(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Md,e)}catch{}n=!0}return n}finally{De=r,Tr.transition=t}}return!1}function hx(e,t,r){t=rs(r,t),t=TS(e,t,1),e=ii(e,t,1),t=Wt(),e!==null&&(Kl(e,1,t),tr(e,t))}function st(e,t,r){if(e.tag===3)hx(e,e,r);else for(;t!==null;){if(t.tag===3){hx(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ai===null||!ai.has(n))){e=rs(r,e),e=CS(t,e,1),t=ii(t,e,1),e=Wt(),t!==null&&(Kl(t,1,e),tr(t,e));break}}t=t.return}}function dC(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Wt(),e.pingedLanes|=e.suspendedLanes&r,St===e&&(kt&r)===r&&(xt===4||xt===3&&(kt&130023424)===kt&&500>ct()-ky?Hi(e,0):Cy|=r),tr(e,t)}function JS(e,t){t===0&&(e.mode&1?(t=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):t=1);var r=Wt();e=Pn(e,t),e!==null&&(Kl(e,t,r),tr(e,r))}function fC(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),JS(e,r)}function hC(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),JS(e,r)}var QS;QS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zt.current)Xt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xt=!1,eC(e,t,r);Xt=!!(e.flags&131072)}else Xt=!1,Ze&&t.flags&1048576&&rS(t,Nu,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;au(e,t),e=t.pendingProps;var i=Qa(t,Bt.current);Ha(t,r),i=Ny(null,t,n,e,i,r);var a=Ey();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,er(n)?(a=!0,ju(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,by(t),i.updater=qd,t.stateNode=i,i._reactInternals=t,zp(t,n,e,r),t=Vp(null,t,n,!0,a,r)):(t.tag=0,Ze&&a&&hy(t),Ut(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(au(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=mC(n),e=Ur(n,e),i){case 0:t=Hp(null,t,n,e,r);break e;case 1:t=nx(null,t,n,e,r);break e;case 11:t=tx(null,t,n,e,r);break e;case 14:t=rx(null,t,n,Ur(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ur(n,i),Hp(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ur(n,i),nx(e,t,n,i,r);case 3:e:{if(MS(t),e===null)throw Error(ne(387));n=t.pendingProps,a=t.memoizedState,i=a.element,lS(e,t),Pu(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=rs(Error(ne(423)),t),t=ix(e,t,n,r,i);break e}else if(n!==i){i=rs(Error(ne(424)),t),t=ix(e,t,n,r,i);break e}else for(dr=ni(t.stateNode.containerInfo.firstChild),fr=t,Ze=!0,Wr=null,r=sS(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Za(),n===i){t=On(e,t,r);break e}Ut(e,t,n,r)}t=t.child}return t;case 5:return cS(t),e===null&&Up(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,Mp(n,i)?s=null:a!==null&&Mp(n,a)&&(t.flags|=32),IS(e,t),Ut(e,t,s,r),t.child;case 6:return e===null&&Up(t),null;case 13:return RS(e,t,r);case 4:return wy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=es(t,null,n,r):Ut(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ur(n,i),tx(e,t,n,i,r);case 7:return Ut(e,t,t.pendingProps,r),t.child;case 8:return Ut(e,t,t.pendingProps.children,r),t.child;case 12:return Ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ve(Eu,n._currentValue),n._currentValue=s,a!==null)if(Xr(a.value,s)){if(a.children===i.children&&!Zt.current){t=On(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=_n(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Fp(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ne(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Fp(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}Ut(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Ha(t,r),i=Cr(i),n=n(i),t.flags|=1,Ut(e,t,n,r),t.child;case 14:return n=t.type,i=Ur(n,t.pendingProps),i=Ur(n.type,i),rx(e,t,n,i,r);case 15:return kS(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Ur(n,i),au(e,t),t.tag=1,er(n)?(e=!0,ju(t)):e=!1,Ha(t,r),OS(t,n,i),zp(t,n,i,r),Vp(null,t,n,!0,e,r);case 19:return DS(e,t,r);case 22:return $S(e,t,r)}throw Error(ne(156,t.tag))};function ZS(e,t){return Ej(e,t)}function pC(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sr(e,t,r,n){return new pC(e,t,r,n)}function Ry(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mC(e){if(typeof e=="function")return Ry(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ty)return 11;if(e===ry)return 14}return 2}function oi(e,t){var r=e.alternate;return r===null?(r=Sr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function lu(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")Ry(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Na:return Vi(r.children,i,a,t);case ey:s=8,i|=8;break;case hp:return e=Sr(12,r,t,i|2),e.elementType=hp,e.lanes=a,e;case pp:return e=Sr(13,r,t,i),e.elementType=pp,e.lanes=a,e;case mp:return e=Sr(19,r,t,i),e.elementType=mp,e.lanes=a,e;case cj:return Hd(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oj:s=10;break e;case lj:s=9;break e;case ty:s=11;break e;case ry:s=14;break e;case qn:s=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=Sr(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function Vi(e,t,r,n){return e=Sr(7,e,n,t),e.lanes=r,e}function Hd(e,t,r,n){return e=Sr(22,e,n,t),e.elementType=cj,e.lanes=r,e.stateNode={isHidden:!1},e}function bh(e,t,r){return e=Sr(6,e,null,t),e.lanes=r,e}function wh(e,t,r){return t=Sr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gC(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=th(0),this.expirationTimes=th(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=th(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Dy(e,t,r,n,i,a,s,l,c){return e=new gC(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Sr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},by(a),e}function yC(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function eN(e){if(!e)return di;e=e._reactInternals;e:{if(aa(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(er(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(er(r))return eS(e,r,t)}return t}function tN(e,t,r,n,i,a,s,l,c){return e=Dy(r,n,!0,e,i,a,s,l,c),e.context=eN(null),r=e.current,n=Wt(),i=si(r),a=_n(n,i),a.callback=t??null,ii(r,a,i),e.current.lanes=i,Kl(e,i,n),tr(e,n),e}function Vd(e,t,r,n){var i=t.current,a=Wt(),s=si(i);return r=eN(r),t.context===null?t.context=r:t.pendingContext=r,t=_n(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ii(i,t,s),e!==null&&(Gr(e,i,s,a),ru(e,i,s)),s}function Ru(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function px(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ly(e,t){px(e,t),(e=e.alternate)&&px(e,t)}function vC(){return null}var rN=typeof reportError=="function"?reportError:function(e){console.error(e)};function By(e){this._internalRoot=e}Gd.prototype.render=By.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Vd(e,t,null,null)};Gd.prototype.unmount=By.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ra(function(){Vd(null,e,null,null)}),t[An]=null}};function Gd(e){this._internalRoot=e}Gd.prototype.unstable_scheduleHydration=function(e){if(e){var t=$j();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hn.length&&t!==0&&t<Hn[r].priority;r++);Hn.splice(r,0,e),r===0&&Mj(e)}};function Uy(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mx(){}function xC(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Ru(s);a.call(u)}}var s=tN(t,n,e,0,null,!1,!1,"",mx);return e._reactRootContainer=s,e[An]=s.current,Jo(e.nodeType===8?e.parentNode:e),ra(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Ru(c);l.call(u)}}var c=Dy(e,0,!1,null,null,!1,!1,"",mx);return e._reactRootContainer=c,e[An]=c.current,Jo(e.nodeType===8?e.parentNode:e),ra(function(){Vd(t,c,r,n)}),c}function Xd(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var l=i;i=function(){var c=Ru(s);l.call(c)}}Vd(t,s,e,i)}else s=xC(r,t,e,i,n);return Ru(s)}Cj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vo(t.pendingLanes);r!==0&&(ay(t,r|1),tr(t,ct()),!($e&6)&&(ns=ct()+500,gi()))}break;case 13:ra(function(){var n=Pn(e,1);if(n!==null){var i=Wt();Gr(n,e,1,i)}}),Ly(e,1)}};sy=function(e){if(e.tag===13){var t=Pn(e,134217728);if(t!==null){var r=Wt();Gr(t,e,134217728,r)}Ly(e,134217728)}};kj=function(e){if(e.tag===13){var t=si(e),r=Pn(e,t);if(r!==null){var n=Wt();Gr(r,e,t,n)}Ly(e,t)}};$j=function(){return De};Ij=function(e,t){var r=De;try{return De=e,t()}finally{De=r}};Np=function(e,t,r){switch(t){case"input":if(vp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Bd(n);if(!i)throw Error(ne(90));dj(n),vp(n,i)}}}break;case"textarea":hj(e,r);break;case"select":t=r.value,t!=null&&Fa(e,!!r.multiple,t,!1)}};bj=$y;wj=ra;var bC={usingClientEntryPoint:!1,Events:[Yl,Oa,Bd,vj,xj,$y]},no={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wC={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:In.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sj(e),e===null?null:e.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||vC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{Md=Ec.inject(wC),an=Ec}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bC;pr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uy(t))throw Error(ne(200));return yC(e,t,null,r)};pr.createRoot=function(e,t){if(!Uy(e))throw Error(ne(299));var r=!1,n="",i=rN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Dy(e,1,!1,null,null,r,!1,n,i),e[An]=t.current,Jo(e.nodeType===8?e.parentNode:e),new By(t)};pr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=Sj(t),e=e===null?null:e.stateNode,e};pr.flushSync=function(e){return ra(e)};pr.hydrate=function(e,t,r){if(!Kd(t))throw Error(ne(200));return Xd(null,e,t,!0,r)};pr.hydrateRoot=function(e,t,r){if(!Uy(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=rN;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=tN(t,null,e,1,r??null,i,!1,a,s),e[An]=t.current,Jo(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Gd(t)};pr.render=function(e,t,r){if(!Kd(t))throw Error(ne(200));return Xd(null,e,t,!1,r)};pr.unmountComponentAtNode=function(e){if(!Kd(e))throw Error(ne(40));return e._reactRootContainer?(ra(function(){Xd(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};pr.unstable_batchedUpdates=$y;pr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Kd(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Xd(e,t,r,!1,n)};pr.version="18.3.1-next-f1338f8080-20240426";function nN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nN)}catch(e){console.error(e)}}nN(),nj.exports=pr;var _C=nj.exports,gx=_C;dp.createRoot=gx.createRoot,dp.hydrateRoot=gx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sl(){return sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sl.apply(this,arguments)}var Zn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Zn||(Zn={}));const yx="popstate";function jC(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:l}=n.location;return im("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:aN(i)}return NC(t,r,null,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function iN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SC(){return Math.random().toString(36).substr(2,8)}function vx(e,t){return{usr:e.state,key:e.key,idx:t}}function im(e,t,r,n){return r===void 0&&(r=null),sl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Cs(t):t,{state:r,key:t&&t.key||n||SC()})}function aN(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Cs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function NC(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,l=Zn.Pop,c=null,u=f();u==null&&(u=0,s.replaceState(sl({},s.state,{idx:u}),""));function f(){return(s.state||{idx:null}).idx}function d(){l=Zn.Pop;let m=f(),y=m==null?null:m-u;u=m,c&&c({action:l,location:v.location,delta:y})}function h(m,y){l=Zn.Push;let x=im(v.location,m,y);u=f()+1;let g=vx(x,u),S=v.createHref(x);try{s.pushState(g,"",S)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(S)}a&&c&&c({action:l,location:v.location,delta:1})}function p(m,y){l=Zn.Replace;let x=im(v.location,m,y);u=f();let g=vx(x,u),S=v.createHref(x);s.replaceState(g,"",S),a&&c&&c({action:l,location:v.location,delta:0})}function b(m){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof m=="string"?m:aN(m);return x=x.replace(/ $/,"%20"),ht(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let v={get action(){return l},get location(){return e(i,s)},listen(m){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(yx,d),c=m,()=>{i.removeEventListener(yx,d),c=null}},createHref(m){return t(i,m)},createURL:b,encodeLocation(m){let y=b(m);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:p,go(m){return s.go(m)}};return v}var xx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xx||(xx={}));function EC(e,t,r){return r===void 0&&(r="/"),AC(e,t,r)}function AC(e,t,r,n){let i=typeof t=="string"?Cs(t):t,a=lN(i.pathname||"/",r);if(a==null)return null;let s=sN(e);PC(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=UC(a);l=DC(s[c],u)}return l}function sN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(ht(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Gi([n,c.relativePath]),f=r.concat(c);a.children&&a.children.length>0&&(ht(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sN(a.children,t,f,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:MC(u,a.index),routesMeta:f})};return e.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,s);else for(let c of oN(a.path))i(a,s,c)}),t}function oN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=oN(n.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function PC(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:RC(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const OC=/^:[\w-]+$/,TC=3,CC=2,kC=1,$C=10,IC=-2,bx=e=>e==="*";function MC(e,t){let r=e.split("/"),n=r.length;return r.some(bx)&&(n+=IC),t&&(n+=CC),r.filter(i=>!bx(i)).reduce((i,a)=>i+(OC.test(a)?TC:a===""?kC:$C),n)}function RC(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function DC(e,t,r){let{routesMeta:n}=e,i={},a="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",d=LC({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:Gi([a,d.pathname]),pathnameBase:WC(Gi([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=Gi([a,d.pathnameBase]))}return s}function LC(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=BC(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let v=l[d]||"";s=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const b=l[d];return p&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:e}}function BC(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),iN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function UC(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return iN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lN(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function FC(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Cs(e):e;return{pathname:r?r.startsWith("/")?r:qC(r,t):t,search:HC(n),hash:VC(i)}}function qC(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function _h(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zC(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function cN(e,t){let r=zC(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function uN(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Cs(e):(i=sl({},e),ht(!i.pathname||!i.pathname.includes("?"),_h("?","pathname","search",i)),ht(!i.pathname||!i.pathname.includes("#"),_h("#","pathname","hash",i)),ht(!i.search||!i.search.includes("#"),_h("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=r;else{let d=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=FC(i,l),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const Gi=e=>e.join("/").replace(/\/\/+/g,"/"),WC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function GC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dN=["post","put","patch","delete"];new Set(dN);const KC=["get",...dN];new Set(KC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ol.apply(this,arguments)}const Fy=N.createContext(null),XC=N.createContext(null),Ql=N.createContext(null),Yd=N.createContext(null),sa=N.createContext({outlet:null,matches:[],isDataRoute:!1}),fN=N.createContext(null);function Zl(){return N.useContext(Yd)!=null}function qy(){return Zl()||ht(!1),N.useContext(Yd).location}function hN(e){N.useContext(Ql).static||N.useLayoutEffect(e)}function YC(){let{isDataRoute:e}=N.useContext(sa);return e?ck():JC()}function JC(){Zl()||ht(!1);let e=N.useContext(Fy),{basename:t,future:r,navigator:n}=N.useContext(Ql),{matches:i}=N.useContext(sa),{pathname:a}=qy(),s=JSON.stringify(cN(i,r.v7_relativeSplatPath)),l=N.useRef(!1);return hN(()=>{l.current=!0}),N.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=uN(u,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Gi([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,s,a,e])}function QC(e,t){return ZC(e,t)}function ZC(e,t,r,n){Zl()||ht(!1);let{navigator:i}=N.useContext(Ql),{matches:a}=N.useContext(sa),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=qy(),f;if(t){var d;let m=typeof t=="string"?Cs(t):t;c==="/"||(d=m.pathname)!=null&&d.startsWith(c)||ht(!1),f=m}else f=u;let h=f.pathname||"/",p=h;if(c!=="/"){let m=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(m.length).join("/")}let b=EC(e,{pathname:p}),v=ik(b&&b.map(m=>Object.assign({},m,{params:Object.assign({},l,m.params),pathname:Gi([c,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?c:Gi([c,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),a,r,n);return t&&v?N.createElement(Yd.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Zn.Pop}},v):v}function ek(){let e=lk(),t=GC(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,null)}const tk=N.createElement(ek,null);class rk extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(sa.Provider,{value:this.props.routeContext},N.createElement(fN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nk(e){let{routeContext:t,match:r,children:n}=e,i=N.useContext(Fy);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(sa.Provider,{value:t},n)}function ik(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||ht(!1),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<s.length;f++){let d=s[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:p}=r,b=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,d,h)=>{let p,b=!1,v=null,m=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,v=d.route.errorElement||tk,c&&(u<0&&h===0?(uk("route-fallback"),b=!0,m=null):u===h&&(b=!0,m=d.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,h+1)),x=()=>{let g;return p?g=v:b?g=m:d.route.Component?g=N.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=f,N.createElement(nk,{match:d,routeContext:{outlet:f,matches:y,isDataRoute:r!=null},children:g})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?N.createElement(rk,{location:r.location,revalidation:r.revalidation,component:v,error:p,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var pN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pN||{}),mN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(mN||{});function ak(e){let t=N.useContext(Fy);return t||ht(!1),t}function sk(e){let t=N.useContext(XC);return t||ht(!1),t}function ok(e){let t=N.useContext(sa);return t||ht(!1),t}function gN(e){let t=ok(),r=t.matches[t.matches.length-1];return r.route.id||ht(!1),r.route.id}function lk(){var e;let t=N.useContext(fN),r=sk(),n=gN();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function ck(){let{router:e}=ak(pN.UseNavigateStable),t=gN(mN.UseNavigateStable),r=N.useRef(!1);return hN(()=>{r.current=!0}),N.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ol({fromRouteId:t},a)))},[e,t])}const wx={};function uk(e,t,r){wx[e]||(wx[e]=!0)}function dk(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function yN(e){let{to:t,replace:r,state:n,relative:i}=e;Zl()||ht(!1);let{future:a,static:s}=N.useContext(Ql),{matches:l}=N.useContext(sa),{pathname:c}=qy(),u=YC(),f=uN(t,cN(l,a.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(f);return N.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function am(e){ht(!1)}function fk(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Zn.Pop,navigator:a,static:s=!1,future:l}=e;Zl()&&ht(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:a,static:s,future:ol({v7_relativeSplatPath:!1},l)}),[c,l,a,s]);typeof n=="string"&&(n=Cs(n));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:b="default"}=n,v=N.useMemo(()=>{let m=lN(f,c);return m==null?null:{location:{pathname:m,search:d,hash:h,state:p,key:b},navigationType:i}},[c,f,d,h,p,b,i]);return v==null?null:N.createElement(Ql.Provider,{value:u},N.createElement(Yd.Provider,{children:r,value:v}))}function hk(e){let{children:t,location:r}=e;return QC(sm(t),r)}new Promise(()=>{});function sm(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,i)=>{if(!N.isValidElement(n))return;let a=[...t,i];if(n.type===N.Fragment){r.push.apply(r,sm(n.props.children,a));return}n.type!==am&&ht(!1),!n.props.index||!n.props.children||ht(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=sm(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const pk="6";try{window.__reactRouterVersion=pk}catch{}const mk="startTransition",_x=d2[mk];function gk(e){let{basename:t,children:r,future:n,window:i}=e,a=N.useRef();a.current==null&&(a.current=jC({window:i,v5Compat:!0}));let s=a.current,[l,c]=N.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},f=N.useCallback(d=>{u&&_x?_x(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>s.listen(f),[s,f]),N.useEffect(()=>dk(n),[n]),N.createElement(fk,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}var jx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jx||(jx={}));var Sx;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Sx||(Sx={}));var om=function(e,t){return om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},om(e,t)};function vN(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");om(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Du=function(){return Du=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Du.apply(this,arguments)};function ks(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function xN(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function bN(e,t){return function(r,n){t(r,n,e)}}function wN(e,t,r,n,i,a){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,p=r.length-1;p>=0;p--){var b={};for(var v in n)b[v]=v==="access"?{}:n[v];for(var v in n.access)b.access[v]=n.access[v];b.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(y||null))};var m=(0,r[p])(l==="accessor"?{get:f.get,set:f.set}:f[c],b);if(l==="accessor"){if(m===void 0)continue;if(m===null||typeof m!="object")throw new TypeError("Object expected");(d=s(m.get))&&(f.get=d),(d=s(m.set))&&(f.set=d),(d=s(m.init))&&i.unshift(d)}else(d=s(m))&&(l==="field"?i.unshift(d):f[c]=d)}u&&Object.defineProperty(u,n.name,f),h=!0}function _N(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function jN(e){return typeof e=="symbol"?e:"".concat(e)}function SN(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function NN(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ye(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(f){try{u(n.next(f))}catch(d){s(d)}}function c(f){try{u(n.throw(f))}catch(d){s(d)}}function u(f){f.done?a(f.value):i(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function EN(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Jd=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function AN(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jd(t,e,r)}function Lu(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function zy(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function PN(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(zy(arguments[t]));return e}function ON(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,l=a.length;s<l;s++,i++)n[i]=a[s];return n}function TN(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function is(e){return this instanceof is?(this.v=e,this):new is(e)}function CN(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(b){return Promise.resolve(b).then(p,d)}}function l(p,b){n[p]&&(i[p]=function(v){return new Promise(function(m,y){a.push([p,v,m,y])>1||c(p,v)})},b&&(i[p]=b(i[p])))}function c(p,b){try{u(n[p](b))}catch(v){h(a[0][3],v)}}function u(p){p.value instanceof is?Promise.resolve(p.value.v).then(f,d):h(a[0][2],p)}function f(p){c("next",p)}function d(p){c("throw",p)}function h(p,b){p(b),a.shift(),a.length&&c(a[0][0],a[0][1])}}function kN(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=e[i]?function(s){return(r=!r)?{value:is(e[i](s)),done:!1}:a?a(s):s}:a}}function $N(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Lu=="function"?Lu(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(s){return new Promise(function(l,c){s=e[a](s),i(l,c,s.done,s.value)})}}function i(a,s,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},s)}}function IN(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yk=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},lm=function(e){return lm=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},lm(e)};function MN(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=lm(e),n=0;n<r.length;n++)r[n]!=="default"&&Jd(t,e,r[n]);return yk(t,e),t}function RN(e){return e&&e.__esModule?e:{default:e}}function DN(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function LN(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function BN(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function UN(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var vk=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function FN(e){function t(a){e.error=e.hasError?new vk(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(s){return t(s),i()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function qN(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,s){return n?t?".jsx":".js":i&&(!a||!s)?r:i+a+"."+s.toLowerCase()+"js"}):e}const xk={__extends:vN,__assign:Du,__rest:ks,__decorate:xN,__param:bN,__esDecorate:wN,__runInitializers:_N,__propKey:jN,__setFunctionName:SN,__metadata:NN,__awaiter:ye,__generator:EN,__createBinding:Jd,__exportStar:AN,__values:Lu,__read:zy,__spread:PN,__spreadArrays:ON,__spreadArray:TN,__await:is,__asyncGenerator:CN,__asyncDelegator:kN,__asyncValues:$N,__makeTemplateObject:IN,__importStar:MN,__importDefault:RN,__classPrivateFieldGet:DN,__classPrivateFieldSet:LN,__classPrivateFieldIn:BN,__addDisposableResource:UN,__disposeResources:FN,__rewriteRelativeImportExtension:qN},bk=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:UN,get __assign(){return Du},__asyncDelegator:kN,__asyncGenerator:CN,__asyncValues:$N,__await:is,__awaiter:ye,__classPrivateFieldGet:DN,__classPrivateFieldIn:BN,__classPrivateFieldSet:LN,__createBinding:Jd,__decorate:xN,__disposeResources:FN,__esDecorate:wN,__exportStar:AN,__extends:vN,__generator:EN,__importDefault:RN,__importStar:MN,__makeTemplateObject:IN,__metadata:NN,__param:bN,__propKey:jN,__read:zy,__rest:ks,__rewriteRelativeImportExtension:qN,__runInitializers:_N,__setFunctionName:SN,__spread:PN,__spreadArray:TN,__spreadArrays:ON,__values:Lu,default:xk},Symbol.toStringTag,{value:"Module"})),wk=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Wy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Nx extends Wy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ex extends Wy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ax extends Wy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var cm;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(cm||(cm={}));class _k{constructor(t,{headers:r={},customFetch:n,region:i=cm.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=wk(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ye(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:a,method:s,body:l,signal:c}=n;let u={},{region:f}=n;f||(f=this.region);const d=new URL(`${this.url}/${r}`);f&&f!=="any"&&(u["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let h;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const p=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:h,signal:c}).catch(y=>{throw y.name==="AbortError"?y:new Nx(y)}),b=p.headers.get("x-relay-error");if(b&&b==="true")throw new Ex(p);if(!p.ok)throw new Ax(p);let v=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return v==="application/json"?m=yield p.json():v==="application/octet-stream"||v==="application/pdf"?m=yield p.blob():v==="text/event-stream"?m=p:v==="multipart/form-data"?m=yield p.formData():m=yield p.text(),{data:m,error:null,response:p}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new Nx(a)}:{data:null,error:a,response:a instanceof Ax||a instanceof Ex?a.context:void 0}}})}}var Ft={};const $s=XO(bk);var Ac={},Pc={},Oc={},Tc={},Cc={},kc={},Px;function zN(){if(Px)return kc;Px=1,Object.defineProperty(kc,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return kc.default=e,kc}var Ox;function WN(){if(Ox)return Cc;Ox=1,Object.defineProperty(Cc,"__esModule",{value:!0});const t=$s.__importDefault(zN());class r{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,d,h;let p=null,b=null,v=null,m=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const w=await c.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?b=w:b=JSON.parse(w))}const g=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),S=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");g&&S&&S.length>1&&(v=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(p={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,v=null,m=406,y="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const g=await c.text();try{p=JSON.parse(g),Array.isArray(p)&&c.status===404&&(b=[],p=null,m=200,y="OK")}catch{c.status===404&&g===""?(m=204,y="No Content"):p={message:g}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,m=200,y="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:b,count:v,status:m,statusText:y}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,d;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=c==null?void 0:c.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return Cc.default=r,Cc}var Tx;function HN(){if(Tx)return Tc;Tx=1,Object.defineProperty(Tc,"__esModule",{value:!0});const t=$s.__importDefault(WN());class r extends t.default{select(i){let a=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const d=[i?"analyze":null,a?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Tc.default=r,Tc}var Cx;function Hy(){if(Cx)return Oc;Cx=1,Object.defineProperty(Oc,"__esModule",{value:!0});const t=$s.__importDefault(HN()),r=new RegExp("[,()]");class n extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const l=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${f}.${s}`),this}match(a){return Object.entries(a).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(a,s,l){return this.url.searchParams.append(a,`not.${s}.${l}`),this}or(a,{foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,s,l){return this.url.searchParams.append(a,`${s}.${l}`),this}}return Oc.default=n,Oc}var kx;function VN(){if(kx)return Pc;kx=1,Object.defineProperty(Pc,"__esModule",{value:!0});const t=$s.__importDefault(Hy());class r{constructor(i,{headers:a={},schema:s,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=l}select(i,a){const{head:s=!1,count:l}=a??{},c=s?"HEAD":"GET";let u=!1;const f=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Pc.default=r,Pc}var $x;function jk(){if($x)return Ac;$x=1,Object.defineProperty(Ac,"__esModule",{value:!0});const e=$s,t=e.__importDefault(VN()),r=e.__importDefault(Hy());class n{constructor(a,{headers:s={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:c=!1,count:u}={}){var f;let d;const h=new URL(`${this.url}/rpc/${a}`);let p;l||c?(d=l?"HEAD":"GET",Object.entries(s).filter(([v,m])=>m!==void 0).map(([v,m])=>[v,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([v,m])=>{h.searchParams.append(v,m)})):(d="POST",p=s);const b=new Headers(this.headers);return u&&b.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:b,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return Ac.default=n,Ac}Object.defineProperty(Ft,"__esModule",{value:!0});var GN=Ft.PostgrestError=nE=Ft.PostgrestBuilder=tE=Ft.PostgrestTransformBuilder=ZN=Ft.PostgrestFilterBuilder=JN=Ft.PostgrestQueryBuilder=XN=Ft.PostgrestClient=void 0;const Is=$s,KN=Is.__importDefault(jk());var XN=Ft.PostgrestClient=KN.default;const YN=Is.__importDefault(VN());var JN=Ft.PostgrestQueryBuilder=YN.default;const QN=Is.__importDefault(Hy());var ZN=Ft.PostgrestFilterBuilder=QN.default;const eE=Is.__importDefault(HN());var tE=Ft.PostgrestTransformBuilder=eE.default;const rE=Is.__importDefault(WN());var nE=Ft.PostgrestBuilder=rE.default;const iE=Is.__importDefault(zN());GN=Ft.PostgrestError=iE.default;var aE=Ft.default={PostgrestClient:KN.default,PostgrestQueryBuilder:YN.default,PostgrestFilterBuilder:QN.default,PostgrestTransformBuilder:eE.default,PostgrestBuilder:rE.default,PostgrestError:iE.default};const Sk=H1({__proto__:null,get PostgrestBuilder(){return nE},get PostgrestClient(){return XN},get PostgrestError(){return GN},get PostgrestFilterBuilder(){return ZN},get PostgrestQueryBuilder(){return JN},get PostgrestTransformBuilder(){return tE},default:aE},[Ft]),{PostgrestClient:Nk,PostgrestQueryBuilder:qte,PostgrestFilterBuilder:zte,PostgrestTransformBuilder:Wte,PostgrestBuilder:Hte,PostgrestError:Vte}=aE||Sk;class Ek{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ak="2.80.0",Pk=`realtime-js/${Ak}`,Ok="1.0.0",um=1e4,Tk=1e3,Ck=100;var Io;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Io||(Io={}));var yt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(yt||(yt={}));var zr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(zr||(zr={}));var dm;(function(e){e.websocket="websocket"})(dm||(dm={}));var Mi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Mi||(Mi={}));class kk{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const l=n.decode(t.slice(s,s+i));s=s+i;const c=n.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class sE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ze;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ze||(ze={}));const Ix=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=$k(s,e,t,i),a),{}):{}},$k=(e,t,r,n)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?oE(a,s):fm(s)},oE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Dk(t,r)}switch(e){case ze.bool:return Ik(t);case ze.float4:case ze.float8:case ze.int2:case ze.int4:case ze.int8:case ze.numeric:case ze.oid:return Mk(t);case ze.json:case ze.jsonb:return Rk(t);case ze.timestamp:return Lk(t);case ze.abstime:case ze.date:case ze.daterange:case ze.int4range:case ze.int8range:case ze.money:case ze.reltime:case ze.text:case ze.time:case ze.timestamptz:case ze.timetz:case ze.tsrange:case ze.tstzrange:return fm(t);default:return fm(t)}},fm=e=>e,Ik=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Mk=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Rk=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Dk=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(l=>oE(t,l))}return e},Lk=e=>typeof e=="string"?e.replace(" ","T"):e,lE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class jh{constructor(t,r,n={},i=um){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Mx;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Mx||(Mx={}));class Mo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mo.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=Mo.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Mo.syncDiff(this.state,i,a,s),l())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(a,(u,f)=>{s[u]||(c[u]=f)}),this.map(s,(u,f)=>{const d=a[u];if(d){const h=f.map(m=>m.presence_ref),p=d.map(m=>m.presence_ref),b=f.filter(m=>p.indexOf(m.presence_ref)<0),v=d.filter(m=>h.indexOf(m.presence_ref)<0);b.length>0&&(l[u]=b),v.length>0&&(c[u]=v)}else l[u]=f}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(p=>p.presence_ref),h=f.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,i(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Rx||(Rx={}));var Ro;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ro||(Ro={}));var pn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(pn||(pn={}));class Vy{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new jh(this,zr.join,this.params,this.timeout),this.rejoinTimer=new sE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zr.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new Mo(this),this.broadcastEndpointURL=lE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[Ro.PRESENCE]&&this.bindings[Ro.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(pn.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(pn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket.setAuth(),p===void 0){t==null||t(pn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,m=(b=v==null?void 0:v.length)!==null&&b!==void 0?b:0,y=[];for(let x=0;x<m;x++){const g=v[x],{filter:{event:S,schema:w,table:_,filter:j}}=g,E=p&&p[x];if(E&&E.event===S&&E.schema===w&&E.table===_&&E.filter===j)y.push(Object.assign(Object.assign({},g),{id:E.id}));else{this.unsubscribe(),this.state=yt.errored,t==null||t(pn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(pn.SUBSCRIBED);return}}).receive("error",p=>{this.state=yt.errored,t==null||t(pn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(pn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===yt.joined&&t===Ro.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=yt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new jh(this,zr.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=yt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new jh(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Ck){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=zr;if(n&&[l,c,u,f].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var b,v,m;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((m=(v=p.filter)===null||v===void 0?void 0:v.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(a=this.bindings[s])===null||a===void 0||a.filter(p=>{var b,v,m,y,x,g;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const S=p.id,w=(b=p.filter)===null||b===void 0?void 0:b.event;return S&&((v=r.ids)===null||v===void 0?void 0:v.includes(S))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((m=r.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const S=(x=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return S==="*"||S===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:v,table:m,commit_timestamp:y,type:x,errors:g}=b;h=Object.assign(Object.assign({},{schema:v,table:m,commit_timestamp:y,eventType:x,new:{},old:{},errors:g}),this._getPayloadRecords(b))}p.callback(h,n)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Vy.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zr.close,{},t)}_onError(t){this._on(zr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ix(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ix(t.columns,t.old_record)),r}}const Sh=()=>{},$c={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Bk=[1e3,2e3,5e3,1e4],Uk=1e4,Fk=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class qk{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=um,this.transport=null,this.heartbeatIntervalMs=$c.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sh,this.ref=0,this.reconnectTimer=null,this.logger=Sh,this.conn=null,this.sendBuffer=[],this.serializer=new kk,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dm.websocket}`,this.httpEndpoint=lE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ek.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ok}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Io.connecting:return Mi.Connecting;case Io.open:return Mi.Open;case Io.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Vy(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Tk,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},$c.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:s}=r,l=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(zr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Fk],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Pk};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(zr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new sE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$c.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,l,c,u,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:um,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:$c.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Sh,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:d=>Bk[d-1]||Uk,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Gy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function tt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zk extends Gy{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class hm extends Gy{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Ky=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Wk=()=>Response,pm=e=>{if(Array.isArray(e))return e.map(r=>pm(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=pm(n)}),t},Hk=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Nh=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},Vk=(e,t,r)=>ye(void 0,void 0,void 0,function*(){const n=yield Wk();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new zk(Nh(i),a,s))}).catch(i=>{t(new hm(Nh(i),i))}):t(new hm(Nh(e),e))}),Gk=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(Hk(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function ec(e,t,r,n,i,a){return ye(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,Gk(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>Vk(c,l,n))})})}function ll(e,t,r,n){return ye(this,void 0,void 0,function*(){return ec(e,"GET",t,r,n)})}function Fr(e,t,r,n,i){return ye(this,void 0,void 0,function*(){return ec(e,"POST",t,n,i,r)})}function mm(e,t,r,n,i){return ye(this,void 0,void 0,function*(){return ec(e,"PUT",t,n,i,r)})}function Kk(e,t,r,n){return ye(this,void 0,void 0,function*(){return ec(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xy(e,t,r,n,i){return ye(this,void 0,void 0,function*(){return ec(e,"DELETE",t,n,i,r)})}class Xk{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ye(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}var cE;class Yk{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[cE]="BlobDownloadBuilder",this.promise=null}asStream(){return new Xk(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ye(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(tt(t))return{data:null,error:t};throw t}})}}cE=Symbol.toStringTag;const Jk={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Dx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Qk{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Ky(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return ye(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Dx),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?mm:Fr)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(tt(a))return{data:null,error:a};throw a}})}upload(t,r,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return ye(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Dx.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield mm(this.fetch,l.toString(),c,{headers:f});return{data:{path:a,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(tt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ye(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Fr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),l=s.searchParams.get("token");if(!l)throw new Gy("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}update(t,r,n){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ye(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}copy(t,r,n){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Fr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return ye(this,void 0,void 0,function*(){try{const i=yield Fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>ll(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new Yk(c,this.shouldThrowOnError)}info(t){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ll(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:pm(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}exists(t){return ye(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Kk(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n)&&n instanceof hm){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ye(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}list(t,r,n){return ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Jk),r),{prefix:t||""});return{data:yield Fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}listV2(t,r){return ye(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Fr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uE="2.80.0",dE={"X-Client-Info":`storage-js/${uE}`};class Zk{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dE),r),this.fetch=Ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ye(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ll(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}getBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield ll(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}createBucket(t){return ye(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(tt(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return ye(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(tt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class e${constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},dE),r),this.fetch=Ky(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield Fr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}listBuckets(t){return ye(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ll(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield Xy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(tt(r))return{data:null,error:r};throw r}})}}const Yy={"X-Client-Info":`storage-js/${uE}`,"Content-Type":"application/json"};class fE extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function sr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Eh extends fE{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class t$ extends fE{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var Lx;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Lx||(Lx={}));const Jy=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),r$=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),n$=(e,t,r)=>ye(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new Eh(Bx(s),i,l))}).catch(()=>{const s=i+"",l=a.statusText||`HTTP ${i} error`;t(new Eh(l,i,s))});else{const s=i+"",l=a.statusText||`HTTP ${i} error`;t(new Eh(l,i,s))}}else t(new t$(Bx(e),e))}),i$=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(r$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function a$(e,t,r,n,i,a){return ye(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,i$(t,n,i,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>n$(c,l,n))})})}function or(e,t,r,n,i){return ye(this,void 0,void 0,function*(){return a$(e,"POST",t,n,i,r)})}class s${constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Jy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ye(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ye(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}})}listIndexes(t){return ye(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ye(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(sr(n))return{data:null,error:n};throw n}})}}class o${constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Jy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ye(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield or(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}getVectors(t){return ye(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}listVectors(t){return ye(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield or(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}queryVectors(t){return ye(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ye(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield or(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}}class l${constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yy),r),this.fetch=Jy(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}getBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:yield or(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}listBuckets(){return ye(this,arguments,void 0,function*(t={}){try{return{data:yield or(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ye(this,void 0,void 0,function*(){try{return{data:(yield or(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(sr(r))return{data:null,error:r};throw r}})}}class c$ extends l${constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new u$(this.url,this.headers,t,this.fetch)}}class u$ extends s${constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ye(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ye(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ye(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ye(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new d$(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class d$ extends o${constructor(t,r,n,i,a){super(t,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ye(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ye(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ye(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ye(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ye(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class f$ extends Zk{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new Qk(this.url,this.headers,t,this.fetch)}get vectors(){return new c$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new e$(this.url+"/iceberg",this.headers,this.fetch)}}const h$="2.80.0";let bo="";typeof Deno<"u"?bo="deno":typeof document<"u"?bo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bo="react-native":bo="node";const p$={"X-Client-Info":`supabase-js-${bo}/${h$}`},m$={headers:p$},g$={schema:"public"},y$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},v$={},x$=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),b$=()=>Headers,w$=(e,t,r)=>{const n=x$(r),i=b$();return async(a,s)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},s),{headers:u}))}};function _$(e){return e.endsWith("/")?e:e+"/"}function j$(e,t){var r,n;const{db:i,auth:a,realtime:s,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function S$(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(_$(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const hE="2.80.0",ba=30*1e3,gm=3,Ah=gm*ba,N$="http://localhost:9999",E$="supabase.auth.token",A$={"X-Client-Info":`gotrue-js/${hE}`},ym="X-Supabase-Api-Version",pE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},P$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,O$=10*60*1e3;class cl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ve(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class T$ extends cl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function C$(e){return ve(e)&&e.name==="AuthApiError"}class Ri extends cl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class yi extends cl{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Lr extends yi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k$(e){return ve(e)&&e.name==="AuthSessionMissingError"}class ha extends yi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ic extends yi{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Mc extends yi{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $$(e){return ve(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ux extends yi{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vm extends yi{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ph(e){return ve(e)&&e.name==="AuthRetryableFetchError"}class Fx extends yi{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class xm extends yi{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Bu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),qx=` 	
\r=`.split(""),I$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<qx.length;t+=1)e[qx[t].charCodeAt(0)]=-2;for(let t=0;t<Bu.length;t+=1)e[Bu[t].charCodeAt(0)]=t;return e})();function zx(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bu[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Bu[n]),t.queuedBits-=6}}function mE(e,t,r){const n=I$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Wx(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{D$(s,n,r)};for(let s=0;s<e.length;s+=1)mE(e.charCodeAt(s),i,a);return t.join("")}function M$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function R$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}M$(n,t)}}function D$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Ga(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)mE(e.charCodeAt(i),r,n);return new Uint8Array(t)}function L$(e){const t=[];return R$(e,r=>t.push(r)),new Uint8Array(t)}function Fi(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>zx(i,r,n)),zx(null,r,n),t.join("")}function B$(e){return Math.round(Date.now()/1e3)+e}function U$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Rt=()=>typeof window<"u"&&typeof document<"u",Si={tested:!1,writable:!1},gE=()=>{if(!Rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Si.tested)return Si.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Si.tested=!0,Si.writable=!0}catch{Si.tested=!0,Si.writable=!1}return Si.writable};function F$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const yE=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),q$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",wa=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ni=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Fn=async(e,t)=>{await e.removeItem(t)};class Qd{constructor(){this.promise=new Qd.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Qd.promiseConstructor=Promise;function Oh(e){const t=e.split(".");if(t.length!==3)throw new xm("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!P$.test(t[n]))throw new xm("JWT not in base64url format");return{header:JSON.parse(Wx(t[0])),payload:JSON.parse(Wx(t[1])),signature:Ga(t[2]),raw:{header:t[0],payload:t[1]}}}async function z$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function W$(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function H$(e){return("0"+e.toString(16)).substr(-2)}function V$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,H$).join("")}async function G$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function K$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await G$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function pa(e,t,r=!1){const n=V$();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await wa(e,`${t}-code-verifier`,i);const a=await K$(n);return[a,n===a?"plain":"s256"]}const X$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Y$(e){const t=e.headers.get(ym);if(!t||!t.match(X$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function J$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Q$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ma(e){if(!Z$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Th(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function eI(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function Hx(e){return JSON.parse(JSON.stringify(e))}const Ci=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tI=[502,503,504];async function Vx(e){var t;if(!q$(e))throw new vm(Ci(e),0);if(tI.includes(e.status))throw new vm(Ci(e),e.status);let r;try{r=await e.json()}catch(a){throw new Ri(Ci(a),a)}let n;const i=Y$(e);if(i&&i.getTime()>=pE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Fx(Ci(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Lr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Fx(Ci(r),e.status,r.weak_password.reasons);throw new T$(Ci(r),e.status||500,n)}const rI=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function je(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[ym]||(a[ym]=pE["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await nI(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function nI(e,t,r,n,i,a){const s=rI(t,n,i,a);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new vm(Ci(c),0)}if(l.ok||await Vx(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Vx(c)}}function Br(e){var t;let r=null;sI(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=B$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Gx(e){const t=Br(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Gn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function iI(e){return{data:e,error:null}}function aI(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=ks(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function Kx(e){return e}function sI(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ch=["global","local","others"];class oI{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=yE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ch[0]){if(Ch.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ch.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ks(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:aI,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ve(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gn})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Kx});if(f.error)throw f.error;const d=await f.json(),h=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(b.split(";")[1].split("=")[1]);u[`${m}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ve(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ma(t);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gn})}catch(r){if(ve(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ma(t);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Gn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ma(t);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ma(t.userId);try{const{data:r,error:n}=await je(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ma(t.userId),ma(t.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Kx});if(f.error)throw f.error;const d=await f.json(),h=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(b.split(";")[1].split("=")[1]);u[`${m}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(ve(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ve(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ve(r))return{data:null,error:r};throw r}}}function Xx(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ga={debug:!!(globalThis&&gE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class lI extends vE{}async function cI(e,t,r){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),ga.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw ga.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lI(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ga.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function uI(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function xE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function dI(e){return parseInt(e,16)}function fI(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function hI(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:f,uri:d,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=xE(e.address),b=f?`${f}://${n}`:n,v=e.statement?`${e.statement}
`:"",m=`${b} wants you to sign in with your Ethereum account:
${p}

${v}`;let y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),l&&(y+=`
Not Before: ${l.toISOString()}`),c&&(y+=`
Request ID: ${c}`),u){let x=`
Resources:`;for(const g of u){if(!g||typeof g!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${g}`);x+=`
- ${g}`}y+=x}return`${m}
${y}`}class dt extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Uu extends dt{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function pI({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(bE(s)){if(a.rp.id!==s)return new dt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function mI({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new dt({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(bE(n)){if(r.rpId!==n)return new dt({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class gI{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const yI=new gI;function vI(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=ks(e,["challenge","user","excludeCredentials"]),a=Ga(t).buffer,s=Object.assign(Object.assign({},r),{id:Ga(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Ga(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function xI(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ks(e,["challenge","allowCredentials"]),i=Ga(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},l),{id:Ga(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function bI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Fi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Fi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function wI(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Fi(new Uint8Array(i.authenticatorData)),clientDataJSON:Fi(new Uint8Array(i.clientDataJSON)),signature:Fi(new Uint8Array(i.signature)),userHandle:i.userHandle?Fi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function bE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Yx(){var e,t;return!!(Rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function _I(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uu("Browser returned unexpected credential type",t)}:{data:null,error:new Uu("Empty credential response",t)}}catch(t){return{data:null,error:pI({error:t,options:e})}}}async function jI(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Uu("Browser returned unexpected credential type",t)}:{data:null,error:new Uu("Empty credential response",t)}}catch(t){return{data:null,error:mI({error:t,options:e})}}}const SI={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},NI={userVerification:"preferred",hints:["security-key"]};function Fu(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const l=n[a];t(l)?n[a]=Fu(l,s):n[a]=Fu(s)}else n[a]=s}return n}function EI(e,t){return Fu(SI,e,t||{})}function AI(e,t){return Fu(NI,e,t||{})}class PI{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=i??yI.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=EI(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await _I({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=AI(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await jI(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(s){return ve(s)?{data:null,error:s}:{data:null,error:new Ri("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!r)return{data:null,error:new cl("rpId is required for WebAuthn authentication")};try{if(!Yx())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return ve(s)?{data:null,error:s}:{data:null,error:new Ri("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!r)return{data:null,error:new cl("rpId is required for WebAuthn registration")};try{if(!Yx())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return ve(s)?{data:null,error:s}:{data:null,error:new Ri("Unexpected error in register",s)}}}}uI();const OI={url:N$,storageKey:E$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Jx(e,t,r){return await r()}const ya={};class ul{get jwks(){var t,r;return(r=(t=ya[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ya[this.storageKey]=Object.assign(Object.assign({},ya[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ya[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ya[this.storageKey]=Object.assign(Object.assign({},ya[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},OI),t);if(this.storageKey=a.storageKey,this.instanceID=(r=ul.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,ul.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&Rt()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new oI({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=yE(a.fetch),this.lock=a.lock||Jx,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:Rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=cI:this.lock=Jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new PI(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:gE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Xx(this.memoryStorage)),Rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hE}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(Rt()&&(r=F$(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),Rt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),$$(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ve(r)?this._returnResult({error:r}):this._returnResult({error:new Ri("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:Br}),{data:s,error:l}=a;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:f,password:d,options:h}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await pa(this.storage,this.storageKey)),a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:b},xform:Br})}else if("phone"in t){const{phone:f,password:d,options:h}=t;a=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Br})}else throw new Ic("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(ve(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gx})}else if("phone"in t){const{phone:a,password:s,options:l}=t;r=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Gx})}else throw new Ic("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new ha;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,l,c,u,f,d,h;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:v,wallet:m,statement:y,options:x}=t;let g;if(Rt())if(typeof m=="object")g=m;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")g=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=m}const S=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href),w=await g.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=xE(w[0]);let j=(n=x==null?void 0:x.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!j){const A=await g.request({method:"eth_chainId"});j=dI(A)}const E={domain:S.host,address:_,statement:y,uri:S.href,version:"1",chainId:j,nonce:(i=x==null?void 0:x.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=x==null?void 0:x.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=x==null?void 0:x.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=x==null?void 0:x.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=x==null?void 0:x.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=x==null?void 0:x.signInWithEthereum)===null||f===void 0?void 0:f.resources};p=hI(E),b=await g.request({method:"personal_sign",params:[fI(p),_]})}try{const{data:v,error:m}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:Br});if(m)throw m;if(!v||!v.session||!v.user){const y=new ha;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:m})}catch(v){if(ve(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,n,i,a,s,l,c,u,f,d,h,p;let b,v;if("message"in t)b=t.message,v=t.signature;else{const{chain:m,wallet:y,statement:x,options:g}=t;let S;if(Rt())if(typeof y=="object")S=y;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))S=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const w=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const _=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),x?{statement:x}:null));let j;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")j=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)j=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in j&&"signature"in j&&(typeof j.signedMessage=="string"||j.signedMessage instanceof Uint8Array)&&j.signature instanceof Uint8Array)b=typeof j.signedMessage=="string"?j.signedMessage:new TextDecoder().decode(j.signedMessage),v=j.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${w.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((s=g==null?void 0:g.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((d=(f=g==null?void 0:g.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...g.signInWithSolana.resources.map(j=>`- ${j}`)]:[]].join(`
`);const _=await S.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=_}}try{const{data:m,error:y}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Fi(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Br});if(y)throw y;if(!m||!m.session||!m.user){const x=new ha;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(ve(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(t){const r=await Ni(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Br});if(await Fn(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const l=new ha;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(ve(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,l=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Br}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const f=new ha;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await pa(this.storage,this.storageKey));const{error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new Ic("You must provide either an email or phone number.")}catch(l){if(ve(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:Br});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,s=null;this.flowType==="pkce"&&([a,s]=await pa(this.storage,this.storageKey));const l=await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:iI});return this._returnResult(l)}catch(a){if(ve(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Lr;const{error:i}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(ve(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await je(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:l}=await je(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new Ic("You must provide either an email or phone number and a type")}catch(r){if(ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ni(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ah:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await Ni(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=Th()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=eI(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gn}):await this._useSession(async r=>{var n,i,a;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lr}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Gn})})}catch(r){if(ve(r))return k$(r)&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Lr;const s=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await pa(this.storage,this.storageKey));const{data:u,error:f}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:Gn});if(f)throw f;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(ve(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lr;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=Oh(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(ve(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Lr;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(ve(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!Rt())throw new Mc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Mc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ux("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Mc("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ux("No code detected.");const{data:x,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!s||!u)throw new Mc("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const p=h-f;p*1e3<=ba&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const b=h-d;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,f);const{data:v,error:m}=await this._getUser(a);if(m)throw m;const y={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:s,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(n){if(ve(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ni(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(C$(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Fn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=U$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await pa(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(ve(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,l,c,u,f;const{data:d,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return Rt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ve(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:l,token:c,access_token:u,nonce:f}=t,d=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Br}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new ha}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(i){if(ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await W$(async i=>(i>0&&await z$(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Br})),(i,a)=>{const s=200*Math.pow(2,i);return a&&Ph(a)&&Date.now()+s-n<ba})}catch(n){if(this._debug(r,"error",n),ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ni(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ni(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await wa(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:Th()}else if(i&&!i.user&&!i.user){const s=await Ni(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Fn(this.storage,this.storageKey+"-user"),await wa(this.storage,this.storageKey,i)):i.user=Th()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ah;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${Ah}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),Ph(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(i.access_token);!l&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Lr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Qd;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new Lr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),ve(a)){const s={data:null,error:a};return Ph(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await wa(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Hx(i);await wa(this.storage,this.storageKey,a)}else{const i=Hx(r);await wa(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Fn(this.storage,this.storageKey),await Fn(this.storage,this.storageKey+"-code-verifier"),await Fn(this.storage,this.storageKey+"-user"),this.userStorage&&await Fn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ba);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/ba);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ba}ms, refresh threshold is ${gm} ticks`),i<=gm&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await pa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await je(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await je(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?bI(t.webauthn.credential_response):wI(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await je(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:vI(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:xI(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Oh(n.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await je(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Lr})})}catch(r){if(ve(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Lr});const s=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Lr});const s=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&Rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+O$>i)return n;const{data:a,error:s}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});n=p.session.access_token}const{header:i,payload:a,signature:s,raw:{header:l,payload:c}}=Oh(n);r!=null&&r.allowExpired||J$(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:s},error:null}}const f=Q$(i.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,s,L$(`${l}.${c}`)))throw new xm("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}}ul.nextInstanceID={};const TI=ul;class CI extends TI{constructor(t){super(t)}}class kI{constructor(t,r,n){var i,a,s;this.supabaseUrl=t,this.supabaseKey=r;const l=S$(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:g$,realtime:v$,auth:Object.assign(Object.assign({},y$),{storageKey:c}),global:m$},f=j$(n??{},u);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=w$(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new Nk(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new f$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new _k(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:s,flowType:l,lock:c,debug:u,throwOnError:f},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new CI({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:c,debug:u,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new qk(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const $I=(e,t,r)=>new kI(e,t,r);function II(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}II()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const MI="https://ynoxsibapzatlxhmredp.supabase.co",RI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlub3hzaWJhcHphdGx4aG1yZWRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NTQ5OTcsImV4cCI6MjA3ODAzMDk5N30.39C4_sEXIeplYHBYPEGa-_pnan-1SHM6cgNJ-FrtsvU",K=$I(MI,RI,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});let bm=null;function DI(){bm=K.auth.onAuthStateChange((e,t)=>{e==="SIGNED_OUT"?console.log(" Utilisateur dconnect"):e==="TOKEN_REFRESHED"?console.log(" Token actualis"):e==="USER_UPDATED"?console.log(" Utilisateur mis  jour"):e==="SIGNED_IN"&&console.log(" Utilisateur connect")})}function LI(){bm&&bm()}const ae={PROSPECTS:"prospects",INSTALLATIONS:"installations",ABONNEMENTS:"abonnements",PAIEMENTS:"paiements",INTERVENTIONS:"interventions",USERS:"users",APPLICATIONS:"applications",HISTORIQUE_ACTIONS:"prospect_history"},Qx={SUPER_ADMIN:"super_admin",ADMIN:"admin",TECHNICIEN:"technicien",COMMERCIAL:"commercial",SUPPORT:"support"},Ki={super_admin:{label:"Super Administrateur",canManageUsers:!0,canManageRoles:!0,canManageApplications:!0,canViewAll:!0,canEditAll:!0,canDeleteAll:!0,allPages:!0},admin:{label:"Administrateur",canManageUsers:!0,canManageRoles:!1,canManageApplications:!0,canViewAll:!0,canEditAll:!0,canDeleteAll:!0,allPages:!0},technicien:{label:"Technicien",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","installations","abonnements","support","missions"]},commercial:{label:"Commercial",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","prospects","clients","installations","abonnements","paiements","alertes","missions"]},support:{label:"Support",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","support","missions","clients"]}},Ce={DASHBOARD:"dashboard",PROSPECTS:"prospects",CLIENTS:"clients",INSTALLATIONS:"installations",ABONNEMENTS:"abonnements",PAIEMENTS:"paiements",SUPPORT:"support",MISSIONS:"missions",ALERTES:"alertes",APPLICATIONS:"applications",UTILISATEURS:"utilisateurs"},io={prospects:{label:" Prospects",icon:"",permissions:["create","edit","delete"]},clients:{label:" Clients",icon:"",permissions:["create","edit","delete"]},installations:{label:" Installations",icon:"",permissions:["create","edit","delete"]},abonnements:{label:" Abonnements",icon:"",permissions:["create","edit","delete"]},paiements:{label:" Paiements",icon:"",permissions:["create","edit","delete"]},support:{label:" Support",icon:"",permissions:["view","create","edit","delete"]},missions:{label:" Missions",icon:"",permissions:["create","edit","delete","close","validate"]},alertes:{label:" Alertes",icon:"",permissions:["create","edit","delete"]},applications:{label:" Applications",icon:"",permissions:["create","edit","delete"]}},BI={view:" Consulter",create:" Crer",edit:" Modifier",delete:" Supprimer",close:" Clturer",validate:" Valider"},Gt={async signIn(e,t){try{const{data:r,error:n}=await K.rpc("verify_user_password",{p_email:e.toLowerCase(),p_password:t});if(n)throw console.error("Erreur vrification mot de passe:",n),new Error("Email ou mot de passe incorrect");if(!r||r.length===0)throw console.warn("Utilisateur non trouv:",e),new Error("Email ou mot de passe incorrect");const i=r[0];if(!i.is_valid)throw console.warn("Mot de passe incorrect pour:",e),new Error("Email ou mot de passe incorrect");try{await K.rpc("update_last_login",{p_email:e.toLowerCase()})}catch(c){console.warn("Note: update_last_login choue (non-bloquant):",c)}const a={id:i.user_id,email:i.email,nom:i.nom,role:i.role,pages_visibles:[]},{data:s,error:l}=await K.from("users").select("pages_visibles").eq("id",i.user_id).single();return!l&&s&&(a.pages_visibles=s.pages_visibles||[]),console.log(" Connexion russie (authentification locale):",{email:e,role:a.role}),localStorage.setItem("currentUser",JSON.stringify(a)),{user:{id:i.user_id},profile:a}}catch(r){throw console.error(" Erreur de connexion:",r),r}},async signOut(){try{localStorage.removeItem("currentUser"),console.log(" Dconnexion russie")}catch(e){throw console.error("Erreur de dconnexion:",e),e}},async getCurrentUser(){try{const e=localStorage.getItem("currentUser");if(!e)return console.log(" Pas d'utilisateur en session"),null;try{const t=JSON.parse(e);return console.log(" Utilisateur rcupr du localStorage:",t.email),t}catch(t){console.warn(" Erreur parsing localStorage:",t);try{const{data:{user:r},error:n}=await K.auth.getUser();if(!n&&r)return console.log(" Utilisateur rcupr depuis Supabase"),{user:r,profile:{id:r.id,email:r.email}}}catch{console.warn(" Impossible de rcuprer depuis Supabase")}return null}}catch(e){return console.error("Erreur critique rcupration utilisateur:",e),null}},hasPageAccess(e,t){if(!e)return!1;const r=e.role||"commercial",n=Ki[r];return n?n.allPages?!0:(e.pages_visibles||[]).includes(t):(console.warn(`Rle inconnu: ${r}`),!1)},hasPermission(e,t){if(!e)return!1;const r=e.role||"commercial",n=Ki[r];return n?n[t]===!0:(console.warn(`Rle inconnu: ${r}`),!1)},canManageUsers(e){return this.hasPermission(e,"canManageUsers")},canManageRoles(e){return this.hasPermission(e,"canManageRoles")},canManageApplications(e){return this.hasPermission(e,"canManageApplications")},canViewAll(e){return this.hasPermission(e,"canViewAll")},canEditAll(e){return this.hasPermission(e,"canEditAll")},canDeleteAll(e){return this.hasPermission(e,"canDeleteAll")},getDefaultPages(e){const t=Ki[e];return t!=null&&t.allPages?["dashboard","prospects","clients","installations","abonnements","paiements","support","applications","utilisateurs"]:(t==null?void 0:t.defaultPages)||[]}},wE=N.createContext(null),UI=({children:e})=>{const[t,r]=N.useState(null),[n,i]=N.useState(null),[a,s]=N.useState(!0);N.useEffect(()=>(l(),DI(),()=>{LI()}),[]);const l=async()=>{try{const g=await Gt.getCurrentUser();g&&(r(g.user),i(g.profile))}catch(g){console.error("Erreur vrification utilisateur:",g)}finally{s(!1)}},x={user:t,profile:n,loading:a,signIn:async(g,S)=>{try{const{user:w,profile:_}=await Gt.signIn(g,S);return r(w),i(_),console.log(" Connexion russie:",{email:g,role:_==null?void 0:_.role}),{user:w,profile:_}}catch(w){throw console.error(" Erreur de connexion:",w),r(null),i(null),w}},signOut:async()=>{await Gt.signOut(),r(null),i(null)},hasAccess:g=>Gt.hasPageAccess(n,g),canManageUsers:()=>Gt.canManageUsers(n),canManageRoles:()=>Gt.canManageRoles(n),canManageApplications:()=>Gt.canManageApplications(n),canViewAll:()=>Gt.canViewAll(n),canEditAll:()=>Gt.canEditAll(n),canDeleteAll:()=>Gt.canDeleteAll(n),hasPermission:g=>Gt.hasPermission(n,g),isAuthenticated:!!t};return o.jsx(wE.Provider,{value:x,children:e})},Nt=()=>{const e=N.useContext(wE);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},_E=N.createContext(null),FI=({children:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0),a=u=>{const f=Date.now();r(h=>[...h,{...u,id:f}]);const d=u.duration||(u.type==="error"?8e3:5e3);setTimeout(()=>{s(f)},d)},s=u=>{r(f=>f.filter(d=>d.id!==u))},c={notifications:t,addNotification:a,removeNotification:s,sidebarOpen:n,setSidebarOpen:i,toggleSidebar:()=>{i(u=>!u)}};return o.jsx(_E.Provider,{value:c,children:e})},rr=()=>{const e=N.useContext(_E);if(!e)throw new Error("useApp must be used within AppProvider");return e};var qI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WI=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,children:l,...c},u)=>N.createElement("svg",{ref:u,...qI,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:`lucide lucide-${zI(e)}`,...c},[...t.map(([f,d])=>N.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var we=WI;const kh=we("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),pt=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),as=we("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),HI=we("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),VI=we("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),qu=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),wm=we("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),ao=we("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),Do=we("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Yr=we("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Nr=we("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),yn=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Kn=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Ms=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ra=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),_m=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),GI=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),dl=we("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),cu=we("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),$h=we("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),KI=we("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),XI=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),YI=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),JI=we("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),QI=we("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),fi=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ZI=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),eM=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Qy=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),li=we("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),jE=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Zy=we("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Mn=we("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),jm=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),SE=we("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),vi=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Zd=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ev=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),tM=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Sm=we("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),rM=we("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Xn=we("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Er=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),nM=we("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),rn=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),NE=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),fl=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),iM=we("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),Tn=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hl=we("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),aM=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(""),[i,a]=N.useState(""),[s,l]=N.useState(!1),{signIn:c}=Nt(),u=async f=>{var d,h,p,b;f.preventDefault(),a(""),l(!0);try{await c(e,r)}catch(v){v.code==="AUTH_NOT_INITIALIZED"?a(v.message):(d=v.message)!=null&&d.includes("Email ou mot de passe incorrect")?a(" Email ou mot de passe incorrect"):(h=v.message)!=null&&h.includes("Email not confirmed")?a(" Veuillez confirmer votre adresse email"):(p=v.message)!=null&&p.includes("rate limit")?a(" Trop de tentatives. Veuillez ressayer dans un moment."):(b=v.message)!=null&&b.includes("not found")?a(" Cet utilisateur n'existe pas"):a(v.message||" Erreur de connexion")}finally{l(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"bg-primary w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-3xl font-bold",children:"A2S"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"A2S Gestion"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Connectez-vous  votre compte"})]}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:e,onChange:f=>t(f.target.value),className:"input-field",placeholder:"votre@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),o.jsx("input",{type:"password",value:r,onChange:f=>n(f.target.value),className:"input-field",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:s,className:"w-full btn-primary py-3 flex items-center justify-center gap-2",children:s?o.jsx("span",{children:"Connexion en cours..."}):o.jsxs(o.Fragment,{children:[o.jsx(ZI,{size:20}),o.jsx("span",{children:"Se connecter"})]})})]}),o.jsx("div",{className:"mt-8 text-center text-sm text-gray-600",children:o.jsx("p",{children:" 2025 SARL A2S - Tous droits rservs"})})]})})},sM=({children:e,requiredPage:t})=>{const{isAuthenticated:r,loading:n,hasAccess:i,profile:a}=Nt();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r?t&&!i(t)?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:o.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-lg shadow p-8",children:[o.jsx(pt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Accs Refus"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous n'avez pas accs  cette page."}),o.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[o.jsx("strong",{children:"Rle actuel:"})," ",(a==null?void 0:a.role)||"Non dfini"]}),o.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"Demandez  un administrateur pour accorder l'accs  cette page."}),o.jsx("a",{href:"/",className:"inline-block bg-primary text-white px-6 py-2 rounded-lg font-medium hover:opacity-90 transition-opacity",children:"Retour au Tableau de Bord"})]})}):e:o.jsx(yN,{to:"/login",replace:!0})},lr=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"",EE=e=>e?new Date(e).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",_a=e=>!e&&e!==0?"0 DA":new Intl.NumberFormat("fr-DZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" DA",oM=(e,t)=>{const r=Math.max(0,e-t);return r===e?{code:0,statut:"AUCUN PAIEMENT",couleur:"bg-red-100 text-red-700",badge:"bg-red-500 text-white",icon:"",pourcentage:0}:r>0?{code:1,statut:"PARTIELLEMENT PAY",couleur:"bg-orange-100 text-orange-700",badge:"bg-orange-500 text-white",icon:"",pourcentage:Math.round(t/e*100)}:{code:2,statut:"TOTALEMENT PAY",couleur:"bg-green-100 text-green-700",badge:"bg-green-500 text-white",icon:"",pourcentage:100}},Ar=(e,t)=>oM(e,t),wo=e=>{if(!e)return 0;const t=new Date,n=new Date(e)-t;return Math.ceil(n/(1e3*60*60*24))},lM=e=>({actif:"badge-success",prospect:"badge-info",inactif:"badge-danger",en_cours:"badge-warning",terminee:"badge-success",en_alerte:"badge-warning",expire:"badge-danger",cloturee:"badge-success",normale:"badge-info",haute:"badge-danger"})[e]||"badge-info",uu=e=>({actif:"Actif",prospect:"Prospect",inactif:"Inactif",en_cours:"En Cours",terminee:"Termine",en_alerte:"En Alerte",expire:"Expir",cloturee:"Clture",normale:"Normale",haute:"Haute",sur_site:"Sur Site",a_distance:" Distance",maintenance:"Maintenance",formation:"Formation",autre:"Autre",especes:"Espces",virement:"Virement",cheque:"Chque",acquisition:"Acquisition",abonnement:"Abonnement"})[e]||e,AE=e=>{if(!e)return"";const t=e.split(" ");return t.length===1?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()},Ih=({currentPage:e,onPageChange:t})=>{const{profile:r,signOut:n,hasAccess:i}=Nt(),{sidebarOpen:a,toggleSidebar:s}=rr(),c=[{id:Ce.DASHBOARD,label:"Tableau de Bord",icon:JI},{id:Ce.PROSPECTS,label:"Prospects",icon:Xn},{id:Ce.CLIENTS,label:"Clients",icon:fl},{id:Ce.INSTALLATIONS,label:"Installations",icon:GI},{id:Ce.ABONNEMENTS,label:"Abonnements",icon:Yr},{id:Ce.PAIEMENTS,label:"Paiements",icon:Ra},{id:Ce.SUPPORT,label:" Support",icon:KI},{id:Ce.MISSIONS,label:" Missions",icon:Nr},{id:Ce.APPLICATIONS,label:"Applications",icon:Zy},{id:Ce.UTILISATEURS,label:"Utilisateurs",icon:fl}].filter(f=>i(f.id)),u=async()=>{try{await n()}catch(f){console.error("Erreur dconnexion:",f)}};return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:s,className:"lg:hidden fixed top-4 left-4 z-50 bg-primary text-white p-2 rounded-lg shadow-lg",children:a?o.jsx(Tn,{size:24}):o.jsx(jE,{size:24})}),a&&o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:s}),o.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-40
          w-64 bg-primary text-white
          transform transition-transform duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          flex flex-col
        `,children:[o.jsx("div",{className:"p-6 border-b border-primary-light",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-white w-12 h-12 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-primary text-xl font-bold",children:"A2S"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:"A2S Gestion"}),o.jsx("p",{className:"text-sm text-blue-200",children:r==null?void 0:r.role})]})]})}),o.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:c.map(f=>{const d=f.icon,h=e===f.id;return o.jsxs("button",{onClick:()=>{t(f.id),window.innerWidth<1024&&s()},className:`
                  w-full flex items-center gap-3 px-6 py-3 
                  transition-colors duration-200
                  ${h?"bg-white bg-opacity-20 border-l-4 border-white":"hover:bg-white hover:bg-opacity-10"}
                `,children:[o.jsx(d,{size:20}),o.jsx("span",{className:"font-medium",children:f.label})]},f.id)})}),o.jsxs("div",{className:"p-4 border-t border-primary-light",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center font-bold",children:AE((r==null?void 0:r.nom)||"User")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:r==null?void 0:r.nom}),o.jsx("p",{className:"text-sm text-blue-200 truncate",children:"Utilisateur"})]})]}),o.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-lg transition-colors",children:[o.jsx(eM,{size:18}),o.jsx("span",{children:"Dconnexion"})]})]})]})]})},Ct={async getAll(){try{const{data:e,error:t}=await K.from(ae.PROSPECTS).select("*");if(t)throw t;return(e||[]).sort((n,i)=>new Date(i.created_at)-new Date(n.created_at))}catch(e){throw console.error("Erreur rcupration prospects:",e),e}},async getById(e){try{const{data:t,error:r}=await K.from(ae.PROSPECTS).select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration prospect:",t),t}},async create(e){try{const t=["GROSSISTE PHARM","GROSSISTE PARA","PARA SUPER GROS","LABO PROD","AUTRE"],r=e.secteur&&t.includes(e.secteur)?e.secteur:"AUTRE",n={raison_sociale:e.raison_sociale||"",contact:e.contact||"",secteur:r,telephone:e.telephone||"",email:e.email||"",wilaya:e.wilaya||"",statut:"prospect",created_by:e.created_by||null},{data:i,error:a}=await K.from(ae.PROSPECTS).insert([n]).select();if(a)throw a;const s=i&&i.length>0?i[0]:n;if(e.commercial_assigned&&e.commercial_assigned.trim())try{await K.from(ae.PROSPECTS).update({commercial_assigned:e.commercial_assigned}).eq("id",s.id)}catch(l){console.warn(" Commercial non assign:",l)}try{const l=JSON.stringify([{action:"creation",details:"Prospect cr",created_at:new Date().toISOString(),created_by:e.created_by||"system"}]);await K.from(ae.PROSPECTS).update({historique_actions:l}).eq("id",s.id)}catch(l){console.warn(" Historique non disponible - Excutez la migration SQL:",l.message)}return s}catch(t){throw console.error("Erreur cration prospect:",t),t}},async update(e,t){try{const r=["GROSSISTE PHARM","GROSSISTE PARA","PARA SUPER GROS","LABO PROD","AUTRE"],n=t.secteur&&r.includes(t.secteur)?t.secteur:"AUTRE",i={raison_sociale:t.raison_sociale||"",contact:t.contact||"",secteur:n,telephone:t.telephone||"",email:t.email||"",wilaya:t.wilaya||""},{data:a,error:s}=await K.from(ae.PROSPECTS).update(i).eq("id",e).select();if(s)throw s;if(t.commercial_assigned&&t.commercial_assigned.trim())try{await K.from(ae.PROSPECTS).update({commercial_assigned:t.commercial_assigned}).eq("id",e)}catch(l){console.warn(" Commercial non assign:",l)}return await this.addHistorique(e,"modification","Prospect modifi"),a&&a.length>0?a[0]:i}catch(r){throw console.error("Erreur mise  jour prospect:",r),r}},async delete(e){try{const{error:t}=await K.from(ae.PROSPECTS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression prospect:",t),t}},async convertToClient(e){try{await this.addHistorique(e,"conversion","Converti en client actif");const{data:t,error:r}=await K.from(ae.PROSPECTS).update({statut:"actif"}).eq("id",e).select();if(r)throw r;return t&&t.length>0?t[0]:{id:e,statut:"actif"}}catch(t){throw console.error("Erreur conversion prospect:",t),t}},async addHistorique(e,t,r,n={}){try{const{data:i,error:a}=await K.from(ae.PROSPECTS).select("statut, historique_actions").eq("id",e).single();if(a){console.warn(" Colonne historique_actions manquante - Utilisation LocalStorage temporaire"),this._addHistoriqueLocalStorage(e,t,r,n);return}if(i&&i.statut==="actif"&&!["abonnement_acquisition","abonnement_auto_renew","installation"].includes(t)){console.log(` Action '${t}' skippe aprs conversion - Client actif uniquement`);return}if(t==="installation"&&i&&i.statut!=="actif"){console.log(" Installation action skippe - Prospect non encore converti en client actif");return}let s=[];try{s=i.historique_actions?JSON.parse(i.historique_actions):[]}catch{s=[]}s.push({action:t,details:r,created_at:new Date().toISOString(),...n});const{error:l}=await K.from(ae.PROSPECTS).update({historique_actions:JSON.stringify(s)}).eq("id",e);l&&(console.warn(" Impossible de mettre  jour l'historique:",l),this._addHistoriqueLocalStorage(e,t,r,n))}catch(i){console.warn(" Erreur lors de l'ajout  l'historique:",i),this._addHistoriqueLocalStorage(e,t,r,n)}},_addHistoriqueLocalStorage(e,t,r,n={}){try{const i=`prospect_history_${e}`,a=localStorage.getItem(i);let s=a?JSON.parse(a):[];s.push({action:t,details:r,created_at:new Date().toISOString(),...n}),localStorage.setItem(i,JSON.stringify(s)),console.log(" Historique enregistr dans LocalStorage (temporaire)")}catch(i){console.error(" Impossible d'enregistrer dans LocalStorage:",i)}},async getHistorique(e){try{const{data:t,error:r}=await K.from(ae.PROSPECTS).select("historique_actions").eq("id",e).single();if(r)return console.warn(" Colonne historique_actions manquante - Utilisation LocalStorage temporaire"),this._getHistoriqueLocalStorage(e);try{return(t.historique_actions?JSON.parse(t.historique_actions):[]).sort((i,a)=>new Date(a.created_at)-new Date(i.created_at))}catch(n){return console.warn(" Erreur parsing historique:",n),this._getHistoriqueLocalStorage(e)}}catch(t){return console.warn(" Erreur rcupration historique:",t),this._getHistoriqueLocalStorage(e)}},_getHistoriqueLocalStorage(e){try{const t=`prospect_history_${e}`,r=localStorage.getItem(t);return r?JSON.parse(r).sort((i,a)=>new Date(a.created_at)-new Date(i.created_at)):[]}catch(t){return console.error(" Impossible de lire LocalStorage:",t),[]}},async getStats(){try{const{data:e,error:t}=await K.from(ae.PROSPECTS).select("statut");if(t)throw t;return{total:e.length,prospects:e.filter(n=>n.statut==="prospect").length,actifs:e.filter(n=>n.statut==="actif").length,inactifs:e.filter(n=>n.statut==="inactif").length}}catch(e){throw console.error("Erreur statistiques prospects:",e),e}}},qt={async getAll(){try{const{data:e,error:t}=await K.from(ae.ABONNEMENTS).select("*").order("date_fin",{ascending:!0});if(t)throw t;const r=new Date;r.setHours(0,0,0,0);const n=new Date;return n.setDate(n.getDate()+30),n.setHours(0,0,0,0),await Promise.all(e.map(async a=>{const s=new Date(a.date_fin);s.setHours(0,0,0,0);let l=a.statut;s<r?l="expire":s<=n?l="en_alerte":l="actif",a.statut!==l&&await K.from(ae.ABONNEMENTS).update({statut:l}).eq("id",a.id);let c={};if(a.installation_id){const{data:u}=await K.from(ae.INSTALLATIONS).select("*").eq("id",a.installation_id).single();if(u){const{data:f}=await K.from(ae.PROSPECTS).select("raison_sociale, contact, telephone, email").eq("id",u.client_id).single();c={...u,client:f||{}}}}return{...a,statut:l,installation:c}}))}catch(e){throw console.error("Erreur rcupration abonnements:",e),e}},async createFromInstallation(e){try{const{data:t,error:r}=await K.from(ae.ABONNEMENTS).select("id").eq("installation_id",e).in("statut",["actif","en_alerte"]);if(r)throw r;if(t&&t.length>0)throw new Error("Un abonnement actif ou en alerte existe dj pour cette installation.");const{data:n,error:i}=await K.from(ae.INSTALLATIONS).select("date_installation").eq("id",e).single();if(i)throw i;const a=new Date(n.date_installation),s=new Date(a);s.setFullYear(s.getFullYear()+1);const l=new Date;l.setHours(0,0,0,0);const c=new Date(l);c.setDate(c.getDate()+30);let u="actif";s<l?u="expire":s<=c&&(u="en_alerte");const{error:f}=await K.from(ae.ABONNEMENTS).insert([{installation_id:e,date_debut:a.toISOString().split("T")[0],date_fin:s.toISOString().split("T")[0],statut:u}]);if(f)throw f;try{const{data:d}=await K.from(ae.INSTALLATIONS).select("client_id, application_installee, montant, type").eq("id",e).single();if(d){let h=d.montant;if(d.type&&d.type.toLowerCase()==="acquisition")try{const{data:p}=await K.from("applications").select("prix_abonnement, prix").eq("nom",d.application_installee).single();p&&p.prix_abonnement&&(h=p.prix_abonnement,console.log(` Montant abonnement: ${h} DA (prix_abonnement de l'application)`))}catch{console.warn(" Impossible de rcuprer le prix abonnement de l'application")}await Ct.addHistorique(d.client_id,"abonnement_acquisition",`Abonnement cr pour ${d.application_installee} (Type: ${d.type||"standard"})`,{installation_id:e,application:d.application_installee,date_debut:a.toISOString().split("T")[0],date_fin:s.toISOString().split("T")[0],montant:h,type:d.type,statut:u}),console.log(` Abonnement enregistr dans l'historique du prospect/client ${d.client_id}`)}}catch(d){console.warn(" Impossible d'enregistrer l'abonnement dans l'historique:",d)}return console.log(` Abonnement cr: Installation ${e}, Statut: ${u}, Fin: ${s.toISOString().split("T")[0]}`),{success:!0,installationId:e,statut:u}}catch(t){throw console.error("Erreur cration abonnement:",t),t}},async create(e){try{const{data:t,error:r}=await K.from(ae.ABONNEMENTS).insert([{installation_id:e.installation_id,date_debut:e.date_debut,date_fin:e.date_fin,statut:e.statut||"actif"}]).select().single();if(r)throw r;return t}catch(t){throw console.error("Erreur cration abonnement:",t),t}},async hasPaiements(e){try{return!1}catch(t){return console.error("Erreur vrification paiements:",t),!1}},async hasActiveAbonnement(e){try{const{data:t,error:r}=await K.from(ae.ABONNEMENTS).select("id",{count:"exact",head:!0}).eq("installation_id",e).in("statut",["actif","en_alerte"]);if(r)throw r;return t&&t.length>0}catch(t){return console.error("Erreur vrification abonnement actif:",t),!1}},async update(e,t){try{if(await this.hasPaiements(e))throw new Error("Impossible de modifier : cet abonnement a des paiements associs");const{data:n,error:i}=await K.from(ae.ABONNEMENTS).update(t).eq("id",e).select().single();if(i)throw i;return n}catch(r){throw console.error("Erreur mise  jour abonnement:",r),r}},async delete(e){try{if(await this.hasPaiements(e))throw new Error("Impossible de supprimer : cet abonnement a des paiements associs");const{error:r}=await K.from(ae.ABONNEMENTS).delete().eq("id",e);if(r)throw r;return!0}catch(t){throw console.error("Erreur suppression abonnement:",t),t}},async renouveler(e){try{const{data:t,error:r}=await K.from(ae.ABONNEMENTS).select("*").eq("id",e).single();if(r)throw r;const{data:n,error:i}=await K.from(ae.ABONNEMENTS).select("id").eq("installation_id",t.installation_id).in("statut",["actif","en_alerte"]).neq("id",e);if(i)throw i;if(n&&n.length>0)throw new Error("Un abonnement actif ou en alerte existe dj pour cette installation. Veuillez supprimer ou modifier l'abonnement existant.");const{error:a}=await K.from(ae.ABONNEMENTS).update({statut:"expire"}).eq("id",e);if(a)throw a;const s=new Date(t.date_fin),l=new Date(s);l.setFullYear(l.getFullYear()+1);const{data:c,error:u}=await K.from(ae.ABONNEMENTS).insert([{installation_id:t.installation_id,date_debut:s.toISOString(),date_fin:l.toISOString(),statut:"actif"}]).select().single();if(u)throw u;return c}catch(t){throw console.error("Erreur renouvellement abonnement:",t),t}},async checkAlertes(){try{const e=new Date;e.setHours(0,0,0,0);const t=new Date;t.setDate(t.getDate()+30),t.setHours(23,59,59,999);const{data:r,error:n}=await K.from(ae.ABONNEMENTS).select("*").in("statut",["actif","en_alerte"]).order("date_fin",{ascending:!0});if(n)throw n;return(await Promise.all(r.map(async a=>{const s=new Date(a.date_fin);s.setHours(0,0,0,0);let l=a.statut;s<e?(l="expire",await K.from(ae.ABONNEMENTS).update({statut:"expire"}).eq("id",a.id)):s<=t?(l="en_alerte",await K.from(ae.ABONNEMENTS).update({statut:"en_alerte"}).eq("id",a.id)):(l="actif",await K.from(ae.ABONNEMENTS).update({statut:"actif"}).eq("id",a.id));let c={};if(a.installation_id){const{data:u}=await K.from(ae.INSTALLATIONS).select("*").eq("id",a.installation_id).single();if(u){const{data:f}=await K.from(ae.PROSPECTS).select("raison_sociale, contact, telephone, email").eq("id",u.client_id).single();c={...u,client:f||{}}}}return{...a,statut:l,installation:c}}))).filter(a=>a.statut==="en_alerte")}catch(e){throw console.error("Erreur vrification alertes:",e),e}},async getStats(){try{const{data:e,error:t}=await K.from(ae.ABONNEMENTS).select("statut");if(t)throw t;return{total:e.length,actifs:e.filter(n=>n.statut==="actif").length,enAlerte:e.filter(n=>n.statut==="en_alerte").length,expires:e.filter(n=>n.statut==="expire").length}}catch(e){throw console.error("Erreur statistiques abonnements:",e),e}}},cM=({onClose:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0),[a,s]=N.useState(null);N.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const d=await qt.checkAlertes();r(d)}catch(d){console.error("Erreur chargement alertes:",d)}finally{i(!1)}},c=async d=>{try{s(d),await qt.renouveler(d),await l()}catch(h){console.error("Erreur renouvellement:",h),alert("Erreur lors du renouvellement")}finally{s(null)}};if(n)return o.jsx("div",{className:"fixed top-4 right-4 bg-white rounded-xl shadow-2xl p-6 w-96 z-50 border border-gray-200",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-500 mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-3 text-sm",children:"Vrification des abonnements..."})]})});if(t.length===0)return null;const u=t.filter(d=>wo(d.date_fin)<0),f=t.filter(d=>wo(d.date_fin)>=0);return o.jsxs("div",{className:"fixed top-4 right-4 bg-white rounded-xl shadow-2xl w-[420px] z-50 max-h-[85vh] overflow-hidden border border-gray-200",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-500 via-orange-500 to-amber-500 text-white p-5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx(qu,{size:24,className:"animate-pulse"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Alertes Abonnements"}),o.jsxs("p",{className:"text-sm opacity-90",children:[u.length," expir(s)  ",f.length," proche(s)"]})]})]}),e&&o.jsx("button",{onClick:e,className:"text-white hover:bg-white/20 p-2 rounded-lg transition-all",children:o.jsx(Tn,{size:20})})]}),o.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)]",children:[u.length>0&&o.jsxs("div",{className:"p-4 bg-red-50 border-b-2 border-red-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(as,{size:18,className:"text-red-600"}),o.jsxs("h4",{className:"font-bold text-red-800 text-sm uppercase",children:["Expirs (",u.length,")"]})]}),o.jsx("div",{className:"space-y-3",children:u.map(d=>{const h=Math.abs(wo(d.date_fin));return o.jsx(Zx,{alerte:d,isExpired:!0,jours:h,renewing:a,onRenouveler:c},d.id)})})]}),f.length>0&&o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Ms,{size:18,className:"text-orange-600"}),o.jsxs("h4",{className:"font-bold text-orange-800 text-sm uppercase",children:["Expirent bientt (",f.length,")"]})]}),o.jsx("div",{className:"space-y-3",children:f.map(d=>{const h=wo(d.date_fin);return o.jsx(Zx,{alerte:d,isExpired:!1,jours:h,renewing:a,onRenouveler:c},d.id)})})]})]})]})},Zx=({alerte:e,isExpired:t,jours:r,renewing:n,onRenouveler:i})=>{var a,s,l,c,u,f,d;return o.jsxs("div",{className:`border-l-4 rounded-lg p-4 transition-all hover:shadow-md ${t?"bg-white border-red-500 shadow-sm":"bg-white border-orange-500 shadow-sm"}`,children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h5",{className:"font-bold text-gray-800 text-sm mb-1",children:((s=(a=e.installation)==null?void 0:a.client)==null?void 0:s.raison_sociale)||"Client inconnu"}),o.jsx("p",{className:"text-xs text-gray-600 font-medium",children:((l=e.installation)==null?void 0:l.application_installee)||"Application inconnue"})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-gray-600",children:"Date d'expiration:"}),o.jsx("span",{className:`font-semibold ${t?"text-red-600":"text-orange-600"}`,children:lr(e.date_fin)})]}),o.jsx("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${t?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t?o.jsxs(o.Fragment,{children:[o.jsx(as,{size:12}),"EXPIR depuis ",r," jour",r>1?"s":""]}):o.jsxs(o.Fragment,{children:[o.jsx(Ms,{size:12}),r," jour",r>1?"s":""," restant",r>1?"s":""]})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(e.id),disabled:n===e.id,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-semibold transition-all ${t?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-400":"bg-orange-600 hover:bg-orange-700 text-white disabled:bg-orange-400"}`,children:n===e.id?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Renouvellement..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Zd,{size:14}),"Renouveler"]})}),((u=(c=e.installation)==null?void 0:c.client)==null?void 0:u.telephone)&&o.jsx("a",{href:`tel:${e.installation.client.telephone}`,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Appeler le client",children:o.jsx(jm,{size:16})}),((d=(f=e.installation)==null?void 0:f.client)==null?void 0:d.email)&&o.jsx("a",{href:`mailto:${e.installation.client.email}`,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Envoyer un email",children:o.jsx(Qy,{size:16})})]})]})},Mh=({title:e,subtitle:t})=>{const{toggleSidebar:r}=rr(),[n,i]=N.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:r,className:"lg:hidden text-gray-600 hover:text-gray-800",children:o.jsx(jE,{size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e}),t&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-lg",children:[o.jsx(ev,{size:20,className:"text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Rechercher...",className:"bg-transparent outline-none text-sm w-64"})]}),o.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(qu,{size:22}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]})}),n&&o.jsx(cM,{onClose:()=>i(!1)})]})},Rh=()=>{const{notifications:e,removeNotification:t}=rr(),r=a=>{switch(a){case"error":return o.jsx(pt,{className:"w-5 h-5"});case"success":return o.jsx(Nr,{className:"w-5 h-5"});case"warning":return o.jsx(as,{className:"w-5 h-5"});case"info":default:return o.jsx(YI,{className:"w-5 h-5"})}},n=a=>{switch(a){case"error":return"bg-red-50 border-red-200 text-red-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":default:return"bg-blue-50 border-blue-200 text-blue-800"}},i=a=>{switch(a){case"error":return"text-red-500";case"success":return"text-green-500";case"warning":return"text-yellow-500";case"info":default:return"text-blue-500"}};return o.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:e.map(a=>o.jsxs("div",{className:`flex gap-3 p-4 rounded-lg border ${n(a.type)} shadow-lg animate-slideIn`,children:[o.jsx("div",{className:`flex-shrink-0 ${i(a.type)}`,children:r(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[a.title&&o.jsx("h3",{className:"font-semibold mb-1",children:a.title}),o.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:a.message})]}),o.jsx("button",{onClick:()=>t(a.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fermer",children:o.jsx(Tn,{className:"w-5 h-5"})})]},a.id))})};function PE(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=PE(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ie(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=PE(e))&&(n&&(n+=" "),n+=t);return n}var uM=Array.isArray,nr=uM,dM=typeof cc=="object"&&cc&&cc.Object===Object&&cc,OE=dM,fM=OE,hM=typeof self=="object"&&self&&self.Object===Object&&self,pM=fM||hM||Function("return this")(),dn=pM,mM=dn,gM=mM.Symbol,tc=gM,eb=tc,TE=Object.prototype,yM=TE.hasOwnProperty,vM=TE.toString,so=eb?eb.toStringTag:void 0;function xM(e){var t=yM.call(e,so),r=e[so];try{e[so]=void 0;var n=!0}catch{}var i=vM.call(e);return n&&(t?e[so]=r:delete e[so]),i}var bM=xM,wM=Object.prototype,_M=wM.toString;function jM(e){return _M.call(e)}var SM=jM,tb=tc,NM=bM,EM=SM,AM="[object Null]",PM="[object Undefined]",rb=tb?tb.toStringTag:void 0;function OM(e){return e==null?e===void 0?PM:AM:rb&&rb in Object(e)?NM(e):EM(e)}var Rn=OM;function TM(e){return e!=null&&typeof e=="object"}var Dn=TM,CM=Rn,kM=Dn,$M="[object Symbol]";function IM(e){return typeof e=="symbol"||kM(e)&&CM(e)==$M}var Rs=IM,MM=nr,RM=Rs,DM=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,LM=/^\w*$/;function BM(e,t){if(MM(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||RM(e)?!0:LM.test(e)||!DM.test(e)||t!=null&&e in Object(t)}var tv=BM;function UM(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var xi=UM;const Ds=Fe(xi);var FM=Rn,qM=xi,zM="[object AsyncFunction]",WM="[object Function]",HM="[object GeneratorFunction]",VM="[object Proxy]";function GM(e){if(!qM(e))return!1;var t=FM(e);return t==WM||t==HM||t==zM||t==VM}var rv=GM;const Oe=Fe(rv);var KM=dn,XM=KM["__core-js_shared__"],YM=XM,Dh=YM,nb=function(){var e=/[^.]+$/.exec(Dh&&Dh.keys&&Dh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function JM(e){return!!nb&&nb in e}var QM=JM,ZM=Function.prototype,eR=ZM.toString;function tR(e){if(e!=null){try{return eR.call(e)}catch{}try{return e+""}catch{}}return""}var CE=tR,rR=rv,nR=QM,iR=xi,aR=CE,sR=/[\\^$.*+?()[\]{}|]/g,oR=/^\[object .+?Constructor\]$/,lR=Function.prototype,cR=Object.prototype,uR=lR.toString,dR=cR.hasOwnProperty,fR=RegExp("^"+uR.call(dR).replace(sR,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hR(e){if(!iR(e)||nR(e))return!1;var t=rR(e)?fR:oR;return t.test(aR(e))}var pR=hR;function mR(e,t){return e==null?void 0:e[t]}var gR=mR,yR=pR,vR=gR;function xR(e,t){var r=vR(e,t);return yR(r)?r:void 0}var oa=xR,bR=oa,wR=bR(Object,"create"),ef=wR,ib=ef;function _R(){this.__data__=ib?ib(null):{},this.size=0}var jR=_R;function SR(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var NR=SR,ER=ef,AR="__lodash_hash_undefined__",PR=Object.prototype,OR=PR.hasOwnProperty;function TR(e){var t=this.__data__;if(ER){var r=t[e];return r===AR?void 0:r}return OR.call(t,e)?t[e]:void 0}var CR=TR,kR=ef,$R=Object.prototype,IR=$R.hasOwnProperty;function MR(e){var t=this.__data__;return kR?t[e]!==void 0:IR.call(t,e)}var RR=MR,DR=ef,LR="__lodash_hash_undefined__";function BR(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=DR&&t===void 0?LR:t,this}var UR=BR,FR=jR,qR=NR,zR=CR,WR=RR,HR=UR;function Ls(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ls.prototype.clear=FR;Ls.prototype.delete=qR;Ls.prototype.get=zR;Ls.prototype.has=WR;Ls.prototype.set=HR;var VR=Ls;function GR(){this.__data__=[],this.size=0}var KR=GR;function XR(e,t){return e===t||e!==e&&t!==t}var nv=XR,YR=nv;function JR(e,t){for(var r=e.length;r--;)if(YR(e[r][0],t))return r;return-1}var tf=JR,QR=tf,ZR=Array.prototype,eD=ZR.splice;function tD(e){var t=this.__data__,r=QR(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():eD.call(t,r,1),--this.size,!0}var rD=tD,nD=tf;function iD(e){var t=this.__data__,r=nD(t,e);return r<0?void 0:t[r][1]}var aD=iD,sD=tf;function oD(e){return sD(this.__data__,e)>-1}var lD=oD,cD=tf;function uD(e,t){var r=this.__data__,n=cD(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var dD=uD,fD=KR,hD=rD,pD=aD,mD=lD,gD=dD;function Bs(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Bs.prototype.clear=fD;Bs.prototype.delete=hD;Bs.prototype.get=pD;Bs.prototype.has=mD;Bs.prototype.set=gD;var rf=Bs,yD=oa,vD=dn,xD=yD(vD,"Map"),iv=xD,ab=VR,bD=rf,wD=iv;function _D(){this.size=0,this.__data__={hash:new ab,map:new(wD||bD),string:new ab}}var jD=_D;function SD(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var ND=SD,ED=ND;function AD(e,t){var r=e.__data__;return ED(t)?r[typeof t=="string"?"string":"hash"]:r.map}var nf=AD,PD=nf;function OD(e){var t=PD(this,e).delete(e);return this.size-=t?1:0,t}var TD=OD,CD=nf;function kD(e){return CD(this,e).get(e)}var $D=kD,ID=nf;function MD(e){return ID(this,e).has(e)}var RD=MD,DD=nf;function LD(e,t){var r=DD(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var BD=LD,UD=jD,FD=TD,qD=$D,zD=RD,WD=BD;function Us(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Us.prototype.clear=UD;Us.prototype.delete=FD;Us.prototype.get=qD;Us.prototype.has=zD;Us.prototype.set=WD;var av=Us,kE=av,HD="Expected a function";function sv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(HD);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(sv.Cache||kE),r}sv.Cache=kE;var $E=sv;const VD=Fe($E);var GD=$E,KD=500;function XD(e){var t=GD(e,function(n){return r.size===KD&&r.clear(),n}),r=t.cache;return t}var YD=XD,JD=YD,QD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZD=/\\(\\)?/g,e3=JD(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(QD,function(r,n,i,a){t.push(i?a.replace(ZD,"$1"):n||r)}),t}),t3=e3;function r3(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var ov=r3,sb=tc,n3=ov,i3=nr,a3=Rs,ob=sb?sb.prototype:void 0,lb=ob?ob.toString:void 0;function IE(e){if(typeof e=="string")return e;if(i3(e))return n3(e,IE)+"";if(a3(e))return lb?lb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var s3=IE,o3=s3;function l3(e){return e==null?"":o3(e)}var ME=l3,c3=nr,u3=tv,d3=t3,f3=ME;function h3(e,t){return c3(e)?e:u3(e,t)?[e]:d3(f3(e))}var RE=h3,p3=Rs;function m3(e){if(typeof e=="string"||p3(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var af=m3,g3=RE,y3=af;function v3(e,t){t=g3(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[y3(t[r++])];return r&&r==n?e:void 0}var lv=v3,x3=lv;function b3(e,t,r){var n=e==null?void 0:x3(e,t);return n===void 0?r:n}var DE=b3;const Kr=Fe(DE);function w3(e){return e==null}var _3=w3;const ke=Fe(_3);var j3=Rn,S3=nr,N3=Dn,E3="[object String]";function A3(e){return typeof e=="string"||!S3(e)&&N3(e)&&j3(e)==E3}var P3=A3;const rc=Fe(P3);var LE={exports:{}},Le={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=Symbol.for("react.element"),uv=Symbol.for("react.portal"),sf=Symbol.for("react.fragment"),of=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),uf=Symbol.for("react.context"),O3=Symbol.for("react.server_context"),df=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),hf=Symbol.for("react.suspense_list"),pf=Symbol.for("react.memo"),mf=Symbol.for("react.lazy"),T3=Symbol.for("react.offscreen"),BE;BE=Symbol.for("react.module.reference");function Ir(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case cv:switch(e=e.type,e){case sf:case lf:case of:case ff:case hf:return e;default:switch(e=e&&e.$$typeof,e){case O3:case uf:case df:case mf:case pf:case cf:return e;default:return t}}case uv:return t}}}Le.ContextConsumer=uf;Le.ContextProvider=cf;Le.Element=cv;Le.ForwardRef=df;Le.Fragment=sf;Le.Lazy=mf;Le.Memo=pf;Le.Portal=uv;Le.Profiler=lf;Le.StrictMode=of;Le.Suspense=ff;Le.SuspenseList=hf;Le.isAsyncMode=function(){return!1};Le.isConcurrentMode=function(){return!1};Le.isContextConsumer=function(e){return Ir(e)===uf};Le.isContextProvider=function(e){return Ir(e)===cf};Le.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===cv};Le.isForwardRef=function(e){return Ir(e)===df};Le.isFragment=function(e){return Ir(e)===sf};Le.isLazy=function(e){return Ir(e)===mf};Le.isMemo=function(e){return Ir(e)===pf};Le.isPortal=function(e){return Ir(e)===uv};Le.isProfiler=function(e){return Ir(e)===lf};Le.isStrictMode=function(e){return Ir(e)===of};Le.isSuspense=function(e){return Ir(e)===ff};Le.isSuspenseList=function(e){return Ir(e)===hf};Le.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===sf||e===lf||e===of||e===ff||e===hf||e===T3||typeof e=="object"&&e!==null&&(e.$$typeof===mf||e.$$typeof===pf||e.$$typeof===cf||e.$$typeof===uf||e.$$typeof===df||e.$$typeof===BE||e.getModuleId!==void 0)};Le.typeOf=Ir;LE.exports=Le;var C3=LE.exports,k3=Rn,$3=Dn,I3="[object Number]";function M3(e){return typeof e=="number"||$3(e)&&k3(e)==I3}var UE=M3;const R3=Fe(UE);var D3=UE;function L3(e){return D3(e)&&e!=+e}var B3=L3;const nc=Fe(B3);var Pr=function(t){return t===0?0:t>0?1:-1},qi=function(t){return rc(t)&&t.indexOf("%")===t.length-1},de=function(t){return R3(t)&&!nc(t)},bt=function(t){return de(t)||rc(t)},U3=0,gf=function(t){var r=++U3;return"".concat(t||"").concat(r)},Yt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!de(t)&&!rc(t))return n;var a;if(qi(t)){var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return nc(a)&&(a=n),i&&a>r&&(a=r),a},ja=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},F3=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},cb=function(t,r){return de(t)&&de(r)?function(n){return t+n*(r-t)}:function(){return r}};function Nm(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Kr(n,t))===r})}function Em(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Am(e){"@babel/helpers - typeof";return Am=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Am(e)}var q3=["viewBox","children"],z3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ub=["points","pathLength"],Lh={svg:q3,polygon:ub,polyline:ub},dv=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],zu=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!Ds(n))return null;var i={};return Object.keys(n).forEach(function(a){dv.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},W3=function(t,r,n){return function(i){return t(r,n,i),null}},yf=function(t,r,n){if(!Ds(t)||Am(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];dv.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=W3(s,r,n))}),i},H3=["children"],V3=["children"];function db(e,t){if(e==null)return{};var r=G3(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function G3(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var fb={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},jn=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},hb=null,Bh=null,fv=function e(t){if(t===hb&&Array.isArray(Bh))return Bh;var r=[];return N.Children.forEach(t,function(n){ke(n)||(C3.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Bh=r,hb=t,r};function on(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return jn(i)}):n=[jn(t)],fv(e).forEach(function(i){var a=Kr(i,"type.displayName")||Kr(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function xr(e,t){var r=on(e,t);return r&&r[0]}var pb=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!de(n)||n<=0||!de(i)||i<=0)},K3=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],X3=function(t){return t&&t.type&&rc(t.type)&&K3.indexOf(t.type)>=0},Y3=function(t,r,n,i){var a,s=(a=Lh==null?void 0:Lh[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!Oe(t)&&(i&&s.includes(r)||z3.includes(r))||n&&dv.includes(r)},Pe=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(N.isValidElement(t)&&(i=t.props),!Ds(i))return null;var a={};return Object.keys(i).forEach(function(s){var l;Y3((l=i)===null||l===void 0?void 0:l[s],s,r,n)&&(a[s]=i[s])}),a},Pm=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return mb(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=t[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!mb(a,s))return!1}return!0},mb=function(t,r){if(ke(t)&&ke(r))return!0;if(!ke(t)&&!ke(r)){var n=t.props||{},i=n.children,a=db(n,H3),s=r.props||{},l=s.children,c=db(s,V3);return i&&l?Em(a,c)&&Pm(i,l):!i&&!l?Em(a,c):!1}return!1},gb=function(t,r){var n=[],i={};return fv(t).forEach(function(a,s){if(X3(a))n.push(a);else if(a){var l=jn(a.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!i[l])){var d=u(a,l,s);n.push(d),i[l]=!0}}}),n},J3=function(t){var r=t&&t.type;return r&&fb[r]?fb[r]:null},Q3=function(t,r){return fv(r).indexOf(t)},Z3=["children","width","height","viewBox","className","style","title","desc"];function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Om.apply(this,arguments)}function eL(e,t){if(e==null)return{};var r=tL(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tm(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,a=e.className,s=e.style,l=e.title,c=e.desc,u=eL(e,Z3),f=i||{width:r,height:n,x:0,y:0},d=Ie("recharts-surface",a);return z.createElement("svg",Om({},Pe(u,!0,"svg"),{className:d,width:r,height:n,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),z.createElement("title",null,l),z.createElement("desc",null,c),t)}var rL=["children","className"];function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cm.apply(this,arguments)}function nL(e,t){if(e==null)return{};var r=iL(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lt=z.forwardRef(function(e,t){var r=e.children,n=e.className,i=nL(e,rL),a=Ie("recharts-layer",n);return z.createElement("g",Cm({className:a},Pe(i,!0),{ref:t}),r)}),Sn=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function aL(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}var sL=aL,oL=sL;function lL(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:oL(e,t,r)}var cL=lL,uL="\\ud800-\\udfff",dL="\\u0300-\\u036f",fL="\\ufe20-\\ufe2f",hL="\\u20d0-\\u20ff",pL=dL+fL+hL,mL="\\ufe0e\\ufe0f",gL="\\u200d",yL=RegExp("["+gL+uL+pL+mL+"]");function vL(e){return yL.test(e)}var FE=vL;function xL(e){return e.split("")}var bL=xL,qE="\\ud800-\\udfff",wL="\\u0300-\\u036f",_L="\\ufe20-\\ufe2f",jL="\\u20d0-\\u20ff",SL=wL+_L+jL,NL="\\ufe0e\\ufe0f",EL="["+qE+"]",km="["+SL+"]",$m="\\ud83c[\\udffb-\\udfff]",AL="(?:"+km+"|"+$m+")",zE="[^"+qE+"]",WE="(?:\\ud83c[\\udde6-\\uddff]){2}",HE="[\\ud800-\\udbff][\\udc00-\\udfff]",PL="\\u200d",VE=AL+"?",GE="["+NL+"]?",OL="(?:"+PL+"(?:"+[zE,WE,HE].join("|")+")"+GE+VE+")*",TL=GE+VE+OL,CL="(?:"+[zE+km+"?",km,WE,HE,EL].join("|")+")",kL=RegExp($m+"(?="+$m+")|"+CL+TL,"g");function $L(e){return e.match(kL)||[]}var IL=$L,ML=bL,RL=FE,DL=IL;function LL(e){return RL(e)?DL(e):ML(e)}var BL=LL,UL=cL,FL=FE,qL=BL,zL=ME;function WL(e){return function(t){t=zL(t);var r=FL(t)?qL(t):void 0,n=r?r[0]:t.charAt(0),i=r?UL(r,1).join(""):t.slice(1);return n[e]()+i}}var HL=WL,VL=HL,GL=VL("toUpperCase"),KL=GL;const vf=Fe(KL);function He(e){return function(){return e}}const KE=Math.cos,Wu=Math.sin,Jr=Math.sqrt,Hu=Math.PI,xf=2*Hu,Im=Math.PI,Mm=2*Im,ki=1e-6,XL=Mm-ki;function XE(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function YL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return XE;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class JL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?XE:YL(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=n-t,u=i-r,f=s-t,d=l-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>ki)if(!(Math.abs(d*c-u*f)>ki)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-s,b=i-l,v=c*c+u*u,m=p*p+b*b,y=Math.sqrt(v),x=Math.sqrt(h),g=a*Math.tan((Im-Math.acos((v+h-m)/(2*y*x)))/2),S=g/x,w=g/y;Math.abs(S-1)>ki&&this._append`L${t+S*f},${r+S*d}`,this._append`A${a},${a},0,0,${+(d*p>f*b)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=t+l,f=r+c,d=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>ki||Math.abs(this._y1-f)>ki)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%Mm+Mm),h>XL?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>ki&&this._append`A${n},${n},0,${+(h>=Im)},${d},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function hv(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new JL(t)}function pv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function YE(e){this._context=e}YE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function bf(e){return new YE(e)}function JE(e){return e[0]}function QE(e){return e[1]}function ZE(e,t){var r=He(!0),n=null,i=bf,a=null,s=hv(l);e=typeof e=="function"?e:e===void 0?JE:He(e),t=typeof t=="function"?t:t===void 0?QE:He(t);function l(c){var u,f=(c=pv(c)).length,d,h=!1,p;for(n==null&&(a=i(p=s())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(d,u,c),+t(d,u,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:He(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:He(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:He(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),l):n},l}function Rc(e,t,r){var n=null,i=He(!0),a=null,s=bf,l=null,c=hv(u);e=typeof e=="function"?e:e===void 0?JE:He(+e),t=typeof t=="function"?t:He(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?QE:He(+r);function u(d){var h,p,b,v=(d=pv(d)).length,m,y=!1,x,g=new Array(v),S=new Array(v);for(a==null&&(l=s(x=c())),h=0;h<=v;++h){if(!(h<v&&i(m=d[h],h,d))===y)if(y=!y)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=h-1;b>=p;--b)l.point(g[b],S[b]);l.lineEnd(),l.areaEnd()}y&&(g[h]=+e(m,h,d),S[h]=+t(m,h,d),l.point(n?+n(m,h,d):g[h],r?+r(m,h,d):S[h]))}if(x)return l=null,x+""||null}function f(){return ZE().defined(i).curve(s).context(a)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:He(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:He(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:He(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:He(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:He(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:He(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:He(!!d),u):i},u.curve=function(d){return arguments.length?(s=d,a!=null&&(l=s(a)),u):s},u.context=function(d){return arguments.length?(d==null?a=l=null:l=s(a=d),u):a},u}class eA{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function QL(e){return new eA(e,!0)}function ZL(e){return new eA(e,!1)}const mv={draw(e,t){const r=Jr(t/Hu);e.moveTo(r,0),e.arc(0,0,r,0,xf)}},e4={draw(e,t){const r=Jr(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},tA=Jr(1/3),t4=tA*2,r4={draw(e,t){const r=Jr(t/t4),n=r*tA;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},n4={draw(e,t){const r=Jr(t),n=-r/2;e.rect(n,n,r,r)}},i4=.8908130915292852,rA=Wu(Hu/10)/Wu(7*Hu/10),a4=Wu(xf/10)*rA,s4=-KE(xf/10)*rA,o4={draw(e,t){const r=Jr(t*i4),n=a4*r,i=s4*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=xf*a/5,l=KE(s),c=Wu(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*i,c*n+l*i)}e.closePath()}},Uh=Jr(3),l4={draw(e,t){const r=-Jr(t/(Uh*3));e.moveTo(0,r*2),e.lineTo(-Uh*r,-r),e.lineTo(Uh*r,-r),e.closePath()}},gr=-.5,yr=Jr(3)/2,Rm=1/Jr(12),c4=(Rm/2+1)*3,u4={draw(e,t){const r=Jr(t/c4),n=r/2,i=r*Rm,a=n,s=r*Rm+r,l=-a,c=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(l,c),e.lineTo(gr*n-yr*i,yr*n+gr*i),e.lineTo(gr*a-yr*s,yr*a+gr*s),e.lineTo(gr*l-yr*c,yr*l+gr*c),e.lineTo(gr*n+yr*i,gr*i-yr*n),e.lineTo(gr*a+yr*s,gr*s-yr*a),e.lineTo(gr*l+yr*c,gr*c-yr*l),e.closePath()}};function d4(e,t){let r=null,n=hv(i);e=typeof e=="function"?e:He(e||mv),t=typeof t=="function"?t:He(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:He(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:He(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Vu(){}function Gu(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function nA(e){this._context=e}nA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Gu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Gu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function f4(e){return new nA(e)}function iA(e){this._context=e}iA.prototype={areaStart:Vu,areaEnd:Vu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Gu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h4(e){return new iA(e)}function aA(e){this._context=e}aA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Gu(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p4(e){return new aA(e)}function sA(e){this._context=e}sA.prototype={areaStart:Vu,areaEnd:Vu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function m4(e){return new sA(e)}function yb(e){return e<0?-1:1}function vb(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),l=(a*i+s*n)/(n+i);return(yb(a)+yb(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function xb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Fh(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-n)/3;e._context.bezierCurveTo(n+l,i+l*t,a-l,s-l*r,a,s)}function Ku(e){this._context=e}Ku.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Fh(this,this._t0,xb(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Fh(this,xb(this,r=vb(this,e,t)),r);break;default:Fh(this,this._t0,r=vb(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function oA(e){this._context=new lA(e)}(oA.prototype=Object.create(Ku.prototype)).point=function(e,t){Ku.prototype.point.call(this,t,e)};function lA(e){this._context=e}lA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function g4(e){return new Ku(e)}function y4(e){return new oA(e)}function cA(e){this._context=e}cA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=bb(e),i=bb(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function bb(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function v4(e){return new cA(e)}function wf(e,t){this._context=e,this._t=t}wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function x4(e){return new wf(e,.5)}function b4(e){return new wf(e,0)}function w4(e){return new wf(e,1)}function ss(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,l=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Dm(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function _4(e,t){return e[t]}function j4(e){const t=[];return t.key=e,t}function S4(){var e=He([]),t=Dm,r=ss,n=_4;function i(a){var s=Array.from(e.apply(this,arguments),j4),l,c=s.length,u=-1,f;for(const d of a)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(d,s[l].key,u,a)]).data=d;for(l=0,f=pv(t(s));l<c;++l)s[f[l]].index=l;return r(s,f),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:He(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:He(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?Dm:typeof a=="function"?a:He(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??ss,i):r},i}function N4(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}ss(e,t)}}function E4(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,l=0;s<i;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}ss(e,t)}}function A4(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var l=0,c=0,u=0;l<s;++l){for(var f=e[t[l]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,b=0;b<l;++b){var v=e[t[b]],m=v[n][1]||0,y=v[n-1][1]||0;p+=m-y}c+=d,u+=p*d}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,ss(e,t)}}function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}var P4=["type","size","sizeType"];function Lm(){return Lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lm.apply(this,arguments)}function wb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _b(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wb(Object(r),!0).forEach(function(n){O4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O4(e,t,r){return t=T4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T4(e){var t=C4(e,"string");return pl(t)=="symbol"?t:t+""}function C4(e,t){if(pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k4(e,t){if(e==null)return{};var r=$4(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var uA={symbolCircle:mv,symbolCross:e4,symbolDiamond:r4,symbolSquare:n4,symbolStar:o4,symbolTriangle:l4,symbolWye:u4},I4=Math.PI/180,M4=function(t){var r="symbol".concat(vf(t));return uA[r]||mv},R4=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*I4;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},D4=function(t,r){uA["symbol".concat(vf(t))]=r},gv=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,a=i===void 0?64:i,s=t.sizeType,l=s===void 0?"area":s,c=k4(t,P4),u=_b(_b({},c),{},{type:n,size:a,sizeType:l}),f=function(){var m=M4(n),y=d4().type(m).size(R4(a,l,n));return y()},d=u.className,h=u.cx,p=u.cy,b=Pe(u,!0);return h===+h&&p===+p&&a===+a?z.createElement("path",Lm({},b,{className:Ie("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};gv.registerSymbol=D4;function os(e){"@babel/helpers - typeof";return os=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},os(e)}function Bm(){return Bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bm.apply(this,arguments)}function jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function L4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jb(Object(r),!0).forEach(function(n){ml(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U4(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fA(n.key),n)}}function F4(e,t,r){return t&&U4(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function q4(e,t,r){return t=Xu(t),z4(e,dA()?Reflect.construct(t,r||[],Xu(e).constructor):t.apply(e,r))}function z4(e,t){if(t&&(os(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W4(e)}function W4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(dA=function(){return!!e})()}function Xu(e){return Xu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Xu(e)}function H4(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Um(e,t)}function Um(e,t){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Um(e,t)}function ml(e,t,r){return t=fA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fA(e){var t=V4(e,"string");return os(t)=="symbol"?t:t+""}function V4(e,t){if(os(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(os(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vr=32,yv=function(e){function t(){return B4(this,t),q4(this,t,arguments)}return H4(t,e),F4(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=vr/2,s=vr/6,l=vr/3,c=n.inactive?i:n.color;if(n.type==="plainline")return z.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:vr,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return z.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(vr,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return z.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(vr/8,"h").concat(vr,"v").concat(vr*3/4,"h").concat(-vr,"z"),className:"recharts-legend-icon"});if(z.isValidElement(n.legendIcon)){var u=L4({},n);return delete u.legendIcon,z.cloneElement(n.legendIcon,u)}return z.createElement(gv,{fill:c,cx:a,cy:a,size:vr,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:vr,height:vr},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,b){var v=p.formatter||c,m=Ie(ml(ml({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",p.inactive));if(p.type==="none")return null;var y=Oe(p.value)?null:p.value;Sn(!Oe(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var x=p.inactive?u:p.color;return z.createElement("li",Bm({className:m,style:d,key:"legend-item-".concat(b)},yf(n.props,p,b)),z.createElement(Tm,{width:s,height:s,viewBox:f,style:h},n.renderIcon(p)),z.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},v?v(y,p,b):y))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return z.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);ml(yv,"displayName","Legend");ml(yv,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var G4=rf;function K4(){this.__data__=new G4,this.size=0}var X4=K4;function Y4(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var J4=Y4;function Q4(e){return this.__data__.get(e)}var Z4=Q4;function e5(e){return this.__data__.has(e)}var t5=e5,r5=rf,n5=iv,i5=av,a5=200;function s5(e,t){var r=this.__data__;if(r instanceof r5){var n=r.__data__;if(!n5||n.length<a5-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new i5(n)}return r.set(e,t),this.size=r.size,this}var o5=s5,l5=rf,c5=X4,u5=J4,d5=Z4,f5=t5,h5=o5;function Fs(e){var t=this.__data__=new l5(e);this.size=t.size}Fs.prototype.clear=c5;Fs.prototype.delete=u5;Fs.prototype.get=d5;Fs.prototype.has=f5;Fs.prototype.set=h5;var hA=Fs,p5="__lodash_hash_undefined__";function m5(e){return this.__data__.set(e,p5),this}var g5=m5;function y5(e){return this.__data__.has(e)}var v5=y5,x5=av,b5=g5,w5=v5;function Yu(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new x5;++t<r;)this.add(e[t])}Yu.prototype.add=Yu.prototype.push=b5;Yu.prototype.has=w5;var pA=Yu;function _5(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var mA=_5;function j5(e,t){return e.has(t)}var gA=j5,S5=pA,N5=mA,E5=gA,A5=1,P5=2;function O5(e,t,r,n,i,a){var s=r&A5,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),f=a.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&P5?new S5:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var b=e[d],v=t[d];if(n)var m=s?n(v,b,d,t,e,a):n(b,v,d,e,t,a);if(m!==void 0){if(m)continue;h=!1;break}if(p){if(!N5(t,function(y,x){if(!E5(p,x)&&(b===y||i(b,y,r,n,a)))return p.push(x)})){h=!1;break}}else if(!(b===v||i(b,v,r,n,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var yA=O5,T5=dn,C5=T5.Uint8Array,k5=C5;function $5(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var I5=$5;function M5(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var vv=M5,Sb=tc,Nb=k5,R5=nv,D5=yA,L5=I5,B5=vv,U5=1,F5=2,q5="[object Boolean]",z5="[object Date]",W5="[object Error]",H5="[object Map]",V5="[object Number]",G5="[object RegExp]",K5="[object Set]",X5="[object String]",Y5="[object Symbol]",J5="[object ArrayBuffer]",Q5="[object DataView]",Eb=Sb?Sb.prototype:void 0,qh=Eb?Eb.valueOf:void 0;function Z5(e,t,r,n,i,a,s){switch(r){case Q5:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case J5:return!(e.byteLength!=t.byteLength||!a(new Nb(e),new Nb(t)));case q5:case z5:case V5:return R5(+e,+t);case W5:return e.name==t.name&&e.message==t.message;case G5:case X5:return e==t+"";case H5:var l=L5;case K5:var c=n&U5;if(l||(l=B5),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=F5,s.set(e,t);var f=D5(l(e),l(t),n,i,a,s);return s.delete(e),f;case Y5:if(qh)return qh.call(e)==qh.call(t)}return!1}var e6=Z5;function t6(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var vA=t6,r6=vA,n6=nr;function i6(e,t,r){var n=t(e);return n6(e)?n:r6(n,r(e))}var a6=i6;function s6(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}var o6=s6;function l6(){return[]}var c6=l6,u6=o6,d6=c6,f6=Object.prototype,h6=f6.propertyIsEnumerable,Ab=Object.getOwnPropertySymbols,p6=Ab?function(e){return e==null?[]:(e=Object(e),u6(Ab(e),function(t){return h6.call(e,t)}))}:d6,m6=p6;function g6(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var y6=g6,v6=Rn,x6=Dn,b6="[object Arguments]";function w6(e){return x6(e)&&v6(e)==b6}var _6=w6,Pb=_6,j6=Dn,xA=Object.prototype,S6=xA.hasOwnProperty,N6=xA.propertyIsEnumerable,E6=Pb(function(){return arguments}())?Pb:function(e){return j6(e)&&S6.call(e,"callee")&&!N6.call(e,"callee")},xv=E6,Ju={exports:{}};function A6(){return!1}var P6=A6;Ju.exports;(function(e,t){var r=dn,n=P6,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Ju,Ju.exports);var bA=Ju.exports,O6=9007199254740991,T6=/^(?:0|[1-9]\d*)$/;function C6(e,t){var r=typeof e;return t=t??O6,!!t&&(r=="number"||r!="symbol"&&T6.test(e))&&e>-1&&e%1==0&&e<t}var bv=C6,k6=9007199254740991;function $6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=k6}var wv=$6,I6=Rn,M6=wv,R6=Dn,D6="[object Arguments]",L6="[object Array]",B6="[object Boolean]",U6="[object Date]",F6="[object Error]",q6="[object Function]",z6="[object Map]",W6="[object Number]",H6="[object Object]",V6="[object RegExp]",G6="[object Set]",K6="[object String]",X6="[object WeakMap]",Y6="[object ArrayBuffer]",J6="[object DataView]",Q6="[object Float32Array]",Z6="[object Float64Array]",eB="[object Int8Array]",tB="[object Int16Array]",rB="[object Int32Array]",nB="[object Uint8Array]",iB="[object Uint8ClampedArray]",aB="[object Uint16Array]",sB="[object Uint32Array]",Xe={};Xe[Q6]=Xe[Z6]=Xe[eB]=Xe[tB]=Xe[rB]=Xe[nB]=Xe[iB]=Xe[aB]=Xe[sB]=!0;Xe[D6]=Xe[L6]=Xe[Y6]=Xe[B6]=Xe[J6]=Xe[U6]=Xe[F6]=Xe[q6]=Xe[z6]=Xe[W6]=Xe[H6]=Xe[V6]=Xe[G6]=Xe[K6]=Xe[X6]=!1;function oB(e){return R6(e)&&M6(e.length)&&!!Xe[I6(e)]}var lB=oB;function cB(e){return function(t){return e(t)}}var wA=cB,Qu={exports:{}};Qu.exports;(function(e,t){var r=OE,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(Qu,Qu.exports);var uB=Qu.exports,dB=lB,fB=wA,Ob=uB,Tb=Ob&&Ob.isTypedArray,hB=Tb?fB(Tb):dB,_A=hB,pB=y6,mB=xv,gB=nr,yB=bA,vB=bv,xB=_A,bB=Object.prototype,wB=bB.hasOwnProperty;function _B(e,t){var r=gB(e),n=!r&&mB(e),i=!r&&!n&&yB(e),a=!r&&!n&&!i&&xB(e),s=r||n||i||a,l=s?pB(e.length,String):[],c=l.length;for(var u in e)(t||wB.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||vB(u,c)))&&l.push(u);return l}var jB=_B,SB=Object.prototype;function NB(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||SB;return e===r}var EB=NB;function AB(e,t){return function(r){return e(t(r))}}var jA=AB,PB=jA,OB=PB(Object.keys,Object),TB=OB,CB=EB,kB=TB,$B=Object.prototype,IB=$B.hasOwnProperty;function MB(e){if(!CB(e))return kB(e);var t=[];for(var r in Object(e))IB.call(e,r)&&r!="constructor"&&t.push(r);return t}var RB=MB,DB=rv,LB=wv;function BB(e){return e!=null&&LB(e.length)&&!DB(e)}var _f=BB,UB=jB,FB=RB,qB=_f;function zB(e){return qB(e)?UB(e):FB(e)}var _v=zB,WB=a6,HB=m6,VB=_v;function GB(e){return WB(e,VB,HB)}var KB=GB,Cb=KB,XB=1,YB=Object.prototype,JB=YB.hasOwnProperty;function QB(e,t,r,n,i,a){var s=r&XB,l=Cb(e),c=l.length,u=Cb(t),f=u.length;if(c!=f&&!s)return!1;for(var d=c;d--;){var h=l[d];if(!(s?h in t:JB.call(t,h)))return!1}var p=a.get(e),b=a.get(t);if(p&&b)return p==t&&b==e;var v=!0;a.set(e,t),a.set(t,e);for(var m=s;++d<c;){h=l[d];var y=e[h],x=t[h];if(n)var g=s?n(x,y,h,t,e,a):n(y,x,h,e,t,a);if(!(g===void 0?y===x||i(y,x,r,n,a):g)){v=!1;break}m||(m=h=="constructor")}if(v&&!m){var S=e.constructor,w=t.constructor;S!=w&&"constructor"in e&&"constructor"in t&&!(typeof S=="function"&&S instanceof S&&typeof w=="function"&&w instanceof w)&&(v=!1)}return a.delete(e),a.delete(t),v}var ZB=QB,e8=oa,t8=dn,r8=e8(t8,"DataView"),n8=r8,i8=oa,a8=dn,s8=i8(a8,"Promise"),o8=s8,l8=oa,c8=dn,u8=l8(c8,"Set"),SA=u8,d8=oa,f8=dn,h8=d8(f8,"WeakMap"),p8=h8,Fm=n8,qm=iv,zm=o8,Wm=SA,Hm=p8,NA=Rn,qs=CE,kb="[object Map]",m8="[object Object]",$b="[object Promise]",Ib="[object Set]",Mb="[object WeakMap]",Rb="[object DataView]",g8=qs(Fm),y8=qs(qm),v8=qs(zm),x8=qs(Wm),b8=qs(Hm),$i=NA;(Fm&&$i(new Fm(new ArrayBuffer(1)))!=Rb||qm&&$i(new qm)!=kb||zm&&$i(zm.resolve())!=$b||Wm&&$i(new Wm)!=Ib||Hm&&$i(new Hm)!=Mb)&&($i=function(e){var t=NA(e),r=t==m8?e.constructor:void 0,n=r?qs(r):"";if(n)switch(n){case g8:return Rb;case y8:return kb;case v8:return $b;case x8:return Ib;case b8:return Mb}return t});var w8=$i,zh=hA,_8=yA,j8=e6,S8=ZB,Db=w8,Lb=nr,Bb=bA,N8=_A,E8=1,Ub="[object Arguments]",Fb="[object Array]",Dc="[object Object]",A8=Object.prototype,qb=A8.hasOwnProperty;function P8(e,t,r,n,i,a){var s=Lb(e),l=Lb(t),c=s?Fb:Db(e),u=l?Fb:Db(t);c=c==Ub?Dc:c,u=u==Ub?Dc:u;var f=c==Dc,d=u==Dc,h=c==u;if(h&&Bb(e)){if(!Bb(t))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new zh),s||N8(e)?_8(e,t,r,n,i,a):j8(e,t,c,r,n,i,a);if(!(r&E8)){var p=f&&qb.call(e,"__wrapped__"),b=d&&qb.call(t,"__wrapped__");if(p||b){var v=p?e.value():e,m=b?t.value():t;return a||(a=new zh),i(v,m,r,n,a)}}return h?(a||(a=new zh),S8(e,t,r,n,i,a)):!1}var O8=P8,T8=O8,zb=Dn;function EA(e,t,r,n,i){return e===t?!0:e==null||t==null||!zb(e)&&!zb(t)?e!==e&&t!==t:T8(e,t,r,n,EA,i)}var jv=EA,C8=hA,k8=jv,$8=1,I8=2;function M8(e,t,r,n){var i=r.length,a=i,s=!n;if(e==null)return!a;for(e=Object(e);i--;){var l=r[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=r[i];var c=l[0],u=e[c],f=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new C8;if(n)var h=n(u,f,c,e,t,d);if(!(h===void 0?k8(f,u,$8|I8,n,d):h))return!1}}return!0}var R8=M8,D8=xi;function L8(e){return e===e&&!D8(e)}var AA=L8,B8=AA,U8=_v;function F8(e){for(var t=U8(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,B8(i)]}return t}var q8=F8;function z8(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var PA=z8,W8=R8,H8=q8,V8=PA;function G8(e){var t=H8(e);return t.length==1&&t[0][2]?V8(t[0][0],t[0][1]):function(r){return r===e||W8(r,e,t)}}var K8=G8;function X8(e,t){return e!=null&&t in Object(e)}var Y8=X8,J8=RE,Q8=xv,Z8=nr,eU=bv,tU=wv,rU=af;function nU(e,t,r){t=J8(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var s=rU(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&tU(i)&&eU(s,i)&&(Z8(e)||Q8(e)))}var iU=nU,aU=Y8,sU=iU;function oU(e,t){return e!=null&&sU(e,t,aU)}var lU=oU,cU=jv,uU=DE,dU=lU,fU=tv,hU=AA,pU=PA,mU=af,gU=1,yU=2;function vU(e,t){return fU(e)&&hU(t)?pU(mU(e),t):function(r){var n=uU(r,e);return n===void 0&&n===t?dU(r,e):cU(t,n,gU|yU)}}var xU=vU;function bU(e){return e}var zs=bU;function wU(e){return function(t){return t==null?void 0:t[e]}}var _U=wU,jU=lv;function SU(e){return function(t){return jU(t,e)}}var NU=SU,EU=_U,AU=NU,PU=tv,OU=af;function TU(e){return PU(e)?EU(OU(e)):AU(e)}var CU=TU,kU=K8,$U=xU,IU=zs,MU=nr,RU=CU;function DU(e){return typeof e=="function"?e:e==null?IU:typeof e=="object"?MU(e)?$U(e[0],e[1]):kU(e):RU(e)}var bi=DU;function LU(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var BU=LU;function UU(e){return e!==e}var FU=UU;function qU(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var zU=qU,WU=BU,HU=FU,VU=zU;function GU(e,t,r){return t===t?VU(e,t,r):WU(e,HU,r)}var KU=GU,XU=KU;function YU(e,t){var r=e==null?0:e.length;return!!r&&XU(e,t,0)>-1}var JU=YU;function QU(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var ZU=QU;function eF(){}var tF=eF,Wh=SA,rF=tF,nF=vv,iF=1/0,aF=Wh&&1/nF(new Wh([,-0]))[1]==iF?function(e){return new Wh(e)}:rF,sF=aF,oF=pA,lF=JU,cF=ZU,uF=gA,dF=sF,fF=vv,hF=200;function pF(e,t,r){var n=-1,i=lF,a=e.length,s=!0,l=[],c=l;if(r)s=!1,i=cF;else if(a>=hF){var u=t?null:dF(e);if(u)return fF(u);s=!1,i=uF,c=new oF}else c=t?[]:l;e:for(;++n<a;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,s&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else i(c,d,r)||(c!==l&&c.push(d),l.push(f))}return l}var mF=pF,gF=bi,yF=mF;function vF(e,t){return e&&e.length?yF(e,gF(t)):[]}var xF=vF;const Wb=Fe(xF);function OA(e,t,r){return t===!0?Wb(e,r):Oe(t)?Wb(e,t):e}function ls(e){"@babel/helpers - typeof";return ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ls(e)}var bF=["ref"];function Hb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hb(Object(r),!0).forEach(function(n){jf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CA(n.key),n)}}function _F(e,t,r){return t&&Vb(e.prototype,t),r&&Vb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jF(e,t,r){return t=Zu(t),SF(e,TA()?Reflect.construct(t,r||[],Zu(e).constructor):t.apply(e,r))}function SF(e,t){if(t&&(ls(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NF(e)}function NF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(TA=function(){return!!e})()}function Zu(e){return Zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Zu(e)}function EF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vm(e,t)}function Vm(e,t){return Vm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vm(e,t)}function jf(e,t,r){return t=CA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CA(e){var t=AF(e,"string");return ls(t)=="symbol"?t:t+""}function AF(e,t){if(ls(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function PF(e,t){if(e==null)return{};var r=OF(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function OF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TF(e){return e.value}function CF(e,t){if(z.isValidElement(e))return z.cloneElement(e,t);if(typeof e=="function")return z.createElement(e,t);t.ref;var r=PF(t,bF);return z.createElement(yv,r)}var Gb=1,Ka=function(e){function t(){var r;wF(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=jF(this,t,[].concat(i)),jf(r,"lastBoundingBox",{width:-1,height:-1}),r}return EF(t,e),_F(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Gb||Math.abs(i.height-this.lastBoundingBox.height)>Gb)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?fn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,f=i.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();h={top:((f||0)-b.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return fn(fn({},d),h)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,d=fn(fn({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return z.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},CF(a,fn(fn({},this.props),{},{payload:OA(f,u,TF)})))}}],[{key:"getWithHeight",value:function(n,i){var a=fn(fn({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&de(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])}(N.PureComponent);jf(Ka,"displayName","Legend");jf(Ka,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Kb=tc,kF=xv,$F=nr,Xb=Kb?Kb.isConcatSpreadable:void 0;function IF(e){return $F(e)||kF(e)||!!(Xb&&e&&e[Xb])}var MF=IF,RF=vA,DF=MF;function kA(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=DF),i||(i=[]);++a<s;){var l=e[a];t>0&&r(l)?t>1?kA(l,t-1,r,n,i):RF(i,l):n||(i[i.length]=l)}return i}var $A=kA;function LF(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++i];if(r(a[c],c,a)===!1)break}return t}}var BF=LF,UF=BF,FF=UF(),qF=FF,zF=qF,WF=_v;function HF(e,t){return e&&zF(e,t,WF)}var IA=HF,VF=_f;function GF(e,t){return function(r,n){if(r==null)return r;if(!VF(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}var KF=GF,XF=IA,YF=KF,JF=YF(XF),Sv=JF,QF=Sv,ZF=_f;function eq(e,t){var r=-1,n=ZF(e)?Array(e.length):[];return QF(e,function(i,a,s){n[++r]=t(i,a,s)}),n}var MA=eq;function tq(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var rq=tq,Yb=Rs;function nq(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,a=Yb(e),s=t!==void 0,l=t===null,c=t===t,u=Yb(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||l&&r&&i||!s&&i||!c)return-1}return 0}var iq=nq,aq=iq;function sq(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,l=r.length;++n<s;){var c=aq(i[n],a[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var oq=sq,Hh=ov,lq=lv,cq=bi,uq=MA,dq=rq,fq=wA,hq=oq,pq=zs,mq=nr;function gq(e,t,r){t.length?t=Hh(t,function(a){return mq(a)?function(s){return lq(s,a.length===1?a[0]:a)}:a}):t=[pq];var n=-1;t=Hh(t,fq(cq));var i=uq(e,function(a,s,l){var c=Hh(t,function(u){return u(a)});return{criteria:c,index:++n,value:a}});return dq(i,function(a,s){return hq(a,s,r)})}var yq=gq;function vq(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var xq=vq,bq=xq,Jb=Math.max;function wq(e,t,r){return t=Jb(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Jb(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=n[i];return l[t]=r(s),bq(e,this,l)}}var _q=wq;function jq(e){return function(){return e}}var Sq=jq,Nq=oa,Eq=function(){try{var e=Nq(Object,"defineProperty");return e({},"",{}),e}catch{}}(),RA=Eq,Aq=Sq,Qb=RA,Pq=zs,Oq=Qb?function(e,t){return Qb(e,"toString",{configurable:!0,enumerable:!1,value:Aq(t),writable:!0})}:Pq,Tq=Oq,Cq=800,kq=16,$q=Date.now;function Iq(e){var t=0,r=0;return function(){var n=$q(),i=kq-(n-r);if(r=n,i>0){if(++t>=Cq)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Mq=Iq,Rq=Tq,Dq=Mq,Lq=Dq(Rq),Bq=Lq,Uq=zs,Fq=_q,qq=Bq;function zq(e,t){return qq(Fq(e,t,Uq),e+"")}var Wq=zq,Hq=nv,Vq=_f,Gq=bv,Kq=xi;function Xq(e,t,r){if(!Kq(r))return!1;var n=typeof t;return(n=="number"?Vq(r)&&Gq(t,r.length):n=="string"&&t in r)?Hq(r[t],e):!1}var Sf=Xq,Yq=$A,Jq=yq,Qq=Wq,Zb=Sf,Zq=Qq(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Zb(e,t[0],t[1])?t=[]:r>2&&Zb(t[0],t[1],t[2])&&(t=[t[0]]),Jq(e,Yq(t,1),[])}),ez=Zq;const Nv=Fe(ez);function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function Gm(){return Gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gm.apply(this,arguments)}function tz(e,t){return az(e)||iz(e,t)||nz(e,t)||rz()}function rz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nz(e,t){if(e){if(typeof e=="string")return ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ew(e,t)}}function ew(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function az(e){if(Array.isArray(e))return e}function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(r),!0).forEach(function(n){sz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sz(e,t,r){return t=oz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oz(e){var t=lz(e,"string");return gl(t)=="symbol"?t:t+""}function lz(e,t){if(gl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cz(e){return Array.isArray(e)&&bt(e[0])&&bt(e[1])?e.join(" ~ "):e}var uz=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,b=t.labelClassName,v=t.label,m=t.labelFormatter,y=t.accessibilityLayer,x=y===void 0?!1:y,g=function(){if(f&&f.length){var T={padding:0,margin:0},M=(h?Nv(f,h):f).map(function(B,C){if(B.type==="none")return null;var L=Vh({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},l),G=B.formatter||d||cz,R=B.value,D=B.name,W=R,Y=D;if(G&&W!=null&&Y!=null){var F=G(R,D,B,C,f);if(Array.isArray(F)){var V=tz(F,2);W=V[0],Y=V[1]}else W=F}return z.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:L},bt(Y)?z.createElement("span",{className:"recharts-tooltip-item-name"},Y):null,bt(Y)?z.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,z.createElement("span",{className:"recharts-tooltip-item-value"},W),z.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return z.createElement("ul",{className:"recharts-tooltip-item-list",style:T},M)}return null},S=Vh({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=Vh({margin:0},u),_=!ke(v),j=_?v:"",E=Ie("recharts-default-tooltip",p),A=Ie("recharts-tooltip-label",b);_&&m&&f!==void 0&&f!==null&&(j=m(v,f));var P=x?{role:"status","aria-live":"assertive"}:{};return z.createElement("div",Gm({className:E,style:S},P),z.createElement("p",{className:A,style:w},z.isValidElement(j)?j:"".concat(j)),g())};function yl(e){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function Lc(e,t,r){return t=dz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dz(e){var t=fz(e,"string");return yl(t)=="symbol"?t:t+""}function fz(e,t){if(yl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oo="recharts-tooltip-wrapper",hz={visibility:"hidden"};function pz(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Ie(oo,Lc(Lc(Lc(Lc({},"".concat(oo,"-right"),de(r)&&t&&de(t.x)&&r>=t.x),"".concat(oo,"-left"),de(r)&&t&&de(t.x)&&r<t.x),"".concat(oo,"-bottom"),de(n)&&t&&de(t.y)&&n>=t.y),"".concat(oo,"-top"),de(n)&&t&&de(t.y)&&n<t.y))}function rw(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(a&&de(a[n]))return a[n];var f=r[n]-l-i,d=r[n]+i;if(t[n])return s[n]?f:d;if(s[n]){var h=f,p=c[n];return h<p?Math.max(d,c[n]):Math.max(f,c[n])}var b=d+l,v=c[n]+u;return b>v?Math.max(f,c[n]):Math.max(d,c[n])}function mz(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function gz(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return s.height>0&&s.width>0&&r?(f=rw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),d=rw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=mz({translateX:f,translateY:d,useTranslate3d:l})):u=hz,{cssProperties:u,cssClasses:pz({translateX:f,translateY:d,coordinate:r})}}function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}function nw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nw(Object(r),!0).forEach(function(n){Xm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LA(n.key),n)}}function xz(e,t,r){return t&&vz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bz(e,t,r){return t=ed(t),wz(e,DA()?Reflect.construct(t,r||[],ed(e).constructor):t.apply(e,r))}function wz(e,t){if(t&&(cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _z(e)}function _z(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DA=function(){return!!e})()}function ed(e){return ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ed(e)}function jz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Km(e,t)}function Km(e,t){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Km(e,t)}function Xm(e,t,r){return t=LA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LA(e){var t=Sz(e,"string");return cs(t)=="symbol"?t:t+""}function Sz(e,t){if(cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var aw=1,Nz=function(e){function t(){var r;yz(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=bz(this,t,[].concat(i)),Xm(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Xm(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return jz(t,e),xz(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>aw||Math.abs(n.height-this.state.lastBoundingBox.height)>aw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,f=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,p=i.offset,b=i.position,v=i.reverseDirection,m=i.useTranslate3d,y=i.viewBox,x=i.wrapperStyle,g=gz({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:p,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:y}),S=g.cssClasses,w=g.cssProperties,_=iw(iw({transition:h&&a?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},x);return z.createElement("div",{tabIndex:-1,className:S,style:_,ref:function(E){n.wrapperNode=E}},u)}}])}(N.PureComponent),Ez=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Nf={isSsr:Ez()};function us(e){"@babel/helpers - typeof";return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(e)}function sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sw(Object(r),!0).forEach(function(n){Ev(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Az(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,UA(n.key),n)}}function Oz(e,t,r){return t&&Pz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tz(e,t,r){return t=td(t),Cz(e,BA()?Reflect.construct(t,r||[],td(e).constructor):t.apply(e,r))}function Cz(e,t){if(t&&(us(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kz(e)}function kz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BA=function(){return!!e})()}function td(e){return td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},td(e)}function $z(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ym(e,t)}function Ym(e,t){return Ym=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ym(e,t)}function Ev(e,t,r){return t=UA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UA(e){var t=Iz(e,"string");return us(t)=="symbol"?t:t+""}function Iz(e,t){if(us(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(us(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Mz(e){return e.dataKey}function Rz(e,t){return z.isValidElement(e)?z.cloneElement(e,t):typeof e=="function"?z.createElement(e,t):z.createElement(uz,t)}var en=function(e){function t(){return Az(this,t),Tz(this,t,arguments)}return $z(t,e),Oz(t,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,b=i.payload,v=i.payloadUniqBy,m=i.position,y=i.reverseDirection,x=i.useTranslate3d,g=i.viewBox,S=i.wrapperStyle,w=b??[];d&&w.length&&(w=OA(b.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),v,Mz));var _=w.length>0;return z.createElement(Nz,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:h,active:a,coordinate:f,hasPayload:_,offset:p,position:m,reverseDirection:y,useTranslate3d:x,viewBox:g,wrapperStyle:S},Rz(u,ow(ow({},this.props),{},{payload:w})))}}])}(N.PureComponent);Ev(en,"displayName","Tooltip");Ev(en,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Nf.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Dz=dn,Lz=function(){return Dz.Date.now()},Bz=Lz,Uz=/\s/;function Fz(e){for(var t=e.length;t--&&Uz.test(e.charAt(t)););return t}var qz=Fz,zz=qz,Wz=/^\s+/;function Hz(e){return e&&e.slice(0,zz(e)+1).replace(Wz,"")}var Vz=Hz,Gz=Vz,lw=xi,Kz=Rs,cw=NaN,Xz=/^[-+]0x[0-9a-f]+$/i,Yz=/^0b[01]+$/i,Jz=/^0o[0-7]+$/i,Qz=parseInt;function Zz(e){if(typeof e=="number")return e;if(Kz(e))return cw;if(lw(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=lw(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gz(e);var r=Yz.test(e);return r||Jz.test(e)?Qz(e.slice(2),r?2:8):Xz.test(e)?cw:+e}var FA=Zz,e7=xi,Gh=Bz,uw=FA,t7="Expected a function",r7=Math.max,n7=Math.min;function i7(e,t,r){var n,i,a,s,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(t7);t=uw(t)||0,e7(r)&&(f=!!r.leading,d="maxWait"in r,a=d?r7(uw(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h);function p(_){var j=n,E=i;return n=i=void 0,u=_,s=e.apply(E,j),s}function b(_){return u=_,l=setTimeout(y,t),f?p(_):s}function v(_){var j=_-c,E=_-u,A=t-j;return d?n7(A,a-E):A}function m(_){var j=_-c,E=_-u;return c===void 0||j>=t||j<0||d&&E>=a}function y(){var _=Gh();if(m(_))return x(_);l=setTimeout(y,v(_))}function x(_){return l=void 0,h&&n?p(_):(n=i=void 0,s)}function g(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function S(){return l===void 0?s:x(Gh())}function w(){var _=Gh(),j=m(_);if(n=arguments,i=this,c=_,j){if(l===void 0)return b(c);if(d)return clearTimeout(l),l=setTimeout(y,t),p(c)}return l===void 0&&(l=setTimeout(y,t)),s}return w.cancel=g,w.flush=S,w}var a7=i7,s7=a7,o7=xi,l7="Expected a function";function c7(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(l7);return o7(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),s7(e,t,{leading:n,maxWait:t,trailing:i})}var u7=c7;const qA=Fe(u7);function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(r),!0).forEach(function(n){d7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d7(e,t,r){return t=f7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=h7(e,"string");return vl(t)=="symbol"?t:t+""}function h7(e,t){if(vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p7(e,t){return v7(e)||y7(e,t)||g7(e,t)||m7()}function m7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(e,t){if(e){if(typeof e=="string")return fw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fw(e,t)}}function fw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function v7(e){if(Array.isArray(e))return e}var x7=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=e.width,s=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,b=e.debounce,v=b===void 0?0:b,m=e.id,y=e.className,x=e.onResize,g=e.style,S=g===void 0?{}:g,w=N.useRef(null),_=N.useRef();_.current=x,N.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var j=N.useState({containerWidth:i.width,containerHeight:i.height}),E=p7(j,2),A=E[0],P=E[1],O=N.useCallback(function(M,B){P(function(C){var L=Math.round(M),G=Math.round(B);return C.containerWidth===L&&C.containerHeight===G?C:{containerWidth:L,containerHeight:G}})},[]);N.useEffect(function(){var M=function(D){var W,Y=D[0].contentRect,F=Y.width,V=Y.height;O(F,V),(W=_.current)===null||W===void 0||W.call(_,F,V)};v>0&&(M=qA(M,v,{trailing:!0,leading:!1}));var B=new ResizeObserver(M),C=w.current.getBoundingClientRect(),L=C.width,G=C.height;return O(L,G),B.observe(w.current),function(){B.disconnect()}},[O,v]);var T=N.useMemo(function(){var M=A.containerWidth,B=A.containerHeight;if(M<0||B<0)return null;Sn(qi(s)||qi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),Sn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var C=qi(s)?M:s,L=qi(c)?B:c;r&&r>0&&(C?L=C/r:L&&(C=L*r),h&&L>h&&(L=h)),Sn(C>0||L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,C,L,s,c,f,d,r);var G=!Array.isArray(p)&&jn(p.type).endsWith("Chart");return z.Children.map(p,function(R){return z.isValidElement(R)?N.cloneElement(R,Bc({width:C,height:L},G?{style:Bc({height:"100%",width:"100%",maxHeight:L,maxWidth:C},R.props.style)}:{})):R})},[r,p,c,h,d,f,A,s]);return z.createElement("div",{id:m?"".concat(m):void 0,className:Ie("recharts-responsive-container",y),style:Bc(Bc({},S),{},{width:s,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:w},T)}),Av=function(t){return null};Av.displayName="Cell";function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function hw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hw(Object(r),!0).forEach(function(n){b7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b7(e,t,r){return t=w7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w7(e){var t=_7(e,"string");return xl(t)=="symbol"?t:t+""}function _7(e,t){if(xl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var va={widthCache:{},cacheCount:0},j7=2e3,S7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pw="recharts_measurement_span";function N7(e){var t=Jm({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var mw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Nf.isSsr)return{width:0,height:0};var n=N7(r),i=JSON.stringify({text:t,copyStyle:n});if(va.widthCache[i])return va.widthCache[i];try{var a=document.getElementById(pw);a||(a=document.createElement("span"),a.setAttribute("id",pw),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=Jm(Jm({},S7),n);Object.assign(a.style,s),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return va.widthCache[i]=c,++va.cacheCount>j7&&(va.cacheCount=0,va.widthCache={}),c}catch{return{width:0,height:0}}},E7=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function rd(e,t){return T7(e)||O7(e,t)||P7(e,t)||A7()}function A7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P7(e,t){if(e){if(typeof e=="string")return gw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gw(e,t)}}function gw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function O7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function T7(e){if(Array.isArray(e))return e}function C7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$7(n.key),n)}}function k7(e,t,r){return t&&yw(e.prototype,t),r&&yw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $7(e){var t=I7(e,"string");return bl(t)=="symbol"?t:t+""}function I7(e,t){if(bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,xw=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,M7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,R7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,zA={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},D7=Object.keys(zA),Da="NaN";function L7(e,t){return e*zA[t]}var Uc=function(){function e(t,r){C7(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!M7.test(r)&&(this.num=NaN,this.unit=""),D7.includes(r)&&(this.num=L7(t,r),this.unit="px")}return k7(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=R7.exec(r))!==null&&n!==void 0?n:[],a=rd(i,3),s=a[1],l=a[2];return new e(parseFloat(s),l??"")}}])}();function WA(e){if(e.includes(Da))return Da;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=vw.exec(t))!==null&&r!==void 0?r:[],i=rd(n,4),a=i[1],s=i[2],l=i[3],c=Uc.parse(a??""),u=Uc.parse(l??""),f=s==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Da;t=t.replace(vw,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=xw.exec(t))!==null&&d!==void 0?d:[],p=rd(h,4),b=p[1],v=p[2],m=p[3],y=Uc.parse(b??""),x=Uc.parse(m??""),g=v==="+"?y.add(x):y.subtract(x);if(g.isNaN())return Da;t=t.replace(xw,g.toString())}return t}var bw=/\(([^()]*)\)/;function B7(e){for(var t=e;t.includes("(");){var r=bw.exec(t),n=rd(r,2),i=n[1];t=t.replace(bw,WA(i))}return t}function U7(e){var t=e.replace(/\s+/g,"");return t=B7(t),t=WA(t),t}function F7(e){try{return U7(e)}catch{return Da}}function Kh(e){var t=F7(e.slice(5,-1));return t===Da?"":t}var q7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],z7=["dx","dy","angle","className","breakAll"];function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(this,arguments)}function ww(e,t){if(e==null)return{};var r=W7(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function W7(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _w(e,t){return K7(e)||G7(e,t)||V7(e,t)||H7()}function H7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V7(e,t){if(e){if(typeof e=="string")return jw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jw(e,t)}}function jw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function K7(e){if(Array.isArray(e))return e}var HA=/[ \f\n\r\t\v\u2028\u2029]+/,VA=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var a=[];ke(r)||(n?a=r.toString().split(""):a=r.toString().split(HA));var s=a.map(function(c){return{word:c,width:mw(c,i).width}}),l=n?0:mw("",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},X7=function(t,r,n,i,a){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=de(s),d=l,h=function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return C.reduce(function(L,G){var R=G.word,D=G.width,W=L[L.length-1];if(W&&(i==null||a||W.width+D+n<Number(i)))W.words.push(R),W.width+=D+n;else{var Y={words:[R],width:D};L.push(Y)}return L},[])},p=h(r),b=function(C){return C.reduce(function(L,G){return L.width>G.width?L:G})};if(!f)return p;for(var v="",m=function(C){var L=d.slice(0,C),G=VA({breakAll:u,style:c,children:L+v}).wordsWithComputedWidth,R=h(G),D=R.length>s||b(R).width>Number(i);return[D,R]},y=0,x=d.length-1,g=0,S;y<=x&&g<=d.length-1;){var w=Math.floor((y+x)/2),_=w-1,j=m(_),E=_w(j,2),A=E[0],P=E[1],O=m(w),T=_w(O,1),M=T[0];if(!A&&!M&&(y=w+1),A&&M&&(x=w-1),!A&&M){S=P;break}g++}return S||p},Sw=function(t){var r=ke(t)?[]:t.toString().split(HA);return[{words:r}]},Y7=function(t){var r=t.width,n=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!Nf.isSsr){var c,u,f=VA({breakAll:s,children:i,style:a});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return Sw(i);return X7({breakAll:s,children:i,maxLines:l,style:a},c,u,r,n)}return Sw(i)},Nw="#808080",ds=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,b=t.verticalAnchor,v=b===void 0?"end":b,m=t.fill,y=m===void 0?Nw:m,x=ww(t,q7),g=N.useMemo(function(){return Y7({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:d,style:x.style,width:x.width})},[x.breakAll,x.children,x.maxLines,d,x.style,x.width]),S=x.dx,w=x.dy,_=x.angle,j=x.className,E=x.breakAll,A=ww(x,z7);if(!bt(n)||!bt(a))return null;var P=n+(de(S)?S:0),O=a+(de(w)?w:0),T;switch(v){case"start":T=Kh("calc(".concat(u,")"));break;case"middle":T=Kh("calc(".concat((g.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=Kh("calc(".concat(g.length-1," * -").concat(l,")"));break}var M=[];if(d){var B=g[0].width,C=x.width;M.push("scale(".concat((de(C)?C/B:1)/B,")"))}return _&&M.push("rotate(".concat(_,", ").concat(P,", ").concat(O,")")),M.length&&(A.transform=M.join(" ")),z.createElement("text",Qm({},Pe(A,!0),{x:P,y:O,className:Ie("recharts-text",j),textAnchor:p,fill:y.includes("url")?Nw:y}),g.map(function(L,G){var R=L.words.join(E?"":" ");return z.createElement("tspan",{x:P,dy:G===0?T:l,key:"".concat(R,"-").concat(G)},R)}))};function ci(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function J7(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pv(e){let t,r,n;e.length!==2?(t=ci,r=(l,c)=>ci(e(l),c),n=(l,c)=>e(l)-c):(t=e===ci||e===J7?e:Q7,r=e,n=e);function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){const d=i(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:s,right:a}}function Q7(){return 0}function GA(e){return e===null?NaN:+e}function*Z7(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const e9=Pv(ci),ic=e9.right;Pv(GA).center;class Ew extends Map{constructor(t,r=n9){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(Aw(this,t))}has(t){return super.has(Aw(this,t))}set(t,r){return super.set(t9(this,t),r)}delete(t){return super.delete(r9(this,t))}}function Aw({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function t9({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function r9({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function n9(e){return e!==null&&typeof e=="object"?e.valueOf():e}function i9(e=ci){if(e===ci)return KA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function KA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const a9=Math.sqrt(50),s9=Math.sqrt(10),o9=Math.sqrt(2);function nd(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=a9?10:a>=s9?5:a>=o9?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?nd(e,t,r*2):[l,c,u]}function Zm(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?nd(t,e,r):nd(e,t,r);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(a-u)/-s;else for(let u=0;u<l;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(i+u)/-s;else for(let u=0;u<l;++u)c[u]=(i+u)*s;return c}function eg(e,t,r){return t=+t,e=+e,r=+r,nd(e,t,r)[2]}function tg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?eg(t,e,r):eg(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function Pw(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Ow(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function XA(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?KA:i9(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/c+h)),b=Math.min(n,Math.floor(t+(c-u)*d/c+h));XA(e,t,p,b,i)}const a=e[t];let s=r,l=n;for(lo(e,r,t),i(e[n],a)>0&&lo(e,r,n);s<l;){for(lo(e,s,l),++s,--l;i(e[s],a)<0;)++s;for(;i(e[l],a)>0;)--l}i(e[r],a)===0?lo(e,r,l):(++l,lo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function lo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function l9(e,t,r){if(e=Float64Array.from(Z7(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Ow(e);if(t>=1)return Pw(e);var n,i=(n-1)*t,a=Math.floor(i),s=Pw(XA(e,a).subarray(0,a+1)),l=Ow(e.subarray(a+1));return s+(l-s)*(i-a)}}function c9(e,t,r=GA){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),l=+r(e[a+1],a+1,e);return s+(l-s)*(i-a)}}function u9(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Mr(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ln(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rg=Symbol("implicit");function Ov(){var e=new Ew,t=[],r=[],n=rg;function i(a){let s=e.get(a);if(s===void 0){if(n!==rg)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Ew;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return Ov(t,r).unknown(n)},Mr.apply(i,arguments),i}function wl(){var e=Ov().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=i<n,b=p?i:n,v=p?n:i;a=(v-b)/Math.max(1,h-c+u*2),l&&(a=Math.floor(a)),b+=(v-b-a*(h-c))*f,s=a*(1-c),l&&(b=Math.round(b),s=Math.round(s));var m=u9(h).map(function(y){return b+a*y});return r(p?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,l=!0,d()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return wl(t(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(f)},Mr.apply(d(),arguments)}function YA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return YA(t())},e}function Lo(){return YA(wl.apply(null,arguments).paddingInner(1))}function Tv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function JA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ac(){}var _l=.7,id=1/_l,Xa="\\s*([+-]?\\d+)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ln="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",d9=/^#([0-9a-f]{3,8})$/,f9=new RegExp(`^rgb\\(${Xa},${Xa},${Xa}\\)$`),h9=new RegExp(`^rgb\\(${ln},${ln},${ln}\\)$`),p9=new RegExp(`^rgba\\(${Xa},${Xa},${Xa},${jl}\\)$`),m9=new RegExp(`^rgba\\(${ln},${ln},${ln},${jl}\\)$`),g9=new RegExp(`^hsl\\(${jl},${ln},${ln}\\)$`),y9=new RegExp(`^hsla\\(${jl},${ln},${ln},${jl}\\)$`),Tw={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tv(ac,Sl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Cw,formatHex:Cw,formatHex8:v9,formatHsl:x9,formatRgb:kw,toString:kw});function Cw(){return this.rgb().formatHex()}function v9(){return this.rgb().formatHex8()}function x9(){return QA(this).formatHsl()}function kw(){return this.rgb().formatRgb()}function Sl(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=d9.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$w(t):r===3?new Jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Fc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Fc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=f9.exec(e))?new Jt(t[1],t[2],t[3],1):(t=h9.exec(e))?new Jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=p9.exec(e))?Fc(t[1],t[2],t[3],t[4]):(t=m9.exec(e))?Fc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=g9.exec(e))?Rw(t[1],t[2]/100,t[3]/100,1):(t=y9.exec(e))?Rw(t[1],t[2]/100,t[3]/100,t[4]):Tw.hasOwnProperty(e)?$w(Tw[e]):e==="transparent"?new Jt(NaN,NaN,NaN,0):null}function $w(e){return new Jt(e>>16&255,e>>8&255,e&255,1)}function Fc(e,t,r,n){return n<=0&&(e=t=r=NaN),new Jt(e,t,r,n)}function b9(e){return e instanceof ac||(e=Sl(e)),e?(e=e.rgb(),new Jt(e.r,e.g,e.b,e.opacity)):new Jt}function ng(e,t,r,n){return arguments.length===1?b9(e):new Jt(e,t,r,n??1)}function Jt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Tv(Jt,ng,JA(ac,{brighter(e){return e=e==null?id:Math.pow(id,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_l:Math.pow(_l,e),new Jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Jt(Xi(this.r),Xi(this.g),Xi(this.b),ad(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Iw,formatHex:Iw,formatHex8:w9,formatRgb:Mw,toString:Mw}));function Iw(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}`}function w9(){return`#${zi(this.r)}${zi(this.g)}${zi(this.b)}${zi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mw(){const e=ad(this.opacity);return`${e===1?"rgb(":"rgba("}${Xi(this.r)}, ${Xi(this.g)}, ${Xi(this.b)}${e===1?")":`, ${e})`}`}function ad(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Xi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zi(e){return e=Xi(e),(e<16?"0":"")+e.toString(16)}function Rw(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Hr(e,t,r,n)}function QA(e){if(e instanceof Hr)return new Hr(e.h,e.s,e.l,e.opacity);if(e instanceof ac||(e=Sl(e)),!e)return new Hr;if(e instanceof Hr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(r-n)/l+(r<n)*6:r===a?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Hr(s,l,c,e.opacity)}function _9(e,t,r,n){return arguments.length===1?QA(e):new Hr(e,t,r,n??1)}function Hr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Tv(Hr,_9,JA(ac,{brighter(e){return e=e==null?id:Math.pow(id,e),new Hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_l:Math.pow(_l,e),new Hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Jt(Xh(e>=240?e-240:e+120,i,n),Xh(e,i,n),Xh(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Hr(Dw(this.h),qc(this.s),qc(this.l),ad(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ad(this.opacity);return`${e===1?"hsl(":"hsla("}${Dw(this.h)}, ${qc(this.s)*100}%, ${qc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Dw(e){return e=(e||0)%360,e<0?e+360:e}function qc(e){return Math.max(0,Math.min(1,e||0))}function Xh(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Cv=e=>()=>e;function j9(e,t){return function(r){return e+r*t}}function S9(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function N9(e){return(e=+e)==1?ZA:function(t,r){return r-t?S9(t,r,e):Cv(isNaN(t)?r:t)}}function ZA(e,t){var r=t-e;return r?j9(e,r):Cv(isNaN(e)?t:e)}const Lw=function e(t){var r=N9(t);function n(i,a){var s=r((i=ng(i)).r,(a=ng(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),u=ZA(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=c(f),i.opacity=u(f),i+""}}return n.gamma=e,n}(1);function E9(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function A9(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function P9(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=Ws(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(l){for(s=0;s<n;++s)a[s]=i[s](l);return a}}function O9(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function sd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function T9(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Ws(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var ig=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yh=new RegExp(ig.source,"g");function C9(e){return function(){return e}}function k9(e){return function(t){return e(t)+""}}function $9(e,t){var r=ig.lastIndex=Yh.lastIndex=0,n,i,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=ig.exec(e))&&(i=Yh.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),l[s]?l[s]+=a:l[++s]=a),(n=n[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:sd(n,i)})),r=Yh.lastIndex;return r<t.length&&(a=t.slice(r),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?k9(c[0].x):C9(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Ws(e,t){var r=typeof t,n;return t==null||r==="boolean"?Cv(t):(r==="number"?sd:r==="string"?(n=Sl(t))?(t=n,Lw):$9:t instanceof Sl?Lw:t instanceof Date?O9:A9(t)?E9:Array.isArray(t)?P9:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?T9:sd)(e,t)}function kv(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function I9(e,t){t===void 0&&(t=e,e=Ws);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[l](s-l)}}function M9(e){return function(){return e}}function od(e){return+e}var Bw=[0,1];function zt(e){return e}function ag(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:M9(isNaN(t)?NaN:.5)}function R9(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function D9(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=ag(i,n),a=r(s,a)):(n=ag(n,i),a=r(a,s)),function(l){return a(n(l))}}function L9(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=ag(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(l){var c=ic(e,l,1,n)-1;return a[c](i[c](l))}}function sc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Ef(){var e=Bw,t=Bw,r=Ws,n,i,a,s=zt,l,c,u;function f(){var h=Math.min(e.length,t.length);return s!==zt&&(s=R9(e[0],e[h-1])),l=h>2?L9:D9,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(c||(c=l(e.map(n),t,r)))(n(s(h)))}return d.invert=function(h){return s(i((u||(u=l(t,e.map(n),sd)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,od),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=kv,f()},d.clamp=function(h){return arguments.length?(s=h?!0:zt,f()):s!==zt},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,p){return n=h,i=p,f()}}function $v(){return Ef()(zt,zt)}function B9(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function ld(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function fs(e){return e=ld(Math.abs(e)),e?e[1]:NaN}function U9(e,t){return function(r,n){for(var i=r.length,a=[],s=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function F9(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var q9=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Nl(e){if(!(t=q9.exec(e)))throw new Error("invalid format: "+e);var t;return new Iv({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Nl.prototype=Iv.prototype;function Iv(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Iv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z9(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var eP;function W9(e,t){var r=ld(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(eP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+ld(e,Math.max(0,t+a-1))[0]}function Uw(e,t){var r=ld(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const Fw={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:B9,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Uw(e*100,t),r:Uw,s:W9,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qw(e){return e}var zw=Array.prototype.map,Ww=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function H9(e){var t=e.grouping===void 0||e.thousands===void 0?qw:U9(zw.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?qw:F9(zw.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Nl(d);var h=d.fill,p=d.align,b=d.sign,v=d.symbol,m=d.zero,y=d.width,x=d.comma,g=d.precision,S=d.trim,w=d.type;w==="n"?(x=!0,w="g"):Fw[w]||(g===void 0&&(g=12),S=!0,w="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var _=v==="$"?r:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",j=v==="$"?n:/[%p]/.test(w)?s:"",E=Fw[w],A=/[defgprs%]/.test(w);g=g===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function P(O){var T=_,M=j,B,C,L;if(w==="c")M=E(O)+M,O="";else{O=+O;var G=O<0||1/O<0;if(O=isNaN(O)?c:E(Math.abs(O),g),S&&(O=z9(O)),G&&+O==0&&b!=="+"&&(G=!1),T=(G?b==="("?b:l:b==="-"||b==="("?"":b)+T,M=(w==="s"?Ww[8+eP/3]:"")+M+(G&&b==="("?")":""),A){for(B=-1,C=O.length;++B<C;)if(L=O.charCodeAt(B),48>L||L>57){M=(L===46?i+O.slice(B+1):O.slice(B))+M,O=O.slice(0,B);break}}}x&&!m&&(O=t(O,1/0));var R=T.length+O.length+M.length,D=R<y?new Array(y-R+1).join(h):"";switch(x&&m&&(O=t(D+O,D.length?y-M.length:1/0),D=""),p){case"<":O=T+O+M+D;break;case"=":O=T+D+O+M;break;case"^":O=D.slice(0,R=D.length>>1)+T+O+M+D.slice(R);break;default:O=D+T+O+M;break}return a(O)}return P.toString=function(){return d+""},P}function f(d,h){var p=u((d=Nl(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor(fs(h)/3)))*3,v=Math.pow(10,-b),m=Ww[8+b/3];return function(y){return p(v*y)+m}}return{format:u,formatPrefix:f}}var zc,Mv,tP;V9({thousands:",",grouping:[3],currency:["$",""]});function V9(e){return zc=H9(e),Mv=zc.format,tP=zc.formatPrefix,zc}function G9(e){return Math.max(0,-fs(Math.abs(e)))}function K9(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(fs(t)/3)))*3-fs(Math.abs(e)))}function X9(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,fs(t)-fs(e))+1}function rP(e,t,r,n){var i=tg(e,t,r),a;switch(n=Nl(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=K9(i,s))&&(n.precision=a),tP(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=X9(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=G9(i))&&(n.precision=a-(n.type==="%")*2);break}}return Mv(n)}function wi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Zm(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return rP(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],l=n[a],c,u,f=10;for(l<s&&(u=s,s=l,l=u,u=i,i=a,a=u);f-- >0;){if(u=eg(s,l,r),u===c)return n[i]=s,n[a]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function cd(){var e=$v();return e.copy=function(){return sc(e,cd())},Mr.apply(e,arguments),wi(e)}function nP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,od),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return nP(e).unknown(t)},e=arguments.length?Array.from(e,od):[0,1],wi(r)}function iP(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function Hw(e){return Math.log(e)}function Vw(e){return Math.exp(e)}function Y9(e){return-Math.log(-e)}function J9(e){return-Math.exp(-e)}function Q9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Z9(e){return e===10?Q9:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eW(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Gw(e){return(t,r)=>-e(-t,r)}function Rv(e){const t=e(Hw,Vw),r=t.domain;let n=10,i,a;function s(){return i=eW(n),a=Z9(n),r()[0]<0?(i=Gw(i),a=Gw(a),e(Y9,J9)):e(Hw,Vw),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=i(u),p=i(f),b,v;const m=l==null?10:+l;let y=[];if(!(n%1)&&p-h<m){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(b=1;b<n;++b)if(v=h<0?b/a(-h):b*a(h),!(v<u)){if(v>f)break;y.push(v)}}else for(;h<=p;++h)for(b=n-1;b>=1;--b)if(v=h>0?b/a(-h):b*a(h),!(v<u)){if(v>f)break;y.push(v)}y.length*2<m&&(y=Zm(u,f,m))}else y=Zm(h,p,Math.min(p-h,m)).map(a);return d?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Nl(c)).precision==null&&(c.trim=!0),c=Mv(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/a(Math.round(i(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(iP(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function aP(){const e=Rv(Ef()).domain([1,10]);return e.copy=()=>sc(e,aP()).base(e.base()),Mr.apply(e,arguments),e}function Kw(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Xw(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dv(e){var t=1,r=e(Kw(t),Xw(t));return r.constant=function(n){return arguments.length?e(Kw(t=+n),Xw(t)):t},wi(r)}function sP(){var e=Dv(Ef());return e.copy=function(){return sc(e,sP()).constant(e.constant())},Mr.apply(e,arguments)}function Yw(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tW(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rW(e){return e<0?-e*e:e*e}function Lv(e){var t=e(zt,zt),r=1;function n(){return r===1?e(zt,zt):r===.5?e(tW,rW):e(Yw(r),Yw(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},wi(t)}function Bv(){var e=Lv(Ef());return e.copy=function(){return sc(e,Bv()).exponent(e.exponent())},Mr.apply(e,arguments),e}function nW(){return Bv.apply(null,arguments).exponent(.5)}function Jw(e){return Math.sign(e)*e*e}function iW(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function oP(){var e=$v(),t=[0,1],r=!1,n;function i(a){var s=iW(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(Jw(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,od)).map(Jw)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return oP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Mr.apply(i,arguments),wi(i)}function lP(){var e=[],t=[],r=[],n;function i(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=c9(e,s/l);return a}function a(s){return s==null||isNaN(s=+s)?n:t[ic(r,s)]}return a.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ci),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return lP().domain(e).range(t).unknown(n)},Mr.apply(a,arguments)}function cP(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[ic(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return cP().domain([e,t]).range(i).unknown(a)},Mr.apply(wi(s),arguments)}function uP(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[ic(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return uP().domain(e).range(t).unknown(r)},Mr.apply(i,arguments)}const Jh=new Date,Qh=new Date;function wt(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<s);return c},i.filter=a=>wt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(Jh.setTime(+a),Qh.setTime(+s),e(Jh),e(Qh),Math.floor(r(Jh,Qh))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const ud=wt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ud.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ud);ud.range;const bn=1e3,Or=bn*60,wn=Or*60,Cn=wn*24,Uv=Cn*7,Qw=Cn*30,Zh=Cn*365,Wi=wt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*bn)},(e,t)=>(t-e)/bn,e=>e.getUTCSeconds());Wi.range;const Fv=wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bn)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getMinutes());Fv.range;const qv=wt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Or)},(e,t)=>(t-e)/Or,e=>e.getUTCMinutes());qv.range;const zv=wt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*bn-e.getMinutes()*Or)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getHours());zv.range;const Wv=wt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*wn)},(e,t)=>(t-e)/wn,e=>e.getUTCHours());Wv.range;const oc=wt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/Cn,e=>e.getDate()-1);oc.range;const Af=wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cn,e=>e.getUTCDate()-1);Af.range;const dP=wt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cn,e=>Math.floor(e/Cn));dP.range;function la(e){return wt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Or)/Uv)}const Pf=la(0),dd=la(1),aW=la(2),sW=la(3),hs=la(4),oW=la(5),lW=la(6);Pf.range;dd.range;aW.range;sW.range;hs.range;oW.range;lW.range;function ca(e){return wt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Uv)}const Of=ca(0),fd=ca(1),cW=ca(2),uW=ca(3),ps=ca(4),dW=ca(5),fW=ca(6);Of.range;fd.range;cW.range;uW.range;ps.range;dW.range;fW.range;const Hv=wt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Hv.range;const Vv=wt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Vv.range;const kn=wt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());kn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});kn.range;const $n=wt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());$n.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});$n.range;function fP(e,t,r,n,i,a){const s=[[Wi,1,bn],[Wi,5,5*bn],[Wi,15,15*bn],[Wi,30,30*bn],[a,1,Or],[a,5,5*Or],[a,15,15*Or],[a,30,30*Or],[i,1,wn],[i,3,3*wn],[i,6,6*wn],[i,12,12*wn],[n,1,Cn],[n,2,2*Cn],[r,1,Uv],[t,1,Qw],[t,3,3*Qw],[e,1,Zh]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:c(u,f,d),b=p?p.range(u,+f+1):[];return h?b.reverse():b}function c(u,f,d){const h=Math.abs(f-u)/d,p=Pv(([,,m])=>m).right(s,h);if(p===s.length)return e.every(tg(u/Zh,f/Zh,d));if(p===0)return ud.every(Math.max(tg(u,f,d),1));const[b,v]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return b.every(v)}return[l,c]}const[hW,pW]=fP($n,Vv,Of,dP,Wv,qv),[mW,gW]=fP(kn,Hv,Pf,oc,zv,Fv);function ep(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function tp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function co(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function yW(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=uo(i),f=fo(i),d=uo(a),h=fo(a),p=uo(s),b=fo(s),v=uo(l),m=fo(l),y=uo(c),x=fo(c),g={a:G,A:R,b:D,B:W,c:null,d:i_,e:i_,f:UW,g:YW,G:QW,H:DW,I:LW,j:BW,L:hP,m:FW,M:qW,p:Y,q:F,Q:o_,s:l_,S:zW,u:WW,U:HW,V:VW,w:GW,W:KW,x:null,X:null,y:XW,Y:JW,Z:ZW,"%":s_},S={a:V,A:U,b:ge,B:le,c:null,d:a_,e:a_,f:nH,g:hH,G:mH,H:eH,I:tH,j:rH,L:mP,m:iH,M:aH,p:Se,q:fe,Q:o_,s:l_,S:sH,u:oH,U:lH,V:cH,w:uH,W:dH,x:null,X:null,y:fH,Y:pH,Z:gH,"%":s_},w={a:P,A:O,b:T,B:M,c:B,d:r_,e:r_,f:$W,g:t_,G:e_,H:n_,I:n_,j:OW,L:kW,m:PW,M:TW,p:A,q:AW,Q:MW,s:RW,S:CW,u:_W,U:jW,V:SW,w:wW,W:NW,x:C,X:L,y:t_,Y:e_,Z:EW,"%":IW};g.x=_(r,g),g.X=_(n,g),g.c=_(t,g),S.x=_(r,S),S.X=_(n,S),S.c=_(t,S);function _(Q,Z){return function(ee){var k=[],ie=-1,ue=0,ce=Q.length,me,Ne,re;for(ee instanceof Date||(ee=new Date(+ee));++ie<ce;)Q.charCodeAt(ie)===37&&(k.push(Q.slice(ue,ie)),(Ne=Zw[me=Q.charAt(++ie)])!=null?me=Q.charAt(++ie):Ne=me==="e"?" ":"0",(re=Z[me])&&(me=re(ee,Ne)),k.push(me),ue=ie+1);return k.push(Q.slice(ue,ie)),k.join("")}}function j(Q,Z){return function(ee){var k=co(1900,void 0,1),ie=E(k,Q,ee+="",0),ue,ce;if(ie!=ee.length)return null;if("Q"in k)return new Date(k.Q);if("s"in k)return new Date(k.s*1e3+("L"in k?k.L:0));if(Z&&!("Z"in k)&&(k.Z=0),"p"in k&&(k.H=k.H%12+k.p*12),k.m===void 0&&(k.m="q"in k?k.q:0),"V"in k){if(k.V<1||k.V>53)return null;"w"in k||(k.w=1),"Z"in k?(ue=tp(co(k.y,0,1)),ce=ue.getUTCDay(),ue=ce>4||ce===0?fd.ceil(ue):fd(ue),ue=Af.offset(ue,(k.V-1)*7),k.y=ue.getUTCFullYear(),k.m=ue.getUTCMonth(),k.d=ue.getUTCDate()+(k.w+6)%7):(ue=ep(co(k.y,0,1)),ce=ue.getDay(),ue=ce>4||ce===0?dd.ceil(ue):dd(ue),ue=oc.offset(ue,(k.V-1)*7),k.y=ue.getFullYear(),k.m=ue.getMonth(),k.d=ue.getDate()+(k.w+6)%7)}else("W"in k||"U"in k)&&("w"in k||(k.w="u"in k?k.u%7:"W"in k?1:0),ce="Z"in k?tp(co(k.y,0,1)).getUTCDay():ep(co(k.y,0,1)).getDay(),k.m=0,k.d="W"in k?(k.w+6)%7+k.W*7-(ce+5)%7:k.w+k.U*7-(ce+6)%7);return"Z"in k?(k.H+=k.Z/100|0,k.M+=k.Z%100,tp(k)):ep(k)}}function E(Q,Z,ee,k){for(var ie=0,ue=Z.length,ce=ee.length,me,Ne;ie<ue;){if(k>=ce)return-1;if(me=Z.charCodeAt(ie++),me===37){if(me=Z.charAt(ie++),Ne=w[me in Zw?Z.charAt(ie++):me],!Ne||(k=Ne(Q,ee,k))<0)return-1}else if(me!=ee.charCodeAt(k++))return-1}return k}function A(Q,Z,ee){var k=u.exec(Z.slice(ee));return k?(Q.p=f.get(k[0].toLowerCase()),ee+k[0].length):-1}function P(Q,Z,ee){var k=p.exec(Z.slice(ee));return k?(Q.w=b.get(k[0].toLowerCase()),ee+k[0].length):-1}function O(Q,Z,ee){var k=d.exec(Z.slice(ee));return k?(Q.w=h.get(k[0].toLowerCase()),ee+k[0].length):-1}function T(Q,Z,ee){var k=y.exec(Z.slice(ee));return k?(Q.m=x.get(k[0].toLowerCase()),ee+k[0].length):-1}function M(Q,Z,ee){var k=v.exec(Z.slice(ee));return k?(Q.m=m.get(k[0].toLowerCase()),ee+k[0].length):-1}function B(Q,Z,ee){return E(Q,t,Z,ee)}function C(Q,Z,ee){return E(Q,r,Z,ee)}function L(Q,Z,ee){return E(Q,n,Z,ee)}function G(Q){return s[Q.getDay()]}function R(Q){return a[Q.getDay()]}function D(Q){return c[Q.getMonth()]}function W(Q){return l[Q.getMonth()]}function Y(Q){return i[+(Q.getHours()>=12)]}function F(Q){return 1+~~(Q.getMonth()/3)}function V(Q){return s[Q.getUTCDay()]}function U(Q){return a[Q.getUTCDay()]}function ge(Q){return c[Q.getUTCMonth()]}function le(Q){return l[Q.getUTCMonth()]}function Se(Q){return i[+(Q.getUTCHours()>=12)]}function fe(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Z=_(Q+="",g);return Z.toString=function(){return Q},Z},parse:function(Q){var Z=j(Q+="",!1);return Z.toString=function(){return Q},Z},utcFormat:function(Q){var Z=_(Q+="",S);return Z.toString=function(){return Q},Z},utcParse:function(Q){var Z=j(Q+="",!0);return Z.toString=function(){return Q},Z}}}var Zw={"-":"",_:" ",0:"0"},Et=/^\s*\d+/,vW=/^%/,xW=/[\\^$*+?|[\]().{}]/g;function Me(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function bW(e){return e.replace(xW,"\\$&")}function uo(e){return new RegExp("^(?:"+e.map(bW).join("|")+")","i")}function fo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wW(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function _W(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function jW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function SW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function NW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function e_(e,t,r){var n=Et.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function t_(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function EW(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function AW(e,t,r){var n=Et.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function PW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function r_(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function OW(e,t,r){var n=Et.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function n_(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function TW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function CW(e,t,r){var n=Et.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function kW(e,t,r){var n=Et.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $W(e,t,r){var n=Et.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function IW(e,t,r){var n=vW.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function MW(e,t,r){var n=Et.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function RW(e,t,r){var n=Et.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function i_(e,t){return Me(e.getDate(),t,2)}function DW(e,t){return Me(e.getHours(),t,2)}function LW(e,t){return Me(e.getHours()%12||12,t,2)}function BW(e,t){return Me(1+oc.count(kn(e),e),t,3)}function hP(e,t){return Me(e.getMilliseconds(),t,3)}function UW(e,t){return hP(e,t)+"000"}function FW(e,t){return Me(e.getMonth()+1,t,2)}function qW(e,t){return Me(e.getMinutes(),t,2)}function zW(e,t){return Me(e.getSeconds(),t,2)}function WW(e){var t=e.getDay();return t===0?7:t}function HW(e,t){return Me(Pf.count(kn(e)-1,e),t,2)}function pP(e){var t=e.getDay();return t>=4||t===0?hs(e):hs.ceil(e)}function VW(e,t){return e=pP(e),Me(hs.count(kn(e),e)+(kn(e).getDay()===4),t,2)}function GW(e){return e.getDay()}function KW(e,t){return Me(dd.count(kn(e)-1,e),t,2)}function XW(e,t){return Me(e.getFullYear()%100,t,2)}function YW(e,t){return e=pP(e),Me(e.getFullYear()%100,t,2)}function JW(e,t){return Me(e.getFullYear()%1e4,t,4)}function QW(e,t){var r=e.getDay();return e=r>=4||r===0?hs(e):hs.ceil(e),Me(e.getFullYear()%1e4,t,4)}function ZW(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Me(t/60|0,"0",2)+Me(t%60,"0",2)}function a_(e,t){return Me(e.getUTCDate(),t,2)}function eH(e,t){return Me(e.getUTCHours(),t,2)}function tH(e,t){return Me(e.getUTCHours()%12||12,t,2)}function rH(e,t){return Me(1+Af.count($n(e),e),t,3)}function mP(e,t){return Me(e.getUTCMilliseconds(),t,3)}function nH(e,t){return mP(e,t)+"000"}function iH(e,t){return Me(e.getUTCMonth()+1,t,2)}function aH(e,t){return Me(e.getUTCMinutes(),t,2)}function sH(e,t){return Me(e.getUTCSeconds(),t,2)}function oH(e){var t=e.getUTCDay();return t===0?7:t}function lH(e,t){return Me(Of.count($n(e)-1,e),t,2)}function gP(e){var t=e.getUTCDay();return t>=4||t===0?ps(e):ps.ceil(e)}function cH(e,t){return e=gP(e),Me(ps.count($n(e),e)+($n(e).getUTCDay()===4),t,2)}function uH(e){return e.getUTCDay()}function dH(e,t){return Me(fd.count($n(e)-1,e),t,2)}function fH(e,t){return Me(e.getUTCFullYear()%100,t,2)}function hH(e,t){return e=gP(e),Me(e.getUTCFullYear()%100,t,2)}function pH(e,t){return Me(e.getUTCFullYear()%1e4,t,4)}function mH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ps(e):ps.ceil(e),Me(e.getUTCFullYear()%1e4,t,4)}function gH(){return"+0000"}function s_(){return"%"}function o_(e){return+e}function l_(e){return Math.floor(+e/1e3)}var xa,yP,vP;yH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function yH(e){return xa=yW(e),yP=xa.format,xa.parse,vP=xa.utcFormat,xa.utcParse,xa}function vH(e){return new Date(e)}function xH(e){return e instanceof Date?+e:+new Date(+e)}function Gv(e,t,r,n,i,a,s,l,c,u){var f=$v(),d=f.invert,h=f.domain,p=u(".%L"),b=u(":%S"),v=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),x=u("%b %d"),g=u("%B"),S=u("%Y");function w(_){return(c(_)<_?p:l(_)<_?b:s(_)<_?v:a(_)<_?m:n(_)<_?i(_)<_?y:x:r(_)<_?g:S)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?h(Array.from(_,xH)):h().map(vH)},f.ticks=function(_){var j=h();return e(j[0],j[j.length-1],_??10)},f.tickFormat=function(_,j){return j==null?w:u(j)},f.nice=function(_){var j=h();return(!_||typeof _.range!="function")&&(_=t(j[0],j[j.length-1],_??10)),_?h(iP(j,_)):f},f.copy=function(){return sc(f,Gv(e,t,r,n,i,a,s,l,c,u))},f}function bH(){return Mr.apply(Gv(mW,gW,kn,Hv,Pf,oc,zv,Fv,Wi,yP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wH(){return Mr.apply(Gv(hW,pW,$n,Vv,Of,Af,Wv,qv,Wi,vP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Tf(){var e=0,t=1,r,n,i,a,s=zt,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:s(i===0?.5:(d=(a(d)-r)*i,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(s=d,u):s};function f(d){return function(h){var p,b;return arguments.length?([p,b]=h,s=d(p,b),u):[s(0),s(1)]}}return u.range=f(Ws),u.rangeRound=f(kv),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return a=d,r=d(e),n=d(t),i=r===n?0:1/(n-r),u}}function _i(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function xP(){var e=wi(Tf()(zt));return e.copy=function(){return _i(e,xP())},Ln.apply(e,arguments)}function bP(){var e=Rv(Tf()).domain([1,10]);return e.copy=function(){return _i(e,bP()).base(e.base())},Ln.apply(e,arguments)}function wP(){var e=Dv(Tf());return e.copy=function(){return _i(e,wP()).constant(e.constant())},Ln.apply(e,arguments)}function Kv(){var e=Lv(Tf());return e.copy=function(){return _i(e,Kv()).exponent(e.exponent())},Ln.apply(e,arguments)}function _H(){return Kv.apply(null,arguments).exponent(.5)}function _P(){var e=[],t=zt;function r(n){if(n!=null&&!isNaN(n=+n))return t((ic(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(ci),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>l9(e,a/n))},r.copy=function(){return _P(t).domain(e)},Ln.apply(r,arguments)}function Cf(){var e=0,t=.5,r=1,n=1,i,a,s,l,c,u=zt,f,d=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+f(v))-a)*(n*v<n*a?l:c),u(d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,i=f(e=+e),a=f(t=+t),s=f(r=+r),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function b(v){return function(m){var y,x,g;return arguments.length?([y,x,g]=m,u=I9(v,[y,x,g]),p):[u(0),u(.5),u(1)]}}return p.range=b(Ws),p.rangeRound=b(kv),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return f=v,i=v(e),a=v(t),s=v(r),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,p}}function jP(){var e=wi(Cf()(zt));return e.copy=function(){return _i(e,jP())},Ln.apply(e,arguments)}function SP(){var e=Rv(Cf()).domain([.1,1,10]);return e.copy=function(){return _i(e,SP()).base(e.base())},Ln.apply(e,arguments)}function NP(){var e=Dv(Cf());return e.copy=function(){return _i(e,NP()).constant(e.constant())},Ln.apply(e,arguments)}function Xv(){var e=Lv(Cf());return e.copy=function(){return _i(e,Xv()).exponent(e.exponent())},Ln.apply(e,arguments)}function jH(){return Xv.apply(null,arguments).exponent(.5)}const c_=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:wl,scaleDiverging:jP,scaleDivergingLog:SP,scaleDivergingPow:Xv,scaleDivergingSqrt:jH,scaleDivergingSymlog:NP,scaleIdentity:nP,scaleImplicit:rg,scaleLinear:cd,scaleLog:aP,scaleOrdinal:Ov,scalePoint:Lo,scalePow:Bv,scaleQuantile:lP,scaleQuantize:cP,scaleRadial:oP,scaleSequential:xP,scaleSequentialLog:bP,scaleSequentialPow:Kv,scaleSequentialQuantile:_P,scaleSequentialSqrt:_H,scaleSequentialSymlog:wP,scaleSqrt:nW,scaleSymlog:sP,scaleThreshold:uP,scaleTime:bH,scaleUtc:wH,tickFormat:rP},Symbol.toStringTag,{value:"Module"}));var SH=Rs;function NH(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],s=t(a);if(s!=null&&(l===void 0?s===s&&!SH(s):r(s,l)))var l=s,c=a}return c}var kf=NH;function EH(e,t){return e>t}var EP=EH,AH=kf,PH=EP,OH=zs;function TH(e){return e&&e.length?AH(e,OH,PH):void 0}var CH=TH;const $f=Fe(CH);function kH(e,t){return e<t}var AP=kH,$H=kf,IH=AP,MH=zs;function RH(e){return e&&e.length?$H(e,MH,IH):void 0}var DH=RH;const If=Fe(DH);var LH=ov,BH=bi,UH=MA,FH=nr;function qH(e,t){var r=FH(e)?LH:UH;return r(e,BH(t))}var zH=qH,WH=$A,HH=zH;function VH(e,t){return WH(HH(e,t),1)}var GH=VH;const KH=Fe(GH);var XH=jv;function YH(e,t){return XH(e,t)}var JH=YH;const Yv=Fe(JH);var Hs=1e9,QH={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Qv,et=!0,$r="[DecimalError] ",Yi=$r+"Invalid argument: ",Jv=$r+"Exponent out of range: ",Vs=Math.floor,Ii=Math.pow,ZH=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cr,_t=1e7,Ye=7,PP=9007199254740991,hd=Vs(PP/Ye),pe={};pe.absoluteValue=pe.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};pe.comparedTo=pe.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};pe.decimalPlaces=pe.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ye;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};pe.dividedBy=pe.div=function(e){return Nn(this,new this.constructor(e))};pe.dividedToIntegerBy=pe.idiv=function(e){var t=this,r=t.constructor;return qe(Nn(t,new r(e),0,1),r.precision)};pe.equals=pe.eq=function(e){return!this.cmp(e)};pe.exponent=function(){return mt(this)};pe.greaterThan=pe.gt=function(e){return this.cmp(e)>0};pe.greaterThanOrEqualTo=pe.gte=function(e){return this.cmp(e)>=0};pe.isInteger=pe.isint=function(){return this.e>this.d.length-2};pe.isNegative=pe.isneg=function(){return this.s<0};pe.isPositive=pe.ispos=function(){return this.s>0};pe.isZero=function(){return this.s===0};pe.lessThan=pe.lt=function(e){return this.cmp(e)<0};pe.lessThanOrEqualTo=pe.lte=function(e){return this.cmp(e)<1};pe.logarithm=pe.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(cr))throw Error($r+"NaN");if(r.s<1)throw Error($r+(r.s?"NaN":"-Infinity"));return r.eq(cr)?new n(0):(et=!1,t=Nn(El(r,a),El(e,a),a),et=!0,qe(t,i))};pe.minus=pe.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?CP(t,e):OP(t,(e.s=-e.s,e))};pe.modulo=pe.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error($r+"NaN");return r.s?(et=!1,t=Nn(r,e,0,1).times(e),et=!0,r.minus(t)):qe(new n(r),i)};pe.naturalExponential=pe.exp=function(){return TP(this)};pe.naturalLogarithm=pe.ln=function(){return El(this)};pe.negated=pe.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};pe.plus=pe.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OP(t,e):CP(t,(e.s=-e.s,e))};pe.precision=pe.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Yi+e);if(t=mt(i)+1,n=i.d.length-1,r=n*Ye+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};pe.squareRoot=pe.sqrt=function(){var e,t,r,n,i,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error($r+"NaN")}for(e=mt(l),et=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=nn(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=Vs((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(a=n,n=a.plus(Nn(l,a,s+2)).times(.5),nn(a.d).slice(0,s)===(t=nn(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(qe(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(t!="9999")break;s+=4}return et=!0,qe(n,r)};pe.times=pe.mul=function(e){var t,r,n,i,a,s,l,c,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=h.length,u=p.length,c<u&&(a=h,h=p,p=a,s=c,c=u,u=s),a=[],s=c+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)l=a[i]+p[n]*h[i-n-1]+t,a[i--]=l%_t|0,t=l/_t|0;a[i]=(a[i]+t)%_t|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,et?qe(e,d.precision):e};pe.toDecimalPlaces=pe.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(un(e,0,Hs),t===void 0?t=n.rounding:un(t,0,8),qe(r,e+mt(r)+1,t))};pe.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=na(n,!0):(un(e,0,Hs),t===void 0?t=i.rounding:un(t,0,8),n=qe(new i(n),e+1,t),r=na(n,!0,e+1)),r};pe.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?na(i):(un(e,0,Hs),t===void 0?t=a.rounding:un(t,0,8),n=qe(new a(i),e+mt(i)+1,t),r=na(n.abs(),!1,e+mt(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};pe.toInteger=pe.toint=function(){var e=this,t=e.constructor;return qe(new t(e),mt(e)+1,t.rounding)};pe.toNumber=function(){return+this};pe.toPower=pe.pow=function(e){var t,r,n,i,a,s,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(cr);if(l=new c(l),!l.s){if(e.s<1)throw Error($r+"Infinity");return l}if(l.eq(cr))return l;if(n=c.precision,e.eq(cr))return qe(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=l.s,s){if((r=f<0?-f:f)<=PP){for(i=new c(cr),t=Math.ceil(n/Ye+4),et=!1;r%2&&(i=i.times(l),d_(i.d,t)),r=Vs(r/2),r!==0;)l=l.times(l),d_(l.d,t);return et=!0,e.s<0?new c(cr).div(i):qe(i,n)}}else if(a<0)throw Error($r+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,et=!1,i=e.times(El(l,n+u)),et=!0,i=TP(i),i.s=a,i};pe.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=mt(i),n=na(i,r<=a.toExpNeg||r>=a.toExpPos)):(un(e,1,Hs),t===void 0?t=a.rounding:un(t,0,8),i=qe(new a(i),e,t),r=mt(i),n=na(i,e<=r||r<=a.toExpNeg,e)),n};pe.toSignificantDigits=pe.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(un(e,1,Hs),t===void 0?t=n.rounding:un(t,0,8)),qe(new n(r),e,t)};pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mt(e),r=e.constructor;return na(e,t<=r.toExpNeg||t>=r.toExpPos)};function OP(e,t){var r,n,i,a,s,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),et?qe(t,d):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i,a){for(a<0?(n=c,a=-a,l=u.length):(n=u,i=s,l=c.length),s=Math.ceil(d/Ye),l=s>l?s+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/_t|0,c[a]%=_t;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,et?qe(t,d):t}function un(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Yi+e)}function nn(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=Ye-n.length,r&&(a+=Wn(r)),a+=n;s=e[t],n=s+"",r=Ye-n.length,r&&(a+=Wn(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var Nn=function(){function e(n,i){var a,s=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+s,n[l]=a%_t|0,s=a/_t|0;return s&&n.unshift(s),n}function t(n,i,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*_t+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var l,c,u,f,d,h,p,b,v,m,y,x,g,S,w,_,j,E,A=n.constructor,P=n.s==i.s?1:-1,O=n.d,T=i.d;if(!n.s)return new A(n);if(!i.s)throw Error($r+"Division by zero");for(c=n.e-i.e,j=T.length,w=O.length,p=new A(P),b=p.d=[],u=0;T[u]==(O[u]||0);)++u;if(T[u]>(O[u]||0)&&--c,a==null?x=a=A.precision:s?x=a+(mt(n)-mt(i))+1:x=a,x<0)return new A(0);if(x=x/Ye+2|0,u=0,j==1)for(f=0,T=T[0],x++;(u<w||f)&&x--;u++)g=f*_t+(O[u]||0),b[u]=g/T|0,f=g%T|0;else{for(f=_t/(T[0]+1)|0,f>1&&(T=e(T,f),O=e(O,f),j=T.length,w=O.length),S=j,v=O.slice(0,j),m=v.length;m<j;)v[m++]=0;E=T.slice(),E.unshift(0),_=T[0],T[1]>=_t/2&&++_;do f=0,l=t(T,v,j,m),l<0?(y=v[0],j!=m&&(y=y*_t+(v[1]||0)),f=y/_|0,f>1?(f>=_t&&(f=_t-1),d=e(T,f),h=d.length,m=v.length,l=t(d,v,h,m),l==1&&(f--,r(d,j<h?E:T,h))):(f==0&&(l=f=1),d=T.slice()),h=d.length,h<m&&d.unshift(0),r(v,d,m),l==-1&&(m=v.length,l=t(T,v,j,m),l<1&&(f++,r(v,j<m?E:T,m))),m=v.length):l===0&&(f++,v=[0]),b[u++]=f,l&&v[0]?v[m++]=O[S]||0:(v=[O[S]],m=1);while((S++<w||v[0]!==void 0)&&x--)}return b[0]||b.shift(),p.e=c,qe(p,s?a+mt(p)+1:a)}}();function TP(e,t){var r,n,i,a,s,l,c=0,u=0,f=e.constructor,d=f.precision;if(mt(e)>16)throw Error(Jv+mt(e));if(!e.s)return new f(cr);for(et=!1,l=d,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(Ii(2,u))/Math.LN10*2+5|0,l+=n,r=i=a=new f(cr),f.precision=l;;){if(i=qe(i.times(e),l),r=r.times(++c),s=a.plus(Nn(i,r,l)),nn(s.d).slice(0,l)===nn(a.d).slice(0,l)){for(;u--;)a=qe(a.times(a),l);return f.precision=d,t==null?(et=!0,qe(a,d)):a}a=s}}function mt(e){for(var t=e.e*Ye,r=e.d[0];r>=10;r/=10)t++;return t}function rp(e,t,r){if(t>e.LN10.sd())throw et=!0,r&&(e.precision=r),Error($r+"LN10 precision limit exceeded");return qe(new e(e.LN10),t)}function Wn(e){for(var t="";e--;)t+="0";return t}function El(e,t){var r,n,i,a,s,l,c,u,f,d=1,h=10,p=e,b=p.d,v=p.constructor,m=v.precision;if(p.s<1)throw Error($r+(p.s?"NaN":"-Infinity"));if(p.eq(cr))return new v(0);if(t==null?(et=!1,u=m):u=t,p.eq(10))return t==null&&(et=!0),rp(v,u);if(u+=h,v.precision=u,r=nn(b),n=r.charAt(0),a=mt(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=nn(p.d),n=r.charAt(0),d++;a=mt(p),n>1?(p=new v("0."+r),a++):p=new v(n+"."+r.slice(1))}else return c=rp(v,u+2,m).times(a+""),p=El(new v(n+"."+r.slice(1)),u-h).plus(c),v.precision=m,t==null?(et=!0,qe(p,m)):p;for(l=s=p=Nn(p.minus(cr),p.plus(cr),u),f=qe(p.times(p),u),i=3;;){if(s=qe(s.times(f),u),c=l.plus(Nn(s,new v(i),u)),nn(c.d).slice(0,u)===nn(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(rp(v,u+2,m).times(a+""))),l=Nn(l,new v(d),u),v.precision=m,t==null?(et=!0,qe(l,m)):l;l=c,i+=2}}function u_(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=Vs(r/Ye),e.d=[],n=(r+1)%Ye,r<0&&(n+=Ye),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ye;n<i;)e.d.push(+t.slice(n,n+=Ye));t=t.slice(n),n=Ye-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),et&&(e.e>hd||e.e<-hd))throw Error(Jv+r)}else e.s=0,e.e=0,e.d=[0];return e}function qe(e,t,r){var n,i,a,s,l,c,u,f,d=e.d;for(s=1,a=d[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=Ye,i=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Ye),a=d.length,f>=a)return e;for(u=a=d[f],s=1;a>=10;a/=10)s++;n%=Ye,i=n-Ye+s}if(r!==void 0&&(a=Ii(10,s-i-1),l=u/a%10|0,c=t<0||d[f+1]!==void 0||u%a,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/Ii(10,s-i):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(a=mt(e),d.length=1,t=t-a-1,d[0]=Ii(10,(Ye-t%Ye)%Ye),e.e=Vs(-t/Ye)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,a=1,f--):(d.length=f+1,a=Ii(10,Ye-n),d[f]=i>0?(u/Ii(10,s-i)%Ii(10,i)|0)*a:0),c)for(;;)if(f==0){(d[0]+=a)==_t&&(d[0]=1,++e.e);break}else{if(d[f]+=a,d[f]!=_t)break;d[f--]=0,a=1}for(n=d.length;d[--n]===0;)d.pop();if(et&&(e.e>hd||e.e<-hd))throw Error(Jv+mt(e));return e}function CP(e,t){var r,n,i,a,s,l,c,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),et?qe(t,p):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(f=s<0,f?(r=c,s=-s,l=d.length):(r=d,n=u,l=c.length),i=Math.max(Math.ceil(p/Ye),l)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=d.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){f=c[i]<d[i];break}s=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>s;){if(c[--i]<d[i]){for(a=i;a&&c[--a]===0;)c[a]=_t-1;--c[a],c[i]+=_t}c[i]-=d[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,et?qe(t,p):t):new h(0)}function na(e,t,r){var n,i=mt(e),a=nn(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Wn(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Wn(-i-1)+a,r&&(n=r-s)>0&&(a+=Wn(n))):i>=s?(a+=Wn(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Wn(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Wn(n))),e.s<0?"-"+a:a}function d_(e,t){if(e.length>t)return e.length=t,!0}function kP(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(Yi+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return u_(s,a.toString())}else if(typeof a!="string")throw Error(Yi+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,ZH.test(a))u_(s,a);else throw Error(Yi+a)}if(i.prototype=pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=kP,i.config=i.set=eV,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function eV(e){if(!e||typeof e!="object")throw Error($r+"Object expected");var t,r,n,i=["precision",1,Hs,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(Vs(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Yi+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Yi+r+": "+n);return this}var Qv=kP(QH);cr=new Qv(1);const Be=Qv;function tV(e){return aV(e)||iV(e)||nV(e)||rV()}function rV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nV(e,t){if(e){if(typeof e=="string")return sg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sg(e,t)}}function iV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aV(e){if(Array.isArray(e))return sg(e)}function sg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sV=function(t){return t},$P={},IP=function(t){return t===$P},f_=function(t){return function r(){return arguments.length===0||arguments.length===1&&IP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},oV=function e(t,r){return t===1?r:f_(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(l){return l!==$P}).length;return s>=t?r.apply(void 0,i):e(t-s,f_(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=i.map(function(d){return IP(d)?c.shift():d});return r.apply(void 0,tV(f).concat(c))}))})},Mf=function(t){return oV(t.length,t)},og=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},lV=Mf(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),cV=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return sV;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},lg=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},MP=function(t){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(l,c){return l===r[c]})||(r=a,n=t.apply(void 0,a)),n}};function uV(e){var t;return e===0?t=1:t=Math.floor(new Be(e).abs().log(10).toNumber())+1,t}function dV(e,t,r){for(var n=new Be(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var fV=Mf(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),hV=Mf(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),pV=Mf(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Rf={rangeStep:dV,getDigitCount:uV,interpolateNumber:fV,uninterpolateNumber:hV,uninterpolateTruncation:pV};function cg(e){return yV(e)||gV(e)||RP(e)||mV()}function mV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gV(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function yV(e){if(Array.isArray(e))return ug(e)}function Al(e,t){return bV(e)||xV(e,t)||RP(e,t)||vV()}function vV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RP(e,t){if(e){if(typeof e=="string")return ug(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ug(e,t)}}function ug(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xV(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,a=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function bV(e){if(Array.isArray(e))return e}function DP(e){var t=Al(e,2),r=t[0],n=t[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function LP(e,t,r){if(e.lte(0))return new Be(0);var n=Rf.getDigitCount(e.toNumber()),i=new Be(10).pow(n),a=e.div(i),s=n!==1?.05:.1,l=new Be(Math.ceil(a.div(s).toNumber())).add(r).mul(s),c=l.mul(i);return t?c:new Be(Math.ceil(c))}function wV(e,t,r){var n=1,i=new Be(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new Be(10).pow(Rf.getDigitCount(e)-1),i=new Be(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new Be(Math.floor(e)))}else e===0?i=new Be(Math.floor((t-1)/2)):r||(i=new Be(Math.floor(e)));var s=Math.floor((t-1)/2),l=cV(lV(function(c){return i.add(new Be(c-s).mul(n)).toNumber()}),og);return l(0,t)}function BP(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Be(0),tickMin:new Be(0),tickMax:new Be(0)};var a=LP(new Be(t).sub(e).div(r-1),n,i),s;e<=0&&t>=0?s=new Be(0):(s=new Be(e).add(t).div(2),s=s.sub(new Be(s).mod(a)));var l=Math.ceil(s.sub(e).div(a).toNumber()),c=Math.ceil(new Be(t).sub(s).div(a).toNumber()),u=l+c+1;return u>r?BP(e,t,r,n,i+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:a,tickMin:s.sub(new Be(l).mul(a)),tickMax:s.add(new Be(c).mul(a))})}function _V(e){var t=Al(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),l=DP([r,n]),c=Al(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(cg(og(0,i-1).map(function(){return 1/0}))):[].concat(cg(og(0,i-1).map(function(){return-1/0})),[f]);return r>n?lg(d):d}if(u===f)return wV(u,i,a);var h=BP(u,f,s,a),p=h.step,b=h.tickMin,v=h.tickMax,m=Rf.rangeStep(b,v.add(new Be(.1).mul(p)),p);return r>n?lg(m):m}function jV(e,t){var r=Al(e,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=DP([n,i]),l=Al(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var f=Math.max(t,2),d=LP(new Be(u).sub(c).div(f-1),a,0),h=[].concat(cg(Rf.rangeStep(new Be(c),new Be(u).sub(new Be(.99).mul(d)),d)),[u]);return n>i?lg(h):h}var SV=MP(_V),NV=MP(jV),EV="Invariant failed";function ms(e,t){throw new Error(EV)}var AV=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function gs(e){"@babel/helpers - typeof";return gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(e)}function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pd.apply(this,arguments)}function PV(e,t){return kV(e)||CV(e,t)||TV(e,t)||OV()}function OV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TV(e,t){if(e){if(typeof e=="string")return h_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h_(e,t)}}function h_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function kV(e){if(Array.isArray(e))return e}function $V(e,t){if(e==null)return{};var r=IV(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qP(n.key),n)}}function DV(e,t,r){return t&&RV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LV(e,t,r){return t=md(t),BV(e,UP()?Reflect.construct(t,r||[],md(e).constructor):t.apply(e,r))}function BV(e,t){if(t&&(gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UV(e)}function UV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UP=function(){return!!e})()}function md(e){return md=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},md(e)}function FV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dg(e,t)}function dg(e,t){return dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},dg(e,t)}function FP(e,t,r){return t=qP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qP(e){var t=qV(e,"string");return gs(t)=="symbol"?t:t+""}function qV(e,t){if(gs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zv=function(e){function t(){return MV(this,t),LV(this,t,arguments)}return FV(t,e),DV(t,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=$V(n,AV),p=Pe(h,!1);this.props.direction==="x"&&f.type!=="number"&&ms();var b=c.map(function(v){var m=u(v,l),y=m.x,x=m.y,g=m.value,S=m.errorVal;if(!S)return null;var w=[],_,j;if(Array.isArray(S)){var E=PV(S,2);_=E[0],j=E[1]}else _=j=S;if(a==="vertical"){var A=f.scale,P=x+i,O=P+s,T=P-s,M=A(g-_),B=A(g+j);w.push({x1:B,y1:O,x2:B,y2:T}),w.push({x1:M,y1:P,x2:B,y2:P}),w.push({x1:M,y1:O,x2:M,y2:T})}else if(a==="horizontal"){var C=d.scale,L=y+i,G=L-s,R=L+s,D=C(g-_),W=C(g+j);w.push({x1:G,y1:W,x2:R,y2:W}),w.push({x1:L,y1:D,x2:L,y2:W}),w.push({x1:G,y1:D,x2:R,y2:D})}return z.createElement(lt,pd({className:"recharts-errorBar",key:"bar-".concat(w.map(function(Y){return"".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))},p),w.map(function(Y){return z.createElement("line",pd({},Y,{key:"line-".concat(Y.x1,"-").concat(Y.x2,"-").concat(Y.y1,"-").concat(Y.y2)}))}))});return z.createElement(lt,{className:"recharts-errorBars"},b)}}])}(z.Component);FP(Zv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});FP(Zv,"displayName","ErrorBar");function Pl(e){"@babel/helpers - typeof";return Pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pl(e)}function p_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p_(Object(r),!0).forEach(function(n){zV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zV(e,t,r){return t=WV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=HV(e,"string");return Pl(t)=="symbol"?t:t+""}function HV(e,t){if(Pl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zP=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=xr(r,Ka);if(!s)return null;var l=Ka.defaultProps,c=l!==void 0?Ei(Ei({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,b=p.sectors||p.data||[];return f.concat(b.map(function(v){return{type:s.props.iconType||h.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Ei(Ei({},h),d.props):{},b=p.dataKey,v=p.name,m=p.legendType,y=p.hide;return{inactive:y,dataKey:b,type:c.iconType||m||"square",color:e0(d),value:v||b,payload:p}}),Ei(Ei(Ei({},c),Ka.getWithHeight(s,i)),{},{payload:u,item:s})};function Ol(e){"@babel/helpers - typeof";return Ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ol(e)}function m_(e){return XV(e)||KV(e)||GV(e)||VV()}function VV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GV(e,t){if(e){if(typeof e=="string")return fg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fg(e,t)}}function KV(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XV(e){if(Array.isArray(e))return fg(e)}function fg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g_(Object(r),!0).forEach(function(n){Ya(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ya(e,t,r){return t=YV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YV(e){var t=JV(e,"string");return Ol(t)=="symbol"?t:t+""}function JV(e,t){if(Ol(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ol(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ur(e,t,r){return ke(e)||ke(t)?r:bt(t)?Kr(e,t,r):Oe(t)?t(e):r}function Bo(e,t,r,n){var i=KH(e,function(l){return ur(l,t)});if(r==="number"){var a=i.filter(function(l){return de(l)||parseFloat(l)});return a.length?[If(a),$f(a)]:[1/0,-1/0]}var s=n?i.filter(function(l){return!ke(l)}):i;return s.map(function(l){return bt(l)||l instanceof Date?l:""})}var QV=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var f=u>0?i[u-1].coordinate:i[l-1].coordinate,d=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Pr(d-f)!==Pr(h-d)){var b=[];if(Pr(h-d)===Pr(c[1]-c[0])){p=h;var v=d+c[1]-c[0];b[0]=Math.min(v,(v+f)/2),b[1]=Math.max(v,(v+f)/2)}else{p=f;var m=h+c[1]-c[0];b[0]=Math.min(d,(m+d)/2),b[1]=Math.max(d,(m+d)/2)}var y=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>y[0]&&t<=y[1]||t>=b[0]&&t<=b[1]){s=i[u].index;break}}else{var x=Math.min(f,h),g=Math.max(f,h);if(t>(x+d)/2&&t<=(g+d)/2){s=i[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){s=n[S].index;break}return s},e0=function(t){var r,n=t,i=n.type.displayName,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ot(ot({},t.type.defaultProps),t.props):t.props,s=a.stroke,l=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},ZV=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var f=a[l[c]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var b=f[d[h]],v=b.items,m=b.cateAxisId,y=v.filter(function(j){return jn(j.type).indexOf("Bar")>=0});if(y&&y.length){var x=y[0].type.defaultProps,g=x!==void 0?ot(ot({},x),y[0].props):y[0].props,S=g.barSize,w=g[m];s[w]||(s[w]=[]);var _=ke(S)?r:S;s[w].push({item:y[0],stackList:y.slice(1),barSize:ke(_)?void 0:Yt(_,n,0)})}}return s},eG=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=Yt(r,i,0,!0),f,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/c,b=s.reduce(function(S,w){return S+w.barSize||0},0);b+=(c-1)*u,b>=i&&(b-=(c-1)*u,u=0),b>=i&&p>0&&(h=!0,p*=.9,b=c*p);var v=(i-b)/2>>0,m={offset:v-u,size:0};f=s.reduce(function(S,w){var _={item:w.item,position:{offset:m.offset+m.size+u,size:h?p:w.barSize}},j=[].concat(m_(S),[_]);return m=j[j.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){j.push({item:E,position:m})}),j},d)}else{var y=Yt(n,i,0,!0);i-2*y-(c-1)*u<=0&&(u=0);var x=(i-2*y-(c-1)*u)/c;x>1&&(x>>=0);var g=l===+l?Math.min(x,l):x;f=s.reduce(function(S,w,_){var j=[].concat(m_(S),[{item:w.item,position:{offset:y+(x+u)*_+(x-g)/2,size:g}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){j.push({item:E,position:j[j.length-1].position})}),j},d)}return f},tG=function(t,r,n,i){var a=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=zP({children:a,legendWidth:c});if(u){var f=i||{},d=f.width,h=f.height,p=u.align,b=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&p!=="center"&&de(t[p]))return ot(ot({},t),{},Ya({},p,t[p]+(d||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&b!=="middle"&&de(t[b]))return ot(ot({},t),{},Ya({},b,t[b]+(h||0)))}return t},rG=function(t,r,n){return ke(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},WP=function(t,r,n,i,a){var s=r.props.children,l=on(s,Zv).filter(function(u){return rG(i,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=ur(f,n);if(ke(d))return u;var h=Array.isArray(d)?[If(d),$f(d)]:[d,d],p=c.reduce(function(b,v){var m=ur(f,v,0),y=h[0]-Math.abs(Array.isArray(m)?m[0]:m),x=h[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(y,b[0]),Math.max(x,b[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},nG=function(t,r,n,i,a){var s=r.map(function(l){return WP(t,l,n,a,i)}).filter(function(l){return!ke(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},HP=function(t,r,n,i,a){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&WP(t,c,u,i)||Bo(t,u,n,a)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},VP=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},_o=function(t,r,n){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Pr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return f.filter(function(d){return!nc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:a?a[d]:d,index:h,offset:u}})},np=new WeakMap,Wc=function(t,r){if(typeof r!="function")return t;np.has(t)||np.set(t,new WeakMap);var n=np.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},iG=function(t,r,n){var i=t.scale,a=t.type,s=t.layout,l=t.axisType;if(i==="auto")return s==="radial"&&l==="radiusAxis"?{scale:wl(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:cd(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0)?{scale:Lo(),realScaleType:"point"}:a==="category"?{scale:wl(),realScaleType:"band"}:{scale:cd(),realScaleType:"linear"};if(rc(i)){var c="scale".concat(vf(i));return{scale:(c_[c]||Lo)(),realScaleType:c_[c]?c:"point"}}return Oe(i)?{scale:i}:{scale:Lo(),realScaleType:"point"}},y_=1e-4,aG=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),a=Math.min(i[0],i[1])-y_,s=Math.max(i[0],i[1])+y_,l=t(r[0]),c=t(r[n-1]);(l<a||l>s||c<a||c>s)&&t.domain([r[0],r[n-1]])}},sG=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0,l=0;l<r;++l){var c=nc(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=a,t[l][n][1]=a+c,a=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},oG=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var l=nc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},lG={sign:sG,expand:N4,none:ss,silhouette:E4,wiggle:A4,positive:oG},cG=function(t,r,n){var i=r.map(function(l){return l.props.dataKey}),a=lG[n],s=S4().keys(i).value(function(l,c){return+ur(l,c,0)}).order(Dm).offset(a);return s(t)},uG=function(t,r,n,i,a,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(d,h){var p,b=(p=h.type)!==null&&p!==void 0&&p.defaultProps?ot(ot({},h.type.defaultProps),h.props):h.props,v=b.stackId,m=b.hide;if(m)return d;var y=b[n],x=d[y]||{hasStack:!1,stackGroups:{}};if(bt(v)){var g=x.stackGroups[v]||{numericAxisId:n,cateAxisId:i,items:[]};g.items.push(h),x.hasStack=!0,x.stackGroups[v]=g}else x.stackGroups[gf("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return ot(ot({},d),{},Ya({},y,x))},c),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var b={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,m){var y=p.stackGroups[m];return ot(ot({},v),{},Ya({},m,{numericAxisId:n,cateAxisId:i,items:y.items,stackedData:cG(t,y.items,a)}))},b)}return ot(ot({},d),{},Ya({},h,p))},f)},dG=function(t,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=SV(u,a,l);return t.domain([If(f),$f(f)]),{niceTicks:f}}if(a&&i==="number"){var d=t.domain(),h=NV(d,a,l);return{niceTicks:h}}return null},fG=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ot(ot({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(bt(a)){var s=r[a];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},hG=function(t){return t.reduce(function(r,n){return[If(n.concat([r[0]]).filter(de)),$f(n.concat([r[1]]).filter(de))]},[1/0,-1/0])},GP=function(t,r,n){return Object.keys(t).reduce(function(i,a){var s=t[a],l=s.stackedData,c=l.reduce(function(u,f){var d=hG(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},v_=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,x_=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hg=function(t,r,n){if(Oe(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(de(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(v_.test(t[0])){var a=+v_.exec(t[0])[1];i[0]=r[0]-a}else Oe(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(de(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(x_.test(t[1])){var s=+x_.exec(t[1])[1];i[1]=r[1]+s}else Oe(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},pg=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var a=Nv(r,function(d){return d.coordinate}),s=1/0,l=1,c=a.length;l<c;l++){var u=a[l],f=a[l-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},b_=function(t,r,n){return!t||!t.length||Yv(t,Kr(n,"type.defaultProps.domain"))?r:t},pG=function(t,r){var n=t.type.defaultProps?ot(ot({},t.type.defaultProps),t.props):t.props,i=n.dataKey,a=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return ot(ot({},Pe(t,!1)),{},{dataKey:i,unit:s,formatter:l,name:a||i,color:e0(t),value:ur(r,i),type:c,payload:r,chartType:u,hide:f})};function Tl(e){"@babel/helpers - typeof";return Tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(e)}function w_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w_(Object(r),!0).forEach(function(n){KP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KP(e,t,r){return t=mG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mG(e){var t=gG(e,"string");return Tl(t)=="symbol"?t:t+""}function gG(e,t){if(Tl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yG(e,t){return wG(e)||bG(e,t)||xG(e,t)||vG()}function vG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xG(e,t){if(e){if(typeof e=="string")return __(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return __(e,t)}}function __(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function wG(e){if(Array.isArray(e))return e}var gd=Math.PI/180,_G=function(t){return t*180/Math.PI},Ge=function(t,r,n,i){return{x:t+Math.cos(-gd*i)*n,y:r+Math.sin(-gd*i)*n}},XP=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},jG=function(t,r,n,i,a){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Yt(t.cx,s,s/2),d=Yt(t.cy,l,l/2),h=XP(s,l,n),p=Yt(t.innerRadius,h,0),b=Yt(t.outerRadius,h,h*.8),v=Object.keys(r);return v.reduce(function(m,y){var x=r[y],g=x.domain,S=x.reversed,w;if(ke(x.range))i==="angleAxis"?w=[c,u]:i==="radiusAxis"&&(w=[p,b]),S&&(w=[w[1],w[0]]);else{w=x.range;var _=w,j=yG(_,2);c=j[0],u=j[1]}var E=iG(x,a),A=E.realScaleType,P=E.scale;P.domain(g).range(w),aG(P);var O=dG(P,mn(mn({},x),{},{realScaleType:A})),T=mn(mn(mn({},x),O),{},{range:w,radius:b,realScaleType:A,scale:P,cx:f,cy:d,innerRadius:p,outerRadius:b,startAngle:c,endAngle:u});return mn(mn({},m),{},KP({},y,T))},{})},SG=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},NG=function(t,r){var n=t.x,i=t.y,a=r.cx,s=r.cy,l=SG({x:n,y:i},{x:a,y:s});if(l<=0)return{radius:l};var c=(n-a)/l,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:l,angle:_G(u),angleInRadian:u}},EG=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},AG=function(t,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),l=Math.min(a,s);return t+l*360},j_=function(t,r){var n=t.x,i=t.y,a=NG({x:n,y:i},r),s=a.radius,l=a.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var f=EG(r),d=f.startAngle,h=f.endAngle,p=l,b;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;b=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;b=p>=h&&p<=d}return b?mn(mn({},r),{},{radius:s,angle:AG(p,r)}):null},YP=function(t){return!N.isValidElement(t)&&!Oe(t)&&typeof t!="boolean"?t.className:""};function Cl(e){"@babel/helpers - typeof";return Cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cl(e)}var PG=["offset"];function OG(e){return $G(e)||kG(e)||CG(e)||TG()}function TG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CG(e,t){if(e){if(typeof e=="string")return mg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mg(e,t)}}function kG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $G(e){if(Array.isArray(e))return mg(e)}function mg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IG(e,t){if(e==null)return{};var r=MG(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function MG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function S_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S_(Object(r),!0).forEach(function(n){RG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RG(e,t,r){return t=DG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DG(e){var t=LG(e,"string");return Cl(t)=="symbol"?t:t+""}function LG(e,t){if(Cl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kl.apply(this,arguments)}var BG=function(t){var r=t.value,n=t.formatter,i=ke(t.children)?r:t.children;return Oe(n)?n(i):i},UG=function(t,r){var n=Pr(r-t),i=Math.min(Math.abs(r-t),360);return n*i},FG=function(t,r,n){var i=t.position,a=t.viewBox,s=t.offset,l=t.className,c=a,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,p=c.startAngle,b=c.endAngle,v=c.clockWise,m=(d+h)/2,y=UG(p,b),x=y>=0?1:-1,g,S;i==="insideStart"?(g=p+x*s,S=v):i==="insideEnd"?(g=b-x*s,S=!v):i==="end"&&(g=b+x*s,S=v),S=y<=0?S:!S;var w=Ge(u,f,m,g),_=Ge(u,f,m,g+(S?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(S?0:1,`,
    `).concat(_.x,",").concat(_.y),E=ke(t.id)?gf("recharts-radial-line-"):t.id;return z.createElement("text",kl({},n,{dominantBaseline:"central",className:Ie("recharts-radial-bar-label",l)}),z.createElement("defs",null,z.createElement("path",{id:E,d:j})),z.createElement("textPath",{xlinkHref:"#".concat(E)},r))},qG=function(t){var r=t.viewBox,n=t.offset,i=t.position,a=r,s=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,f=a.startAngle,d=a.endAngle,h=(f+d)/2;if(i==="outside"){var p=Ge(s,l,u+n,h),b=p.x,v=p.y;return{x:b,y:v,textAnchor:b>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var m=(c+u)/2,y=Ge(s,l,m,h),x=y.x,g=y.y;return{x,y:g,textAnchor:"middle",verticalAnchor:"middle"}},zG=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,a=t.position,s=r,l=s.x,c=s.y,u=s.width,f=s.height,d=f>=0?1:-1,h=d*i,p=d>0?"end":"start",b=d>0?"start":"end",v=u>=0?1:-1,m=v*i,y=v>0?"end":"start",x=v>0?"start":"end";if(a==="top"){var g={x:l+u/2,y:c-d*i,textAnchor:"middle",verticalAnchor:p};return gt(gt({},g),n?{height:Math.max(c-n.y,0),width:u}:{})}if(a==="bottom"){var S={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:b};return gt(gt({},S),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(a==="left"){var w={x:l-m,y:c+f/2,textAnchor:y,verticalAnchor:"middle"};return gt(gt({},w),n?{width:Math.max(w.x-n.x,0),height:f}:{})}if(a==="right"){var _={x:l+u+m,y:c+f/2,textAnchor:x,verticalAnchor:"middle"};return gt(gt({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:f}:{})}var j=n?{width:u,height:f}:{};return a==="insideLeft"?gt({x:l+m,y:c+f/2,textAnchor:x,verticalAnchor:"middle"},j):a==="insideRight"?gt({x:l+u-m,y:c+f/2,textAnchor:y,verticalAnchor:"middle"},j):a==="insideTop"?gt({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:b},j):a==="insideBottom"?gt({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:p},j):a==="insideTopLeft"?gt({x:l+m,y:c+h,textAnchor:x,verticalAnchor:b},j):a==="insideTopRight"?gt({x:l+u-m,y:c+h,textAnchor:y,verticalAnchor:b},j):a==="insideBottomLeft"?gt({x:l+m,y:c+f-h,textAnchor:x,verticalAnchor:p},j):a==="insideBottomRight"?gt({x:l+u-m,y:c+f-h,textAnchor:y,verticalAnchor:p},j):Ds(a)&&(de(a.x)||qi(a.x))&&(de(a.y)||qi(a.y))?gt({x:l+Yt(a.x,u),y:c+Yt(a.y,f),textAnchor:"end",verticalAnchor:"end"},j):gt({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},j)},WG=function(t){return"cx"in t&&de(t.cx)};function Tt(e){var t=e.offset,r=t===void 0?5:t,n=IG(e,PG),i=gt({offset:r},n),a=i.viewBox,s=i.position,l=i.value,c=i.children,u=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!a||ke(l)&&ke(c)&&!N.isValidElement(u)&&!Oe(u))return null;if(N.isValidElement(u))return N.cloneElement(u,i);var p;if(Oe(u)){if(p=N.createElement(u,i),N.isValidElement(p))return p}else p=BG(i);var b=WG(a),v=Pe(i,!0);if(b&&(s==="insideStart"||s==="insideEnd"||s==="end"))return FG(i,p,v);var m=b?qG(i):zG(i);return z.createElement(ds,kl({className:Ie("recharts-label",d)},v,m,{breakAll:h}),p)}Tt.displayName="Label";var JP=function(t){var r=t.cx,n=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,b=t.left,v=t.width,m=t.height,y=t.clockWise,x=t.labelViewBox;if(x)return x;if(de(v)&&de(m)){if(de(d)&&de(h))return{x:d,y:h,width:v,height:m};if(de(p)&&de(b))return{x:p,y:b,width:v,height:m}}return de(d)&&de(h)?{x:d,y:h,width:0,height:0}:de(r)&&de(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},HG=function(t,r){return t?t===!0?z.createElement(Tt,{key:"label-implicit",viewBox:r}):bt(t)?z.createElement(Tt,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===Tt?N.cloneElement(t,{key:"label-implicit",viewBox:r}):z.createElement(Tt,{key:"label-implicit",content:t,viewBox:r}):Oe(t)?z.createElement(Tt,{key:"label-implicit",content:t,viewBox:r}):Ds(t)?z.createElement(Tt,kl({viewBox:r},t,{key:"label-implicit"})):null:null},VG=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,a=JP(t),s=on(i,Tt).map(function(c,u){return N.cloneElement(c,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return s;var l=HG(t.label,r||a);return[l].concat(OG(s))};Tt.parseViewBox=JP;Tt.renderCallByParent=VG;function GG(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var KG=GG;const XG=Fe(KG);function $l(e){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$l(e)}var YG=["valueAccessor"],JG=["data","dataKey","clockWise","id","textBreakAll"];function QG(e){return rK(e)||tK(e)||eK(e)||ZG()}function ZG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eK(e,t){if(e){if(typeof e=="string")return gg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gg(e,t)}}function tK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rK(e){if(Array.isArray(e))return gg(e)}function gg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yd(){return yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yd.apply(this,arguments)}function N_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function E_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N_(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return t=iK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iK(e){var t=aK(e,"string");return $l(t)=="symbol"?t:t+""}function aK(e,t){if($l(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($l(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A_(e,t){if(e==null)return{};var r=sK(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function sK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var oK=function(t){return Array.isArray(t.value)?XG(t.value):t.value};function Ji(e){var t=e.valueAccessor,r=t===void 0?oK:t,n=A_(e,YG),i=n.data,a=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=A_(n,JG);return!i||!i.length?null:z.createElement(lt,{className:"recharts-label-list"},i.map(function(f,d){var h=ke(a)?r(f,d):ur(f&&f.payload,a),p=ke(l)?{}:{id:"".concat(l,"-").concat(d)};return z.createElement(Tt,yd({},Pe(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:Tt.parseViewBox(ke(s)?f:E_(E_({},f),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}Ji.displayName="LabelList";function lK(e,t){return e?e===!0?z.createElement(Ji,{key:"labelList-implicit",data:t}):z.isValidElement(e)||Oe(e)?z.createElement(Ji,{key:"labelList-implicit",data:t,content:e}):Ds(e)?z.createElement(Ji,yd({data:t},e,{key:"labelList-implicit"})):null:null}function cK(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=on(n,Ji).map(function(s,l){return N.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return i;var a=lK(e.label,t);return[a].concat(QG(i))}Ji.renderCallByParent=cK;function Il(e){"@babel/helpers - typeof";return Il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Il(e)}function yg(){return yg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yg.apply(this,arguments)}function P_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P_(Object(r),!0).forEach(function(n){uK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uK(e,t,r){return t=dK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dK(e){var t=fK(e,"string");return Il(t)=="symbol"?t:t+""}function fK(e,t){if(Il(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Il(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hK=function(t,r){var n=Pr(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},Hc=function(t){var r=t.cx,n=t.cy,i=t.radius,a=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+i,d=Math.asin(c/f)/gd,h=u?a:a+s*d,p=Ge(r,n,f,h),b=Ge(r,n,i,h),v=u?a-s*d:a,m=Ge(r,n,f*Math.cos(d*gd),v);return{center:p,circleTangency:b,lineTangency:m,theta:d}},QP=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,l=t.endAngle,c=hK(s,l),u=s+c,f=Ge(r,n,a,s),d=Ge(r,n,a,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=Ge(r,n,i,s),b=Ge(r,n,i,u);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},pK=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Pr(f-u),h=Hc({cx:r,cy:n,radius:a,angle:u,sign:d,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,b=h.lineTangency,v=h.theta,m=Hc({cx:r,cy:n,radius:a,angle:f,sign:-d,cornerRadius:s,cornerIsExternal:c}),y=m.circleTangency,x=m.lineTangency,g=m.theta,S=c?Math.abs(u-f):Math.abs(u-f)-v-g;if(S<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):QP({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(S>180),",").concat(+(d<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(i>0){var _=Hc({cx:r,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),j=_.circleTangency,E=_.lineTangency,A=_.theta,P=Hc({cx:r,cy:n,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),O=P.circleTangency,T=P.lineTangency,M=P.theta,B=c?Math.abs(u-f):Math.abs(u-f)-A-M;if(B<0&&s===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},mK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ZP=function(t){var r=O_(O_({},mK),t),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(s<a||f===d)return null;var p=Ie("recharts-sector",h),b=s-a,v=Yt(l,b,0,!0),m;return v>0&&Math.abs(f-d)<360?m=pK({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(v,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):m=QP({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:d}),z.createElement("path",yg({},Pe(r,!0),{className:p,d:m,role:"img"}))};function Ml(e){"@babel/helpers - typeof";return Ml=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(e)}function vg(){return vg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vg.apply(this,arguments)}function T_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function C_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T_(Object(r),!0).forEach(function(n){gK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gK(e,t,r){return t=yK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=vK(e,"string");return Ml(t)=="symbol"?t:t+""}function vK(e,t){if(Ml(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ml(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k_={curveBasisClosed:h4,curveBasisOpen:p4,curveBasis:f4,curveBumpX:QL,curveBumpY:ZL,curveLinearClosed:m4,curveLinear:bf,curveMonotoneX:g4,curveMonotoneY:y4,curveNatural:v4,curveStep:x4,curveStepAfter:w4,curveStepBefore:b4},Vc=function(t){return t.x===+t.x&&t.y===+t.y},ho=function(t){return t.x},po=function(t){return t.y},xK=function(t,r){if(Oe(t))return t;var n="curve".concat(vf(t));return(n==="curveMonotone"||n==="curveBump")&&r?k_["".concat(n).concat(r==="vertical"?"Y":"X")]:k_[n]||bf},bK=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,a=i===void 0?[]:i,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=xK(n,l),d=u?a.filter(function(v){return Vc(v)}):a,h;if(Array.isArray(s)){var p=u?s.filter(function(v){return Vc(v)}):s,b=d.map(function(v,m){return C_(C_({},v),{},{base:p[m]})});return l==="vertical"?h=Rc().y(po).x1(ho).x0(function(v){return v.base.x}):h=Rc().x(ho).y1(po).y0(function(v){return v.base.y}),h.defined(Vc).curve(f),h(b)}return l==="vertical"&&de(s)?h=Rc().y(po).x1(ho).x0(s):de(s)?h=Rc().x(ho).y1(po).y0(s):h=ZE().x(ho).y(po),h.defined(Vc).curve(f),h(d)},xg=function(t){var r=t.className,n=t.points,i=t.path,a=t.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?bK(t):i;return N.createElement("path",vg({},Pe(t,!1),zu(t),{className:Ie("recharts-curve",r),d:s,ref:a}))},eO={exports:{}},wK="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_K=wK,jK=_K;function tO(){}function rO(){}rO.resetWarningCache=tO;var SK=function(){function e(n,i,a,s,l,c){if(c!==jK){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rO,resetWarningCache:tO};return r.PropTypes=r,r};eO.exports=SK();var NK=eO.exports;const Re=Fe(NK);var EK=Object.getOwnPropertyNames,AK=Object.getOwnPropertySymbols,PK=Object.prototype.hasOwnProperty;function $_(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function Gc(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var a=i.cache,s=a.get(r),l=a.get(n);if(s&&l)return s===n&&l===r;a.set(r,n),a.set(n,r);var c=e(r,n,i);return a.delete(r),a.delete(n),c}}function OK(e){return e!=null?e[Symbol.toStringTag]:void 0}function I_(e){return EK(e).concat(AK(e))}var TK=Object.hasOwn||function(e,t){return PK.call(e,t)};function ua(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var CK="__v",kK="__o",$K="_owner",M_=Object.getOwnPropertyDescriptor,R_=Object.keys;function IK(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function MK(e,t){return ua(e.getTime(),t.getTime())}function RK(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function DK(e,t){return e===t}function D_(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.entries(),s,l,c=0;(s=a.next())&&!s.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(i[d]){d++;continue}var h=s.value,p=l.value;if(r.equals(h[0],p[0],c,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=i[d]=!0;break}d++}if(!f)return!1;c++}return!0}var LK=ua;function BK(e,t,r){var n=R_(e),i=n.length;if(R_(t).length!==i)return!1;for(;i-- >0;)if(!nO(e,t,r,n[i]))return!1;return!0}function mo(e,t,r){var n=I_(e),i=n.length;if(I_(t).length!==i)return!1;for(var a,s,l;i-- >0;)if(a=n[i],!nO(e,t,r,a)||(s=M_(e,a),l=M_(t,a),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function UK(e,t){return ua(e.valueOf(),t.valueOf())}function FK(e,t){return e.source===t.source&&e.flags===t.flags}function L_(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.values(),s,l;(s=a.next())&&!s.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function qK(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function zK(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function nO(e,t,r,n){return(n===$K||n===kK||n===CK)&&(e.$$typeof||t.$$typeof)?!0:TK(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var WK="[object Arguments]",HK="[object Boolean]",VK="[object Date]",GK="[object Error]",KK="[object Map]",XK="[object Number]",YK="[object Object]",JK="[object RegExp]",QK="[object Set]",ZK="[object String]",eX="[object URL]",tX=Array.isArray,B_=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,U_=Object.assign,rX=Object.prototype.toString.call.bind(Object.prototype.toString);function nX(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual,p=e.unknownTagComparators;return function(v,m,y){if(v===m)return!0;if(v==null||m==null)return!1;var x=typeof v;if(x!==typeof m)return!1;if(x!=="object")return x==="number"?s(v,m,y):x==="function"?i(v,m,y):!1;var g=v.constructor;if(g!==m.constructor)return!1;if(g===Object)return l(v,m,y);if(tX(v))return t(v,m,y);if(B_!=null&&B_(v))return d(v,m,y);if(g===Date)return r(v,m,y);if(g===RegExp)return u(v,m,y);if(g===Map)return a(v,m,y);if(g===Set)return f(v,m,y);var S=rX(v);if(S===VK)return r(v,m,y);if(S===JK)return u(v,m,y);if(S===KK)return a(v,m,y);if(S===QK)return f(v,m,y);if(S===YK)return typeof v.then!="function"&&typeof m.then!="function"&&l(v,m,y);if(S===eX)return h(v,m,y);if(S===GK)return n(v,m,y);if(S===WK)return l(v,m,y);if(S===HK||S===XK||S===ZK)return c(v,m,y);if(p){var w=p[S];if(!w){var _=OK(v);_&&(w=p[_])}if(w)return w(v,m,y)}return!1}}function iX(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?mo:IK,areDatesEqual:MK,areErrorsEqual:RK,areFunctionsEqual:DK,areMapsEqual:n?$_(D_,mo):D_,areNumbersEqual:LK,areObjectsEqual:n?mo:BK,arePrimitiveWrappersEqual:UK,areRegExpsEqual:FK,areSetsEqual:n?$_(L_,mo):L_,areTypedArraysEqual:n?mo:qK,areUrlsEqual:zK,unknownTagComparators:void 0};if(r&&(i=U_({},i,r(i))),t){var a=Gc(i.areArraysEqual),s=Gc(i.areMapsEqual),l=Gc(i.areObjectsEqual),c=Gc(i.areSetsEqual);i=U_({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:c})}return i}function aX(e){return function(t,r,n,i,a,s,l){return e(t,r,l)}}function sX(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(c,u){var f=n(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,p=f.meta;return r(c,u,{cache:h,equals:i,meta:p,strict:a})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return r(c,u,s)}}var oX=ji();ji({strict:!0});ji({circular:!0});ji({circular:!0,strict:!0});ji({createInternalComparator:function(){return ua}});ji({strict:!0,createInternalComparator:function(){return ua}});ji({circular:!0,createInternalComparator:function(){return ua}});ji({circular:!0,createInternalComparator:function(){return ua},strict:!0});function ji(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,l=iX(e),c=nX(l),u=n?n(c):aX(c);return sX({circular:r,comparator:c,createState:i,equals:u,strict:s})}function lX(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function F_(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>t?(e(a),r=-1):lX(i)};requestAnimationFrame(n)}function bg(e){"@babel/helpers - typeof";return bg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function cX(e){return hX(e)||fX(e)||dX(e)||uX()}function uX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dX(e,t){if(e){if(typeof e=="string")return q_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q_(e,t)}}function q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hX(e){if(Array.isArray(e))return e}function pX(){var e={},t=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,l=cX(s),c=l[0],u=l.slice(1);if(typeof c=="number"){F_(i.bind(null,u),c);return}i(c),F_(i.bind(null,u));return}bg(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function Rl(e){"@babel/helpers - typeof";return Rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rl(e)}function z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function W_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z_(Object(r),!0).forEach(function(n){iO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iO(e,t,r){return t=mX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mX(e){var t=gX(e,"string");return Rl(t)==="symbol"?t:String(t)}function gX(e,t){if(Rl(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rl(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yX=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},vX=function(t){return t},xX=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Uo=function(t,r){return Object.keys(r).reduce(function(n,i){return W_(W_({},n),{},iO({},i,t(i,r[i])))},{})},H_=function(t,r,n){return t.map(function(i){return"".concat(xX(i)," ").concat(r,"ms ").concat(n)}).join(",")};function bX(e,t){return jX(e)||_X(e,t)||aO(e,t)||wX()}function wX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _X(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function jX(e){if(Array.isArray(e))return e}function SX(e){return AX(e)||EX(e)||aO(e)||NX()}function NX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aO(e,t){if(e){if(typeof e=="string")return wg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wg(e,t)}}function EX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AX(e){if(Array.isArray(e))return wg(e)}function wg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vd=1e-4,sO=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},oO=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},V_=function(t,r){return function(n){var i=sO(t,r);return oO(i,n)}},PX=function(t,r){return function(n){var i=sO(t,r),a=[].concat(SX(i.map(function(s,l){return s*l}).slice(1)),[0]);return oO(a,n)}},G_=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,l=1;break;case"ease":i=.25,a=.1,s=.25,l=1;break;case"ease-in":i=.42,a=0,s=1,l=1;break;case"ease-out":i=.42,a=0,s=.58,l=1;break;case"ease-in-out":i=0,a=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),f=bX(u,4);i=f[0],a=f[1],s=f[2],l=f[3]}}}var d=V_(i,s),h=V_(a,l),p=PX(i,s),b=function(y){return y>1?1:y<0?0:y},v=function(y){for(var x=y>1?1:y,g=x,S=0;S<8;++S){var w=d(g)-x,_=p(g);if(Math.abs(w-x)<vd||_<vd)return h(g);g=b(g-w/_)}return h(g)};return v.isStepper=!1,v},OX=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,a=i===void 0?8:i,s=t.dt,l=s===void 0?17:s,c=function(f,d,h){var p=-(f-d)*n,b=h*a,v=h+(p-b)*l/1e3,m=h*l/1e3+f;return Math.abs(m-d)<vd&&Math.abs(v)<vd?[d,0]:[m,v]};return c.isStepper=!0,c.dt=l,c},TX=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return G_(i);case"spring":return OX();default:if(i.split("(")[0]==="cubic-bezier")return G_(i)}return typeof i=="function"?i:null};function Dl(e){"@babel/helpers - typeof";return Dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dl(e)}function K_(e){return $X(e)||kX(e)||lO(e)||CX()}function CX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $X(e){if(Array.isArray(e))return jg(e)}function X_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X_(Object(r),!0).forEach(function(n){_g(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _g(e,t,r){return t=IX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IX(e){var t=MX(e,"string");return Dl(t)==="symbol"?t:String(t)}function MX(e,t){if(Dl(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dl(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RX(e,t){return BX(e)||LX(e,t)||lO(e,t)||DX()}function DX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lO(e,t){if(e){if(typeof e=="string")return jg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jg(e,t)}}function jg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function LX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function BX(e){if(Array.isArray(e))return e}var xd=function(t,r,n){return t+(r-t)*n},Sg=function(t){var r=t.from,n=t.to;return r!==n},UX=function e(t,r,n){var i=Uo(function(a,s){if(Sg(s)){var l=t(s.from,s.to,s.velocity),c=RX(l,2),u=c[0],f=c[1];return At(At({},s),{},{from:u,velocity:f})}return s},r);return n<1?Uo(function(a,s){return Sg(s)?At(At({},s),{},{velocity:xd(s.velocity,i[a].velocity,n),from:xd(s.from,i[a].from,n)}):s},r):e(t,i,n-1)};const FX=function(e,t,r,n,i){var a=yX(e,t),s=a.reduce(function(m,y){return At(At({},m),{},_g({},y,[e[y],t[y]]))},{}),l=a.reduce(function(m,y){return At(At({},m),{},_g({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return Uo(function(y,x){return x.from},l)},p=function(){return!Object.values(l).filter(Sg).length},b=function(y){u||(u=y);var x=y-u,g=x/r.dt;l=UX(r,l,g),i(At(At(At({},e),t),h())),u=y,p()||(c=requestAnimationFrame(d))},v=function(y){f||(f=y);var x=(y-f)/n,g=Uo(function(w,_){return xd.apply(void 0,K_(_).concat([r(x)]))},s);if(i(At(At(At({},e),t),g)),x<1)c=requestAnimationFrame(d);else{var S=Uo(function(w,_){return xd.apply(void 0,K_(_).concat([r(1)]))},s);i(At(At(At({},e),t),S))}};return d=r.isStepper?b:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function ys(e){"@babel/helpers - typeof";return ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ys(e)}var qX=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function zX(e,t){if(e==null)return{};var r=WX(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WX(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ip(e){return KX(e)||GX(e)||VX(e)||HX()}function HX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VX(e,t){if(e){if(typeof e=="string")return Ng(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ng(e,t)}}function GX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KX(e){if(Array.isArray(e))return Ng(e)}function Ng(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Y_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y_(Object(r),!0).forEach(function(n){jo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jo(e,t,r){return t=cO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YX(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cO(n.key),n)}}function JX(e,t,r){return t&&YX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cO(e){var t=QX(e,"string");return ys(t)==="symbol"?t:String(t)}function QX(e,t){if(ys(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ys(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eg(e,t)}function Eg(e,t){return Eg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Eg(e,t)}function eY(e){var t=tY();return function(){var n=bd(e),i;if(t){var a=bd(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return Ag(this,i)}}function Ag(e,t){if(t&&(ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pg(e)}function Pg(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bd(e){return bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bd(e)}var hi=function(e){ZX(r,e);var t=eY(r);function r(n,i){var a;XX(this,r),a=t.call(this,n,i);var s=a.props,l=s.isActive,c=s.attributeName,u=s.from,f=s.to,d=s.steps,h=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(Pg(a)),a.changeStyle=a.changeStyle.bind(Pg(a)),!l||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:f}),Ag(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof h=="function")return a.state={style:u},Ag(a);a.state={style:c?jo({},c,u):u}}else a.state={style:{}};return a}return JX(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,f=a.to,d=a.from,h=this.state.style;if(l){if(!s){var p={style:c?jo({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(p);return}if(!(oX(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||u?d:i.to;if(this.state&&h){var m={style:c?jo({},c,v):v};(c&&h[c]!==v||!c&&h!==v)&&this.setState(m)}this.runAnimation(Dr(Dr({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,l=i.to,c=i.duration,u=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=FX(s,l,TX(u),c,this.changeStyle),b=function(){a.stopJSAnimation=p()};this.manager.start([h,f,b,c,d])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,l=i.begin,c=i.onAnimationStart,u=s[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(v,m,y){if(y===0)return v;var x=m.duration,g=m.easing,S=g===void 0?"ease":g,w=m.style,_=m.properties,j=m.onAnimationEnd,E=y>0?s[y-1]:m,A=_||Object.keys(w);if(typeof S=="function"||S==="spring")return[].concat(ip(v),[a.runJSAnimation.bind(a,{from:E.style,to:w,duration:x,easing:S}),x]);var P=H_(A,x,S),O=Dr(Dr(Dr({},E.style),w),{},{transition:P});return[].concat(ip(v),[O,x,j]).filter(vX)};return this.manager.start([c].concat(ip(s.reduce(p,[f,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=pX());var a=i.begin,s=i.duration,l=i.attributeName,c=i.to,u=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var v=l?jo({},l,c):c,m=H_(Object.keys(v),s,u);b.start([f,a,Dr(Dr({},v),{},{transition:m}),s,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=zX(i,qX),u=N.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!l||u===0||s<=0)return a;var d=function(p){var b=p.props,v=b.style,m=v===void 0?{}:v,y=b.className,x=N.cloneElement(p,Dr(Dr({},c),{},{style:Dr(Dr({},m),f),className:y}));return x};return u===1?d(N.Children.only(a)):z.createElement("div",null,N.Children.map(a,function(h){return d(h)}))}}]),r}(N.PureComponent);hi.displayName="Animate";hi.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};hi.propTypes={from:Re.oneOfType([Re.object,Re.string]),to:Re.oneOfType([Re.object,Re.string]),attributeName:Re.string,duration:Re.number,begin:Re.number,easing:Re.oneOfType([Re.string,Re.func]),steps:Re.arrayOf(Re.shape({duration:Re.number.isRequired,style:Re.object.isRequired,easing:Re.oneOfType([Re.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Re.func]),properties:Re.arrayOf("string"),onAnimationEnd:Re.func})),children:Re.oneOfType([Re.node,Re.func]),isActive:Re.bool,canBegin:Re.bool,onAnimationEnd:Re.func,shouldReAnimate:Re.bool,onAnimationStart:Re.func,onAnimationReStart:Re.func};function Ll(e){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(e)}function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wd.apply(this,arguments)}function rY(e,t){return sY(e)||aY(e,t)||iY(e,t)||nY()}function nY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iY(e,t){if(e){if(typeof e=="string")return J_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J_(e,t)}}function J_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function aY(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function sY(e){if(Array.isArray(e))return e}function Q_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Z_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Q_(Object(r),!0).forEach(function(n){oY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oY(e,t,r){return t=lY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lY(e){var t=cY(e,"string");return Ll(t)=="symbol"?t:t+""}function cY(e,t){if(Ll(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ll(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e1=function(t,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,f;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=a[h]>s?s:a[h];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+i-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+i)),f+="L ".concat(t+c*d[3],",").concat(r+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-l*d[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var b=Math.min(s,a);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+n-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-c*b,",").concat(r+i,`
            L `).concat(t+c*b,",").concat(r+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+i-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return f},uY=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,a=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),f=Math.max(a,a+l),d=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=f&&i>=d&&i<=h}return!1},dY={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},t0=function(t){var r=Z_(Z_({},dY),t),n=N.useRef(),i=N.useState(-1),a=rY(i,2),s=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,b=r.animationEasing,v=r.animationDuration,m=r.animationBegin,y=r.isAnimationActive,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var g=Ie("recharts-rectangle",p);return x?z.createElement(hi,{canBegin:s>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:b,isActive:x},function(S){var w=S.width,_=S.height,j=S.x,E=S.y;return z.createElement(hi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:v,isActive:y,easing:b},z.createElement("path",wd({},Pe(r,!0),{className:g,d:e1(j,E,w,_,h),ref:n})))}):z.createElement("path",wd({},Pe(r,!0),{className:g,d:e1(c,u,f,d,h)}))},fY=["points","className","baseLinePoints","connectNulls"];function La(){return La=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},La.apply(this,arguments)}function hY(e,t){if(e==null)return{};var r=pY(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function t1(e){return vY(e)||yY(e)||gY(e)||mY()}function mY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gY(e,t){if(e){if(typeof e=="string")return Og(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Og(e,t)}}function yY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vY(e){if(Array.isArray(e))return Og(e)}function Og(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var r1=function(t){return t&&t.x===+t.x&&t.y===+t.y},xY=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){r1(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),r1(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Fo=function(t,r){var n=xY(t);r&&(n=[n.reduce(function(a,s){return[].concat(t1(a),t1(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},bY=function(t,r,n){var i=Fo(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Fo(r.reverse(),n).slice(1))},wY=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,a=t.connectNulls,s=hY(t,fY);if(!r||!r.length)return null;var l=Ie("recharts-polygon",n);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=bY(r,i,a);return z.createElement("g",{className:l},z.createElement("path",La({},Pe(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?z.createElement("path",La({},Pe(s,!0),{fill:"none",d:Fo(r,a)})):null,c?z.createElement("path",La({},Pe(s,!0),{fill:"none",d:Fo(i,a)})):null)}var f=Fo(r,a);return z.createElement("path",La({},Pe(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:l,d:f}))};function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tg.apply(this,arguments)}var r0=function(t){var r=t.cx,n=t.cy,i=t.r,a=t.className,s=Ie("recharts-dot",a);return r===+r&&n===+n&&i===+i?N.createElement("circle",Tg({},Pe(t,!1),zu(t),{className:s,cx:r,cy:n,r:i})):null};function Bl(e){"@babel/helpers - typeof";return Bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bl(e)}var _Y=["x","y","top","left","width","height","className"];function Cg(){return Cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cg.apply(this,arguments)}function n1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n1(Object(r),!0).forEach(function(n){SY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SY(e,t,r){return t=NY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=EY(e,"string");return Bl(t)=="symbol"?t:t+""}function EY(e,t){if(Bl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AY(e,t){if(e==null)return{};var r=PY(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function PY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var OY=function(t,r,n,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},TY=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,b=t.className,v=AY(t,_Y),m=jY({x:n,y:a,top:l,left:u,width:d,height:p},v);return!de(n)||!de(a)||!de(d)||!de(p)||!de(l)||!de(u)?null:z.createElement("path",Cg({},Pe(m,!0),{className:Ie("recharts-cross",b),d:OY(n,a,d,p,l,u)}))},CY=kf,kY=EP,$Y=bi;function IY(e,t){return e&&e.length?CY(e,$Y(t),kY):void 0}var MY=IY;const RY=Fe(MY);var DY=kf,LY=bi,BY=AP;function UY(e,t){return e&&e.length?DY(e,LY(t),BY):void 0}var FY=UY;const qY=Fe(FY);var zY=["cx","cy","angle","ticks","axisLine"],WY=["ticks","tick","angle","tickFormatter","stroke"];function vs(e){"@babel/helpers - typeof";return vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(e)}function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qo.apply(this,arguments)}function i1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ai(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i1(Object(r),!0).forEach(function(n){Df(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a1(e,t){if(e==null)return{};var r=HY(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function VY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,dO(n.key),n)}}function GY(e,t,r){return t&&s1(e.prototype,t),r&&s1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function KY(e,t,r){return t=_d(t),XY(e,uO()?Reflect.construct(t,r||[],_d(e).constructor):t.apply(e,r))}function XY(e,t){if(t&&(vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YY(e)}function YY(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uO=function(){return!!e})()}function _d(e){return _d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_d(e)}function JY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kg(e,t)}function kg(e,t){return kg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},kg(e,t)}function Df(e,t,r){return t=dO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dO(e){var t=QY(e,"string");return vs(t)=="symbol"?t:t+""}function QY(e,t){if(vs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lf=function(e){function t(){return VY(this,t),KY(this,t,arguments)}return JY(t,e),GY(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,l=a.cx,c=a.cy;return Ge(l,c,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,c=RY(l,function(f){return f.coordinate||0}),u=qY(l,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=a1(n,zY),f=l.reduce(function(b,v){return[Math.min(b[0],v.coordinate),Math.max(b[1],v.coordinate)]},[1/0,-1/0]),d=Ge(i,a,f[0],s),h=Ge(i,a,f[1],s),p=Ai(Ai(Ai({},Pe(u,!1)),{},{fill:"none"},Pe(c,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return z.createElement("line",qo({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,f=a1(i,WY),d=this.getTickTextAnchor(),h=Pe(f,!1),p=Pe(s,!1),b=a.map(function(v,m){var y=n.getTickValueCoord(v),x=Ai(Ai(Ai(Ai({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(y.x,", ").concat(y.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:m},y),{},{payload:v});return z.createElement(lt,qo({className:Ie("recharts-polar-radius-axis-tick",YP(s)),key:"tick-".concat(v.coordinate)},yf(n.props,v,m)),t.renderTickItem(s,x,c?c(v.value,m):v.value))});return z.createElement(lt,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:z.createElement(lt,{className:Ie("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),Tt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return z.isValidElement(n)?s=z.cloneElement(n,i):Oe(n)?s=n(i):s=z.createElement(ds,qo({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(N.PureComponent);Df(Lf,"displayName","PolarRadiusAxis");Df(Lf,"axisType","radiusAxis");Df(Lf,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function xs(e){"@babel/helpers - typeof";return xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xs(e)}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Di.apply(this,arguments)}function o1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o1(Object(r),!0).forEach(function(n){Bf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,hO(n.key),n)}}function eJ(e,t,r){return t&&l1(e.prototype,t),r&&l1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function tJ(e,t,r){return t=jd(t),rJ(e,fO()?Reflect.construct(t,r||[],jd(e).constructor):t.apply(e,r))}function rJ(e,t){if(t&&(xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nJ(e)}function nJ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fO=function(){return!!e})()}function jd(e){return jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jd(e)}function iJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$g(e,t)}function $g(e,t){return $g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$g(e,t)}function Bf(e,t,r){return t=hO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hO(e){var t=aJ(e,"string");return xs(t)=="symbol"?t:t+""}function aJ(e,t){if(xs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sJ=Math.PI/180,c1=1e-5,Uf=function(e){function t(){return ZY(this,t),tJ(this,t,arguments)}return iJ(t,e),eJ(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,f=u||8,d=Ge(a,s,l,n.coordinate),h=Ge(a,s,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*sJ),s;return a>c1?s=i==="outer"?"start":"end":a<-c1?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=Pi(Pi({},Pe(this.props,!1)),{},{fill:"none"},Pe(l,!1));if(c==="circle")return z.createElement(r0,Di({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var f=this.props.ticks,d=f.map(function(h){return Ge(i,a,s,h.coordinate)});return z.createElement(wY,Di({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,f=Pe(this.props,!1),d=Pe(s,!1),h=Pi(Pi({},f),{},{fill:"none"},Pe(l,!1)),p=a.map(function(b,v){var m=n.getTickLineCoord(b),y=n.getTickTextAnchor(b),x=Pi(Pi(Pi({textAnchor:y},f),{},{stroke:"none",fill:u},d),{},{index:v,payload:b,x:m.x2,y:m.y2});return z.createElement(lt,Di({className:Ie("recharts-polar-angle-axis-tick",YP(s)),key:"tick-".concat(b.coordinate)},yf(n.props,b,v)),l&&z.createElement("line",Di({className:"recharts-polar-angle-axis-tick-line"},h,m)),s&&t.renderTickItem(s,x,c?c(b.value,v):b.value))});return z.createElement(lt,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:z.createElement(lt,{className:Ie("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return z.isValidElement(n)?s=z.cloneElement(n,i):Oe(n)?s=n(i):s=z.createElement(ds,Di({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(N.PureComponent);Bf(Uf,"displayName","PolarAngleAxis");Bf(Uf,"axisType","angleAxis");Bf(Uf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var oJ=jA,lJ=oJ(Object.getPrototypeOf,Object),cJ=lJ,uJ=Rn,dJ=cJ,fJ=Dn,hJ="[object Object]",pJ=Function.prototype,mJ=Object.prototype,pO=pJ.toString,gJ=mJ.hasOwnProperty,yJ=pO.call(Object);function vJ(e){if(!fJ(e)||uJ(e)!=hJ)return!1;var t=dJ(e);if(t===null)return!0;var r=gJ.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&pO.call(r)==yJ}var xJ=vJ;const bJ=Fe(xJ);var wJ=Rn,_J=Dn,jJ="[object Boolean]";function SJ(e){return e===!0||e===!1||_J(e)&&wJ(e)==jJ}var NJ=SJ;const EJ=Fe(NJ);function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function Sd(){return Sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sd.apply(this,arguments)}function AJ(e,t){return CJ(e)||TJ(e,t)||OJ(e,t)||PJ()}function PJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OJ(e,t){if(e){if(typeof e=="string")return u1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u1(e,t)}}function u1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function CJ(e){if(Array.isArray(e))return e}function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function f1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){kJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kJ(e,t,r){return t=$J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=IJ(e,"string");return Ul(t)=="symbol"?t:t+""}function IJ(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h1=function(t,r,n,i,a){var s=n-i,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+a),l+="L ".concat(t+n-s/2-i,",").concat(r+a),l+="L ".concat(t,",").concat(r," Z"),l},MJ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RJ=function(t){var r=f1(f1({},MJ),t),n=N.useRef(),i=N.useState(-1),a=AJ(i,2),s=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var g=n.current.getTotalLength();g&&l(g)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,b=r.animationEasing,v=r.animationDuration,m=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var x=Ie("recharts-trapezoid",p);return y?z.createElement(hi,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:v,animationEasing:b,isActive:y},function(g){var S=g.upperWidth,w=g.lowerWidth,_=g.height,j=g.x,E=g.y;return z.createElement(hi,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:v,easing:b},z.createElement("path",Sd({},Pe(r,!0),{className:x,d:h1(j,E,S,w,_),ref:n})))}):z.createElement("g",null,z.createElement("path",Sd({},Pe(r,!0),{className:x,d:h1(c,u,f,d,h)})))},DJ=["option","shapeType","propTransformer","activeClassName","isActive"];function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}function LJ(e,t){if(e==null)return{};var r=BJ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function p1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p1(Object(r),!0).forEach(function(n){UJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UJ(e,t,r){return t=FJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FJ(e){var t=qJ(e,"string");return Fl(t)=="symbol"?t:t+""}function qJ(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zJ(e,t){return Nd(Nd({},t),e)}function WJ(e,t){return e==="symbols"}function m1(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return z.createElement(t0,r);case"trapezoid":return z.createElement(RJ,r);case"sector":return z.createElement(ZP,r);case"symbols":if(WJ(t))return z.createElement(gv,r);break;default:return null}}function HJ(e){return N.isValidElement(e)?e.props:e}function VJ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?zJ:n,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,l=e.isActive,c=LJ(e,DJ),u;if(N.isValidElement(t))u=N.cloneElement(t,Nd(Nd({},c),HJ(t)));else if(Oe(t))u=t(c);else if(bJ(t)&&!EJ(t)){var f=i(t,c);u=z.createElement(m1,{shapeType:r,elementProps:f})}else{var d=c;u=z.createElement(m1,{shapeType:r,elementProps:d})}return l?z.createElement(lt,{className:s},u):u}function Ff(e,t){return t!=null&&"trapezoids"in e.props}function qf(e,t){return t!=null&&"sectors"in e.props}function ql(e,t){return t!=null&&"points"in e.props}function GJ(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,a=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&a}function KJ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function XJ(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function YJ(e,t){var r;return Ff(e,t)?r=GJ:qf(e,t)?r=KJ:ql(e,t)&&(r=XJ),r}function JJ(e,t){var r;return Ff(e,t)?r="trapezoids":qf(e,t)?r="sectors":ql(e,t)&&(r="points"),r}function QJ(e,t){if(Ff(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(qf(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return ql(e,t)?t.payload:{}}function ZJ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=JJ(r,t),a=QJ(r,t),s=n.filter(function(c,u){var f=Yv(a,c),d=r.props[i].filter(function(b){var v=YJ(r,t);return v(b,t)}),h=r.props[i].indexOf(d[d.length-1]),p=u===h;return f&&p}),l=n.indexOf(s[s.length-1]);return l}var du;function bs(e){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(e)}function Ba(){return Ba=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ba.apply(this,arguments)}function g1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(r),!0).forEach(function(n){_r(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gO(n.key),n)}}function tQ(e,t,r){return t&&y1(e.prototype,t),r&&y1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rQ(e,t,r){return t=Ed(t),nQ(e,mO()?Reflect.construct(t,r||[],Ed(e).constructor):t.apply(e,r))}function nQ(e,t){if(t&&(bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iQ(e)}function iQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mO=function(){return!!e})()}function Ed(e){return Ed=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ed(e)}function aQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ig(e,t)}function Ig(e,t){return Ig=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ig(e,t)}function _r(e,t,r){return t=gO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gO(e){var t=sQ(e,"string");return bs(t)=="symbol"?t:t+""}function sQ(e,t){if(bs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bn=function(e){function t(r){var n;return eQ(this,t),n=rQ(this,t,[r]),_r(n,"pieRef",null),_r(n,"sectorRefs",[]),_r(n,"id",gf("recharts-pie-")),_r(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Oe(i)&&i()}),_r(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Oe(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return aQ(t,e),tQ(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,f=Pe(this.props,!1),d=Pe(s,!1),h=Pe(l,!1),p=s&&s.offsetRadius||20,b=n.map(function(v,m){var y=(v.startAngle+v.endAngle)/2,x=Ge(v.cx,v.cy,v.outerRadius+p,y),g=We(We(We(We({},f),v),{},{stroke:"none"},d),{},{index:m,textAnchor:t.getTextAnchor(x.x,v.cx)},x),S=We(We(We(We({},f),v),{},{fill:"none",stroke:v.fill},h),{},{index:m,points:[Ge(v.cx,v.cy,v.outerRadius,y),x]}),w=c;return ke(c)&&ke(u)?w="value":ke(c)&&(w=u),z.createElement(lt,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(m)},l&&t.renderLabelLineItem(l,S,"line"),t.renderLabelItem(s,g,ur(v,w)))});return z.createElement(lt,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var i=this,a=this.props,s=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return n.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=i.isActiveIndex(f),h=c&&i.hasActiveIndex()?c:null,p=d?s:h,b=We(We({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return z.createElement(lt,Ba({ref:function(m){m&&!i.sectorRefs.includes(m)&&i.sectorRefs.push(m)},tabIndex:-1,className:"recharts-pie-sector"},yf(i.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),z.createElement(VJ,Ba({option:p,isActive:d,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,a=i.sectors,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state,h=d.prevSectors,p=d.prevIsAnimationActive;return z.createElement(hi,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var v=b.t,m=[],y=a&&a[0],x=y.startAngle;return a.forEach(function(g,S){var w=h&&h[S],_=S>0?Kr(g,"paddingAngle",0):0;if(w){var j=cb(w.endAngle-w.startAngle,g.endAngle-g.startAngle),E=We(We({},g),{},{startAngle:x+_,endAngle:x+j(v)+_});m.push(E),x=E.endAngle}else{var A=g.endAngle,P=g.startAngle,O=cb(0,A-P),T=O(v),M=We(We({},g),{},{startAngle:x+_,endAngle:x+T+_});m.push(M),x=M.endAngle}}),z.createElement(lt,null,n.renderSectorsStatically(m))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,a=n.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Yv(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,a=i.hide,s=i.sectors,l=i.className,c=i.label,u=i.cx,f=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,b=this.state.isAnimationFinished;if(a||!s||!s.length||!de(u)||!de(f)||!de(d)||!de(h))return null;var v=Ie("recharts-pie",l);return z.createElement(lt,{tabIndex:this.props.rootTabIndex,className:v,ref:function(y){n.pieRef=y}},this.renderSectors(),c&&this.renderLabels(s),Tt.renderCallByParent(this.props,null,!1),(!p||b)&&Ji.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,a){if(z.isValidElement(n))return z.cloneElement(n,i);if(Oe(n))return n(i);var s=Ie("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return z.createElement(xg,Ba({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,i,a){if(z.isValidElement(n))return z.cloneElement(n,i);var s=a;if(Oe(n)&&(s=n(i),z.isValidElement(s)))return s;var l=Ie("recharts-pie-label-text",typeof n!="boolean"&&!Oe(n)?n.className:"");return z.createElement(ds,Ba({},i,{alignmentBaseline:"middle",className:l}),s)}}])}(N.PureComponent);du=Bn;_r(Bn,"displayName","Pie");_r(Bn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Nf.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_r(Bn,"parseDeltaAngle",function(e,t){var r=Pr(t-e),n=Math.min(Math.abs(t-e),360);return r*n});_r(Bn,"getRealPieData",function(e){var t=e.data,r=e.children,n=Pe(e,!1),i=on(r,Av);return t&&t.length?t.map(function(a,s){return We(We(We({payload:a},n),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return We(We({},n),a.props)}):[]});_r(Bn,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,a=t.height,s=XP(i,a),l=n+Yt(e.cx,i,i/2),c=r+Yt(e.cy,a,a/2),u=Yt(e.innerRadius,s,0),f=Yt(e.outerRadius,s,s*.8),d=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:d}});_r(Bn,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?We(We({},t.type.defaultProps),t.props):t.props,i=du.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,f=n.nameKey,d=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),b=du.parseCoordinateOfPie(n,r),v=du.parseDeltaAngle(s,l),m=Math.abs(v),y=u;ke(u)&&ke(d)?(Sn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y="value"):ke(u)&&(Sn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),y=d);var x=i.filter(function(E){return ur(E,y,0)!==0}).length,g=(m>=360?x:x-1)*c,S=m-x*p-g,w=i.reduce(function(E,A){var P=ur(A,y,0);return E+(de(P)?P:0)},0),_;if(w>0){var j;_=i.map(function(E,A){var P=ur(E,y,0),O=ur(E,f,A),T=(de(P)?P:0)/w,M;A?M=j.endAngle+Pr(v)*c*(P!==0?1:0):M=s;var B=M+Pr(v)*((P!==0?p:0)+T*S),C=(M+B)/2,L=(b.innerRadius+b.outerRadius)/2,G=[{name:O,value:P,payload:E,dataKey:y,type:h}],R=Ge(b.cx,b.cy,L,C);return j=We(We(We({percent:T,cornerRadius:a,name:O,tooltipPayload:G,midAngle:C,middleRadius:L,tooltipPosition:R},E),b),{},{value:ur(E,y),startAngle:M,endAngle:B,payload:E,paddingAngle:Pr(v)*c}),j})}return We(We({},b),{},{sectors:_,data:i})});var oQ=Math.ceil,lQ=Math.max;function cQ(e,t,r,n){for(var i=-1,a=lQ(oQ((t-e)/(r||1)),0),s=Array(a);a--;)s[n?a:++i]=e,e+=r;return s}var uQ=cQ,dQ=FA,v1=1/0,fQ=17976931348623157e292;function hQ(e){if(!e)return e===0?e:0;if(e=dQ(e),e===v1||e===-v1){var t=e<0?-1:1;return t*fQ}return e===e?e:0}var pQ=hQ,mQ=uQ,gQ=Sf,ap=pQ;function yQ(e){return function(t,r,n){return n&&typeof n!="number"&&gQ(t,r,n)&&(r=n=void 0),t=ap(t),r===void 0?(r=t,t=0):r=ap(r),n=n===void 0?t<r?1:-1:ap(n),mQ(t,r,n,e)}}var vQ=yQ,xQ=vQ,bQ=xQ(),wQ=bQ;const Ad=Fe(wQ);function zl(e){"@babel/helpers - typeof";return zl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zl(e)}function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){yO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yO(e,t,r){return t=_Q(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Q(e){var t=jQ(e,"string");return zl(t)=="symbol"?t:t+""}function jQ(e,t){if(zl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SQ=["Webkit","Moz","O","ms"],NQ=function(t,r){var n=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=SQ.reduce(function(a,s){return b1(b1({},a),{},yO({},s+n,r))},{});return i[t]=r,i};function ws(e){"@babel/helpers - typeof";return ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ws(e)}function Pd(){return Pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pd.apply(this,arguments)}function w1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(r),!0).forEach(function(n){ir(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xO(n.key),n)}}function AQ(e,t,r){return t&&_1(e.prototype,t),r&&_1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function PQ(e,t,r){return t=Od(t),OQ(e,vO()?Reflect.construct(t,r||[],Od(e).constructor):t.apply(e,r))}function OQ(e,t){if(t&&(ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQ(e)}function TQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vO=function(){return!!e})()}function Od(e){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Od(e)}function CQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mg(e,t)}function Mg(e,t){return Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mg(e,t)}function ir(e,t,r){return t=xO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xO(e){var t=kQ(e,"string");return ws(t)=="symbol"?t:t+""}function kQ(e,t){if(ws(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $Q=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,a=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Lo().domain(Ad(0,c)).range([a,a+s-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:f}},j1=function(t){return t.changedTouches&&!!t.changedTouches.length},_s=function(e){function t(r){var n;return EQ(this,t),n=PQ(this,t,[r]),ir(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),ir(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),ir(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,l=i.startIndex;s==null||s({endIndex:a,startIndex:l})}),n.detachDragEndListener()}),ir(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),ir(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),ir(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),ir(n,"handleSlideDragStart",function(i){var a=j1(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return CQ(t,e),AQ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(i,a),h=Math.max(i,a),p=t.getIndexInRange(s,d),b=t.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,l=i.dataKey,c=ur(a[n],l,n);return Oe(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,l=i.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,p=c.endIndex,b=c.onChange,v=n.pageX-a;v>0?v=Math.min(v,u+f-d-l,u+f-d-s):v<0&&(v=Math.max(v,u-s,u-l));var m=this.getIndex({startX:s+v,endX:l+v});(m.startIndex!==h||m.endIndex!==p)&&b&&b(m),this.setState({startX:s+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=j1(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[s],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,b=f.onChange,v=f.gap,m=f.data,y={startX:this.state.startX,endX:this.state.endX},x=n.pageX-a;x>0?x=Math.min(x,d+h-p-u):x<0&&(x=Math.max(x,d-u)),y[s]=u+x;var g=this.getIndex(y),S=g.startIndex,w=g.endIndex,_=function(){var E=m.length-1;return s==="startX"&&(l>c?S%v===0:w%v===0)||l<c&&w===E||s==="endX"&&(l>c?w%v===0:S%v===0)||l>c&&w===E};this.setState(ir(ir({},s,u+x),"brushMoveStartX",n.pageX),function(){b&&_()&&b(g)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,f=this.state[i],d=l.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=l.length)){var p=l[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(ir({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return z.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=N.Children.only(u);return d?z.cloneElement(d,{x:i,y:a,width:s,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,p=c.ariaLabel,b=c.data,v=c.startIndex,m=c.endIndex,y=Math.max(n,this.props.x),x=sp(sp({},Pe(this.props,!1)),{},{x:y,y:u,width:f,height:d}),g=p||"Min value: ".concat((a=b[v])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=b[m])===null||s===void 0?void 0:s.name);return z.createElement(lt,{tabIndex:0,role:"slider","aria-label":g,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,x))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,f=Math.min(n,i)+u,d=Math.max(Math.abs(i-n)-u,0);return z.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:s,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,b={pointerEvents:"none",fill:u};return z.createElement(lt,{className:"recharts-brush-texts"},z.createElement(ds,Pd({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:s+l/2},b),this.getTextOfTick(i)),z.createElement(ds,Pd({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+p,y:s+l/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,b=h.endX,v=h.isTextActive,m=h.isSlideMoving,y=h.isTravellerMoving,x=h.isTravellerFocused;if(!i||!i.length||!de(l)||!de(c)||!de(u)||!de(f)||u<=0||f<=0)return null;var g=Ie("recharts-brush",a),S=z.Children.count(s)===1,w=NQ("userSelect","none");return z.createElement(lt,{className:g,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(p,b),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(b,"endX"),(v||m||y||x||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(a+l/2)-1;return z.createElement(z.Fragment,null,z.createElement("rect",{x:i,y:a,width:s,height:l,fill:c,stroke:"none"}),z.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),z.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return z.isValidElement(n)?a=z.cloneElement(n,i):Oe(n)?a=n(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return sp({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},a&&a.length?$Q({data:a,width:s,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+s-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,l=a-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>i?l=c:s=c}return i>=n[l]?l:s}}])}(N.PureComponent);ir(_s,"displayName","Brush");ir(_s,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var IQ=Sv;function MQ(e,t){var r;return IQ(e,function(n,i,a){return r=t(n,i,a),!r}),!!r}var RQ=MQ,DQ=mA,LQ=bi,BQ=RQ,UQ=nr,FQ=Sf;function qQ(e,t,r){var n=UQ(e)?DQ:BQ;return r&&FQ(e,t,r)&&(t=void 0),n(e,LQ(t))}var zQ=qQ;const WQ=Fe(zQ);var cn=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},S1=RA;function HQ(e,t,r){t=="__proto__"&&S1?S1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var VQ=HQ,GQ=VQ,KQ=IA,XQ=bi;function YQ(e,t){var r={};return t=XQ(t),KQ(e,function(n,i,a){GQ(r,i,t(n,i,a))}),r}var JQ=YQ;const QQ=Fe(JQ);function ZQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var eZ=ZQ,tZ=Sv;function rZ(e,t){var r=!0;return tZ(e,function(n,i,a){return r=!!t(n,i,a),r}),r}var nZ=rZ,iZ=eZ,aZ=nZ,sZ=bi,oZ=nr,lZ=Sf;function cZ(e,t,r){var n=oZ(e)?iZ:aZ;return r&&lZ(e,t,r)&&(t=void 0),n(e,sZ(t))}var uZ=cZ;const dZ=Fe(uZ);function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function fZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bO(n.key),n)}}function hZ(e,t,r){return t&&N1(e.prototype,t),r&&N1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function E1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(r),!0).forEach(function(n){n0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n0(e,t,r){return t=bO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bO(e){var t=pZ(e,"string");return Wl(t)=="symbol"?t:t+""}function pZ(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wO=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},mZ=function(t){var r=t.x1,n=t.y1,i=t.x2,a=t.y2;return wO({x:r,y:n},{x:i,y:a})},_O=function(){function e(t){fZ(this,e),this.scale=t}return hZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();n0(_O,"EPS",1e-4);var i0=function(t){var r=Object.keys(t).reduce(function(n,i){return Kc(Kc({},n),{},n0({},i,_O.create(t[i])))},{});return Kc(Kc({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,l=a.position;return QQ(i,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(i){return dZ(i,function(a,s){return r[s].isInRange(a)})}})},gZ=VD(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),jO=N.createContext(void 0),SO=N.createContext(void 0),NO=N.createContext(void 0),yZ=N.createContext({}),EO=N.createContext(void 0),vZ=N.createContext(0),xZ=N.createContext(0),A1=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,f=gZ(a);return z.createElement(jO.Provider,{value:n},z.createElement(SO.Provider,{value:i},z.createElement(yZ.Provider,{value:a},z.createElement(NO.Provider,{value:f},z.createElement(EO.Provider,{value:s},z.createElement(vZ.Provider,{value:u},z.createElement(xZ.Provider,{value:c},l)))))))},bZ=function(){return N.useContext(EO)},wZ=function(t){var r=N.useContext(jO);r==null&&ms();var n=r[t];return n==null&&ms(),n},_Z=function(t){var r=N.useContext(SO);r==null&&ms();var n=r[t];return n==null&&ms(),n},jZ=function(){var t=N.useContext(NO);return t};function js(e){"@babel/helpers - typeof";return js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(e)}function SZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PO(n.key),n)}}function EZ(e,t,r){return t&&NZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AZ(e,t,r){return t=Td(t),PZ(e,AO()?Reflect.construct(t,r||[],Td(e).constructor):t.apply(e,r))}function PZ(e,t){if(t&&(js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OZ(e)}function OZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AO=function(){return!!e})()}function Td(e){return Td=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Td(e)}function TZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rg(e,t)}function Rg(e,t){return Rg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Rg(e,t)}function P1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function O1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P1(Object(r),!0).forEach(function(n){a0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a0(e,t,r){return t=PO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PO(e){var t=CZ(e,"string");return js(t)=="symbol"?t:t+""}function CZ(e,t){if(js(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(js(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function kZ(e,t){return RZ(e)||MZ(e,t)||IZ(e,t)||$Z()}function $Z(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IZ(e,t){if(e){if(typeof e=="string")return T1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T1(e,t)}}function T1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function RZ(e){if(Array.isArray(e))return e}function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dg.apply(this,arguments)}var DZ=function(t,r){var n;return z.isValidElement(t)?n=z.cloneElement(t,r):Oe(t)?n=t(r):n=z.createElement("line",Dg({},r,{className:"recharts-reference-line-line"})),n},LZ=function(t,r,n,i,a,s,l,c,u){var f=a.x,d=a.y,h=a.width,p=a.height;if(n){var b=u.y,v=t.y.apply(b,{position:s});if(cn(u,"discard")&&!t.y.isInRange(v))return null;var m=[{x:f+h,y:v},{x:f,y:v}];return c==="left"?m.reverse():m}if(r){var y=u.x,x=t.x.apply(y,{position:s});if(cn(u,"discard")&&!t.x.isInRange(x))return null;var g=[{x,y:d+p},{x,y:d}];return l==="top"?g.reverse():g}if(i){var S=u.segment,w=S.map(function(_){return t.apply(_,{position:s})});return cn(u,"discard")&&WQ(w,function(_){return!t.isInRange(_)})?null:w}return null};function BZ(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=bZ(),f=wZ(i),d=_Z(a),h=jZ();if(!u||!h)return null;Sn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=i0({x:f.scale,y:d.scale}),b=bt(t),v=bt(r),m=n&&n.length===2,y=LZ(p,b,v,m,h,e.position,f.orientation,d.orientation,e);if(!y)return null;var x=kZ(y,2),g=x[0],S=g.x,w=g.y,_=x[1],j=_.x,E=_.y,A=cn(e,"hidden")?"url(#".concat(u,")"):void 0,P=O1(O1({clipPath:A},Pe(e,!0)),{},{x1:S,y1:w,x2:j,y2:E});return z.createElement(lt,{className:Ie("recharts-reference-line",l)},DZ(s,P),Tt.renderCallByParent(e,mZ({x1:S,y1:w,x2:j,y2:E})))}var s0=function(e){function t(){return SZ(this,t),AZ(this,t,arguments)}return TZ(t,e),EZ(t,[{key:"render",value:function(){return z.createElement(BZ,this.props)}}])}(z.Component);a0(s0,"displayName","ReferenceLine");a0(s0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Lg(){return Lg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lg.apply(this,arguments)}function Ss(e){"@babel/helpers - typeof";return Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ss(e)}function C1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function k1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C1(Object(r),!0).forEach(function(n){zf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TO(n.key),n)}}function qZ(e,t,r){return t&&FZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zZ(e,t,r){return t=Cd(t),WZ(e,OO()?Reflect.construct(t,r||[],Cd(e).constructor):t.apply(e,r))}function WZ(e,t){if(t&&(Ss(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HZ(e)}function HZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OO=function(){return!!e})()}function Cd(e){return Cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cd(e)}function VZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bg(e,t)}function Bg(e,t){return Bg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bg(e,t)}function zf(e,t,r){return t=TO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TO(e){var t=GZ(e,"string");return Ss(t)=="symbol"?t:t+""}function GZ(e,t){if(Ss(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ss(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var KZ=function(t){var r=t.x,n=t.y,i=t.xAxis,a=t.yAxis,s=i0({x:i.scale,y:a.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return cn(t,"discard")&&!s.isInRange(l)?null:l},Wf=function(e){function t(){return UZ(this,t),zZ(this,t,arguments)}return VZ(t,e),qZ(t,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=bt(i),f=bt(a);if(Sn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=KZ(this.props);if(!d)return null;var h=d.x,p=d.y,b=this.props,v=b.shape,m=b.className,y=cn(this.props,"hidden")?"url(#".concat(c,")"):void 0,x=k1(k1({clipPath:y},Pe(this.props,!0)),{},{cx:h,cy:p});return z.createElement(lt,{className:Ie("recharts-reference-dot",m)},t.renderDot(v,x),Tt.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}(z.Component);zf(Wf,"displayName","ReferenceDot");zf(Wf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});zf(Wf,"renderDot",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Oe(e)?r=e(t):r=z.createElement(r0,Lg({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Ug(){return Ug=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ug.apply(this,arguments)}function Ns(e){"@babel/helpers - typeof";return Ns=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ns(e)}function $1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function I1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$1(Object(r),!0).forEach(function(n){Hf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YZ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kO(n.key),n)}}function JZ(e,t,r){return t&&YZ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function QZ(e,t,r){return t=kd(t),ZZ(e,CO()?Reflect.construct(t,r||[],kd(e).constructor):t.apply(e,r))}function ZZ(e,t){if(t&&(Ns(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eee(e)}function eee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CO=function(){return!!e})()}function kd(e){return kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kd(e)}function tee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fg(e,t)}function Fg(e,t){return Fg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Fg(e,t)}function Hf(e,t,r){return t=kO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kO(e){var t=ree(e,"string");return Ns(t)=="symbol"?t:t+""}function ree(e,t){if(Ns(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ns(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nee=function(t,r,n,i,a){var s=a.x1,l=a.x2,c=a.y1,u=a.y2,f=a.xAxis,d=a.yAxis;if(!f||!d)return null;var h=i0({x:f.scale,y:d.scale}),p={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},b={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return cn(a,"discard")&&(!h.isInRange(p)||!h.isInRange(b))?null:wO(p,b)},Vf=function(e){function t(){return XZ(this,t),QZ(this,t,arguments)}return tee(t,e),JZ(t,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;Sn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=bt(i),h=bt(a),p=bt(s),b=bt(l),v=this.props.shape;if(!d&&!h&&!p&&!b&&!v)return null;var m=nee(d,h,p,b,this.props);if(!m&&!v)return null;var y=cn(this.props,"hidden")?"url(#".concat(f,")"):void 0;return z.createElement(lt,{className:Ie("recharts-reference-area",c)},t.renderRect(v,I1(I1({clipPath:y},Pe(this.props,!0)),m)),Tt.renderCallByParent(this.props,m))}}])}(z.Component);Hf(Vf,"displayName","ReferenceArea");Hf(Vf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Hf(Vf,"renderRect",function(e,t){var r;return z.isValidElement(e)?r=z.cloneElement(e,t):Oe(e)?r=e(t):r=z.createElement(t0,Ug({},t,{className:"recharts-reference-area-rect"})),r});function M1(e){return oee(e)||see(e)||aee(e)||iee()}function iee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aee(e,t){if(e){if(typeof e=="string")return qg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qg(e,t)}}function see(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oee(e){if(Array.isArray(e))return qg(e)}function qg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zg=function(t,r,n,i,a){var s=on(t,s0),l=on(t,Wf),c=[].concat(M1(s),M1(l)),u=on(t,Vf),f="".concat(i,"Id"),d=i[0],h=r;if(c.length&&(h=c.reduce(function(v,m){if(m.props[f]===n&&cn(m.props,"extendDomain")&&de(m.props[d])){var y=m.props[d];return[Math.min(v[0],y),Math.max(v[1],y)]}return v},h)),u.length){var p="".concat(d,"1"),b="".concat(d,"2");h=u.reduce(function(v,m){if(m.props[f]===n&&cn(m.props,"extendDomain")&&de(m.props[p])&&de(m.props[b])){var y=m.props[p],x=m.props[b];return[Math.min(v[0],y,x),Math.max(v[1],y,x)]}return v},h)}return a&&a.length&&(h=a.reduce(function(v,m){return de(m)?[Math.min(v[0],m),Math.max(v[1],m)]:v},h)),h},$O={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||c,h),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],p]:c._events[b].push(p):(c._events[b]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,b=new Array(p);h<p;h++)b[h]=d[h].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,p,b){var v=r?r+u:u;if(!this._events[v])return!1;var m=this._events[v],y=arguments.length,x,g;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,f),!0;case 3:return m.fn.call(m.context,f,d),!0;case 4:return m.fn.call(m.context,f,d,h),!0;case 5:return m.fn.call(m.context,f,d,h,p),!0;case 6:return m.fn.call(m.context,f,d,h,p,b),!0}for(g=1,x=new Array(y-1);g<y;g++)x[g-1]=arguments[g];m.fn.apply(m.context,x)}else{var S=m.length,w;for(g=0;g<S;g++)switch(m[g].once&&this.removeListener(u,m[g].fn,void 0,!0),y){case 1:m[g].fn.call(m[g].context);break;case 2:m[g].fn.call(m[g].context,f);break;case 3:m[g].fn.call(m[g].context,f,d);break;case 4:m[g].fn.call(m[g].context,f,d,h);break;default:if(!x)for(w=1,x=new Array(y-1);w<y;w++)x[w-1]=arguments[w];m[g].fn.apply(m[g].context,x)}}return!0},l.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return s(this,p),this;var b=this._events[p];if(b.fn)b.fn===f&&(!h||b.once)&&(!d||b.context===d)&&s(this,p);else{for(var v=0,m=[],y=b.length;v<y;v++)(b[v].fn!==f||h&&!b[v].once||d&&b[v].context!==d)&&m.push(b[v]);m.length?this._events[p]=m.length===1?m[0]:m:s(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})($O);var lee=$O.exports;const cee=Fe(lee);var op=new cee,lp="recharts.syncMouseEvents";function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function uee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IO(n.key),n)}}function fee(e,t,r){return t&&dee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cp(e,t,r){return t=IO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IO(e){var t=hee(e,"string");return Hl(t)=="symbol"?t:t+""}function hee(e,t){if(Hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pee=function(){function e(){uee(this,e),cp(this,"activeIndex",0),cp(this,"coordinateList",[]),cp(this,"layout","horizontal")}return fee(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=a+c+u,h=s+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function mee(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&de(n)&&de(i))return!0}return!1}function gee(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function MO(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,a=e.endAngle,s=Ge(t,r,n,i),l=Ge(t,r,n,a);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function yee(e,t,r){var n,i,a,s;if(e==="horizontal")n=t.x,a=n,i=r.top,s=r.top+r.height;else if(e==="vertical")i=t.y,s=i,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Ge(l,c,u,d),p=Ge(l,c,f,d);n=h.x,i=h.y,a=p.x,s=p.y}else return MO(t);return[{x:n,y:i},{x:a,y:s}]}function Vl(e){"@babel/helpers - typeof";return Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(e)}function R1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R1(Object(r),!0).forEach(function(n){vee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vee(e,t,r){return t=xee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xee(e){var t=bee(e,"string");return Vl(t)=="symbol"?t:t+""}function bee(e,t){if(Vl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wee(e){var t,r,n=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var b,v=xg;if(h==="ScatterChart")b=s,v=TY;else if(h==="BarChart")b=gee(d,s,c,f),v=t0;else if(d==="radial"){var m=MO(s),y=m.cx,x=m.cy,g=m.radius,S=m.startAngle,w=m.endAngle;b={cx:y,cy:x,startAngle:S,endAngle:w,innerRadius:g,outerRadius:g},v=ZP}else b={points:yee(d,s,c)},v=xg;var _=Xc(Xc(Xc(Xc({stroke:"#ccc",pointerEvents:"none"},c),b),Pe(p,!1)),{},{payload:l,payloadIndex:u,className:Ie("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,_):N.createElement(v,_)}var _ee=["item"],jee=["children","className","width","height","style","compact","title","desc"];function Es(e){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ua.apply(this,arguments)}function D1(e,t){return Eee(e)||Nee(e,t)||DO(e,t)||See()}function See(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function Eee(e){if(Array.isArray(e))return e}function L1(e,t){if(e==null)return{};var r=Aee(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Aee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Pee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LO(n.key),n)}}function Tee(e,t,r){return t&&Oee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cee(e,t,r){return t=$d(t),kee(e,RO()?Reflect.construct(t,r||[],$d(e).constructor):t.apply(e,r))}function kee(e,t){if(t&&(Es(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ee(e)}function $ee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RO=function(){return!!e})()}function $d(e){return $d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$d(e)}function Iee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wg(e,t)}function Wg(e,t){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wg(e,t)}function As(e){return Dee(e)||Ree(e)||DO(e)||Mee()}function Mee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DO(e,t){if(e){if(typeof e=="string")return Hg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hg(e,t)}}function Ree(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Dee(e){if(Array.isArray(e))return Hg(e)}function Hg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B1(Object(r),!0).forEach(function(n){be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function be(e,t,r){return t=LO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LO(e){var t=Lee(e,"string");return Es(t)=="symbol"?t:t+""}function Lee(e,t){if(Es(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Es(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bee={xAxis:["bottom","top"],yAxis:["left","right"]},Uee={width:"100%",height:"100%"},BO={x:0,y:0};function Yc(e){return e}var Fee=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},qee=function(t,r,n,i){var a=r.find(function(f){return f&&f.index===n});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,l=i.radius;return X(X(X({},i),Ge(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var c=a.coordinate,u=i.angle;return X(X(X({},i),Ge(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return BO},Gf=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(As(l),As(u)):l},[]);return s.length>0?s:t&&t.length&&de(i)&&de(a)?t.slice(i,a+1):[]};function UO(e){return e==="number"?[0,"auto"]:void 0}var Vg=function(t,r,n,i){var a=t.graphicalItems,s=t.tooltipAxis,l=Gf(r,t);return n<0||!a||!a.length||n>=l.length?null:a.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=d===void 0?l:d;h=Nm(p,s.dataKey,i)}else h=d&&d[n]||l[n];return h?[].concat(As(c),[pG(u,h)]):c},[])},U1=function(t,r,n,i){var a=i||{x:t.chartX,y:t.chartY},s=Fee(a,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=QV(s,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=Vg(t,r,f,d),p=qee(n,l,f,a);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},zee=function(t,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=VP(f,a);return n.reduce(function(b,v){var m,y=v.type.defaultProps!==void 0?X(X({},v.type.defaultProps),v.props):v.props,x=y.type,g=y.dataKey,S=y.allowDataOverflow,w=y.allowDuplicatedCategory,_=y.scale,j=y.ticks,E=y.includeHidden,A=y[s];if(b[A])return b;var P=Gf(t.data,{graphicalItems:i.filter(function(F){var V,U=s in F.props?F.props[s]:(V=F.type.defaultProps)===null||V===void 0?void 0:V[s];return U===A}),dataStartIndex:c,dataEndIndex:u}),O=P.length,T,M,B;mee(y.domain,S,x)&&(T=hg(y.domain,null,S),p&&(x==="number"||_!=="auto")&&(B=Bo(P,g,"category")));var C=UO(x);if(!T||T.length===0){var L,G=(L=y.domain)!==null&&L!==void 0?L:C;if(g){if(T=Bo(P,g,x),x==="category"&&p){var R=F3(T);w&&R?(M=T,T=Ad(0,O)):w||(T=b_(G,T,v).reduce(function(F,V){return F.indexOf(V)>=0?F:[].concat(As(F),[V])},[]))}else if(x==="category")w?T=T.filter(function(F){return F!==""&&!ke(F)}):T=b_(G,T,v).reduce(function(F,V){return F.indexOf(V)>=0||V===""||ke(V)?F:[].concat(As(F),[V])},[]);else if(x==="number"){var D=nG(P,i.filter(function(F){var V,U,ge=s in F.props?F.props[s]:(V=F.type.defaultProps)===null||V===void 0?void 0:V[s],le="hide"in F.props?F.props.hide:(U=F.type.defaultProps)===null||U===void 0?void 0:U.hide;return ge===A&&(E||!le)}),g,a,f);D&&(T=D)}p&&(x==="number"||_!=="auto")&&(B=Bo(P,g,"category"))}else p?T=Ad(0,O):l&&l[A]&&l[A].hasStack&&x==="number"?T=h==="expand"?[0,1]:GP(l[A].stackGroups,c,u):T=HP(P,i.filter(function(F){var V=s in F.props?F.props[s]:F.type.defaultProps[s],U="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return V===A&&(E||!U)}),x,f,!0);if(x==="number")T=zg(d,T,A,a,j),G&&(T=hg(G,T,S));else if(x==="category"&&G){var W=G,Y=T.every(function(F){return W.indexOf(F)>=0});Y&&(T=W)}}return X(X({},b),{},be({},A,X(X({},y),{},{axisType:a,domain:T,categoricalDomain:B,duplicateDomain:M,originalDomain:(m=y.domain)!==null&&m!==void 0?m:C,isCategorical:p,layout:f})))},{})},Wee=function(t,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=Gf(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,b=VP(f,a),v=-1;return n.reduce(function(m,y){var x=y.type.defaultProps!==void 0?X(X({},y.type.defaultProps),y.props):y.props,g=x[s],S=UO("number");if(!m[g]){v++;var w;return b?w=Ad(0,p):l&&l[g]&&l[g].hasStack?(w=GP(l[g].stackGroups,c,u),w=zg(d,w,g,a)):(w=hg(S,HP(h,n.filter(function(_){var j,E,A=s in _.props?_.props[s]:(j=_.type.defaultProps)===null||j===void 0?void 0:j[s],P="hide"in _.props?_.props.hide:(E=_.type.defaultProps)===null||E===void 0?void 0:E.hide;return A===g&&!P}),"number",f),i.defaultProps.allowDataOverflow),w=zg(d,w,g,a)),X(X({},m),{},be({},g,X(X({axisType:a},i.defaultProps),{},{hide:!0,orientation:Kr(Bee,"".concat(a,".").concat(v%2),null),domain:w,originalDomain:S,isCategorical:b,layout:f})))}return m},{})},Hee=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(i,"Id"),h=on(f,a),p={};return h&&h.length?p=zee(t,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=Wee(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},Vee=function(t){var r=ja(t),n=_o(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Nv(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:pg(r,n)}},F1=function(t){var r=t.children,n=t.defaultShowTooltip,i=xr(r,_s),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},Gee=function(t){return!t||!t.length?!1:t.some(function(r){var n=jn(r&&r.type);return n&&n.indexOf("Bar")>=0})},q1=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Kee=function(t,r){var n=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=xr(d,_s),b=xr(d,Ka),v=Object.keys(c).reduce(function(w,_){var j=c[_],E=j.orientation;return!j.mirror&&!j.hide?X(X({},w),{},be({},E,w[E]+j.width)):w},{left:h.left||0,right:h.right||0}),m=Object.keys(s).reduce(function(w,_){var j=s[_],E=j.orientation;return!j.mirror&&!j.hide?X(X({},w),{},be({},E,Kr(w,"".concat(E))+j.height)):w},{top:h.top||0,bottom:h.bottom||0}),y=X(X({},m),v),x=y.bottom;p&&(y.bottom+=p.props.height||_s.defaultProps.height),b&&r&&(y=tG(y,i,n,r));var g=u-y.left-y.right,S=f-y.top-y.bottom;return X(X({brushBottom:x},y),{},{width:Math.max(g,0),height:Math.max(S,0)})},Xee=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Yee=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(y,x){var g=x.graphicalItems,S=x.stackGroups,w=x.offset,_=x.updateId,j=x.dataStartIndex,E=x.dataEndIndex,A=y.barSize,P=y.layout,O=y.barGap,T=y.barCategoryGap,M=y.maxBarSize,B=q1(P),C=B.numericAxisName,L=B.cateAxisName,G=Gee(g),R=[];return g.forEach(function(D,W){var Y=Gf(y.data,{graphicalItems:[D],dataStartIndex:j,dataEndIndex:E}),F=D.type.defaultProps!==void 0?X(X({},D.type.defaultProps),D.props):D.props,V=F.dataKey,U=F.maxBarSize,ge=F["".concat(C,"Id")],le=F["".concat(L,"Id")],Se={},fe=c.reduce(function($,J){var I=x["".concat(J.axisType,"Map")],se=F["".concat(J.axisType,"Id")];I&&I[se]||J.axisType==="zAxis"||ms();var H=I[se];return X(X({},$),{},be(be({},J.axisType,H),"".concat(J.axisType,"Ticks"),_o(H)))},Se),Q=fe[L],Z=fe["".concat(L,"Ticks")],ee=S&&S[ge]&&S[ge].hasStack&&fG(D,S[ge].stackGroups),k=jn(D.type).indexOf("Bar")>=0,ie=pg(Q,Z),ue=[],ce=G&&ZV({barSize:A,stackGroups:S,totalSize:Xee(fe,L)});if(k){var me,Ne,re=ke(U)?M:U,q=(me=(Ne=pg(Q,Z,!0))!==null&&Ne!==void 0?Ne:re)!==null&&me!==void 0?me:0;ue=eG({barGap:O,barCategoryGap:T,bandSize:q!==ie?q:ie,sizeList:ce[le],maxBarSize:re}),q!==ie&&(ue=ue.map(function($){return X(X({},$),{},{position:X(X({},$.position),{},{offset:$.position.offset-q/2})})}))}var oe=D&&D.type&&D.type.getComposedData;oe&&R.push({props:X(X({},oe(X(X({},fe),{},{displayedData:Y,props:y,dataKey:V,item:D,bandSize:ie,barPosition:ue,offset:w,stackedData:ee,layout:P,dataStartIndex:j,dataEndIndex:E}))),{},be(be(be({key:D.key||"item-".concat(W)},C,fe[C]),L,fe[L]),"animationId",_)),childIndex:Q3(D,y.children),item:D})}),R},p=function(y,x){var g=y.props,S=y.dataStartIndex,w=y.dataEndIndex,_=y.updateId;if(!pb({props:g}))return null;var j=g.children,E=g.layout,A=g.stackOffset,P=g.data,O=g.reverseStackOrder,T=q1(E),M=T.numericAxisName,B=T.cateAxisName,C=on(j,n),L=uG(P,C,"".concat(M,"Id"),"".concat(B,"Id"),A,O),G=c.reduce(function(F,V){var U="".concat(V.axisType,"Map");return X(X({},F),{},be({},U,Hee(g,X(X({},V),{},{graphicalItems:C,stackGroups:V.axisType===M&&L,dataStartIndex:S,dataEndIndex:w}))))},{}),R=Kee(X(X({},G),{},{props:g,graphicalItems:C}),x==null?void 0:x.legendBBox);Object.keys(G).forEach(function(F){G[F]=f(g,G[F],R,F.replace("Map",""),r)});var D=G["".concat(B,"Map")],W=Vee(D),Y=h(g,X(X({},G),{},{dataStartIndex:S,dataEndIndex:w,updateId:_,graphicalItems:C,stackGroups:L,offset:R}));return X(X({formattedGraphicalItems:Y,graphicalItems:C,offset:R,stackGroups:L},W),G)},b=function(m){function y(x){var g,S,w;return Pee(this,y),w=Cee(this,y,[x]),be(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),be(w,"accessibilityManager",new pee),be(w,"handleLegendBBoxUpdate",function(_){if(_){var j=w.state,E=j.dataStartIndex,A=j.dataEndIndex,P=j.updateId;w.setState(X({legendBBox:_},p({props:w.props,dataStartIndex:E,dataEndIndex:A,updateId:P},X(X({},w.state),{},{legendBBox:_}))))}}),be(w,"handleReceiveSyncEvent",function(_,j,E){if(w.props.syncId===_){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(j)}}),be(w,"handleBrushChange",function(_){var j=_.startIndex,E=_.endIndex;if(j!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return X({dataStartIndex:j,dataEndIndex:E},p({props:w.props,dataStartIndex:j,dataEndIndex:E,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:j,dataEndIndex:E})}}),be(w,"handleMouseEnter",function(_){var j=w.getMouseInfo(_);if(j){var E=X(X({},j),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var A=w.props.onMouseEnter;Oe(A)&&A(E,_)}}),be(w,"triggeredAfterMouseMove",function(_){var j=w.getMouseInfo(_),E=j?X(X({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var A=w.props.onMouseMove;Oe(A)&&A(E,_)}),be(w,"handleItemMouseEnter",function(_){w.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),be(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),be(w,"handleMouseMove",function(_){_.persist(),w.throttleTriggeredAfterMouseMove(_)}),be(w,"handleMouseLeave",function(_){w.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};w.setState(j),w.triggerSyncEvent(j);var E=w.props.onMouseLeave;Oe(E)&&E(j,_)}),be(w,"handleOuterEvent",function(_){var j=J3(_),E=Kr(w.props,"".concat(j));if(j&&Oe(E)){var A,P;/.*touch.*/i.test(j)?P=w.getMouseInfo(_.changedTouches[0]):P=w.getMouseInfo(_),E((A=P)!==null&&A!==void 0?A:{},_)}}),be(w,"handleClick",function(_){var j=w.getMouseInfo(_);if(j){var E=X(X({},j),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var A=w.props.onClick;Oe(A)&&A(E,_)}}),be(w,"handleMouseDown",function(_){var j=w.props.onMouseDown;if(Oe(j)){var E=w.getMouseInfo(_);j(E,_)}}),be(w,"handleMouseUp",function(_){var j=w.props.onMouseUp;if(Oe(j)){var E=w.getMouseInfo(_);j(E,_)}}),be(w,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),be(w,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseDown(_.changedTouches[0])}),be(w,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseUp(_.changedTouches[0])}),be(w,"handleDoubleClick",function(_){var j=w.props.onDoubleClick;if(Oe(j)){var E=w.getMouseInfo(_);j(E,_)}}),be(w,"handleContextMenu",function(_){var j=w.props.onContextMenu;if(Oe(j)){var E=w.getMouseInfo(_);j(E,_)}}),be(w,"triggerSyncEvent",function(_){w.props.syncId!==void 0&&op.emit(lp,w.props.syncId,_,w.eventEmitterSymbol)}),be(w,"applySyncEvent",function(_){var j=w.props,E=j.layout,A=j.syncMethod,P=w.state.updateId,O=_.dataStartIndex,T=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)w.setState(X({dataStartIndex:O,dataEndIndex:T},p({props:w.props,dataStartIndex:O,dataEndIndex:T,updateId:P},w.state)));else if(_.activeTooltipIndex!==void 0){var M=_.chartX,B=_.chartY,C=_.activeTooltipIndex,L=w.state,G=L.offset,R=L.tooltipTicks;if(!G)return;if(typeof A=="function")C=A(R,_);else if(A==="value"){C=-1;for(var D=0;D<R.length;D++)if(R[D].value===_.activeLabel){C=D;break}}var W=X(X({},G),{},{x:G.left,y:G.top}),Y=Math.min(M,W.x+W.width),F=Math.min(B,W.y+W.height),V=R[C]&&R[C].value,U=Vg(w.state,w.props.data,C),ge=R[C]?{x:E==="horizontal"?R[C].coordinate:Y,y:E==="horizontal"?F:R[C].coordinate}:BO;w.setState(X(X({},_),{},{activeLabel:V,activeCoordinate:ge,activePayload:U,activeTooltipIndex:C}))}else w.setState(_)}),be(w,"renderCursor",function(_){var j,E=w.state,A=E.isTooltipActive,P=E.activeCoordinate,O=E.activePayload,T=E.offset,M=E.activeTooltipIndex,B=E.tooltipAxisBandSize,C=w.getTooltipEventType(),L=(j=_.props.active)!==null&&j!==void 0?j:A,G=w.props.layout,R=_.key||"_recharts-cursor";return z.createElement(wee,{key:R,activeCoordinate:P,activePayload:O,activeTooltipIndex:M,chartName:r,element:_,isActive:L,layout:G,offset:T,tooltipAxisBandSize:B,tooltipEventType:C})}),be(w,"renderPolarAxis",function(_,j,E){var A=Kr(_,"type.axisType"),P=Kr(w.state,"".concat(A,"Map")),O=_.type.defaultProps,T=O!==void 0?X(X({},O),_.props):_.props,M=P&&P[T["".concat(A,"Id")]];return N.cloneElement(_,X(X({},M),{},{className:Ie(A,M.className),key:_.key||"".concat(j,"-").concat(E),ticks:_o(M,!0)}))}),be(w,"renderPolarGrid",function(_){var j=_.props,E=j.radialLines,A=j.polarAngles,P=j.polarRadius,O=w.state,T=O.radiusAxisMap,M=O.angleAxisMap,B=ja(T),C=ja(M),L=C.cx,G=C.cy,R=C.innerRadius,D=C.outerRadius;return N.cloneElement(_,{polarAngles:Array.isArray(A)?A:_o(C,!0).map(function(W){return W.coordinate}),polarRadius:Array.isArray(P)?P:_o(B,!0).map(function(W){return W.coordinate}),cx:L,cy:G,innerRadius:R,outerRadius:D,key:_.key||"polar-grid",radialLines:E})}),be(w,"renderLegend",function(){var _=w.state.formattedGraphicalItems,j=w.props,E=j.children,A=j.width,P=j.height,O=w.props.margin||{},T=A-(O.left||0)-(O.right||0),M=zP({children:E,formattedGraphicalItems:_,legendWidth:T,legendContent:u});if(!M)return null;var B=M.item,C=L1(M,_ee);return N.cloneElement(B,X(X({},C),{},{chartWidth:A,chartHeight:P,margin:O,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),be(w,"renderTooltip",function(){var _,j=w.props,E=j.children,A=j.accessibilityLayer,P=xr(E,en);if(!P)return null;var O=w.state,T=O.isTooltipActive,M=O.activeCoordinate,B=O.activePayload,C=O.activeLabel,L=O.offset,G=(_=P.props.active)!==null&&_!==void 0?_:T;return N.cloneElement(P,{viewBox:X(X({},L),{},{x:L.left,y:L.top}),active:G,label:C,payload:G?B:[],coordinate:M,accessibilityLayer:A})}),be(w,"renderBrush",function(_){var j=w.props,E=j.margin,A=j.data,P=w.state,O=P.offset,T=P.dataStartIndex,M=P.dataEndIndex,B=P.updateId;return N.cloneElement(_,{key:_.key||"_recharts-brush",onChange:Wc(w.handleBrushChange,_.props.onChange),data:A,x:de(_.props.x)?_.props.x:O.left,y:de(_.props.y)?_.props.y:O.top+O.height+O.brushBottom-(E.bottom||0),width:de(_.props.width)?_.props.width:O.width,startIndex:T,endIndex:M,updateId:"brush-".concat(B)})}),be(w,"renderReferenceElement",function(_,j,E){if(!_)return null;var A=w,P=A.clipPathId,O=w.state,T=O.xAxisMap,M=O.yAxisMap,B=O.offset,C=_.type.defaultProps||{},L=_.props,G=L.xAxisId,R=G===void 0?C.xAxisId:G,D=L.yAxisId,W=D===void 0?C.yAxisId:D;return N.cloneElement(_,{key:_.key||"".concat(j,"-").concat(E),xAxis:T[R],yAxis:M[W],viewBox:{x:B.left,y:B.top,width:B.width,height:B.height},clipPathId:P})}),be(w,"renderActivePoints",function(_){var j=_.item,E=_.activePoint,A=_.basePoint,P=_.childIndex,O=_.isRange,T=[],M=j.props.key,B=j.item.type.defaultProps!==void 0?X(X({},j.item.type.defaultProps),j.item.props):j.item.props,C=B.activeDot,L=B.dataKey,G=X(X({index:P,dataKey:L,cx:E.x,cy:E.y,r:4,fill:e0(j.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},Pe(C,!1)),zu(C));return T.push(y.renderActiveDot(C,G,"".concat(M,"-activePoint-").concat(P))),A?T.push(y.renderActiveDot(C,X(X({},G),{},{cx:A.x,cy:A.y}),"".concat(M,"-basePoint-").concat(P))):O&&T.push(null),T}),be(w,"renderGraphicChild",function(_,j,E){var A=w.filterFormatItem(_,j,E);if(!A)return null;var P=w.getTooltipEventType(),O=w.state,T=O.isTooltipActive,M=O.tooltipAxis,B=O.activeTooltipIndex,C=O.activeLabel,L=w.props.children,G=xr(L,en),R=A.props,D=R.points,W=R.isRange,Y=R.baseLine,F=A.item.type.defaultProps!==void 0?X(X({},A.item.type.defaultProps),A.item.props):A.item.props,V=F.activeDot,U=F.hide,ge=F.activeBar,le=F.activeShape,Se=!!(!U&&T&&G&&(V||ge||le)),fe={};P!=="axis"&&G&&G.props.trigger==="click"?fe={onClick:Wc(w.handleItemMouseEnter,_.props.onClick)}:P!=="axis"&&(fe={onMouseLeave:Wc(w.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:Wc(w.handleItemMouseEnter,_.props.onMouseEnter)});var Q=N.cloneElement(_,X(X({},A.props),fe));function Z(J){return typeof M.dataKey=="function"?M.dataKey(J.payload):null}if(Se)if(B>=0){var ee,k;if(M.dataKey&&!M.allowDuplicatedCategory){var ie=typeof M.dataKey=="function"?Z:"payload.".concat(M.dataKey.toString());ee=Nm(D,ie,C),k=W&&Y&&Nm(Y,ie,C)}else ee=D==null?void 0:D[B],k=W&&Y&&Y[B];if(le||ge){var ue=_.props.activeIndex!==void 0?_.props.activeIndex:B;return[N.cloneElement(_,X(X(X({},A.props),fe),{},{activeIndex:ue})),null,null]}if(!ke(ee))return[Q].concat(As(w.renderActivePoints({item:A,activePoint:ee,basePoint:k,childIndex:B,isRange:W})))}else{var ce,me=(ce=w.getItemByXY(w.state.activeCoordinate))!==null&&ce!==void 0?ce:{graphicalItem:Q},Ne=me.graphicalItem,re=Ne.item,q=re===void 0?_:re,oe=Ne.childIndex,$=X(X(X({},A.props),fe),{},{activeIndex:oe});return[N.cloneElement(q,$),null,null]}return W?[Q,null,null]:[Q,null]}),be(w,"renderCustomized",function(_,j,E){return N.cloneElement(_,X(X({key:"recharts-customized-".concat(E)},w.props),w.state))}),be(w,"renderMap",{CartesianGrid:{handler:Yc,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Yc},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Yc},YAxis:{handler:Yc},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((g=x.id)!==null&&g!==void 0?g:gf("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=qA(w.triggeredAfterMouseMove,(S=x.throttleDelay)!==null&&S!==void 0?S:1e3/60),w.state={},w}return Iee(y,m),Tee(y,[{key:"componentDidMount",value:function(){var g,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(g=this.props.margin.left)!==null&&g!==void 0?g:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var g=this.props,S=g.children,w=g.data,_=g.height,j=g.layout,E=xr(S,en);if(E){var A=E.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,O=Vg(this.state,w,A,P),T=this.state.tooltipTicks[A].coordinate,M=(this.state.offset.top+_)/2,B=j==="horizontal",C=B?{x:T,y:M}:{y:T,x:M},L=this.state.formattedGraphicalItems.find(function(R){var D=R.item;return D.type.name==="Scatter"});L&&(C=X(X({},C),L.props.points[A].tooltipPosition),O=L.props.points[A].tooltipPayload);var G={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:P,activePayload:O,activeCoordinate:C};this.setState(G),this.renderCursor(E),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(g,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==g.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==g.margin){var w,_;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(g){Pm([xr(g.children,en)],[xr(this.props.children,en)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var g=xr(this.props.children,en);if(g&&typeof g.props.shared=="boolean"){var S=g.props.shared?"axis":"item";return l.indexOf(S)>=0?S:a}return a}},{key:"getMouseInfo",value:function(g){if(!this.container)return null;var S=this.container,w=S.getBoundingClientRect(),_=E7(w),j={chartX:Math.round(g.pageX-_.left),chartY:Math.round(g.pageY-_.top)},E=w.width/S.offsetWidth||1,A=this.inRange(j.chartX,j.chartY,E);if(!A)return null;var P=this.state,O=P.xAxisMap,T=P.yAxisMap,M=this.getTooltipEventType(),B=U1(this.state,this.props.data,this.props.layout,A);if(M!=="axis"&&O&&T){var C=ja(O).scale,L=ja(T).scale,G=C&&C.invert?C.invert(j.chartX):null,R=L&&L.invert?L.invert(j.chartY):null;return X(X({},j),{},{xValue:G,yValue:R},B)}return B?X(X({},j),B):null}},{key:"inRange",value:function(g,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,j=g/w,E=S/w;if(_==="horizontal"||_==="vertical"){var A=this.state.offset,P=j>=A.left&&j<=A.left+A.width&&E>=A.top&&E<=A.top+A.height;return P?{x:j,y:E}:null}var O=this.state,T=O.angleAxisMap,M=O.radiusAxisMap;if(T&&M){var B=ja(T);return j_({x:j,y:E},B)}return null}},{key:"parseEventsOfWrapper",value:function(){var g=this.props.children,S=this.getTooltipEventType(),w=xr(g,en),_={};w&&S==="axis"&&(w.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=zu(this.props,this.handleOuterEvent);return X(X({},j),_)}},{key:"addListener",value:function(){op.on(lp,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){op.removeListener(lp,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(g,S,w){for(var _=this.state.formattedGraphicalItems,j=0,E=_.length;j<E;j++){var A=_[j];if(A.item===g||A.props.key===g.key||S===jn(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var g=this.clipPathId,S=this.state.offset,w=S.left,_=S.top,j=S.height,E=S.width;return z.createElement("defs",null,z.createElement("clipPath",{id:g},z.createElement("rect",{x:w,y:_,height:j,width:E})))}},{key:"getXScales",value:function(){var g=this.state.xAxisMap;return g?Object.entries(g).reduce(function(S,w){var _=D1(w,2),j=_[0],E=_[1];return X(X({},S),{},be({},j,E.scale))},{}):null}},{key:"getYScales",value:function(){var g=this.state.yAxisMap;return g?Object.entries(g).reduce(function(S,w){var _=D1(w,2),j=_[0],E=_[1];return X(X({},S),{},be({},j,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(g){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[g])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(g){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[g])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(g){var S=this.state,w=S.formattedGraphicalItems,_=S.activeItem;if(w&&w.length)for(var j=0,E=w.length;j<E;j++){var A=w[j],P=A.props,O=A.item,T=O.type.defaultProps!==void 0?X(X({},O.type.defaultProps),O.props):O.props,M=jn(O.type);if(M==="Bar"){var B=(P.data||[]).find(function(R){return uY(g,R)});if(B)return{graphicalItem:A,payload:B}}else if(M==="RadialBar"){var C=(P.data||[]).find(function(R){return j_(g,R)});if(C)return{graphicalItem:A,payload:C}}else if(Ff(A,_)||qf(A,_)||ql(A,_)){var L=ZJ({graphicalItem:A,activeTooltipItem:_,itemData:T.data}),G=T.activeIndex===void 0?L:T.activeIndex;return{graphicalItem:X(X({},A),{},{childIndex:G}),payload:ql(A,_)?T.data[L]:A.props.data[L]}}}return null}},{key:"render",value:function(){var g=this;if(!pb(this))return null;var S=this.props,w=S.children,_=S.className,j=S.width,E=S.height,A=S.style,P=S.compact,O=S.title,T=S.desc,M=L1(S,jee),B=Pe(M,!1);if(P)return z.createElement(A1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement(Tm,Ua({},B,{width:j,height:E,title:O,desc:T}),this.renderClipPath(),gb(w,this.renderMap)));if(this.props.accessibilityLayer){var C,L;B.tabIndex=(C=this.props.tabIndex)!==null&&C!==void 0?C:0,B.role=(L=this.props.role)!==null&&L!==void 0?L:"application",B.onKeyDown=function(R){g.accessibilityManager.keyboardEvent(R)},B.onFocus=function(){g.accessibilityManager.focus()}}var G=this.parseEventsOfWrapper();return z.createElement(A1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},z.createElement("div",Ua({className:Ie("recharts-wrapper",_),style:X({position:"relative",cursor:"default",width:j,height:E},A)},G,{ref:function(D){g.container=D}}),z.createElement(Tm,Ua({},B,{width:j,height:E,title:O,desc:T,style:Uee}),this.renderClipPath(),gb(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);be(b,"displayName",r),be(b,"defaultProps",X({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),be(b,"getDerivedStateFromProps",function(m,y){var x=m.dataKey,g=m.data,S=m.children,w=m.width,_=m.height,j=m.layout,E=m.stackOffset,A=m.margin,P=y.dataStartIndex,O=y.dataEndIndex;if(y.updateId===void 0){var T=F1(m);return X(X(X({},T),{},{updateId:0},p(X(X({props:m},T),{},{updateId:0}),y)),{},{prevDataKey:x,prevData:g,prevWidth:w,prevHeight:_,prevLayout:j,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(x!==y.prevDataKey||g!==y.prevData||w!==y.prevWidth||_!==y.prevHeight||j!==y.prevLayout||E!==y.prevStackOffset||!Em(A,y.prevMargin)){var M=F1(m),B={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},C=X(X({},U1(y,g,j)),{},{updateId:y.updateId+1}),L=X(X(X({},M),B),C);return X(X(X({},L),p(X({props:m},L),y)),{},{prevDataKey:x,prevData:g,prevWidth:w,prevHeight:_,prevLayout:j,prevStackOffset:E,prevMargin:A,prevChildren:S})}if(!Pm(S,y.prevChildren)){var G,R,D,W,Y=xr(S,_s),F=Y&&(G=(R=Y.props)===null||R===void 0?void 0:R.startIndex)!==null&&G!==void 0?G:P,V=Y&&(D=(W=Y.props)===null||W===void 0?void 0:W.endIndex)!==null&&D!==void 0?D:O,U=F!==P||V!==O,ge=!ke(g),le=ge&&!U?y.updateId:y.updateId+1;return X(X({updateId:le},p(X(X({props:m},y),{},{updateId:le,dataStartIndex:F,dataEndIndex:V}),y)),{},{prevChildren:S,dataStartIndex:F,dataEndIndex:V})}return null}),be(b,"renderActiveDot",function(m,y,x){var g;return N.isValidElement(m)?g=N.cloneElement(m,y):Oe(m)?g=m(y):g=z.createElement(r0,y),z.createElement(lt,{className:"recharts-active-dot",key:x},g)});var v=N.forwardRef(function(y,x){return z.createElement(b,Ua({},y,{ref:x}))});return v.displayName=b.displayName,v},Jee=Yee({chartName:"PieChart",GraphicalChild:Bn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Uf},{axisType:"radiusAxis",AxisComp:Lf}],formatAxisMap:jG,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const FO=({options:e=[],selectedValues:t=[],onChange:r,placeholder:n="Slectionner...",label:i,icon:a,displayFormat:s=(l,c)=>`${n} (${c})`})=>{const[l,c]=N.useState(!1),u=N.useRef(null),f=N.useRef(null);N.useEffect(()=>{const m=y=>{u.current&&!u.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),N.useEffect(()=>{f.current&&(f.current.indeterminate=t.length>0&&t.length<e.length)},[t,e.length]);const d=m=>{const y=typeof m=="string"?m:m.value,x=t.includes(y)?t.filter(g=>g!==y):[...t,y];r(x)},h=()=>{r([]),c(!1)},p=m=>{if(m.target.checked){const y=e.map(x=>typeof x=="string"?x:x.value);r(y)}else r([])};e.map(m=>typeof m=="string"?m:m.value);const b=m=>typeof m=="string"?m:m.label&&m.count!==void 0?`${m.label} (${m.count})`:m.label?m.label:m.value,v=m=>typeof m=="string"?m:m.value;return o.jsxs("div",{ref:u,className:"relative w-full",children:[i&&o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:i}),o.jsxs("button",{onClick:()=>c(!l),className:"w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:border-gray-400 transition-colors flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a&&o.jsx(a,{size:18,className:"text-gray-400"}),o.jsx("span",{className:"text-gray-700",children:t.length>0?`${t.length} slectionn${t.length>1?"s":""}`:s(0,e.length)})]}),o.jsx(yn,{size:18,className:`text-gray-400 transition-transform ${l?"rotate-180":""}`})]}),l&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-50",children:[o.jsxs("div",{className:"sticky top-0 bg-gray-50 border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer flex-1",children:[o.jsx("input",{ref:f,type:"checkbox",checked:t.length===e.length&&e.length>0,onChange:p,className:"w-4 h-4 rounded cursor-pointer"}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Tous (",e.length,")"]})]}),t.length>0&&o.jsx("button",{onClick:h,className:"text-xs text-gray-500 hover:text-gray-700 transition-colors",title:"Rinitialiser la slection",children:o.jsx(Tn,{size:16})})]}),o.jsx("div",{className:"max-h-60 overflow-y-auto",children:e.length>0?e.map(m=>{const y=v(m),x=b(m);return o.jsxs("label",{className:"flex items-center gap-3 px-4 py-2 hover:bg-blue-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",children:[o.jsx("input",{type:"checkbox",checked:t.includes(y),onChange:()=>d(m),className:"w-4 h-4 rounded cursor-pointer accent-blue-500"}),o.jsx("span",{className:"text-sm text-gray-700 flex-1",children:x})]},y)}):o.jsx("div",{className:"px-4 py-3 text-center text-gray-500 text-sm",children:"Aucune option disponible"})})]})]})},Qt={async getAll(){try{const{data:e,error:t}=await K.from(ae.PAIEMENTS).select(`
          *,
          created_by,
          client:prospects!client_id(raison_sociale, contact),
          installation:installations(application_installee, montant, type, created_by)
        `).order("date_paiement",{ascending:!1});if(t)throw t;return e.map(n=>{var c,u;const i=((c=n.installation)==null?void 0:c.montant)||0,a=n.montant||0,s=Math.max(0,i-a),l=n.created_by||((u=n.installation)==null?void 0:u.created_by)||null;return{...n,created_by:l,resteAPayer:s}})}catch(e){throw console.error("Erreur rcupration paiements:",e),e}},async getByClient(e){try{const{data:t,error:r}=await K.from(ae.PAIEMENTS).select(`
          id,
          installation_id,
          client_id,
          montant,
          mode_paiement,
          type,
          date_paiement,
          created_by,
          installation:installations(montant, type, created_by, application_installee)
        `).eq("client_id",e).order("date_paiement",{ascending:!1});if(r)throw r;return t.map(i=>{var u,f;const a=((u=i.installation)==null?void 0:u.montant)||0,s=i.montant||0,l=Math.max(0,a-s),c=i.created_by||((f=i.installation)==null?void 0:f.created_by)||null;return{...i,created_by:c,resteAPayer:l}})}catch(t){throw console.error("Erreur rcupration paiements client:",t),t}},async getByInstallation(e){try{const{data:t,error:r}=await K.from(ae.PAIEMENTS).select("id, montant, type, date_paiement, mode_paiement").eq("installation_id",e).order("date_paiement",{ascending:!0});if(r)throw r;return t||[]}catch(t){return console.error("Erreur rcupration paiements installation:",t),[]}},async getResteTotalClient(e){try{const{data:t,error:r}=await K.from(ae.INSTALLATIONS).select("id, montant").eq("client_id",e);if(r)throw r;const n=t.reduce((c,u)=>c+(u.montant||0),0),{data:i,error:a}=await K.from(ae.PAIEMENTS).select("montant").eq("client_id",e);if(a)throw a;const s=i.reduce((c,u)=>c+(u.montant||0),0),l=Math.max(0,n-s);return{totalInstallations:n,totalPaye:s,resteAPayer:l}}catch(t){throw console.error("Erreur calcul reste total:",t),t}},async create(e){try{const t={client_id:e.client_id,installation_id:e.installation_id,type:e.type,montant:e.montant,mode_paiement:e.mode_paiement,date_paiement:e.date_paiement||new Date().toISOString(),created_by:e.created_by||null},{data:r,error:n}=await K.from(ae.PAIEMENTS).insert([t]).select("*");if(n)throw n;return(r==null?void 0:r[0])||null}catch(t){throw console.error("Erreur cration paiement:",t),t}},async update(e,t){try{const{data:r,error:n}=await K.from(ae.PAIEMENTS).update(t).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact),
          installation:installations(application_installee, montant)
        `).single();if(n)throw n;return r}catch(r){throw console.error("Erreur mise  jour paiement:",r),r}},async delete(e){try{const{error:t}=await K.from(ae.PAIEMENTS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression paiement:",t),t}},async getStats(e=null,t=null){try{let r=K.from(ae.PAIEMENTS).select("montant, type, mode_paiement, date_paiement");e&&t&&(r=r.gte("date_paiement",e).lte("date_paiement",t));const{data:n,error:i}=await r;if(i)throw i;return{total:n.length,revenuTotal:n.reduce((s,l)=>s+(l.montant||0),0),acquisitions:n.filter(s=>s.type==="acquisition").length,abonnements:n.filter(s=>s.type==="abonnement").length,parMode:{especes:n.filter(s=>s.mode_paiement==="especes").length,virement:n.filter(s=>s.mode_paiement==="virement").length,cheque:n.filter(s=>s.mode_paiement==="cheque").length,autre:n.filter(s=>s.mode_paiement==="autre").length}}}catch(r){throw console.error("Erreur statistiques paiements:",r),r}},async getRevenusMensuels(e=new Date().getFullYear()){try{const{data:t,error:r}=await K.from(ae.PAIEMENTS).select("montant, date_paiement").gte("date_paiement",`${e}-01-01`).lte("date_paiement",`${e}-12-31`);if(r)throw r;const n=Array(12).fill(0);return t.forEach(i=>{const a=new Date(i.date_paiement).getMonth();n[a]+=i.montant||0}),n.map((i,a)=>({mois:["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"][a],montant:i}))}catch(t){throw console.error("Erreur revenus mensuels:",t),t}}},jr={async getAll(){try{const{data:e,error:t}=await K.from(ae.INSTALLATIONS).select("*").order("date_installation",{ascending:!1});if(t)throw t;return await Promise.all(e.map(async n=>{let i={};if(n.client_id){const{data:a}=await K.from(ae.PROSPECTS).select("raison_sociale, contact, telephone, email, wilaya").eq("id",n.client_id).single();i=a||{}}return{...n,client:i,type:n.type||"acquisition",wilaya:(i==null?void 0:i.wilaya)||"Non spcifie"}}))}catch(e){throw console.error("Erreur rcupration installations:",e),e}},async getByClient(e){try{const{data:t,error:r}=await K.from(ae.INSTALLATIONS).select("*").eq("client_id",e).order("date_installation",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur rcupration installations client:",t),t}},async hasPaiements(e){try{const{data:t,error:r,count:n}=await K.from(ae.PAIEMENTS).select("id",{count:"exact",head:!0}).eq("installation_id",e);if(r)throw r;return n>0}catch(t){return console.error("Erreur vrification paiements:",t),!1}},async create(e){var t;try{const{data:r,error:n}=await K.from(ae.INSTALLATIONS).insert([{client_id:e.client_id,application_installee:e.application_installee,montant:parseFloat(e.montant)||0,date_installation:e.date_installation,type:e.type||"acquisition",statut:e.statut||"en cours",created_by:e.created_by||null}]).select();if(n)throw n;const i=r[0];return(i.type==="abonnement"||((t=i.type)==null?void 0:t.toLowerCase())==="abonnement")&&await qt.createFromInstallation(i.id),await Ct.convertToClient(e.client_id),await Ct.addHistorique(e.client_id,"installation",`Installation cre: ${e.application_installee}`),i}catch(r){throw console.error("Erreur cration installation:",r),r}},async update(e,t){try{const r={};if(t.application_installee!==void 0&&(r.application_installee=t.application_installee),t.montant!==void 0&&(r.montant=parseFloat(t.montant)),t.type!==void 0&&(r.type=t.type||"acquisition"),t.statut!==void 0&&(r.statut=t.statut),t.date_installation!==void 0&&(r.date_installation=t.date_installation),!r.application_installee)throw new Error("application_installee est requis");if(!r.montant||isNaN(r.montant))throw new Error("montant est requis et doit tre un nombre");if(!r.statut)throw new Error("statut est requis");if(!r.date_installation)throw new Error("date_installation est requis");console.log("Donnes de mise  jour installation:",r);const{data:n,error:i}=await K.from(ae.INSTALLATIONS).update(r).eq("id",e).select();if(i)throw console.error("Erreur dtaille Supabase:",i),i;const a=n&&n.length>0?n[0]:null;if(!a)throw new Error("Installation non trouve aprs mise  jour");try{console.log("Recherche abonnements pour installation:",e);const{data:s,error:l}=await K.from(ae.ABONNEMENTS).select("*").eq("installation_id",e);if(l)return console.error("Erreur recherche abonnements:",l),a;if(console.log("Abonnements trouvs:",s),s&&s.length>0){for(const c of s){const u=new Date;u.setHours(0,0,0,0);const f=new Date(c.date_fin);f.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+30);let h="actif";f<u?h="expire":f<=d&&(h="en_alerte");const p={statut:h};if(t.date_installation){const b=new Date(t.date_installation),v=b.toISOString().split("T")[0],m=new Date(b);m.setFullYear(m.getFullYear()+1);const y=m.toISOString().split("T")[0];p.date_debut=v,p.date_fin=y}await K.from(ae.ABONNEMENTS).update(p).eq("id",c.id)}console.log("Abonnements mis  jour")}else console.log("Aucun abonnement trouv pour cette installation")}catch(s){console.error("Erreur dans mise  jour abonnement:",s)}return a}catch(r){throw console.error("Erreur mise  jour installation:",r),r}},async delete(e){try{if(await this.hasPaiements(e)){const a=new Error("Impossible de supprimer cette installation car elle a des paiements enregistrs. Supprimez d'abord les paiements avant de supprimer l'installation.");throw a.code="INSTALLATION_HAS_PAIEMENTS",a}const{data:r,error:n}=await K.from(ae.ABONNEMENTS).select("id").eq("installation_id",e);if(n)throw n;if(r&&r.length>0)for(const a of r)await qt.delete(a.id);const{error:i}=await K.from(ae.INSTALLATIONS).delete().eq("id",e);if(i)throw i;return!0}catch(t){throw console.error("Erreur suppression installation:",t),t}},async getStats(){try{const{data:e,error:t}=await K.from(ae.INSTALLATIONS).select("statut, montant, date_installation");if(t)throw t;return{total:e.length,enCours:e.filter(n=>n.statut==="en cours").length,terminees:e.filter(n=>n.statut==="terminee").length,revenuTotal:e.reduce((n,i)=>n+(i.montant||0),0)}}catch(e){throw console.error("Erreur statistiques installations:",e),e}},async checkAndRenewAcquisitions(){try{const{data:e,error:t}=await K.from(ae.INSTALLATIONS).select("id, client_id, application_installee, montant, date_installation, type, statut, created_by").eq("type","acquisition");if(t)throw t;const r=new Date;r.setHours(0,0,0,0);const n=[];for(const i of e){const a=new Date(i.date_installation);a.setHours(0,0,0,0);const s=new Date(a);if(s.setFullYear(s.getFullYear()+1),r>=s){const{data:l,error:c}=await K.from(ae.ABONNEMENTS).select("id",{count:"exact"}).eq("installation_id",i.id).in("statut",["actif","en_alerte"]);if(!(l&&l.length>0))try{console.log(` Cration d'abonnement renouvellement pour installation ${i.id}`);const f=r,d=new Date(f);d.setFullYear(d.getFullYear()+1);const{error:h}=await K.from(ae.ABONNEMENTS).insert([{installation_id:i.id,date_debut:f.toISOString().split("T")[0],date_fin:d.toISOString().split("T")[0],statut:"actif",source:"ABONNEMENT (ACQUISITION)",auto_generated:!0}]);if(h){console.error(`Erreur cration abonnement renouvellement pour ${i.id}:`,h);continue}try{await Ct.addHistorique(i.client_id,"abonnement_auto_renew",`Abonnement auto-renouvel pour ${i.application_installee}`,{installation_id:i.id,date_debut:f.toISOString().split("T")[0],date_fin:d.toISOString().split("T")[0],montant:i.montant,source:"ABONNEMENT (ACQUISITION)"}),console.log(` Action enregistre dans l'historique du prospect/client ${i.client_id}`)}catch(p){console.warn(" Impossible d'enregistrer dans l'historique:",p)}n.push(i),console.log(` Abonnement renouvel: ${i.application_installee} (Installation ${i.id}), Nouvel abonnement jusqu'au ${d.toISOString().split("T")[0]}`)}catch(f){console.error(`Erreur lors du renouvellement d'abonnement pour ${i.id}:`,f)}}}return{success:!0,renewedCount:n.length,installations:n}}catch(e){throw console.error("Erreur vrification renouvellement installations:",e),e}}},Qee=(e,t,r)=>{if(r&&r>0)return r;if(!e||!t)return null;const n=new Date(e),i=new Date(t);if(isNaN(n.getTime())||isNaN(i.getTime()))return null;const a=i.getTime()-n.getTime(),s=Math.round(a/(1e3*60));return Math.max(0,s)},fu=e=>e&&{...e,duree_minutes:e.duree&&e.duree>0?e.duree:Qee(e.time_creation||e.created_at||e.date_intervention,e.date_fin,e.duree)},up=e=>Array.isArray(e)?e.map(fu):e,Yn={async getAll(){try{const{data:e,error:t}=await K.from(ae.INTERVENTIONS).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone, wilaya),
          technicien:users!technicien_id(id, nom, email)
        `).order("date_intervention",{ascending:!1});if(t)throw t;return up(e)}catch(e){throw console.error("Erreur rcupration interventions:",e),e}},async getByClient(e){try{const{data:t,error:r}=await K.from(ae.INTERVENTIONS).select(`
          *,
          technicien:users!technicien_id(id, nom, email)
        `).eq("client_id",e).order("date_intervention",{ascending:!1});if(r)throw r;return up(t)}catch(t){throw console.error("Erreur rcupration interventions client:",t),t}},async getByTechnicien(e){try{const{data:t,error:r}=await K.from(ae.INTERVENTIONS).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone, wilaya),
          technicien:users!technicien_id(id, nom, email)
        `).eq("technicien_id",e).order("date_intervention",{ascending:!1});if(r)throw r;return up(t)}catch(t){throw console.error("Erreur rcupration interventions technicien:",t),t}},async create(e){try{const t=new Date().toISOString();console.log("DEBUG create: creationTime (UTC):",t);const{data:r,error:n}=await K.from(ae.INTERVENTIONS).insert([{...e,statut:e.statut||"en_cours",date_intervention:e.date_intervention||new Date().toISOString(),duree:0,time_creation:t,created_by:e.created_by||null}]).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone, wilaya),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(n)throw n;return console.log("DEBUG create: intervention cre avec time_creation =",r.time_creation),fu(r)}catch(t){throw console.error("Erreur cration intervention:",t),t}},async update(e,t){try{const{data:r,error:n}=await K.from(ae.INTERVENTIONS).update(t).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone, wilaya),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(n)throw n;return fu(r)}catch(r){throw console.error("Erreur mise  jour intervention:",r),r}},async cloturer(e,t,r){try{const{data:n,error:i}=await K.from(ae.INTERVENTIONS).select("*").eq("id",e).single();if(i)throw i;const s=new Date().toISOString();console.log("DEBUG cloturer:"),console.log("  intervention id:",e),console.log("  time_creation:",n.time_creation),console.log("  dateFin (UTC):",s);let l,c="UNKNOWN";if(console.log("  DEBUG: Checking time_creation..."),console.log("  type of time_creation:",typeof n.time_creation),console.log("  time_creation is null:",n.time_creation===null),console.log("  time_creation is undefined:",n.time_creation===void 0),n.time_creation){const b=n.time_creation.endsWith("Z")?n.time_creation:n.time_creation+"Z";l=new Date(b),c="time_creation",console.log("  Raw time_creation from DB:",n.time_creation),console.log("  With Z added:",b),console.log("  Using time_creation - parsed as:",l.toISOString())}else if(n.date_intervention){const b=n.date_intervention,v=new Date,m=v.getHours().toString().padStart(2,"0"),y=v.getMinutes().toString().padStart(2,"0"),x=v.getSeconds().toString().padStart(2,"0");l=new Date(b+"T"+m+":"+y+":"+x+"Z"),c="date_intervention with current time (fallback - NO EXACT TIME)",console.log("  Using date_intervention fallback with current time - parsed as:",l.toISOString()),console.log("  WARNING: time_creation was NULL - using current time as estimate!")}else l=new Date,c="NOW (last resort)",console.log("  Using NOW fallback");if(isNaN(l.getTime()))throw new Error("Impossible de calculer la date de dbut. time_creation: "+n.time_creation+", date_intervention: "+n.date_intervention);const u=new Date(s),f=u.getTime()-l.getTime(),d=Math.max(0,Math.round(f/(1e3*60)));console.log("  "),console.log("  === DURATION CALCULATION ==="),console.log("  source:",c),console.log("  dateDebut (ISO):",l.toISOString()),console.log("  dateDebut (getTime):",l.getTime()),console.log("  dateFin (ISO):",u.toISOString()),console.log("  dateFin (getTime):",u.getTime()),console.log("  timeDiffMs:",f),console.log("  durationMinutes:",d),console.log("  durationHeures:",(d/60).toFixed(2)),console.log("  ===========================");const{data:h,error:p}=await K.from(ae.INTERVENTIONS).update({statut:"cloturee",action_entreprise:t,commentaires:r,date_fin:s,duree:d}).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone, wilaya),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(p)throw p;return console.log("  Clture OK - duree enregistre:",h.duree),fu(h)}catch(n){throw console.error("Erreur clture intervention:",n),n}},async delete(e){try{const{error:t}=await K.from(ae.INTERVENTIONS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression intervention:",t),t}},async getStats(){try{const{data:e,error:t}=await K.from(ae.INTERVENTIONS).select("statut, priorite, type_intervention, duree");if(t)throw t;return{total:e.length,enCours:e.filter(n=>n.statut==="en_cours").length,cloturees:e.filter(n=>n.statut==="cloturee").length,hautesPriorites:e.filter(n=>n.priorite==="haute").length,dureeMoyenne:e.reduce((n,i)=>n+(i.duree||0),0)/e.length||0}}catch(e){throw console.error("Erreur statistiques interventions:",e),e}}},Ot={async testTableAccess(){try{console.log("Testing missions table access...");const{data:e,error:t,status:r}=await K.from("missions").select("id").limit(1);return t?(console.error("Table access error:",t),{accessible:!1,error:t}):(console.log("Table access successful:",{dataCount:e==null?void 0:e.length,status:r}),{accessible:!0})}catch(e){return console.error("Table access test error:",e),{accessible:!1,error:e}}},async getAll(){try{const{data:e,error:t}=await K.from("missions").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error loading missions:",{code:t.code,message:t.message,details:t.details,hint:t.hint}),t;return console.log("Missions loaded successfully:",e==null?void 0:e.length,"missions"),e||[]}catch(e){throw console.error("Erreur lors du chargement des missions:",e),e}},async getById(e){try{const{data:t,error:r}=await K.from("missions").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur lors du chargement de la mission:",t),t}},async create(e){try{const t={titre:e.titre||"Sans titre",statut:"creee"};console.log("Form data received:",e),console.log("Initial insert data:",t),e.description&&e.description.trim()&&(t.description=e.description),e.clientId&&(console.log("Adding prospect_id:",e.clientId),t.prospect_id=e.clientId),e.lieu&&e.lieu.trim()&&(t.lieu=e.lieu),e.dateDebut&&(t.date_debut=e.dateDebut),e.dateFin&&(t.date_fin_prevue=e.dateFin),e.type&&(t.type_mission=e.type),e.priorite&&(t.priorite=e.priorite),e.budgetInitial&&(t.budget_alloue=parseFloat(e.budgetInitial)),e.chefMissionId&&(t.chef_mission_id=e.chefMissionId),e.accompagnateurIds&&e.accompagnateurIds.length>0&&(t.accompagnateurs_ids=e.accompagnateurIds),console.log("Final insert data:",t);const{data:r,error:n,status:i,statusText:a}=await K.from("missions").insert([t]).select();if(console.log("Insert response:",{data:r,error:n,status:i,statusText:a}),n)throw console.error("Supabase error details:",n),console.error("Error properties:",Object.keys(n)),console.error("Error stringified:",JSON.stringify(n,null,2)),n;return r&&r.length>0?r[0]:{...t,created_at:new Date().toISOString()}}catch(t){throw console.error("Erreur lors de la cration de la mission:",t),t}},async update(e,t){try{const r={};t.titre!==void 0&&(r.titre=t.titre),t.description!==void 0&&(r.description=t.description),t.clientId!==void 0&&(r.prospect_id=t.clientId),t.lieu!==void 0&&(r.lieu=t.lieu),t.dateDebut!==void 0&&(r.date_debut=t.dateDebut),t.dateFin!==void 0&&(r.date_fin_prevue=t.dateFin),t.type!==void 0&&(r.type_mission=t.type),t.priorite!==void 0&&(r.priorite=t.priorite),t.budgetInitial!==void 0&&(r.budget_alloue=parseFloat(t.budgetInitial)),t.chefMissionId!==void 0&&(r.chef_mission_id=t.chefMissionId),t.accompagnateurIds!==void 0&&(r.accompagnateurs_ids=t.accompagnateurIds),r.updated_at=new Date().toISOString();const{data:n,error:i}=await K.from("missions").update(r).eq("id",e);if(i)throw console.error("Supabase update error:",{code:i.code,message:i.message,details:i.details,hint:i.hint}),i;const{data:a,error:s}=await K.from("missions").select("*").eq("id",e).single();if(s)throw console.error("Error fetching updated mission:",s),s;return a}catch(r){throw console.error("Erreur lors de la mise  jour de la mission:",r),r}},async delete(e){try{const{error:t}=await K.from("missions").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur lors de la suppression de la mission:",t),t}},async startMission(e){var t;try{const r=typeof e=="string"?parseInt(e,10):e;console.log(" Dmarrage de la mission:",r);const n=K.from("missions").update({statut:"en_cours",updated_at:new Date().toISOString()}).eq("id",r).select(),i=new Promise(s=>setTimeout(()=>s({data:[{id:r,statut:"en_cours"}],error:null}),5e3)),a=await Promise.race([n,i]);return a.error?(console.warn(" Erreur Supabase (mise  jour locale):",a.error),{id:r,statut:"en_cours",local:!0}):(console.log(" Mission dmarre"),((t=a.data)==null?void 0:t[0])||{id:r,statut:"en_cours"})}catch(r){return console.error("Erreur startMission:",r),{statut:"en_cours",local:!0}}},async updateStatus(e,t){try{const{data:r,error:n}=await K.from("missions").update({statut:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de la mise  jour du statut:",r),r}},async addParticipant(e,t,r){try{const{data:n,error:i}=await K.from("missions_participants").insert([{mission_id:e,user_id:t,role:r}]).select().single();if(i)throw i;return n}catch(n){throw console.error("Erreur lors de l'ajout du participant:",n),n}},async addExpense(e,t){try{const{data:r,error:n}=await K.from("missions_expenses").insert([{mission_id:e,type_depense:t.type,montant:t.montant,description:t.description,justificatif_url:t.justificatifUrl}]).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de l'ajout de la dpense:",r),r}},async getExpenses(e){try{const{data:t,error:r}=await K.from("missions_expenses").select("*").eq("mission_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des dpenses:",t),t}},async getByClient(e){try{const{data:t,error:r}=await K.from("missions").select("*").eq("prospect_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des missions du client:",t),t}},async getByParticipant(e){var t;try{const{data:r,error:n}=await K.from("missions").select("*").in("id",((t=(await K.from("missions_participants").select("mission_id").eq("user_id",e)).data)==null?void 0:t.map(i=>i.mission_id))||[]).order("created_at",{ascending:!1});if(n)throw n;return r||[]}catch(r){throw console.error("Erreur lors du chargement des missions:",r),r}},async getStatistics(e={}){try{let t=K.from("missions").select("*");e.statut&&(t=t.eq("statut",e.statut)),e.type&&(t=t.eq("type_mission",e.type));const{data:r,error:n}=await t;if(n)throw n;const i={total:r.length,byStatus:{},byType:{},totalBudget:0,totalExpenses:0};return r.forEach(a=>{i.byStatus[a.statut]=(i.byStatus[a.statut]||0)+1,i.byType[a.type_mission]=(i.byType[a.type_mission]||0)+1,i.totalBudget+=0}),i}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),t}},async updateTechnicalDetails(e,t){try{const{data:r,error:n}=await K.from("missions").update({rapport_technique:t.rapportTechnique,actions_realisees:t.actionsRealisees,logiciels_materiels:t.logicielsMateriels,problemes_resolutions:t.problemesResolutions,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de la mise  jour des dtails techniques:",r),r}},async closeMissionByChef(e,t){try{const r={cloturee_par_chef:!0,date_clot_chef:new Date().toISOString(),commentaire_clot_chef:t.commentaireChef,date_cloture_reelle:new Date().toISOString(),statut:"cloturee",updated_at:new Date().toISOString()};t.totalExpenses!==void 0&&t.totalExpenses!==null&&(r.budget_depense=parseFloat(t.totalExpenses)),console.log(" Envoi de closeMissionByChef avec:",r);const{data:n,error:i}=await K.from("missions").update(r).eq("id",e).select();if(i){if(console.error(" Erreur Supabase:",JSON.stringify(i,null,2)),i.code==="PGRST204")return{local:!0,id:e,...r};throw i}return console.log(" Mission ferme par chef"),n&&n.length>0?n[0]:{id:e,...r}}catch(r){return console.error("Erreur lors de la clture par le chef:",r),{local:!0,id:e,cloturee_par_chef:!0}}},async validateClosureByAdmin(e,t){try{const r={cloturee_definitive:t.clotureeDefinitive,date_clot_definitive:new Date().toISOString(),commentaire_clot_admin:t.commentaireAdmin,statut:"validee",updated_at:new Date().toISOString()};t.totalExpenses!==void 0&&t.totalExpenses!==null&&(r.budget_depense=parseFloat(t.totalExpenses));const{data:n,error:i}=await K.from("missions").update(r).eq("id",e).select();if(i){if(i.code==="PGRST204")return{local:!0,id:e,...r};throw i}return n&&n.length>0?n[0]:{id:e,...r}}catch(r){return console.error("Erreur lors de la validation dfinitive:",r),{local:!0,id:e,cloturee_definitive:!0}}},async uploadJustificatif(e,t,r){try{const n=`${e}/${t}/${Date.now()}_${r.name}`,{data:i,error:a}=await K.storage.from("mission-justificatifs").upload(n,r);if(a)throw a;const{data:{publicUrl:s}}=K.storage.from("mission-justificatifs").getPublicUrl(n),{error:l}=await K.from("missions_expenses").update({justificatif_url:s}).eq("id",t);if(l)throw l;return{url:s,fileName:n}}catch(n){throw console.error("Erreur lors de l'upload du justificatif:",n),n}},async getJustificatifs(e){try{const{data:t,error:r}=await K.from("missions_expenses").select("*").eq("mission_id",e).not("justificatif_url","is",null).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des justificatifs:",t),t}},async deleteJustificatif(e,t){try{const r=t.split("/").pop(),{error:n}=await K.storage.from("mission-justificatifs").remove([r]);if(n)throw n;const{error:i}=await K.from("missions_expenses").update({justificatif_url:null}).eq("id",e);if(i)throw i;return!0}catch(r){throw console.error("Erreur lors de la suppression du justificatif:",r),r}},async getDelayedMissions(){try{const e=new Date().toISOString().split("T")[0],{data:t,error:r}=await K.from("missions").select("*").lt("date_fin_prevue",e).in("statut",["creee","planifiee","en_cours"]);if(r)throw r;return t||[]}catch(e){throw console.error("Erreur lors du chargement des missions en retard:",e),e}},async getMissionsWithBudgetWarning(){try{const{data:e,error:t}=await K.from("missions").select("*");if(t)throw t;const r=[];for(const n of e){const{data:i,error:a}=await K.from("missions_expenses").select("montant").eq("mission_id",n.id);if(!a){const s=i.reduce((c,u)=>c+(u.montant||0),0);0>80}}return r}catch(e){throw console.error("Erreur lors du chargement des missions avec alerte budget:",e),e}},async saveCommentairesTechniques(e,t){try{const{data:r,error:n}=await K.from("missions").update({commentaires_techniques:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne commentaires_techniques n'existe pas encore. Excutez la migration SQL."),console.log("Commentaires stocks localement (seront perdus aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Commentaires techniques sauvegards en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des commentaires techniques:",r),r}},async saveCommentairesFinanciers(e,t){try{const{data:r,error:n}=await K.from("missions").update({commentaires_financiers:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne commentaires_financiers n'existe pas encore. Excutez la migration SQL."),console.log("Commentaires stocks localement (seront perdus aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Commentaires financiers sauvegards en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des commentaires financiers:",r),r}},async saveDpenses(e,t){try{const{data:r,error:n}=await K.from("missions").update({depenses_details:t,budget_depense:t.reduce((i,a)=>i+(parseFloat(a.montant)||0),0),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne depenses_details n'existe pas encore. Excutez la migration SQL."),console.log("Dpenses stockes localement (seront perdues aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Dpenses sauvegardes en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des dpenses:",r),r}}},qO=[{code:"01",name:"Adrar"},{code:"02",name:"Chlef"},{code:"03",name:"Laghouat"},{code:"04",name:"Oum El Bouaghi"},{code:"05",name:"Batna"},{code:"06",name:"Bjaa"},{code:"07",name:"Biskra"},{code:"08",name:"Bechar"},{code:"09",name:"Blida"},{code:"10",name:"Bouira"},{code:"11",name:"Tamanrasset"},{code:"12",name:"Tbessa"},{code:"13",name:"Tlemcen"},{code:"14",name:"Tiaret"},{code:"15",name:"Tizi Ouzou"},{code:"16",name:"Alger"},{code:"17",name:"Djelfa"},{code:"18",name:"Jijel"},{code:"19",name:"Stif"},{code:"20",name:"Sada"},{code:"21",name:"Skikda"},{code:"22",name:"Sidi Bel Abbs"},{code:"23",name:"Annaba"},{code:"24",name:"Guelma"},{code:"25",name:"Constantine"},{code:"26",name:"Mda"},{code:"27",name:"Mostaghanem"},{code:"28",name:"Mascara"},{code:"29",name:"Ouargla"},{code:"30",name:"Oran"},{code:"31",name:"El Asnam"},{code:"32",name:"An Dfla"},{code:"33",name:"Boumdes"},{code:"34",name:"Boumerds"},{code:"35",name:"El Tarf"},{code:"36",name:"Tindouf"},{code:"37",name:"Tissemsilt"},{code:"38",name:"El Oued"},{code:"39",name:"Khenchela"},{code:"40",name:"Souk Ahras"},{code:"41",name:"Tipaza"},{code:"42",name:"Mila"},{code:"43",name:"An Temouchent"},{code:"44",name:"Ghardaa"},{code:"45",name:"Relizane"},{code:"46",name:"Draa Ben Khedda"},{code:"47",name:"Draa Ben Khelouf"},{code:"48",name:"Khemis Miliana"},{code:"49",name:"Laghouat"},{code:"50",name:"Nama"},{code:"51",name:"Ouled Djellal"},{code:"52",name:"Bordj Baji Mokhtar"},{code:"53",name:"Ouled Bni Sghir"},{code:"54",name:"ni Abbs"},{code:"55",name:"In Salah"},{code:"56",name:"In Guezzam"},{code:"57",name:"Touggourt"},{code:"58",name:"Djanet"}],Zee=e=>{const t=qO.find(r=>r.name.toLowerCase()===(e==null?void 0:e.toLowerCase()));return(t==null?void 0:t.code)||null},ete=e=>{const t=qO.find(r=>r.code===e);return(t==null?void 0:t.name)||null},zO=e=>{if(!e)return null;if(e.includes(" - "))return e;if(/^\d{2}$/.test(e)){const r=ete(e);return r?`${e} - ${r}`:e}const t=Zee(e);return t?`${t} - ${e}`:e},tte=async(e,t)=>{var r,n,i,a,s;try{const l="AIzaSyDWWtPvq5M42WWRXM5aldUwFNF3BTB5VUQ",c="gemini";if(console.log(" Dmarrage analyse IA..."),console.log("Provider:",c),console.log("API Key prsente:",l?"Oui ":"Non "),c==="gemini")return console.warn(" API Gemini temporairement dsactive (cl compromise). Utilisation des analyses par dfaut."),null;const u={totalClients:e.totalClients,prospects:e.prospects,revenus:e.revenus,resteAPayer:e.resteAPayer,totalInstallations:e.totalInstallations,tauxConversion:e.tauxConversion,tauxRecouvrement:(e.revenus/(e.totalInstallations||1)*100).toFixed(1),top5Dettes:t.slice(0,5).map(h=>({client:h.client,montant:h.montant}))},f=`Tu es un analyste financier expert pour A2S Gestion, socit de logiciels pharmaceutiques en Algrie.

Analyse ces donnes et fournis EXACTEMENT 4 insights en franais (max 50 mots chacun).

DONNES FINANCIRES:
- Clients actifs: ${u.totalClients}
- Prospects en cours: ${u.prospects}
- Revenus encaisss: ${u.revenus.toLocaleString("fr-FR")} DA
- Reste  payer: ${u.resteAPayer.toLocaleString("fr-FR")} DA
- Total installations: ${u.totalInstallations.toLocaleString("fr-FR")} DA
- Taux de conversion: ${u.tauxConversion}%
- Taux de recouvrement: ${u.tauxRecouvrement}%
- Top 5 clients dbiteurs: ${JSON.stringify(u.top5Dettes)}

INSTRUCTIONS:
Fournis 4 insights avec ces catgories exactes:
1. POSITIVE - Tendance encourageante
2. WARNING - Point d'attention urgent
3. INFO - Mtrique cl  surveiller
4. ACTION - Recommandation actionnable

FORMAT JSON STRICT:
[
  {"type": "positive", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "warning", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "info", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "action", "title": "Titre court", "message": "Insight concis avec chiffres cls"}
]

RPONDS UNIQUEMENT EN JSON, RIEN D'AUTRE.`;let d=null;if(c==="gemini"){const h=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${l}`;console.log(" Appel API Gemini (v1beta/gemini-2.0-flash)...");const p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:f}]}],generationConfig:{temperature:.7,maxOutputTokens:800,topP:.95,topK:40}})});if(console.log("Statut rponse Gemini:",p.status),!p.ok){const m=await p.text();throw console.error(" Erreur API Gemini:",m),new Error("Erreur API Gemini")}const b=await p.json();console.log(" Rponse Gemini reue");const v=(s=(a=(i=(n=(r=b.candidates)==null?void 0:r[0])==null?void 0:n.content)==null?void 0:i.parts)==null?void 0:a[0])==null?void 0:s.text;if(v){console.log(" Contenu brut:",v.substring(0,200)+"...");try{const m=v.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();d=JSON.parse(m),console.log(" JSON pars avec succs:",d.length,"insights")}catch(m){return console.warn(" Impossible de parser la rponse Gemini:",m.message),console.log("Contenu complet:",v),null}}else console.warn(" Aucun contenu dans la rponse Gemini")}return d&&Array.isArray(d)&&d.length===4?(console.log(" Analyse IA gnre avec succs - 4 insights valids"),d):(console.warn(" Format d'insights invalide:",d),null)}catch(l){return console.error(" Erreur gnration analyse IA:",l.message),console.error("Dtails:",l),null}},rte=()=>{const{profile:e}=Nt(),[t,r]=N.useState({totalClients:0,prospects:0,revenus:0,abonnementsActifs:0,resteAPayer:0,tauxConversion:0,totalInstallations:0,revenusAbonnementsPaiements:0,revenusAcquisitionsPaiements:0,revenusAbonnementsInstallations:0,revenusAcquisitionsInstallations:0,tauxRecouvrement:0,totalInterventions:0,nombreAbonnements:0,nombreAcquisitions:0}),[n,i]=N.useState(!0),[a,s]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,h]=N.useState([]),[p,b]=N.useState([]),[v,m]=N.useState([]),[y,x]=N.useState([]),[g,S]=N.useState({fullyPaid:0,partiallyPaid:0,noPaid:0,totalInstallations:0}),[w,_]=N.useState(null),[j,E]=N.useState(!1),[A,P]=N.useState(!1);N.useEffect(()=>{if(!n){const C=setTimeout(()=>P(!0),500);return()=>clearTimeout(C)}},[n]),N.useEffect(()=>{O()},[]),N.useEffect(()=>{!n&&t.totalClients>0&&T()},[t]);const O=async()=>{try{i(!0);const C=await Ct.getAll(),L=C.filter(re=>re.statut==="actif").length,G=C.filter(re=>re.statut==="prospect").length,R=await jr.getAll(),D=R.reduce((re,q)=>re+(q.montant||0),0),W=await Qt.getAll(),Y=W.reduce((re,q)=>re+(q.montant||0),0),F=await Yn.getAll(),V={};F.forEach(re=>{var $;const q=(($=re.technicien)==null?void 0:$.nom)||"Sans technicien",oe=(re.duree_minutes||0)/60;V[q]||(V[q]={nom:q,interventions:0,tempsTotalHeures:0}),V[q].interventions+=1,V[q].tempsTotalHeures+=oe});const U=Object.values(V).sort((re,q)=>q.interventions-re.interventions);f(U);const ge=await Ot.getAll(),le={};ge.forEach(re=>{const q=re.wilaya||"Non spcifie";le[q]||(le[q]=0),le[q]++});const Se=Object.entries(le).map(([re,q])=>({wilaya:re,count:q})).sort((re,q)=>q.count-re.count);h(Se);const fe=Math.max(0,D-Y);let Q=0,Z=0;W.forEach(re=>{var oe;const q=re.montant||0;re.type==="abonnement"||((oe=re.type)==null?void 0:oe.toLowerCase())==="abonnement"?Q+=q:Z+=q}),Q===0&&Z===0&&(Q=Y*.7,Z=Y*.3);let ee=0,k=0;R.forEach(re=>{var oe;const q=re.montant||0;re.type==="abonnement"||((oe=re.type)==null?void 0:oe.toLowerCase())==="abonnement"?ee+=q:k+=q}),ee===0&&k===0&&(ee=D*.7,k=D*.3);const ie={};R.forEach(re=>{var q;if(!ie[re.client_id]){const oe=C.find($=>$.id===re.client_id);ie[re.client_id]={client_id:re.client_id,raison_sociale:(oe==null?void 0:oe.raison_sociale)||((q=re.prospects)==null?void 0:q.raison_sociale)||"Client Inconnu",total_installations:0,total_paye:0}}ie[re.client_id].total_installations+=re.montant||0}),W.forEach(re=>{ie[re.client_id]&&(ie[re.client_id].total_paye+=re.montant||0)});const ue=Object.values(ie).map(re=>({client:re.raison_sociale,montant:Math.max(0,re.total_installations-re.total_paye)})).filter(re=>re.montant>0).sort((re,q)=>q.montant-re.montant).slice(0,5);s(ue),c((()=>{const re=["Jan","Fv","Mar","Avr","Mai","Juin"],q={};return re.forEach(oe=>{q[oe]={total:0,abonnements:0,acquisitions:0}}),R.forEach(oe=>{var te;const $=oe.created_at;if(!$)return;const I=new Date($).getMonth(),se=re[I]||"Jan",H=oe.montant||0;q[se].total+=H,oe.type==="abonnement"||((te=oe.type)==null?void 0:te.toLowerCase())==="abonnement"?q[se].abonnements+=H:q[se].acquisitions+=H}),re.map(oe=>({mois:oe,total:q[oe].total,abonnements:q[oe].abonnements,acquisitions:q[oe].acquisitions}))})());const me=C.length>0?(L/C.length*100).toFixed(1):0,Ne={fullyPaid:0,partiallyPaid:0,noPaid:0};R&&R.length>0&&R.forEach(re=>{const q=W.filter($=>$.installation_id===re.id).reduce(($,J)=>$+(typeof J.montant=="number"?J.montant:0),0),oe=Math.max(0,(re.montant||0)-q);oe===re.montant||re.montant===0?Ne.noPaid++:oe>0?Ne.partiallyPaid++:Ne.fullyPaid++}),S({fullyPaid:Ne.fullyPaid,partiallyPaid:Ne.partiallyPaid,noPaid:Ne.noPaid,totalInstallations:(R==null?void 0:R.length)||0}),r({totalClients:L,prospects:G,revenus:Y,abonnementsActifs:L,resteAPayer:fe,tauxConversion:parseFloat(me),totalInstallations:D,revenusAbonnementsPaiements:Q,revenusAcquisitionsPaiements:Z,revenusAbonnementsInstallations:ee,revenusAcquisitionsInstallations:k,tauxRecouvrement:D>0?(Y/D*100).toFixed(1):0,totalInterventions:(F==null?void 0:F.length)||0,nombreAbonnements:(R==null?void 0:R.filter(re=>{var q;return re.type==="abonnement"||((q=re.type)==null?void 0:q.toLowerCase())==="abonnement"}).length)||0,nombreAcquisitions:(R==null?void 0:R.filter(re=>{var q;return re.type==="acquisition"||((q=re.type)==null?void 0:q.toLowerCase())==="acquisition"}).length)||0})}catch(C){console.error("Erreur chargement dashboard:",C)}finally{i(!1)}},T=async()=>{try{E(!0);const C=await tte(t,a);_(C)}catch(C){console.error("Erreur IA:",C),_(null)}finally{E(!1)}},M=[{name:"Abonnements",value:t.revenusAbonnementsPaiements||0,color:"#2563eb"},{name:"Acquisitions",value:t.revenusAcquisitionsPaiements||0,color:"#10b981"}].filter(C=>C.value>0);[{name:"Abonnements",value:t.revenusAbonnementsInstallations||0,color:"#2563eb"},{name:"Acquisitions",value:t.revenusAcquisitionsInstallations||0,color:"#10b981"}].filter(C=>C.value>0);const B=C=>new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(C);return n?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6 p-6 bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Tableau de Bord A2S Gestion"}),o.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",(e==null?void 0:e.nom)||"utilisateur",". Voici un aperu de vos oprations."]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-blue-100 text-sm font-medium mb-1",children:"Clients Actifs"}),o.jsx("h3",{className:"text-4xl font-bold",children:t.totalClients})]}),o.jsx(fl,{className:"w-10 h-10 text-blue-200 opacity-80"})]}),o.jsxs("div",{className:"text-xs text-blue-100",children:[o.jsx(rn,{className:"inline w-3 h-3 mr-1"}),"Croissance stable"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-emerald-100 text-sm font-medium mb-1",children:"Prospects"}),o.jsx("h3",{className:"text-4xl font-bold",children:t.prospects})]}),o.jsx(Xn,{className:"w-10 h-10 text-emerald-200 opacity-80"})]}),o.jsxs("div",{className:"text-xs text-emerald-100",children:["Taux: ",t.tauxConversion,"%"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-green-100 text-sm font-medium mb-1",children:"Totalement Pay"}),o.jsx("h3",{className:"text-4xl font-bold",children:g.fullyPaid})]}),o.jsx(Nr,{className:"w-10 h-10 text-green-200 opacity-80"})]}),o.jsxs("div",{className:"text-xs text-green-100",children:[g.totalInstallations>0?`${(g.fullyPaid/g.totalInstallations*100).toFixed(0)}%`:"0%"," du total"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-amber-100 text-sm font-medium mb-1",children:"Partiellement Pay"}),o.jsx("h3",{className:"text-4xl font-bold",children:g.partiallyPaid})]}),o.jsx(Ms,{className:"w-10 h-10 text-amber-200 opacity-80"})]}),o.jsxs("div",{className:"text-xs text-amber-100",children:[g.totalInstallations>0?`${(g.partiallyPaid/g.totalInstallations*100).toFixed(0)}%`:"0%"," du total"]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-white hover:shadow-xl transition-all transform hover:scale-105",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-red-100 text-sm font-medium mb-1",children:"Aucun Paiement"}),o.jsx("h3",{className:"text-4xl font-bold",children:g.noPaid})]}),o.jsx(pt,{className:"w-10 h-10 text-red-200 opacity-80"})]}),o.jsxs("div",{className:"text-xs text-red-100",children:[g.totalInstallations>0?`${(g.noPaid/g.totalInstallations*100).toFixed(0)}%`:"0%"," du total"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-indigo-500 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Abonnements"}),o.jsx("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center",children:o.jsx(rn,{className:"text-indigo-600 w-6 h-6"})})]}),o.jsx("p",{className:"text-3xl font-bold text-indigo-600 mb-2",children:t.nombreAbonnements}),o.jsx("p",{className:"text-xs text-gray-600",children:"Installations de type abonnement + auto-gnrs"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-teal-500 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Acquisitions"}),o.jsx("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center",children:o.jsx(Xn,{className:"text-teal-600 w-6 h-6"})})]}),o.jsx("p",{className:"text-3xl font-bold text-teal-600 mb-2",children:t.nombreAcquisitions}),o.jsx("p",{className:"text-xs text-gray-600",children:"Installations de type acquisition"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 border-cyan-500 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Interventions"}),o.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center",children:o.jsx(kh,{className:"text-cyan-600 w-6 h-6"})})]}),o.jsx("p",{className:"text-3xl font-bold text-cyan-600 mb-2",children:t.totalInterventions}),o.jsx("p",{className:"text-xs text-gray-600",children:"Ralises cette priode"}),o.jsx("div",{className:"mt-3 space-y-1",children:u.slice(0,2).map((C,L)=>o.jsxs("div",{className:"flex justify-between text-xs",children:[o.jsx("span",{className:"text-gray-600",children:C.nom}),o.jsxs("span",{className:"font-semibold text-gray-800",children:[C.interventions," interventions"]})]},L))})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl shadow-lg p-8 border-2 border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg animate-pulse",children:o.jsx(rM,{size:32,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Intelligence Artificielle"}),o.jsx("p",{className:"text-gray-600 text-sm mt-1",children:j?" Analyse en cours...":" Recommandations personnalises bases sur vos donnes"})]})]}),j&&o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Gnration des insights IA..."})]})}),!j&&w&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:w.map((C,L)=>{const G={positive:"from-green-50 to-emerald-50 border-green-300",warning:"from-orange-50 to-amber-50 border-orange-300",info:"from-blue-50 to-indigo-50 border-blue-300",action:"from-purple-50 to-violet-50 border-purple-300"},R={positive:"bg-green-500",warning:"bg-orange-500",info:"bg-blue-500",action:"bg-purple-500"},D={positive:"text-green-800",warning:"text-orange-800",info:"text-blue-800",action:"text-purple-800"},W=C.type==="positive"?rn:C.type==="warning"?pt:C.type==="info"?Xn:Yr;return o.jsx("div",{className:`bg-gradient-to-br ${G[C.type]} border-2 rounded-xl p-6 hover:shadow-md transition-all`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`w-12 h-12 ${R[C.type]} rounded-lg flex items-center justify-center flex-shrink-0`,children:o.jsx(W,{size:24,className:"text-white"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-bold ${D[C.type]} text-lg mb-1`,children:C.title}),o.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:C.message})]})]})},L)})}),!j&&!w&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-300 rounded-xl p-6 hover:shadow-md transition-all",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(rn,{size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-green-800 text-lg mb-1",children:"Revenus Solides"}),o.jsxs("p",{className:"text-sm text-green-900 leading-relaxed",children:["Votre chiffre d'affaires s'lve  ",o.jsx("strong",{children:B(t.revenus)})," avec ",t.totalClients," clients actifs gnrant des revenus constants."]})]})]})}),o.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-300 rounded-xl p-6 hover:shadow-md transition-all",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-orange-500 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(pt,{size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-orange-800 text-lg mb-1",children:"Attention Requise"}),o.jsxs("p",{className:"text-sm text-orange-900 leading-relaxed",children:[o.jsx("strong",{children:B(t.resteAPayer)})," reste  recouvrer. Taux de recouvrement actuel: ",o.jsxs("strong",{children:[t.tauxRecouvrement,"%"]}),"."]})]})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-300 rounded-xl p-6 hover:shadow-md transition-all",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(Xn,{size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-blue-800 text-lg mb-1",children:"Conversion Prospects"}),o.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed",children:["Taux de conversion: ",o.jsxs("strong",{children:[t.tauxConversion,"%"]}),". Vous avez ",t.prospects," prospects actuellement en cours de ngociation."]})]})]})}),o.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border-2 border-purple-300 rounded-xl p-6 hover:shadow-md transition-all",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center flex-shrink-0",children:o.jsx(kh,{size:24,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-purple-800 text-lg mb-1",children:"Activit Technique"}),o.jsxs("p",{className:"text-sm text-purple-900 leading-relaxed",children:[t.totalInterventions," interventions ralises. Productivit optimale de votre quipe technique."]})]})]})})]}),!j&&!w&&o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-300 rounded-lg",children:o.jsxs("p",{className:"text-xs text-yellow-800",children:[" ",o.jsx("strong",{children:"Conseil:"})," Configurez VITE_AI_API_KEY dans votre fichier .env pour des analyses IA automatises avec GPT."]})})]}),A&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interventions par Technicien"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Performance de l'quipe"})]}),o.jsx(kh,{className:"text-cyan-500 w-6 h-6"})]}),o.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:u.slice(0,8).map((C,L)=>o.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:border-cyan-300 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsx("span",{className:"font-semibold text-gray-800",children:C.nom}),o.jsx("span",{className:"bg-cyan-100 text-cyan-800 text-xs font-bold px-2 py-1 rounded-full",children:C.interventions})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:"bg-cyan-500 h-full rounded-full transition-all",style:{width:Math.min(C.interventions/Math.max(...u.map(G=>G.interventions),1)*100,100)+"%"}})}),o.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[C.tempsTotalHeures.toFixed(1),"h (",(C.tempsTotalHeures/(C.interventions||1)).toFixed(1),"h/intervention)"]})]},L))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Rpartition Revenus"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Par type (Depuis Paiements)"})]}),o.jsx(SE,{className:"text-purple-500 w-6 h-6"})]}),o.jsx(x7,{width:"100%",height:320,children:o.jsxs(Jee,{children:[o.jsx(Bn,{data:M,cx:"50%",cy:"50%",labelLine:!1,label:({name:C,percent:L})=>`${C} ${(L*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:M.map((C,L)=>o.jsx(Av,{fill:C.color},`cell-${L}`))}),o.jsx(en,{formatter:C=>B(C)})]})}),o.jsx("div",{className:"mt-4 space-y-2",children:M.map((C,L)=>o.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),o.jsx("span",{className:"text-sm text-gray-700",children:C.name})]}),o.jsx("span",{className:"text-sm font-semibold text-gray-800",children:B(C.value)})]},L))})]})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Missions par Wilaya"}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Distribution gographique"})]}),o.jsx(li,{className:"text-rose-500 w-6 h-6"})]}),d.length>0?o.jsx("div",{className:"space-y-3",children:d.map((C,L)=>{const G=Math.max(...d.map(Y=>Y.count),1),R=C.count/G*100,D=["bg-rose-500","bg-pink-500","bg-red-500","bg-orange-500","bg-amber-500"],W=D[L%D.length];return o.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-rose-300 transition-colors",children:[o.jsxs("div",{className:"flex justify-between items-center mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(li,{className:"w-4 h-4 text-rose-500"}),o.jsx("span",{className:"font-semibold text-gray-800",children:C.wilaya})]}),o.jsxs("span",{className:`${W} text-white text-xs font-bold px-3 py-1 rounded-full`,children:[C.count," mission",C.count>1?"s":""]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:o.jsx("div",{className:`${W} h-full rounded-full transition-all`,style:{width:R+"%"}})})]},L)})}):o.jsxs("div",{className:"text-center py-8 text-gray-600",children:[o.jsx(li,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),o.jsx("p",{children:"Aucune mission enregistre"})]})]}),A&&u.length>0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 overflow-x-auto",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Interventions par Utilisateur"}),o.jsxs("table",{className:"w-full text-sm text-gray-700",children:[o.jsx("thead",{className:"bg-gray-100 border-b-2 border-gray-300",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-bold text-gray-800",children:"Utilisateur"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Nombre d'Interventions"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Temps Total (heures)"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Temps Moyen"})]})}),o.jsx("tbody",{children:u.map((C,L)=>{const G=C.interventions>0?(C.tempsTotalHeures/C.interventions).toFixed(1):0;return o.jsxs("tr",{className:L%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"px-4 py-4 font-medium text-gray-900",children:C.nom}),o.jsx("td",{className:"px-4 py-4 text-center",children:o.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold",children:C.interventions})}),o.jsx("td",{className:"px-4 py-4 text-center",children:o.jsxs("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold",children:[C.tempsTotalHeures.toFixed(1),"h"]})}),o.jsxs("td",{className:"px-4 py-4 text-center text-gray-600",children:[G,"h/intervention"]})]},L)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Xn,{className:"text-blue-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Ajouter Prospect"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Crer un nouveau prospect"}),o.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Nouveau Prospect"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(rn,{className:"text-green-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Statistiques"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Voir tous les rapports"}),o.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Statistiques"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Yr,{className:"text-purple-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Paiements"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Grer les paiements"}),o.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Paiements"})]})]})]})]})},Lt=({isOpen:e,onClose:t,title:r,children:n,size:i="md"})=>{if(N.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const a={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),o.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:o.jsxs("div",{className:`relative bg-white rounded-xl shadow-2xl w-full ${a[i]} transform transition-all`,onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Tn,{size:24})})]}),o.jsx("div",{className:"p-6",children:n})]})})]})},Ae=({children:e,variant:t="primary",size:r="md",icon:n,onClick:i,disabled:a=!1,type:s="button",className:l="",title:c=""})=>{const u="inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-colors duration-200",f={primary:a?"bg-gray-300 text-gray-500":"bg-primary hover:bg-primary-dark text-white",secondary:a?"bg-gray-300 text-gray-500":"bg-secondary hover:bg-secondary-dark text-white",success:a?"bg-gray-300 text-gray-500":"bg-success hover:bg-green-600 text-white",danger:a?"bg-gray-300 text-gray-500":"bg-danger hover:bg-red-600 text-white",warning:a?"bg-gray-300 text-gray-500":"bg-warning hover:bg-orange-600 text-white",outline:a?"border-2 border-gray-300 text-gray-400":"border-2 border-primary text-primary hover:bg-primary hover:text-white",ghost:a?"text-gray-300":"text-gray-600 hover:bg-gray-100"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},h=a?"cursor-not-allowed":"";return o.jsxs("button",{type:s,onClick:i,disabled:a,title:c,className:`${u} ${f[t]} ${d[r]} ${h} ${l}`,children:[n&&o.jsx(n,{size:r==="sm"?16:r==="lg"?24:20}),e]})},Gs=({value:e,onChange:t,placeholder:r="Rechercher..."})=>o.jsxs("div",{className:"relative",children:[o.jsx(ev,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:e,onChange:n=>t(n.target.value),placeholder:r,className:"input-field pl-10"})]}),Ue={async canCreate(e){return Gt.canManageUsers(e)},async canUpdate(e,t){if(!Gt.canManageUsers(e))return!1;if((e==null?void 0:e.role)==="admin")try{const r=await this.getById(t);if((r==null?void 0:r.role)==="super_admin")return!1}catch(r){return console.error("Erreur vrification permission update:",r),!1}return!0},async canDelete(e,t){if(!Gt.canManageUsers(e))return!1;try{const r=await this.getById(t);if((r==null?void 0:r.role)==="super_admin")return(e==null?void 0:e.role)==="super_admin";const{count:n}=await K.from(ae.PROSPECTS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(n>0)return!1;const{count:i}=await K.from(ae.INSTALLATIONS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(i>0)return!1;const{count:a}=await K.from(ae.PAIEMENTS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(a>0)return!1;const{count:s}=await K.from(ae.INTERVENTIONS).select("id",{count:"exact",head:!0}).eq("created_by",t);return!(s>0)}catch(r){return console.error("Erreur vrification permission delete:",r),!1}},async getAll(){try{const{data:e,error:t}=await K.from(ae.USERS).select("*").order("nom",{ascending:!0});if(t)throw t;return e}catch(e){throw console.error("Erreur rcupration utilisateurs:",e),e}},async getById(e){try{const{data:t,error:r}=await K.from(ae.USERS).select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration utilisateur:",t),t}},async getByRole(e){try{const{data:t,error:r}=await K.from(ae.USERS).select("*").eq("role",e).order("nom",{ascending:!0});if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration utilisateurs par rle:",t),t}},async getCommerciaux(){return this.getByRole("commercial")},async getTechniciens(){return this.getByRole("technicien")},async create(e,t){var r,n,i;try{if(!await this.canCreate(t)){const d=new Error("Vous n'avez pas la permission de crer des utilisateurs");throw d.code="PERMISSION_DENIED",d}const{data:a,error:s}=await K.from(ae.USERS).select("id, email").ilike("email",e.email);if(a&&a.length>0){const d=new Error(`Un utilisateur avec l'email ${e.email} existe dj`);throw d.code="DUPLICATE_EMAIL",d}const l=Object.values(Qx),c=(r=e.role)==null?void 0:r.trim().toLowerCase();if(!c||!l.includes(c)){const d=new Error(`Rle invalide: "${e.role}". Rles valides: ${l.join(", ")}`);throw d.code="INVALID_ROLE",d}e.role=c;let u=null,f=null;try{console.log(` Cration d'utilisateur locale avec email: ${e.email}`);const{data:d,error:h}=await K.rpc("create_user_local",{p_email:e.email,p_password:e.password,p_nom:e.nom,p_role:e.role,p_pages_visibles:Array.isArray(e.pages_visibles)?e.pages_visibles:[]});if(h){if(console.error(" Erreur cration authentification locale:",h),(n=h.message)!=null&&n.includes("duplicate")||(i=h.message)!=null&&i.includes("existe")){const p=new Error(`Un utilisateur avec l'email ${e.email} existe dj`);throw p.code="DUPLICATE_EMAIL",p}throw h}if(d&&d.length>0){const p=d[0];if(u=p.user_id,f={id:p.user_id,email:p.email,nom:p.nom,role:p.role,pages_visibles:Array.isArray(e.pages_visibles)?e.pages_visibles:[]},console.log(" Utilisateur cr avec authentification locale:",{userId:u,email:e.email,nom:e.nom,role:e.role}),u)try{const b={};if(["can_create_prospects","can_edit_prospects","can_delete_prospects","can_create_clients","can_edit_clients","can_delete_clients","can_create_installations","can_edit_installations","can_delete_installations","can_create_abonnements","can_edit_abonnements","can_delete_abonnements","can_create_paiements","can_edit_paiements","can_delete_paiements","can_create_support","can_edit_support","can_delete_support","can_create_missions","can_edit_missions","can_delete_missions","can_close_missions","can_validate_missions","can_create_alertes","can_edit_alertes","can_delete_alertes","can_create_applications","can_edit_applications","can_delete_applications"].forEach(m=>{e.hasOwnProperty(m)&&(e[m]===!0||e[m]===!1)&&(b[m]=e[m])}),Object.keys(b).length>0){const{error:m}=await K.from(ae.USERS).update(b).eq("id",u);m?console.error("Erreur sauvegarde permissions:",m):console.log(" Permissions sauvegardes:",b)}}catch(b){console.error("Erreur lors de la sauvegarde des permissions:",b)}return f}else throw new Error("Impossible de crer l'utilisateur - pas de rponse du serveur")}catch(d){throw console.error(" Erreur cration utilisateur:",d),d}}catch(a){throw console.error(" Erreur cration utilisateur:",a),a}},async update(e,t,r){try{if(!await this.canUpdate(r,e)){const u=new Error("Vous n'avez pas la permission de modifier cet utilisateur");throw u.code="PERMISSION_DENIED",u}const i={};if(t.nom&&(i.nom=t.nom),t.email&&(i.email=t.email),t.role){const u=t.role.trim().toLowerCase(),f=Object.values(Qx);if(!f.includes(u)){const d=new Error(`Rle invalide: "${t.role}". Rles valides: ${f.join(", ")}`);throw d.code="INVALID_ROLE",d}i.role=u}t.pages_visibles&&(Array.isArray(t.pages_visibles)?i.pages_visibles=t.pages_visibles:typeof t.pages_visibles=="object"&&(i.pages_visibles=Object.keys(t.pages_visibles).filter(u=>t.pages_visibles[u]===!0)));const a=["can_create_prospects","can_edit_prospects","can_delete_prospects","can_create_clients","can_edit_clients","can_delete_clients","can_create_installations","can_edit_installations","can_delete_installations","can_create_abonnements","can_edit_abonnements","can_delete_abonnements","can_create_paiements","can_edit_paiements","can_delete_paiements","can_create_support","can_edit_support","can_delete_support","can_create_missions","can_edit_missions","can_delete_missions","can_close_missions","can_validate_missions","can_create_alertes","can_edit_alertes","can_delete_alertes","can_create_applications","can_edit_applications","can_delete_applications"];let s=0;a.forEach(u=>{t.hasOwnProperty(u)&&(t[u]===!0||t[u]===!1)&&(i[u]=t[u],s++)}),s>0&&console.log(` ${s} permission(s) sera(ont) mise(s)  jour`),console.log("dataToUpdate final:",JSON.stringify(i,null,2));const{data:l,error:c}=await K.from(ae.USERS).update(i).eq("id",e).select().single();if(c)throw console.error("Erreur dtaille Supabase:",c),console.error("Donnes envoyes:",i),c;return l}catch(n){throw console.error("Erreur mise  jour utilisateur:",n),n}},async delete(e,t){try{const r=await this.getUserCreatedPieces(e);if(r.hasCreatedPieces){const s=new Error(` Impossible de supprimer cet utilisateur.

Cet utilisateur a cr les pices suivantes:

${r.details.join(`
`)}

Un utilisateur qui a cr au moins une pice ne peut pas tre supprim.
Contactez un administrateur.`);throw s.code="USER_CREATED_PIECES",s.details=r.details,s}if(!await this.canDelete(t,e)){const s=new Error("Vous n'avez pas la permission de supprimer cet utilisateur");throw s.code="PERMISSION_DENIED",s}const i=await this.checkUserReferences(e);if(i.hasReferences){const s=new Error(` Impossible de supprimer cet utilisateur.

L'utilisateur est li :
${i.details.join(`
`)}

Supprimez d'abord ces enregistrements ou contactez un administrateur.`);throw s.code="USER_HAS_REFERENCES",s.details=i.details,s}const{error:a}=await K.from(ae.USERS).delete().eq("id",e);if(a)throw console.error("Erreur suppression table users:",a),a;try{console.log(" Authentification locale supprime (cascade FK)")}catch{console.warn("Note: Authentification locale dj supprime ou inexistante")}return console.log(" Utilisateur supprim avec succs (BDD + authentification locale)"),!0}catch(r){throw console.error("Erreur suppression utilisateur:",r),r}},async hasCreatePermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_create_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission create ${t}:`,r),!1}},async hasEditPermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_edit_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission edit ${t}:`,r),!1}},async hasDeletePermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_delete_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission delete ${t}:`,r),!1}},async hasClosePermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_close_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission close ${t}:`,r),!1}},async getUserCreatedPieces(e){try{const t=[];let r=!1;const{data:n,error:i}=await K.from(ae.PROSPECTS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!i&&(n==null?void 0:n.length)>0&&(r=!0,t.push(` ${n.length} prospect(s) cr(s)`));const{data:a,error:s}=await K.from(ae.INSTALLATIONS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!s&&(a==null?void 0:a.length)>0&&(r=!0,t.push(` ${a.length} installation(s) cre(s)`));const{data:l,error:c}=await K.from(ae.PAIEMENTS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!c&&(l==null?void 0:l.length)>0&&(r=!0,t.push(` ${l.length} paiement(s) cr(s)`));const{data:u,error:f}=await K.from(ae.INTERVENTIONS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);return!f&&(u==null?void 0:u.length)>0&&(r=!0,t.push(` ${u.length} intervention(s) cre(s)`)),{hasCreatedPieces:r,details:t}}catch(t){return console.error("Erreur vrification pices cres:",t),{hasCreatedPieces:!1,details:[]}}},async checkUserReferences(e){try{const t=[];let r=!1;const{data:n,error:i}=await K.from(ae.INTERVENTIONS).select("id",{count:"exact",head:!1}).eq("technicien_id",e).limit(5);return!i&&(n==null?void 0:n.length)>0&&(r=!0,t.push(` ${n.length} intervention(s) assigne(s)`)),{hasReferences:r,details:t}}catch(t){return console.error("Erreur vrification rfrences utilisateur:",t),{hasReferences:!1,details:[]}}}},o0=({onSearchChange:e,onDateStartChange:t,onDateEndChange:r,onCreatorChange:n,searchValue:i="",dateStart:a="",dateEnd:s="",creatorId:l=""})=>{const{profile:c}=Nt(),[u,f]=N.useState([]),[d,h]=N.useState(!1),[p,b]=N.useState(l);(c==null?void 0:c.role)==="admin"||(c==null||c.role),N.useEffect(()=>{v()},[]),N.useEffect(()=>{b(l)},[l]);const v=async()=>{try{h(!0);const x=await Ue.getAll();f(x||[])}catch(x){console.error("Erreur chargement utilisateurs:",x),f([])}finally{h(!1)}},m=()=>{e(""),t(""),r(""),n("")},y=i||a||s||l;return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(ev,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Rechercher...",value:i,onChange:x=>e(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Yr,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"date",value:a,onChange:x=>t(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Yr,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"date",value:s,onChange:x=>r(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(NE,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsxs("select",{value:p||"",onChange:x=>{const g=x.target.value;console.log(` Slection crateur dans FilterBar: ${g}`),b(g),n(g)},disabled:d||u.length===0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",title:u.length===0?`Chargement des utilisateurs (${u.length})`:"",children:[o.jsx("option",{value:"",children:d?"Chargement...":`Tous les crateurs (${u.length})`}),u.map(x=>o.jsx("option",{value:x.id,children:x.nom||x.email},x.id))]})]})]}),y&&o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsxs("button",{onClick:m,className:"inline-flex items-center gap-2 px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded transition-colors",children:[o.jsx(Tn,{size:16}),"Effacer les filtres"]})})]})},lc=({data:e=[],columns:t=[],actions:r=[],loading:n=!1,emptyMessage:i="Aucune donne trouve",onAdd:a=null,addButtonLabel:s="Ajouter",title:l="Tableau de Donnes"})=>n?o.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:o.jsx("p",{className:"text-gray-600",children:"Chargement..."})}):e.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[o.jsx("p",{className:"text-gray-600",children:i}),a&&o.jsxs(Ae,{onClick:a,className:"mt-4 bg-primary hover:bg-primary-dark text-white flex items-center gap-2 mx-auto",children:[o.jsx(vi,{size:18}),s]})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[t.map(c=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",style:{width:c.width||"auto"},children:c.label},c.key)),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map((c,u)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.map(f=>o.jsx("td",{className:`px-6 py-4 text-sm ${f.className||"text-gray-600"}`,children:f.render?f.render(c):String(c[f.key]||"-")},f.key)),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:r.map(f=>{if(f.condition&&!f.condition(c))return null;const d=typeof f.disabled=="function"?f.disabled(c):f.disabled||!1,h=typeof f.title=="function"?f.title(c):f.title||f.label,p=typeof f.className=="function"?f.className(c):f.className||"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2";return o.jsx(Ae,{onClick:()=>f.onClick(c),disabled:d,className:p,title:h,children:f.icon?f.icon:f.label},f.key)})})})]},c.id||u))})]})}),e.length===0&&o.jsx("div",{className:"px-6 py-12 text-center",children:o.jsx("p",{className:"text-gray-600",children:i})})]}),Je=({label:e,type:t="text",value:r,onChange:n,placeholder:i,error:a,required:s=!1,disabled:l=!1,icon:c,...u})=>o.jsxs("div",{className:"w-full",children:[e&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e,s&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("div",{className:"relative",children:[c&&o.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:o.jsx(c,{size:20})}),o.jsx("input",{type:t,value:r||"",onChange:n,placeholder:i,disabled:l,className:`
            input-field
            ${c?"pl-10":""}
            ${a?"border-red-500 focus:ring-red-500":""}
            ${l?"bg-gray-100 cursor-not-allowed":""}
          `,...u})]}),a&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a})]}),WO=[{id:"01",name:"Adrar",code:"01"},{id:"02",name:"Chlef",code:"02"},{id:"03",name:"Laghouat",code:"03"},{id:"04",name:"Oum El Bouaghi",code:"04"},{id:"05",name:"Batna",code:"05"},{id:"06",name:"Bjaa",code:"06"},{id:"07",name:"Biskra",code:"07"},{id:"08",name:"Bchar",code:"08"},{id:"09",name:"Blida",code:"09"},{id:"10",name:"Bouira",code:"10"},{id:"11",name:"Tamanrasset",code:"11"},{id:"12",name:"Tbessa",code:"12"},{id:"13",name:"Tlemcen",code:"13"},{id:"14",name:"Tiaret",code:"14"},{id:"15",name:"Tizi Ouzou",code:"15"},{id:"16",name:"Alger",code:"16"},{id:"17",name:"Djelfa",code:"17"},{id:"18",name:"Djijel",code:"18"},{id:"19",name:"Stif",code:"19"},{id:"20",name:"Sada",code:"20"},{id:"21",name:"Skikda",code:"21"},{id:"22",name:"Sidi Bel Abbs",code:"22"},{id:"23",name:"Annaba",code:"23"},{id:"24",name:"Guelma",code:"24"},{id:"25",name:"Constantine",code:"25"},{id:"26",name:"Mda",code:"26"},{id:"27",name:"Mostaganem",code:"27"},{id:"28",name:"M'Sila",code:"28"},{id:"29",name:"Mascara",code:"29"},{id:"30",name:"Ouargla",code:"30"},{id:"31",name:"Oran",code:"31"},{id:"32",name:"El Bayadh",code:"32"},{id:"33",name:"Illizi",code:"33"},{id:"34",name:"Bordj Bou Arreridj",code:"34"},{id:"35",name:"Boumerds",code:"35"},{id:"36",name:"El Tarf",code:"36"},{id:"37",name:"Tindouf",code:"37"},{id:"38",name:"Tissemsilt",code:"38"},{id:"39",name:"El Oued",code:"39"},{id:"40",name:"Khenchela",code:"40"},{id:"41",name:"Souk Ahras",code:"41"},{id:"42",name:"Tipaza",code:"42"},{id:"43",name:"Mila",code:"43"},{id:"44",name:"An Defla",code:"44"},{id:"45",name:"Nama",code:"45"},{id:"46",name:"An Tmouchent",code:"46"},{id:"47",name:"Ghardaa",code:"47"},{id:"48",name:"Relizane",code:"48"},{id:"49",name:"El M'Ghair",code:"49"},{id:"50",name:"El Menia",code:"50"},{id:"51",name:"Ouled Djellal",code:"51"},{id:"52",name:"El Harrach",code:"52"},{id:"53",name:"El Madania",code:"53"},{id:"54",name:"El Kseur",code:"54"},{id:"55",name:"El Mena",code:"55"},{id:"56",name:"El Oued",code:"56"},{id:"57",name:"El Tarf",code:"57"},{id:"58",name:"Tissemsilt",code:"58"}],nte=e=>{const t=WO.find(r=>r.code===e);return t?t.name:e},ite=WO.map(e=>({value:e.code,label:`${e.code} - ${e.name}`})),ate=({prospect:e,onSubmit:t,onCancel:r})=>{const{user:n}=Nt(),[i,a]=N.useState({raison_sociale:"",contact:"",secteur:"",telephone:"",email:"",wilaya:"",commercial_assigned:""}),[s,l]=N.useState({}),[c,u]=N.useState(!1);N.useEffect(()=>{a(e?{raison_sociale:e.raison_sociale||"",contact:e.contact||"",secteur:e.secteur||"",telephone:e.telephone||"",email:e.email||"",wilaya:e.wilaya||"",commercial_assigned:e.commercial_assigned||(n==null?void 0:n.nom)||(n==null?void 0:n.email)||""}:{raison_sociale:"",contact:"",secteur:"",telephone:"",email:"",wilaya:"",commercial_assigned:(n==null?void 0:n.nom)||(n==null?void 0:n.email)||""}),l({})},[e,n]);const f=(h,p)=>{a(b=>({...b,[h]:p})),s[h]&&l(b=>({...b,[h]:""}))},d=async h=>{var b,v,m,y,x,g;h.preventDefault();const p={};if((b=i.raison_sociale)!=null&&b.trim()||(p.raison_sociale="Raison sociale requise"),(v=i.contact)!=null&&v.trim()||(p.contact="Contact requis"),(m=i.secteur)!=null&&m.trim()||(p.secteur="Secteur requis"),(y=i.telephone)!=null&&y.trim()||(p.telephone="Tlphone requis"),(x=i.email)!=null&&x.trim()||(p.email="Email requis"),(g=i.wilaya)!=null&&g.trim()||(p.wilaya="Wilaya requise"),Object.keys(p).length>0){l(p);return}if(!c)try{u(!0),await t(i)}finally{u(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsx(Je,{label:"Raison Sociale",type:"text",value:i.raison_sociale,onChange:h=>f("raison_sociale",h.target.value),placeholder:"Nom de l'entreprise",error:s.raison_sociale,required:!0,disabled:c}),o.jsx(Je,{label:"Contact",type:"text",value:i.contact,onChange:h=>f("contact",h.target.value),placeholder:"Nom du contact",error:s.contact,required:!0,disabled:c}),o.jsx(Je,{label:"Tlphone",type:"tel",value:i.telephone,onChange:h=>f("telephone",h.target.value),placeholder:"+213 XXX XXX XXX",error:s.telephone,required:!0,disabled:c}),o.jsx(Je,{label:"Email",type:"email",value:i.email,onChange:h=>f("email",h.target.value),placeholder:"email@example.com",error:s.email,required:!0,disabled:c}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Secteur ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:i.secteur,onChange:h=>f("secteur",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",disabled:c,required:!0,children:[o.jsx("option",{value:"",children:"Slectionner un secteur"}),o.jsx("option",{value:"GROSSISTE PHARM",children:"GROSSISTE PHARM"}),o.jsx("option",{value:"GROSSISTE PARA",children:"GROSSISTE PARA"}),o.jsx("option",{value:"PARA SUPER GROS",children:"PARA SUPER GROS"}),o.jsx("option",{value:"LABO PROD",children:"LABO PROD"}),o.jsx("option",{value:"AUTRE",children:"AUTRE"})]}),s.secteur&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.secteur})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" Wilaya ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:i.wilaya,onChange:h=>f("wilaya",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",disabled:c,required:!0,children:[o.jsx("option",{value:"",children:"Slectionner une wilaya"}),ite.map(h=>o.jsx("option",{value:h.value,children:h.label},h.value))]}),s.wilaya&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.wilaya}),o.jsx("p",{className:"text-xs text-blue-600",children:"L'auto-remplissage dans les missions sera bas sur cette wilaya"})]}),o.jsx(Je,{label:"Commercial Assign",type:"text",value:i.commercial_assigned,disabled:!0,placeholder:"Assign automatiquement"}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{type:"button",variant:"ghost",onClick:r,disabled:c,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:c,children:c?"Cration en cours...":e?"Modifier":"Crer"})]})]})},HO=({prospectId:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(null),[a,s]=N.useState(!0);N.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{console.log(" Chargement historique pour prospect/client:",e);const u=await Ct.getHistorique(e);console.log(" Historique rcupr:",u);const f=await jr.getByClient(e);console.log(" Installations:",f);let d=null;f&&f.length>0&&(d=f.reduce((p,b)=>new Date(b.date_installation)<new Date(p.date_installation)?b:p)),i(d);let h=u;d&&console.log(" Premire installation trouve:",d.date_installation),console.log(" Historique affich:",h),r(h)}catch(u){console.error(" Erreur chargement historique:",u),r([])}finally{s(!1)}},c=u=>({appel:jm,email:Qy,rdv:Yr,demo:cu,offre_envoyee:cu,suivi:jm,visite:Yr,creation:Nr,modification:Mn,conversion:$h,installation:$h,abonnement_acquisition:hl,abonnement_auto_renew:Zd})[u]||cu;return a?o.jsx("div",{className:"text-center py-8",children:"Chargement..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[t.length===0&&!n&&o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun historique disponible"}),t.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:" Phase PROSPECT - Actions de Suivi"}),t.map((u,f)=>{const d=c(u.action);return o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white",children:o.jsx(d,{size:20})}),f<t.length-1||n?o.jsx("div",{className:"w-0.5 h-12 bg-gray-200 mt-2"}):null]}),o.jsx("div",{className:"flex-1 pb-4",children:o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:u.action.replace(/_/g," ").toUpperCase()}),o.jsx("span",{className:"text-sm text-gray-500",children:EE(u.created_at)})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-2",children:u.description||u.details}),u.action==="abonnement_auto_renew"&&u.details&&o.jsxs("div",{className:"text-sm text-gray-500 mt-2 space-y-1",children:[u.details.date_debut&&o.jsxs("p",{children:[" Du ",u.details.date_debut," au ",u.details.date_fin]}),u.details.montant&&o.jsxs("p",{children:[" Montant: ",u.details.montant," DA"]})]})]})})]},u.id||`history-${f}`)})]}),n&&o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:o.jsx($h,{size:20})})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:" CONVERSION - PREMIRE INSTALLATION"}),o.jsx("span",{className:"text-sm text-gray-600 font-bold",children:lr(n.date_installation)})]}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Application:"})," ",n.application_installee]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Montant:"})," ",o.jsxs("span",{className:"font-bold text-green-600",children:[(n.montant||0).toLocaleString("fr-FR")," DA"]})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Statut:"})," ",o.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold",children:"PROSPECT  ACTIF"})]})]})]})})]}),t.length===0&&n&&o.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200 text-sm text-gray-700",children:" Aucune action de suivi enregistre avant la conversion en client actif."})]}),(t.length>0||n)&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" Rsum Phase Prospect"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Actions de Suivi"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Dure Phase Prospect"}),n?o.jsx("p",{className:"text-2xl font-bold text-green-600",children:(()=>{const u=t.length>0?new Date(t[t.length-1].created_at):new Date(n.date_installation),f=new Date(n.date_installation),d=Math.floor((f-u)/(1e3*60*60*24));return d>0?`${d}j`:"< 1j"})()}):o.jsx("p",{className:"text-lg font-bold text-gray-600",children:"En cours"})]}),n&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"col-span-2 pt-2 border-t border-gray-300",children:[o.jsx("p",{className:"text-gray-600 mb-1",children:" Date de Conversion"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:lr(n.date_installation)})]})})]})]})]})},nt=({label:e,value:t,onChange:r,options:n=[],error:i,required:a=!1,disabled:s=!1,placeholder:l="Slectionner...",...c})=>o.jsxs("div",{className:"w-full",children:[e&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e,a&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("select",{value:t||"",onChange:r,disabled:s,className:`
          input-field
          ${i?"border-red-500 focus:ring-red-500":""}
          ${s?"bg-gray-100 cursor-not-allowed":""}
        `,...c,children:[o.jsx("option",{value:"",children:l}),n.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))]}),i&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]}),ste=({prospect:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({type_action:"appel",date_action:new Date().toISOString().split("T")[0],description:"",details:""}),[a,s]=N.useState({}),[l,c]=N.useState(!1),u=[{value:"appel",label:"Appel Tlphonique"},{value:"email",label:"Email"},{value:"rdv",label:"Rendez-vous"},{value:"demo",label:"Dmonstration"},{value:"offre_envoyee",label:"Offre Envoye"},{value:"suivi",label:"Suivi"},{value:"visite",label:"Visite"}],f=(h,p)=>{i(b=>({...b,[h]:p})),a[h]&&s(b=>({...b,[h]:""}))},d=async h=>{h.preventDefault();const p={};if(n.type_action||(p.type_action="Type d'action requis"),n.date_action||(p.date_action="Date requise"),n.description.trim()||(p.description="Description requise"),Object.keys(p).length>0){s(p);return}try{c(!0),await t(n)}finally{c(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Prospect : ",o.jsx("span",{className:"font-bold",children:e.raison_sociale})]}),o.jsx("p",{className:"text-sm text-blue-700",children:e.contact})]}),o.jsx(nt,{label:"Type d'Action",value:n.type_action,onChange:h=>f("type_action",h.target.value),options:u,error:a.type_action,required:!0,disabled:l}),o.jsx(Je,{label:"Date de l'Action",type:"date",value:n.date_action,onChange:h=>f("date_action",h.target.value),error:a.date_action,required:!0,disabled:l}),o.jsx(Je,{label:"Rsum de l'Action",type:"textarea",rows:"3",value:n.description,onChange:h=>f("description",h.target.value),placeholder:"Dcrivez brivement l'action effectue...",error:a.description,required:!0,disabled:l}),o.jsx(Je,{label:"Dtails (Optionnel)",type:"textarea",rows:"4",value:n.details,onChange:h=>f("details",h.target.value),placeholder:"Ajoutez des dtails supplmentaires si ncessaire...",disabled:l}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:l,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:l,children:l?"Enregistrement...":"Enregistrer l'Action"})]})]})},ote=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(""),[h,p]=N.useState(""),[b,v]=N.useState(""),[m,y]=N.useState(!1),[x,g]=N.useState(!1),[S,w]=N.useState(!1),[_,j]=N.useState(!1),[E,A]=N.useState(null),[P,O]=N.useState("create"),[T,M]=N.useState("global"),[B,C]=N.useState(0),[L,G]=N.useState(!1),[R,D]=N.useState(!1),[W,Y]=N.useState(!1),[F,V]=N.useState(!1),[U,ge]=N.useState(!1),{addNotification:le}=rr(),{user:Se,profile:fe}=Nt();N.useEffect(()=>{Q()},[]),N.useEffect(()=>{Z()},[Se==null?void 0:Se.id,fe==null?void 0:fe.role]),N.useEffect(()=>{ee()},[e,s,c,f,h,b]);const Q=async()=>{try{a(!0);const q=await Ct.getAll();t(q)}catch{le({type:"error",message:"Erreur lors du chargement des prospects"})}finally{a(!1)}},Z=async()=>{try{if(ge(!0),Se!=null&&Se.id&&fe){const q=(fe==null?void 0:fe.role)==="admin"||(fe==null?void 0:fe.role)==="super_admin"||await Ue.hasCreatePermission(Se.id,"prospects"),oe=(fe==null?void 0:fe.role)==="admin"||(fe==null?void 0:fe.role)==="super_admin"||await Ue.hasEditPermission(Se.id,"prospects"),$=(fe==null?void 0:fe.role)==="admin"||(fe==null?void 0:fe.role)==="super_admin"||await Ue.hasDeletePermission(Se.id,"prospects");D(q),Y(oe),V($)}}catch(q){console.error("Erreur chargement permissions:",q)}finally{ge(!1)}},ee=()=>{let q=[...e];if(c!=="all"&&(q=q.filter(oe=>oe.statut===c)),s&&(q=q.filter(oe=>{var $,J,I,se;return(($=oe.raison_sociale)==null?void 0:$.toLowerCase().includes(s.toLowerCase()))||((J=oe.contact)==null?void 0:J.toLowerCase().includes(s.toLowerCase()))||((I=oe.telephone)==null?void 0:I.includes(s))||((se=oe.email)==null?void 0:se.toLowerCase().includes(s.toLowerCase()))})),f){const oe=new Date(f);q=q.filter($=>new Date($.created_at)>=oe)}if(h){const oe=new Date(h);oe.setHours(23,59,59,999),q=q.filter($=>new Date($.created_at)<=oe)}b&&((fe==null?void 0:fe.role)==="admin"||(fe==null?void 0:fe.role)==="super_admin")&&(q=q.filter(oe=>oe.created_by===b)),n(q)},k=()=>{R&&(A(null),O("create"),y(!0))},ie=q=>{W&&(A(q),O("edit"),y(!0))},ue=async q=>{var $;const oe=(q==null?void 0:q.id)||q;if(F&&window.confirm("tes-vous sr de vouloir supprimer ce prospect ?"))try{await Ct.delete(oe),le({type:"success",message:"Prospect supprim avec succs"}),Q()}catch(J){console.error("Erreur suppression prospect:",J),J.status===409||($=J.message)!=null&&$.includes("foreign key")?le({type:"error",message:"Impossible de supprimer ce prospect car il est devenu client actif avec des enregistrements lis (installations, abonnements, paiements, etc.)"}):le({type:"error",message:"Erreur lors de la suppression du prospect"})}},ce=async q=>{try{if(P==="create"){const oe={...q,created_by:(Se==null?void 0:Se.id)||null};await Ct.create(oe),le({type:"success",message:"Prospect cr avec succs"})}else await Ct.update(E.id,q),le({type:"success",message:"Prospect modifi avec succs"});y(!1),Q()}catch{le({type:"error",message:"Erreur lors de l'enregistrement"})}},me=async q=>{try{if(E.statut==="actif"){le({type:"warning",message:"Ce client est actif. Les actions de suivi ne s'enregistrent plus aprs la conversion."}),w(!1);return}await Ct.addHistorique(E.id,q.type_action,q.description,{date_action:q.date_action,details_supplementaires:q.details}),le({type:"success",message:"Action enregistre avec succs"}),w(!1),Q()}catch{le({type:"error",message:"Erreur lors de l'enregistrement de l'action"})}},Ne=async()=>{try{if(G(!0),r.length===0){le({type:"warning",message:"Aucun prospect  analyser"});return}j(!0),le({type:"success",message:"Analyse complte!"})}catch(q){le({type:"error",message:`Erreur: ${q.message}`})}finally{G(!1)}},re={total:e.length,prospects:e.filter(q=>q.statut==="prospect").length,actifs:e.filter(q=>q.statut==="actif").length,inactifs:e.filter(q=>q.statut==="inactif").length,tauxConversion:e.length>0?(e.filter(q=>q.statut==="actif").length/e.length*100).toFixed(0):0};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Prospects"}),o.jsx("h3",{className:"text-3xl font-bold",children:re.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Convertis"}),o.jsx("h3",{className:"text-3xl font-bold",children:re.actifs})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En attente"}),o.jsx("h3",{className:"text-3xl font-bold",children:re.prospects})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Taux Conversion"}),o.jsxs("h3",{className:"text-3xl font-bold",children:[re.tauxConversion,"%"]})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:vi,onClick:k,disabled:!R,className:"w-full h-full",title:R?"Crer un nouveau prospect":"Permission refuse: Crer un prospect",children:"Nouveau Prospect"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(o0,{onSearchChange:l,onDateStartChange:d,onDateEndChange:p,onCreatorChange:v,searchValue:s,dateStart:f,dateEnd:h,creatorId:b}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Gs,{value:s,onChange:l,placeholder:"Rechercher par nom, contact, tlphone..."})}),o.jsxs("button",{onClick:Ne,disabled:L||r.length===0,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-400 disabled:to-gray-400 text-white rounded-lg font-medium transition-all flex items-center gap-2",children:[o.jsx(hl,{size:18}),L?"Analyse...":"ANALYSE GLOBALE"]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap mt-4",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("prospect"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="prospect"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Prospects"}),o.jsx("button",{onClick:()=>u("actif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="actif"?"bg-success text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Actifs"}),o.jsx("button",{onClick:()=>u("inactif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="inactif"?"bg-danger text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Inactifs"})]})]})]}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun prospect trouv"})}):o.jsx(lc,{data:r,columns:[{key:"raison_sociale",label:"Prospect",width:"200px",render:q=>o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:q.raison_sociale}),o.jsx("p",{className:"text-xs text-gray-500",children:q.email||"N/A"})]})},{key:"contact",label:"Contact",width:"150px",render:q=>o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-900",children:q.contact||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:q.telephone||"N/A"})]})},{key:"secteur",label:"Secteur",width:"120px",render:q=>o.jsx("span",{children:q.secteur||"N/A"})},{key:"statut",label:"Statut",width:"100px",render:q=>{var oe;return o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${q.statut==="actif"?"bg-green-100 text-green-800":q.statut==="prospect"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:((oe=q.statut)==null?void 0:oe.toUpperCase())||"N/A"})}},{key:"wilaya",label:"Wilaya",width:"120px",render:q=>o.jsx("span",{children:q.wilaya||"N/A"})}],actions:[{key:"view",label:"Dtails",icon:o.jsx(dl,{size:18}),onClick:q=>{A(q),g(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"action",label:"Afficher",icon:o.jsx(hl,{size:18}),onClick:q=>{!W||q.statut==="actif"||(A(q),w(!0))},disabled:q=>!W||q.statut==="actif",title:q=>q.statut==="actif"?"Actions dsactives: Ce prospect est devenu client actif":W?"Ajouter une action":"Permission refuse: Ajouter une action",className:q=>!W||q.statut==="actif"?"bg-gray-400 cursor-not-allowed text-white px-3 py-1":"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(Mn,{size:18}),onClick:ie,disabled:!W,title:W?"Modifier ce prospect":"Permission refuse: Modifier",className:W?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(Er,{size:18}),onClick:ue,disabled:!F,title:F?"Supprimer ce prospect":"Permission refuse: Supprimer",className:F?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:i,emptyMessage:"Aucun prospect trouv"}),o.jsx(Lt,{isOpen:m,onClose:()=>y(!1),title:P==="create"?"Nouveau Prospect":"Modifier Prospect",children:o.jsx(ate,{prospect:E,onSubmit:ce,onCancel:()=>y(!1)})}),o.jsx(Lt,{isOpen:x,onClose:()=>g(!1),title:"Historique des Actions",size:"lg",children:o.jsx(HO,{prospectId:E==null?void 0:E.id})}),o.jsx(Lt,{isOpen:S,onClose:()=>w(!1),title:"Enregistrer une Action de Suivi",children:E&&o.jsx(ste,{prospect:E,onSubmit:me,onCancel:()=>w(!1)})}),o.jsx(Lt,{isOpen:_,onClose:()=>j(!1),title:" Analyse IA - Prospects",size:"lg",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[o.jsx("button",{onClick:()=>{M("global"),C(0)},className:`px-4 py-2 font-medium transition-colors ${T==="global"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,children:" Analyse Globale"}),o.jsxs("button",{onClick:()=>M("prospects"),className:`px-4 py-2 font-medium transition-colors ${T==="prospects"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,children:[" Par Prospect (",r.length,")"]})]}),T==="global"&&o.jsxs("div",{className:"space-y-6 max-h-96 overflow-y-auto p-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[o.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Total"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900",children:r.length})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[o.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Conversion"}),o.jsxs("p",{className:"text-3xl font-bold text-green-900",children:[(r.filter(q=>q.statut==="actif").length/r.length*100).toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"Rpartition par Statut"}),o.jsx("div",{className:"space-y-2",children:[{label:"Actifs",count:r.filter(q=>q.statut==="actif").length,color:"bg-green-500"},{label:"Prospects",count:r.filter(q=>q.statut==="prospect").length,color:"bg-blue-500"},{label:"Inactifs",count:r.filter(q=>q.statut==="inactif").length,color:"bg-red-500"}].map(q=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:q.label}),o.jsx("span",{className:"text-sm font-bold text-gray-900",children:q.count})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`${q.color} h-2 rounded-full`,style:{width:`${q.count/r.length*100}%`}})})]},q.label))})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"Top Secteurs"}),o.jsx("div",{className:"space-y-2",children:(()=>{const q={};return r.forEach(oe=>{const $=oe.secteur||"Non spcifi";q[$]=(q[$]||0)+1}),Object.entries(q).sort((oe,$)=>$[1]-oe[1]).slice(0,5).map(([oe,$])=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-700",children:oe}),o.jsx("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:$})]},oe))})()})]}),o.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" Actions Recommandes"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsxs("span",{children:["Relancer les ",r.filter(q=>q.statut==="prospect").length," prospects en attente"]})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsx("span",{children:"Planifier des appels dans les 48h"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsx("span",{children:"Mettre en place un suivi structur"})]})]})]})]}),T==="prospects"&&o.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto p-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>C(Math.max(0,B-1)),disabled:B===0,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50",children:" Prcdent"}),o.jsxs("span",{className:"text-sm font-bold text-gray-700",children:[B+1," / ",r.length]}),o.jsx("button",{onClick:()=>C(Math.min(r.length-1,B+1)),disabled:B===r.length-1,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50",children:"Suivant "})]}),(()=>{const q=r[B],oe=q.statut==="actif"?100:q.statut==="prospect"?50:25;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-6",children:[o.jsx("p",{className:"text-sm opacity-90",children:"Score de Conversion"}),o.jsxs("h2",{className:"text-4xl font-bold",children:[oe,"/100"]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" Rsum"}),o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:q.raison_sociale})," - ",q.contact," | Actions: 1 | Installations: 0"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:" Contact"}),o.jsx("p",{className:"text-sm font-bold text-blue-900",children:q.telephone})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 font-semibold",children:" Secteur"}),o.jsx("p",{className:"text-sm font-bold text-purple-900",children:q.secteur||"N/A"})]})]}),o.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[o.jsx("p",{className:"text-xs text-pink-600 font-semibold mb-1",children:" Statut"}),o.jsxs("p",{className:"text-sm font-bold",children:["Prospect:",o.jsx("span",{className:`ml-2 px-2 py-1 rounded font-bold text-white ${q.statut==="actif"?"bg-green-500":q.statut==="prospect"?"bg-blue-500":"bg-red-500"}`,children:q.statut.toUpperCase()})]})]}),o.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" Recommandations IA"}),o.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[q.statut==="prospect"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relancer dans les 48h"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Prvoir un appel commercial"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Envoyer une proposition"})]})]}),q.statut==="actif"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Maintenir le contact rgulirement"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Proposer des services additionnels"})]})]}),q.statut==="inactif"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relancer pour ractiver"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Comprendre les raisons d'inactivit"})]})]})]})]})]})})()]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>j(!1),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors font-medium",children:"Fermer"})})]})})]})},lte=({client:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState([]),[a,s]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState(null),[d,h]=N.useState(!0),[p,b]=N.useState(!1),[v,m]=N.useState(!1);N.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{h(!0);const g=await jr.getByClient(e.id),S=await Qt.getByClient(e.id);r(g||[]),i(S||[]);try{const A=(await Ct.getHistorique(e.id)||[]).filter(P=>P.action==="abonnement_auto_renew").map((P,O)=>{var M;let T="Application inconnue";if(P.description){const B=P.description.match(/pour\s+(.+?)(?:\n|$)/);T=B?B[1].trim():"Application inconnue"}return{id:`renew-${P.id}-${O}`,application:T,date:P.date||P.created_at,montant:(M=P.details)==null?void 0:M.montant,description:P.description}});c(A)}catch(E){console.warn("Renouvellements non disponibles:",E),c([])}const w=(g||[]).reduce((E,A)=>E+(A.montant||0),0),_=(S||[]).reduce((E,A)=>E+(A.montant||0),0),j=Math.max(0,w-_);f({totalInstallations:w,totalPaye:_,resteAPayer:j});try{const E=await Yn.getByClient(e.id);s(E||[])}catch(E){console.warn("Interventions non disponibles:",E),s([])}}catch(g){console.error("Erreur chargement donnes client:",g),r([]),i([]),s([]),c([]),f({totalInstallations:0,totalPaye:0,resteAPayer:0})}finally{h(!1)}};if(d)return o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Chargement..."})]});const x=n.reduce((g,S)=>g+(S.montant||0),0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-primary to-primary-dark text-white rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.raison_sociale}),o.jsxs("div",{className:"space-y-1 text-blue-100",children:[o.jsxs("p",{children:["Contact: ",e.contact]}),o.jsxs("p",{children:["Tlphone: ",e.telephone]}),e.email&&o.jsxs("p",{children:["Email: ",e.email]}),e.secteur&&o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Secteur:"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${e.secteur==="GROSSISTE PHARM"?"bg-blue-500 text-white":e.secteur==="GROSSISTE PARA"?"bg-green-500 text-white":e.secteur==="PARA SUPER GROS"?"bg-purple-500 text-white":e.secteur==="LABO PROD"?"bg-orange-500 text-white":"bg-gray-500 text-white"}`,children:e.secteur})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow",children:[o.jsx(Do,{className:"mx-auto mb-2 text-primary",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-gray-800",children:t.length}),o.jsx("p",{className:"text-sm text-gray-600",children:"Installations"})]}),o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow bg-gradient-to-br from-green-50 to-green-100",children:[o.jsx(Ra,{className:"mx-auto mb-2 text-green-600",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-green-700",children:_a(x)}),o.jsx("p",{className:"text-sm text-green-600",children:"Total Pay"})]}),o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow bg-gradient-to-br from-red-50 to-red-100",children:[o.jsx(Ra,{className:"mx-auto mb-2 text-red-600",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-red-700",children:_a((u==null?void 0:u.resteAPayer)||0)}),o.jsx("p",{className:"text-sm text-red-600",children:"Reste  Payer"})]})]}),o.jsxs("div",{className:"card border-l-4 border-blue-500 bg-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(XI,{size:20,className:"text-blue-600"})," Historique Complet du Client"]}),o.jsx("button",{onClick:()=>m(!v),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:v?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Masquer"}),o.jsx(Kn,{size:16})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir l'historique"}),o.jsx(yn,{size:16})]})})]}),v?o.jsx("div",{className:"bg-white rounded-lg p-4",children:o.jsx(HO,{prospectId:e.id})}):o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsx("p",{className:"mb-2",children:" Cet historique contient:"}),o.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2 mb-3",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Actions de suivi"})," (appels, emails, RDV, etc.)"]}),o.jsx("li",{children:o.jsx("strong",{children:"Conversion en client actif"})}),o.jsxs("li",{children:[o.jsx("strong",{children:"Installations"})," (ACQUISITION et ABONNEMENT)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Abonnements"})," (cration et renouvellements auto)"]})]}),o.jsx("p",{className:"text-xs text-gray-600",children:"Il est conserv pour traabilit et analyse du parcours commercial."})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Do,{size:20,className:"text-primary"}),"Installations"]}),t.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Do,{className:"mx-auto text-gray-300 mb-2",size:48}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune installation"})]}):o.jsx("div",{className:"space-y-3",children:t.map(g=>{const S=n.filter(j=>j.installation_id===g.id).reduce((j,E)=>j+(E.montant||0),0);Math.max(0,g.montant-S);const w=g.type&&g.type.toLowerCase()==="abonnement"?"ABONNEMENT":"ACQUISITION",_=w==="ABONNEMENT"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700";return o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:g.application_installee}),o.jsx("span",{className:`text-xs font-bold px-2 py-1 rounded ${_}`,children:w})]}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Install le ",lr(g.date_installation)]})]}),o.jsx("div",{className:"text-right",children:o.jsxs("div",{className:`rounded-lg p-2 text-center font-bold text-2xl ${Ar(g.montant,S).couleur}`,children:[Ar(g.montant,S).code,o.jsx("div",{className:"text-lg",children:Ar(g.montant,S).icon})]})})]})},`inst-${g.id}`)})})]}),l.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Zd,{size:20,className:"text-blue-600"})," Abonnements Renouvels"]}),o.jsx("div",{className:"space-y-3",children:l.map(g=>o.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:g.application}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Renouvel le ",lr(g.date)]})]}),o.jsxs("div",{className:"text-right",children:[g.montant&&o.jsx("p",{className:"font-bold text-blue-600",children:_a(g.montant)}),o.jsx("p",{className:"text-xs text-gray-500",children:"Auto-renouvellement"})]})]})},g.id))})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(Ra,{size:20,className:"text-green-500"}),"Historique Paiements"]}),n.length>0&&o.jsx("button",{onClick:()=>b(!p),className:"flex items-center gap-2 text-sm text-primary hover:text-primary-dark font-medium transition-colors",children:p?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir rsum"}),o.jsx(Kn,{size:16})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir dtails"}),o.jsx(yn,{size:16})]})})]}),n.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Ra,{className:"mx-auto text-gray-300 mb-2",size:48}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun paiement"})]}):p?o.jsx("div",{className:"space-y-3",children:n.map((g,S)=>{var E,A;let w=g.type?g.type.charAt(0).toUpperCase()+g.type.slice(1):"Paiement";g.type==="abonnement"&&((E=g.installation)==null?void 0:E.type)==="acquisition"&&(w="Abonnement via Acquisition");const _=g.type==="abonnement"?"bg-blue-50 border-blue-200":g.type==="acquisition"?"bg-green-50 border-green-200":"bg-gray-50 border-gray-200",j=g.type==="abonnement"?"":g.type==="acquisition"?"":"";return o.jsx("div",{className:`rounded-lg p-3 border ${_}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{children:j}),o.jsx("p",{className:"font-semibold text-gray-800",children:w})]}),o.jsx("p",{className:"text-sm text-gray-600 font-medium",children:((A=g.installation)==null?void 0:A.application_installee)||"Application inconnue"}),o.jsx("p",{className:"text-sm text-gray-600",children:lr(g.date_paiement)}),g.mode_paiement&&o.jsx("p",{className:"text-xs text-gray-500 capitalize",children:g.mode_paiement})]}),o.jsx("div",{className:"text-right",children:o.jsx("p",{className:"font-bold text-green-600",children:_a(g.montant)})})]})},g.id)})}):o.jsxs("div",{className:"space-y-2",children:[n.slice(0,5).map((g,S)=>{var j;let w=g.type?g.type.charAt(0).toUpperCase()+g.type.slice(1):"Paiement";g.type==="abonnement"&&((j=g.installation)==null?void 0:j.type)==="acquisition"&&(w="Abonnement via Acquisition");const _=g.type==="abonnement"?"":g.type==="acquisition"?"":"";return o.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:_}),o.jsx("p",{className:"font-medium text-gray-800",children:w})]}),o.jsx("p",{className:"text-sm text-gray-600",children:lr(g.date_paiement)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold text-green-600",children:_a(g.montant)}),g.mode_paiement&&o.jsx("p",{className:"text-xs text-gray-500 capitalize",children:g.mode_paiement})]})]},g.id)}),n.length>5&&o.jsxs("button",{onClick:()=>b(!0),className:"w-full py-2 text-sm text-primary hover:text-primary-dark font-medium",children:["Voir les ",n.length-5," autres paiements"]})]})]}),a.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(tM,{size:20,className:"text-purple-500"}),"Interventions Rcentes"]}),o.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map(g=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-gray-800 capitalize",children:g.type_intervention}),o.jsx("span",{className:g.statut==="cloturee"?"badge-success":"badge-warning",children:g.statut==="cloturee"?"Clture":"En cours"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:g.resume_probleme}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[o.jsx("span",{children:lr(g.date_intervention)}),o.jsxs("span",{children:[g.duree_minutes||"-"," min"]}),g.technicien&&o.jsxs("span",{children:["Tech: ",g.technicien.nom]})]})]},g.id)),a.length>5&&o.jsxs("p",{className:"text-center text-sm text-gray-500 pt-2",children:["+",a.length-5," autres interventions"]})]})]})]})},cte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState(!1),[f,d]=N.useState(null),{addNotification:h}=rr();N.useEffect(()=>{p()},[]),N.useEffect(()=>{b()},[e,s]);const p=async()=>{try{a(!0);const y=(await Ct.getAll()).filter(g=>g.statut==="actif"),x=await Promise.all(y.map(async g=>{try{const S=await jr.getByClient(g.id),w=await Qt.getByClient(g.id),_=(S||[]).reduce((A,P)=>A+(P.montant||0),0),j=(w||[]).reduce((A,P)=>A+(P.montant||0),0),E=Math.max(0,_-j);return{...g,montant_paye:j,reste_a_payer:E,montant_total:_}}catch(S){return console.warn(`Erreur calcul financials pour client ${g.id}:`,S),{...g,montant_paye:0,reste_a_payer:0,montant_total:0}}}));t(x)}catch{h({type:"error",message:"Erreur lors du chargement des clients"})}finally{a(!1)}},b=()=>{let m=[...e];s&&(m=m.filter(y=>{var x,g,S,w;return((x=y.raison_sociale)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))||((g=y.contact)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((S=y.telephone)==null?void 0:S.includes(s))||((w=y.email)==null?void 0:w.toLowerCase().includes(s.toLowerCase()))})),n(m)},v=m=>{d(m),u(!0)};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Clients"}),o.jsx("h3",{className:"text-4xl font-bold",children:e.length})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Actifs ce mois"}),o.jsx("h3",{className:"text-4xl font-bold",children:e.length})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Nouveaux"}),o.jsx("h3",{className:"text-4xl font-bold",children:"+5"})]})]}),o.jsx("div",{className:"card",children:o.jsx(Gs,{value:s,onChange:l,placeholder:"Rechercher un client..."})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun client trouv"})}):o.jsx(lc,{data:r,columns:[{key:"raison_sociale",label:"Client",width:"200px",render:m=>o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:m.raison_sociale}),o.jsx("p",{className:"text-xs text-gray-500",children:m.email||"N/A"})]})},{key:"contact",label:"Contact",width:"150px",render:m=>o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-900",children:m.contact||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:m.telephone||"N/A"})]})},{key:"secteur",label:"Secteur",width:"120px",render:m=>o.jsx("span",{children:m.secteur||"N/A"})},{key:"statut_paiement",label:"Statut de Paiement",width:"140px",render:m=>{const y=m.montant_total||0,x=m.montant_paye||0,g=Math.max(0,y-x);let S,w,_;return g===y||y===0?(S="Aucun paiement",w="bg-red-100 text-red-700",_=0):g>0?(S="Partiellement pay",w="bg-orange-100 text-orange-700",_=1):(S="Totalement pay",w="bg-green-100 text-green-700",_=2),o.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${w}`,children:[_," (",S,")"]})}},{key:"wilaya",label:"Wilaya",width:"100px",render:m=>o.jsx("span",{children:m.wilaya||"N/A"})},{key:"statut",label:"Statut",width:"100px",render:m=>o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"CLIENT ACTIF"})}],actions:[{key:"view",label:"Dtails",icon:o.jsx(dl,{size:18}),onClick:v,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"}],loading:i,emptyMessage:"Aucun client trouv"}),o.jsx(Lt,{isOpen:c,onClose:()=>u(!1),title:"Dtails du Client",size:"lg",children:o.jsx(lte,{client:f})})]})},So={getAll:async()=>{try{const{data:e,error:t}=await K.from("applications").select("*").order("nom",{ascending:!0});if(t)throw t;return e||[]}catch(e){throw console.error("Erreur rcupration applications:",e),e}},getById:async e=>{try{const{data:t,error:r}=await K.from("applications").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration application:",t),t}},create:async e=>{try{const t={nom:e.nom,description:e.description||"",prix_acquisition:parseFloat(e.prix_acquisition)||parseFloat(e.prix)||0,prix_abonnement:parseFloat(e.prix_abonnement)||parseFloat(e.prix)||0,prix:parseFloat(e.prix_acquisition)||parseFloat(e.prix)||0},{data:r,error:n}=await K.from("applications").insert([t]).select().single();if(n)throw n;return r}catch(t){throw console.error("Erreur cration application:",t),t}},update:async(e,t)=>{try{const r={nom:t.nom||void 0,description:t.description||void 0,prix_acquisition:t.prix_acquisition?parseFloat(t.prix_acquisition):void 0,prix_abonnement:t.prix_abonnement?parseFloat(t.prix_abonnement):void 0};Object.keys(r).forEach(a=>r[a]===void 0&&delete r[a]),r.prix_acquisition&&(r.prix=r.prix_acquisition);const{data:n,error:i}=await K.from("applications").update(r).eq("id",e).select().single();if(i)throw i;return n}catch(r){throw console.error("Erreur mise  jour application:",r),r}},delete:async e=>{try{const{error:t}=await K.from("applications").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression application:",t),t}},getStats:async()=>{try{const{data:e,error:t}=await K.from("applications").select("*");if(t)throw t;return{total:e.length,actives:e.filter(r=>r.statut==="actif").length,inactives:e.filter(r=>r.statut==="inactif").length}}catch(e){throw console.error("Erreur rcupration stats applications:",e),e}}},ute=({installation:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({client_id:"",application_installee:"",montant:"",date_installation:"",type:"acquisition",statut:"en_cours"}),[a,s]=N.useState(""),[l,c]=N.useState({}),[u,f]=N.useState([]),[d,h]=N.useState([]),[p,b]=N.useState(!1);N.useEffect(()=>{v(),m()},[]),N.useEffect(()=>{var w;if(e&&(i({client_id:e.client_id||"",application_installee:e.application_installee||"",montant:e.montant||"",date_installation:((w=e.date_installation)==null?void 0:w.split("T")[0])||"",type:e.type||"acquisition",statut:e.statut||"en_cours"}),e.application_installee&&d.length>0)){const _=d.find(j=>j.nom===e.application_installee);_&&s(_.id)}},[e]);const v=async()=>{try{const w=await Ct.getAll();f(w)}catch(w){console.error("Erreur chargement clients:",w)}},m=async()=>{try{const w=await So.getAll();h(w)}catch(w){console.error("Erreur chargement applications:",w)}},y=(w,_)=>{i(j=>({...j,[w]:_})),l[w]&&c(j=>({...j,[w]:""}))},x=w=>{const _=d.find(j=>j.id===w);if(_){const j=n.type==="abonnement"?_.prix_abonnement||_.prix_acquisition||_.prix||0:_.prix_acquisition||_.prix_abonnement||_.prix||0;i(E=>({...E,application_installee:_.nom,montant:j})),console.log(` Application slectionne: ${_.nom}, Type: ${n.type}, Prix: ${j}`)}},g=w=>{const _=n.application_installee;if(_){const j=d.find(E=>E.nom===_);if(j){const E=w==="abonnement"?j.prix_abonnement||j.prix_acquisition||j.prix||0:j.prix_acquisition||j.prix_abonnement||j.prix||0;i(A=>({...A,type:w,montant:E})),console.log(` Type chang: ${w}, Montant recalcul: ${E}`);return}}y("type",w)},S=async w=>{if(w.preventDefault(),p)return;const _={};if(n.client_id||(_.client_id="Client requis"),n.application_installee||(_.application_installee="Application requise"),n.montant||(_.montant="Montant requis"),n.date_installation||(_.date_installation="Date requise"),n.type||(_.type="Type requis"),Object.keys(_).length>0){c(_);return}try{b(!0);const E=new Date(n.date_installation).toISOString().split("T")[0],A={client_id:n.client_id,application_installee:n.application_installee,montant:parseFloat(n.montant),date_installation:E,type:n.type,statut:n.statut};await t(A)}finally{b(!1)}};return o.jsxs("form",{onSubmit:S,className:"space-y-4",children:[o.jsx(nt,{label:"Client",value:n.client_id,onChange:w=>y("client_id",w.target.value),options:[{value:"",label:"Slectionner un client..."},...u.map(w=>({value:w.id,label:`${w.raison_sociale} (${w.contact})`}))],error:l.client_id,required:!0,disabled:p}),o.jsx(nt,{label:"Application",value:a,onChange:w=>{s(w.target.value),x(w.target.value)},options:[{value:"",label:"Slectionner une application..."},...d.map(w=>{const _=w.prix_acquisition||w.prix,j=w.prix_abonnement||w.prix;return{value:w.id,label:`${w.nom} - ACQ: ${_} DA / ABO: ${j} DA`}})],disabled:p}),o.jsx(Je,{label:"Application Installe",value:n.application_installee,onChange:w=>y("application_installee",w.target.value),placeholder:"Nom de l'application",error:l.application_installee,required:!0,disabled:p}),o.jsx(Je,{label:"Montant (DA)",type:"number",step:"0.01",value:n.montant,onChange:w=>y("montant",w.target.value),placeholder:"0.00",error:l.montant,required:!0,disabled:p}),o.jsx(Je,{label:"Date d'Installation",type:"date",value:n.date_installation,onChange:w=>y("date_installation",w.target.value),error:l.date_installation,required:!0,disabled:p}),o.jsx(nt,{label:"Type",value:n.type,onChange:w=>g(w.target.value),options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:l.type,required:!0,disabled:p}),o.jsx(nt,{label:"Statut",value:n.statut,onChange:w=>y("statut",w.target.value),options:[{value:"en_cours",label:"En Cours"},{value:"terminee",label:"Termine"}],required:!0,disabled:p}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:p,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:p,children:p?"En cours...":e?"Modifier":"Crer"})]})]})},dte=({installation:e,onEdit:t,onDelete:r,onPayment:n,refreshTrigger:i})=>{var O,T;const[a,s]=N.useState(0),[l,c]=N.useState(0),[u,f]=N.useState([]),[d,h]=N.useState(!0),{profile:p,user:b}=Nt(),[v,m]=N.useState(null),[y,x]=N.useState(!1),[g,S]=N.useState(!1),[w,_]=N.useState(!1),[j,E]=N.useState(!1);N.useEffect(()=>{(async()=>{try{if(e!=null&&e.created_by&&((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")){x(!0);const B=await Ue.getById(e.created_by);m(B)}if(b!=null&&b.id&&p){E(!0);const B=await Ue.hasEditPermission(b.id,"installations"),C=await Ue.hasDeletePermission(b.id,"installations");S(B),_(C)}}catch(B){console.error("Erreur chargement donnes:",B)}finally{x(!1),E(!1)}})()},[e==null?void 0:e.created_by,p==null?void 0:p.role,b==null?void 0:b.id,p]),N.useEffect(()=>{e&&e.client_id&&e.id&&A()},[e==null?void 0:e.id,i]);const A=async()=>{try{h(!0);const B=(await Qt.getByClient(e.client_id)).filter(G=>G.installation_id===e.id);f(B);const C=B.reduce((G,R)=>G+(R.montant||0),0);c(C);const L=Math.max(0,e.montant-C);s(L)}catch(M){console.error("Erreur calcul reste  payer:",M),s(e.montant),c(0)}finally{h(!1)}},P=()=>{n&&n(e)};return o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:e.application_installee}),o.jsx("span",{className:`${lM(e.statut)} text-xs`,children:uu(e.statut)})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),disabled:!g&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!g&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,title:!g&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?"Permission refuse":"Modifier",children:!g&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?o.jsx(fi,{size:18}):o.jsx(Mn,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),disabled:!w&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!w&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:!w&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?"Permission refuse":"Supprimer",children:!w&&!((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")?o.jsx(fi,{size:18}):o.jsx(Er,{size:18})})]})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(Do,{size:16}),o.jsx("span",{className:"font-medium",children:(O=e.client)==null?void 0:O.raison_sociale})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(Yr,{size:16}),o.jsxs("span",{children:["Install le ",lr(e.date_installation)]})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:"MONTANT"}),o.jsx("p",{className:"text-2xl font-bold text-blue-700",children:"2-2"})]}),!d&&o.jsxs("div",{className:`rounded-lg p-4 text-center font-bold text-3xl ${Ar(e.montant,l).couleur}`,children:[Ar(e.montant,l).code,o.jsx("div",{className:"text-lg mt-1",children:Ar(e.montant,l).icon})]}),!d&&u.length>0&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsxs("div",{className:"text-sm text-blue-700 font-medium mb-2",children:["Paiements enregistrs (",u.length,"):"]}),o.jsx("div",{className:"space-y-2",children:u.map(M=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-blue-600",children:lr(M.date_paiement)}),o.jsx("span",{className:"font-bold text-blue-700",children:_a(M.montant)})]},M.id))})]})]}),o.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Client:"}),o.jsx("span",{className:"font-medium text-gray-800",children:(T=e.client)==null?void 0:T.contact})]}),v&&((p==null?void 0:p.role)==="admin"||(p==null?void 0:p.role)==="super_admin")&&o.jsx("div",{className:"text-xs text-gray-500",children:o.jsxs("p",{children:["Cr par: ",o.jsx("span",{className:"font-semibold text-gray-700",children:v.nom||v.email})]})}),a>0&&o.jsxs("button",{onClick:P,className:"w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[o.jsx(Ra,{size:18}),"Enregistrer un paiement"]})]})]})},fte=({installation:e,onSubmit:t,onCancel:r,isSubmitting:n=!1})=>{var y;const[i,a]=N.useState({montant:"",mode_paiement:"virement",type:"acquisition",date_paiement:new Date().toISOString().split("T")[0]}),[s,l]=N.useState({}),[c,u]=N.useState(0),[f,d]=N.useState(0),[h,p]=N.useState(!0);N.useEffect(()=>{b()},[e==null?void 0:e.id]),N.useEffect(()=>{e&&e.type&&a(x=>({...x,type:e.type}))},[e==null?void 0:e.id,e==null?void 0:e.type]);const b=async()=>{try{if(p(!0),!e||!e.id){u(0),d(0),p(!1);return}console.log("Installation slectionne:",e.id);const x=await Qt.getByClient(e.client_id);console.log("Tous les paiements du client:",x);const g=x.filter(_=>(console.log(`Comparaison: ${_.installation_id} === ${e.id} => ${_.installation_id===e.id}`),_.installation_id===e.id));console.log("Paiements de CETTE installation:",g);const S=g.reduce((_,j)=>_+(j.montant||0),0);console.log("Total pay:",S,"Montant installation:",e.montant),d(S);const w=Math.max(0,e.montant-S);u(w),console.log("Reste  payer:",w),w>0?a(_=>({..._,montant:w.toString()})):a(_=>({..._,montant:""}))}catch(x){console.error("Erreur calcul reste:",x),u((e==null?void 0:e.montant)||0)}finally{p(!1)}},v=(x,g)=>{a(S=>({...S,[x]:g})),s[x]&&l(S=>({...S,[x]:""}))},m=x=>{x.preventDefault();const g={};if(["0","1","2"].includes(i.montant)||(g.montant="Le statut doit tre 0, 1 ou 2"),i.mode_paiement||(g.mode_paiement="Mode de paiement requis"),i.date_paiement||(g.date_paiement="Date requise"),Object.keys(g).length>0){l(g);return}const S={montant:parseFloat(i.montant),mode_paiement:i.mode_paiement,type:i.type,date_paiement:i.date_paiement};t(S)};return h?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("form",{onSubmit:m,className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Installation"}),o.jsx("p",{className:"text-lg font-bold text-gray-800",children:e.application_installee})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Client"}),o.jsx("p",{className:"text-gray-800",children:(y=e.client)==null?void 0:y.raison_sociale})]}),o.jsxs("div",{className:"border-t border-blue-200 pt-3 grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Statut"}),o.jsx("p",{className:`text-3xl font-bold ${Ar(e.montant,f).couleur}`,children:Ar(e.montant,f).code})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Montant"}),o.jsx("p",{className:"text-lg font-bold text-gray-600",children:"2"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Pourcentage"}),o.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[(f/e.montant*100).toFixed(0),"%"]})]})]})]}),c===0&&o.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-sm text-green-700 font-semibold",children:" Cette installation est entirement paye !"})}),o.jsx(nt,{label:"Statut de Paiement",value:i.montant,onChange:x=>v("montant",x.target.value),options:[{value:"0",label:"0 - Aucun paiement"},{value:"1",label:"1 - Partiellement pay"},{value:"2",label:"2 - Totalement pay"}],error:s.montant,required:!0}),o.jsx(nt,{label:"Mode de Paiement",value:i.mode_paiement,onChange:x=>v("mode_paiement",x.target.value),options:[{value:"especes",label:"Espces"},{value:"virement",label:"Virement"},{value:"cheque",label:"Chque"},{value:"autre",label:"Autre"}],error:s.mode_paiement,required:!0}),o.jsx(nt,{label:"Type de Paiement",value:i.type,onChange:x=>v("type",x.target.value),disabled:!0,options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:s.type,required:!0}),o.jsx(Je,{label:"Date du Paiement",type:"date",value:i.date_paiement,onChange:x=>v("date_paiement",x.target.value),error:s.date_paiement,required:!0}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:n,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:c===0||n,children:n?" Enregistrement...":"Enregistrer le Paiement"})]})]})},hte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState(!0),[c,u]=N.useState(""),[f,d]=N.useState("all"),[h,p]=N.useState(""),[b,v]=N.useState(""),[m,y]=N.useState(""),[x,g]=N.useState(!1),[S,w]=N.useState(!1),[_,j]=N.useState(!1),[E,A]=N.useState(null),[P,O]=N.useState("create"),[T,M]=N.useState(0),[B,C]=N.useState(!1),[L,G]=N.useState(!1),[R,D]=N.useState(!1),[W,Y]=N.useState(!1),[F,V]=N.useState(!1),[U,ge]=N.useState([]),[le,Se]=N.useState([]),{addNotification:fe}=rr(),{user:Q,profile:Z}=Nt();N.useEffect(()=>{ee()},[]),N.useEffect(()=>{e.length>0&&k()},[e]),N.useEffect(()=>{const H=[...new Set(e.map(te=>te.wilaya).filter(te=>te&&te.trim()!=="").map(te=>te.trim()))].sort();Se(H)},[e]),N.useEffect(()=>{ce()},[Q==null?void 0:Q.id,Z==null?void 0:Z.role]),N.useEffect(()=>{me()},[e,c,f,h,b,m,U]);const ee=async()=>{try{l(!0);const H=await jr.getAll();t(H)}catch{fe({type:"error",message:"Erreur lors du chargement des installations"})}finally{l(!1)}},k=async()=>{try{const H=await Qt.getAll();a(H)}catch(H){console.error("Erreur lors du chargement des paiements:",H)}},ie=H=>i.filter(te=>te.installation_id===H).reduce((te,Ee)=>te+(Ee.montant||0),0),ue=H=>{const te=ie(H.id);return Math.max(0,(H.montant||0)-te)},ce=async()=>{try{if(Y(!0),Q!=null&&Q.id&&Z){const H=(Z==null?void 0:Z.role)==="admin"||(Z==null?void 0:Z.role)==="super_admin"||await Ue.hasCreatePermission(Q.id,"installations"),te=(Z==null?void 0:Z.role)==="admin"||(Z==null?void 0:Z.role)==="super_admin"||await Ue.hasEditPermission(Q.id,"installations"),Ee=(Z==null?void 0:Z.role)==="admin"||(Z==null?void 0:Z.role)==="super_admin"||await Ue.hasDeletePermission(Q.id,"installations");C(H),G(te),D(Ee)}}catch(H){console.error("Erreur chargement permissions:",H)}finally{Y(!1)}},me=()=>{let H=[...e];f!=="all"&&(H=H.filter(te=>te.statut===f)),c&&(H=H.filter(te=>{var Ee,xe,_e;return((Ee=te.application_installee)==null?void 0:Ee.toLowerCase().includes(c.toLowerCase()))||((_e=(xe=te.client)==null?void 0:xe.raison_sociale)==null?void 0:_e.toLowerCase().includes(c.toLowerCase()))})),h&&(H=H.filter(te=>new Date(te.date_installation)>=new Date(h))),b&&(H=H.filter(te=>new Date(te.date_installation)<=new Date(b+"T23:59:59"))),m&&(H=H.filter(te=>te.created_by===m)),U.length>0&&(H=H.filter(te=>U.includes(te.wilaya))),n(H)},Ne=()=>{B&&(A(null),O("create"),g(!0))},re=H=>{L&&(A(H),O("edit"),g(!0))},q=async H=>{const te=(H==null?void 0:H.id)||H;if(!R)return;try{if(await jr.hasPaiements(te)){window.alert(` SUPPRESSION IMPOSSIBLE 

Cette installation est lie  un ou plusieurs paiements enregistrs.

 Vous ne pouvez pas supprimer cette installation.

 Solution: Supprimez d'abord les paiements avant de supprimer l'installation.`);return}}catch(_e){console.error("Erreur vrification paiements:",_e)}if(!window.confirm(` ATTENTION 

Cette action va supprimer:
- L'installation
- Tous les abonnements lis

Cette action est IRRVERSIBLE !

tes-vous absolument sr de vouloir continuer ?`))return;if(window.prompt('Pour confirmer la suppression, tapez "SUPPRIMER" en majuscules:')!=="SUPPRIMER"){fe({type:"info",message:"Suppression annule"});return}try{await jr.delete(te),fe({type:"success",message:"Installation supprime avec succs"}),ee()}catch(_e){_e.code==="INSTALLATION_HAS_PAIEMENTS"?window.alert(` SUPPRESSION IMPOSSIBLE 

Cette installation est lie  un ou plusieurs paiements enregistrs.

 Vous ne pouvez pas supprimer cette installation.

 Solution: Supprimez d'abord les paiements avant de supprimer l'installation.`):fe({type:"error",message:_e.message||"Erreur lors de la suppression"})}},oe=H=>{A(H),w(!0)},$=async H=>{try{if(P==="create"){const te={...H,created_by:(Q==null?void 0:Q.id)||null};await jr.create(te),fe({type:"success",message:"Installation cre avec succs"})}else await jr.update(E.id,H),fe({type:"success",message:"Installation modifie avec succs"});g(!1),ee()}catch(te){fe({type:"error",message:te.message||"Erreur lors de l'enregistrement"})}},J=async H=>{if(!F){V(!0);try{await Qt.create({...H,client_id:E.client_id,installation_id:E.id,created_by:(Q==null?void 0:Q.id)||null}),fe({type:"success",message:"Paiement enregistr avec succs"}),w(!1),await ee(),I()}catch(te){fe({type:"error",message:te.message||"Erreur lors de l'enregistrement du paiement"})}finally{V(!1)}}},I=()=>{M(H=>H+1)},se={total:e.length,enCours:e.filter(H=>H.statut==="en_cours").length,terminees:e.filter(H=>H.statut==="terminee").length,acquisitions:e.filter(H=>H.type==="acquisition").length,abonnements:e.filter(H=>H.type==="abonnement").length,revenuTotal:e.reduce((H,te)=>H+(te.montant||0),0)};return s?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Installations"}),o.jsx("h3",{className:"text-3xl font-bold",children:se.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Cours"}),o.jsx("h3",{className:"text-3xl font-bold",children:se.enCours})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Termines"}),o.jsx("h3",{className:"text-3xl font-bold",children:se.terminees})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Acquisitions"}),o.jsx("h3",{className:"text-3xl font-bold",children:se.acquisitions})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:se.abonnements})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:vi,onClick:Ne,disabled:!B,className:"w-full h-full",title:B?"Crer une nouvelle installation":"Permission refuse: Crer une installation",children:"Nouvelle Installation"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(o0,{onSearchChange:u,onDateStartChange:p,onDateEndChange:v,onCreatorChange:y,searchValue:c,dateStart:h,dateEnd:b,creatorId:m}),o.jsx("div",{className:"card",children:o.jsx(FO,{options:le.map(H=>({value:H,label:zO(H),count:e.filter(te=>te.wilaya===H).length})),selectedValues:U,onChange:ge,placeholder:"Filtrer par Wilaya",label:"Filtrer par Wilaya",icon:li,displayFormat:(H,te)=>`Tous les Wilayas (${te})`})})]}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune installation trouve"})}):o.jsx(lc,{data:r,columns:[{key:"application_installee",label:"Application",width:"200px",render:H=>{var te;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:H.application_installee||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((te=H.client)==null?void 0:te.raison_sociale)||"N/A"})]})}},{key:"date_installation",label:"Date Installation",width:"150px",render:H=>o.jsx("span",{children:H.date_installation?new Date(H.date_installation).toLocaleDateString("fr-FR"):"N/A"})},{key:"statut",label:"Statut",width:"120px",render:H=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H.statut==="en_cours"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:H.statut==="en_cours"?"En cours":"Termine"})},{key:"type",label:"Type",width:"120px",render:H=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H.type==="acquisition"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:H.type==="acquisition"?"Acquisition":"Abonnement"})},{key:"statut_paiement",label:"Statut de Paiement",width:"140px",render:H=>{ie(H.id);const te=ue(H);let Ee,xe,_e;return te===H.montant?(Ee="Aucun paiement",xe="bg-red-100 text-red-700",_e=0):te>0?(Ee="Partiellement pay",xe="bg-orange-100 text-orange-700",_e=1):(Ee="Totalement pay",xe="bg-green-100 text-green-700",_e=2),o.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${xe}`,children:[_e," (",Ee,")"]})}}],actions:[{key:"details",label:"Dtails",icon:o.jsx(dl,{size:18}),onClick:H=>{A(H),j(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(Mn,{size:18}),onClick:re,disabled:!L,title:L?"Modifier cette installation":"Permission refuse: Modifier",className:L?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(Er,{size:18}),onClick:q,disabled:!R,title:R?"Supprimer cette installation":"Permission refuse: Supprimer",className:R?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:s,emptyMessage:"Aucune installation trouve"}),o.jsx(Lt,{isOpen:x,onClose:()=>g(!1),title:P==="create"?"Nouvelle Installation":"Modifier Installation",children:o.jsx(ute,{installation:E,onSubmit:$,onCancel:()=>g(!1)})}),o.jsx(Lt,{isOpen:_,onClose:()=>j(!1),title:"Dtails Installation",size:"lg",children:E&&o.jsx(dte,{installation:E,onEdit:re,onDelete:q,onPayment:oe,refreshTrigger:T})}),o.jsx(Lt,{isOpen:S,onClose:()=>w(!1),title:`Enregistrer un paiement - ${E==null?void 0:E.application_installee}`,children:E&&o.jsx(fte,{installation:E,onSubmit:J,onCancel:()=>w(!1),isSubmitting:F})})]})},Kf={validateProspect:e=>{const t={};return(!e.raison_sociale||e.raison_sociale.trim()==="")&&(t.raison_sociale="La raison sociale est obligatoire"),(!e.contact||e.contact.trim()==="")&&(t.contact="Le contact est obligatoire"),!e.telephone||e.telephone.trim()===""?t.telephone="Le tlphone est obligatoire":/^(0)(5|6|7)[0-9]{8}$/.test(e.telephone.replace(/\s/g,""))||(t.telephone="Format de tlphone invalide (ex: 0555123456)"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(t.email="Format d'email invalide"),{isValid:Object.keys(t).length===0,errors:t}},validateInstallation:e=>{const t={};return e.client_id||(t.client_id="Le client est obligatoire"),(!e.application_installee||e.application_installee.trim()==="")&&(t.application_installee="L'application est obligatoire"),(!e.montant||e.montant<=0)&&(t.montant="Le montant doit tre suprieur  0"),e.date_installation||(t.date_installation="La date d'installation est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validatePaiement:e=>{const t={};e.client_id||(t.client_id="Le client est obligatoire"),e.type||(t.type="Le type de paiement est obligatoire");const r=String(e.montant);return["0","1","2"].includes(r)||(t.montant="Le statut doit tre 0 (Aucun), 1 (Partiellement) ou 2 (Totalement)"),e.mode_paiement||(t.mode_paiement="Le mode de paiement est obligatoire"),e.date_paiement||(t.date_paiement="La date de paiement est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validateIntervention:e=>{const t={};return e.client_id||(t.client_id="Le client est obligatoire"),e.technicien_id||(t.technicien_id="Le technicien est obligatoire"),e.mode_intervention||(t.mode_intervention="Le mode d'intervention est obligatoire"),e.type_intervention||(t.type_intervention="Le type d'intervention est obligatoire"),(!e.resume_probleme||e.resume_probleme.trim()==="")&&(t.resume_probleme="Le rsum du problme est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validateApplication:e=>{const t={};return(!e.nom||e.nom.trim()==="")&&(t.nom="Le nom de l'application est obligatoire"),(!e.prix_acquisition||e.prix_acquisition<=0)&&(t.prix_acquisition="Le prix d'acquisition doit tre suprieur  0"),(!e.prix_abonnement||e.prix_abonnement<=0)&&(t.prix_abonnement="Le prix d'abonnement doit tre suprieur  0"),{isValid:Object.keys(t).length===0,errors:t}},validateUser:e=>{const t={};return(!e.nom||e.nom.trim()==="")&&(t.nom="Le nom est obligatoire"),!e.email||e.email.trim()===""?t.email="L'email est obligatoire":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Format d'email invalide"),e.role||(t.role="Le rle est obligatoire"),(!e.password||e.password.length<6)&&(t.password="Le mot de passe doit contenir au moins 6 caractres"),{isValid:Object.keys(t).length===0,errors:t}}},VO=({paiement:e,onSubmit:t,onCancel:r,isAbonnement:n=!1,isSubmitting:i=!1})=>{const[a,s]=N.useState({client_id:"",installation_id:"",type:"acquisition",montant:"",mode_paiement:"especes",date_paiement:new Date().toISOString().split("T")[0]}),[l,c]=N.useState({}),[u,f]=N.useState([]),[d,h]=N.useState([]),[p,b]=N.useState(0),[v,m]=N.useState(0),[y,x]=N.useState(0),[g,S]=N.useState(0),[w,_]=N.useState(0),[j,E]=N.useState(!1);N.useEffect(()=>{var M;A(),e&&(s({client_id:e.client_id||"",installation_id:e.installation_id||"",type:e.type||"acquisition",montant:e.montant||"",mode_paiement:e.mode_paiement||"especes",date_paiement:((M=e.date_paiement)==null?void 0:M.split("T")[0])||""}),n&&e.abonnement_montant&&(b(e.abonnement_montant),(async()=>{try{if(e.installation_id){const L=(await Qt.getByInstallation(e.installation_id)).reduce((R,D)=>R+(D.montant||0),0),G=Math.max(0,e.abonnement_montant-L);m(G),console.log(` Abonnement - Montant: ${e.abonnement_montant}, Pay: ${L}, Reste: ${G}`)}else m(e.abonnement_montant)}catch(C){console.error("Erreur calcul reste abonnement:",C),m(e.abonnement_montant)}})()))},[e,n]);const A=async()=>{try{const B=(await Ct.getAll()).filter(C=>C.statut==="actif");f(B)}catch(M){console.error("Erreur chargement clients:",M)}},P=async M=>{try{const B=await jr.getByClient(M);h(B)}catch(B){console.error("Erreur chargement installations:",B)}},O=(M,B)=>{if(s(C=>({...C,[M]:B})),l[M]&&c(C=>({...C,[M]:""})),M==="client_id"&&B&&P(B),M==="installation_id"&&B){const C=d.find(L=>String(L.id)===String(B));C&&(s(G=>({...G,type:C.type||"acquisition"})),(async()=>{try{const R=(await Qt.getByInstallation(B)).reduce((W,Y)=>W+(Y.montant||0),0);_(R),x(C.montant||0);const D=Math.max(0,(C.montant||0)-R);S(D),E(!0),console.log(` Installation: ${C.application_installee}, Montant: ${C.montant}, Pay: ${R}, Reste: ${D}`)}catch(G){console.error("Erreur calcul reste  payer:",G),x(C.montant||0),S(C.montant||0),E(!0)}})())}},T=M=>{M.preventDefault();let B={};const C=a.montant;["0","1","2"].includes(C)||(B.montant="Le statut doit tre 0, 1 ou 2");const L=Kf.validatePaiement(a);if(!L.isValid){c({...L.errors,...B});return}if(Object.keys(B).length>0){c(B);return}t(a)};return o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsx(nt,{label:"Client",value:a.client_id,onChange:M=>O("client_id",M.target.value),disabled:n,options:u.map(M=>({value:M.id,label:`${M.raison_sociale} (${M.contact})`})),error:l.client_id,required:!0}),d.length>0&&o.jsx(nt,{label:"Installation (optionnel)",value:a.installation_id,onChange:M=>O("installation_id",M.target.value),disabled:n,options:d.map(M=>({value:M.id,label:M.application_installee}))}),a.installation_id&&!n&&(y>0||j)&&o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 space-y-3",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Statut"}),o.jsx("p",{className:`text-3xl font-bold ${Ar(y,y-g).couleur}`,children:Ar(y,y-g).code})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Montant"}),o.jsx("p",{className:"text-lg font-bold text-gray-600",children:"2"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Pourcentage"}),o.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[((y-g)/y*100).toFixed(0),"%"]})]})]})}),o.jsx(nt,{label:"Type de Paiement",value:a.type,onChange:M=>O("type",M.target.value),disabled:!!a.installation_id||n,options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:l.type,required:!0}),n&&p>0&&o.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Statut"}),o.jsx("p",{className:`text-3xl font-bold ${Ar(p,p-v).couleur}`,children:Ar(p,p-v).code})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Montant"}),o.jsx("p",{className:"text-lg font-bold text-gray-600",children:"2"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Pourcentage"}),o.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[((p-v)/p*100).toFixed(0),"%"]})]})]})}),o.jsx(nt,{label:"Statut de Paiement",value:a.montant,onChange:M=>O("montant",M.target.value),options:[{value:"0",label:"0 - Aucun paiement"},{value:"1",label:"1 - Partiellement pay"},{value:"2",label:"2 - Totalement pay"}],error:l.montant,required:!0}),o.jsx(nt,{label:"Mode de Paiement",value:a.mode_paiement,onChange:M=>O("mode_paiement",M.target.value),options:[{value:"especes",label:"Espces"},{value:"virement",label:"Virement"},{value:"cheque",label:"Chque"},{value:"autre",label:"Autre"}],error:l.mode_paiement,required:!0}),o.jsx(Je,{label:"Date de Paiement",type:"date",value:a.date_paiement,onChange:M=>O("date_paiement",M.target.value),error:l.date_paiement,required:!0}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:i,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:i,children:i?" Enregistrement...":e?"Modifier":"Enregistrer"})]})]})},pte=()=>{var B,C,L,G,R;const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(!1),[h,p]=N.useState(null),[b,v]=N.useState(!1),[m,y]=N.useState(!1),[x,g]=N.useState(!1),{addNotification:S}=rr(),{user:w,profile:_}=Nt();N.useEffect(()=>{j()},[]),N.useEffect(()=>{E()},[w==null?void 0:w.id,_==null?void 0:_.role]),N.useEffect(()=>{A()},[e,s,c]);const j=async()=>{try{a(!0);const D=await qt.getAll(),W=await Promise.all(D.map(async Y=>{var F,V,U;try{const{data:ge}=await K.from("paiements").select("montant").eq("installation_id",Y.installation_id),le=(ge||[]).reduce((Q,Z)=>Q+(Z.montant||0),0),Se=((F=Y.installation)==null?void 0:F.montant)||0,fe=Math.max(0,Se-le);return{...Y,totalPaye:le,resteAPayer:fe,montantInstallation:Se}}catch(ge){return console.error("Erreur chargement paiements:",ge),{...Y,totalPaye:0,resteAPayer:((V=Y.installation)==null?void 0:V.montant)||0,montantInstallation:((U=Y.installation)==null?void 0:U.montant)||0}}}));t(W)}catch{S({type:"error",message:"Erreur lors du chargement des abonnements"})}finally{a(!1)}},E=async()=>{try{if(w!=null&&w.id&&_){const D=(_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="super_admin"||await Ue.hasDeletePermission(w.id,"abonnements"),W=(_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="super_admin"||await Ue.hasCreatePermission(w.id,"paiements");v(D),y(W)}}catch(D){console.error("Erreur chargement permissions:",D)}},A=()=>{let D=[...e];c!=="all"&&(D=D.filter(W=>W.statut===c)),s&&(D=D.filter(W=>{var Y,F,V,U,ge;return((F=(Y=W.installation)==null?void 0:Y.application_installee)==null?void 0:F.toLowerCase().includes(s.toLowerCase()))||((ge=(U=(V=W.installation)==null?void 0:V.client)==null?void 0:U.raison_sociale)==null?void 0:ge.toLowerCase().includes(s.toLowerCase()))})),n(D)},P=async D=>{const W=typeof D=="object"?D.id:D,Y=typeof D=="object"?D:e.find(F=>F.id===W);if(window.confirm("tes-vous sr de vouloir renouveler cet abonnement ?"))try{if(await qt.delete(W),!Y)throw new Error("Abonnement non trouv");const F=new Date(Y.date_fin),V=new Date(F);V.setFullYear(V.getFullYear()+1),await qt.create({installation_id:Y.installation_id,date_debut:F.toISOString(),date_fin:V.toISOString(),statut:"actif"}),S({type:"success",message:"Abonnement renouvel avec succs"}),j()}catch(F){S({type:"error",message:F.message||"Erreur lors du renouvellement"})}},O=D=>{m&&(p(D),d(!0))},T=async D=>{var W,Y;if(!x){g(!0);try{const F={montant:D.montant,type:D.type,mode_paiement:D.mode_paiement,date_paiement:D.date_paiement,client_id:((Y=(W=h.installation)==null?void 0:W.client)==null?void 0:Y.id)||h.installation.client_id,installation_id:h.installation_id,created_by:(w==null?void 0:w.id)||null};if(await Qt.create(F),h.statut==="expire"){const{data:V}=await K.from("paiements").select("montant").eq("installation_id",h.installation_id),U=(V||[]).reduce((le,Se)=>le+(Se.montant||0),0),ge=h.installation;if(U>=((ge==null?void 0:ge.montant)||0)){await qt.delete(h.id);const le=new Date(h.date_fin),Se=new Date(le);Se.setFullYear(Se.getFullYear()+1),await qt.create({installation_id:h.installation_id,date_debut:le.toISOString(),date_fin:Se.toISOString(),statut:"actif"}),S({type:"success",message:"Paiement enregistr et abonnement renouvel automatiquement"})}else S({type:"success",message:"Paiement enregistr avec succs"})}else S({type:"success",message:"Paiement enregistr avec succs"});d(!1),p(null),j()}catch(F){S({type:"error",message:F.message||"Erreur lors de l'enregistrement du paiement"})}finally{g(!1)}}},M={total:e.length,actifs:e.filter(D=>D.statut==="actif").length,enAlerte:e.filter(D=>D.statut==="en_alerte").length,expires:e.filter(D=>D.statut==="expire").length};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Actifs"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.actifs}),o.jsxs("p",{className:"text-sm opacity-90 mt-1",children:["Taux ",M.total>0?(M.actifs/M.total*100).toFixed(0):0,"%"]})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Alerte"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.enAlerte}),o.jsx("p",{className:"text-sm opacity-90 mt-1",children:" renouveler"})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Expirs"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.expires}),o.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Action requise"})]})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Gs,{value:s,onChange:l,placeholder:"Rechercher un abonnement..."})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("actif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="actif"?"bg-success text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Actifs"}),o.jsx("button",{onClick:()=>u("en_alerte"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="en_alerte"?"bg-warning text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"En Alerte"}),o.jsx("button",{onClick:()=>u("expire"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="expire"?"bg-danger text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Expirs"})]})]})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun abonnement trouv"})}):o.jsx(lc,{data:r,columns:[{key:"installation",label:"Installation",width:"200px",render:D=>{var W,Y,F;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:((W=D.installation)==null?void 0:W.application_installee)||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((F=(Y=D.installation)==null?void 0:Y.client)==null?void 0:F.raison_sociale)||"N/A"})]})}},{key:"date_debut",label:"Date Dbut",width:"120px",render:D=>o.jsx("span",{children:D.date_debut?new Date(D.date_debut).toLocaleDateString("fr-FR"):"N/A"})},{key:"date_fin",label:"Date Fin",width:"120px",render:D=>o.jsx("span",{children:D.date_fin?new Date(D.date_fin).toLocaleDateString("fr-FR"):"N/A"})},{key:"statut_paiement",label:"Statut de Paiement",width:"140px",render:D=>{const W=D.montantInstallation||0,Y=D.totalPaye||0,F=Math.max(0,W-Y);let V,U,ge;return F===W||W===0?(V="Aucun paiement",U="bg-red-100 text-red-700",ge=0):F>0?(V="Partiellement pay",U="bg-orange-100 text-orange-700",ge=1):(V="Totalement pay",U="bg-green-100 text-green-700",ge=2),o.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap ${U}`,children:[ge," (",V,")"]})}},{key:"statut",label:"Statut",width:"100px",render:D=>{const W=new Date,Y=new Date(D.date_fin),F=Y<W,V=Math.ceil((Y-W)/(1e3*60*60*24));return o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${F?"bg-red-100 text-red-800":V<=30?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:F?"Expir":V<=30?" renouveler":"Actif"})}}],actions:[{key:"payment",label:"Paiement",icon:"",onClick:O,disabled:!m,title:m?"Ajouter un paiement":"Permission refuse: Ajouter un paiement",className:m?"bg-green-600 hover:bg-green-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"renew",label:"Renouveler",icon:"",onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",condition:D=>{const W=new Date,Y=new Date(D.date_fin),F=Y<W,V=Math.ceil((Y-W)/(1e3*60*60*24));return F||V<=30}}],loading:i,emptyMessage:"Aucun abonnement trouv"}),o.jsx(Lt,{isOpen:f,onClose:()=>{d(!1),p(null)},title:h?`Enregistrer paiement - ${(B=h.installation)==null?void 0:B.application_installee}`:"Enregistrer paiement",size:"lg",children:h&&o.jsx(VO,{isAbonnement:!0,isSubmitting:x,paiement:{client_id:((L=(C=h.installation)==null?void 0:C.client)==null?void 0:L.id)||((G=h.installation)==null?void 0:G.client_id)||"",installation_id:h.installation_id,type:"abonnement",mode_paiement:"especes",montant:"",date_paiement:new Date().toISOString().split("T")[0],abonnement_montant:((R=h.installation)==null?void 0:R.montant)||0},onSubmit:T,onCancel:()=>d(!1)})})]})},mte=({refreshTrigger:e,onRefreshTrigger:t})=>{const[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState(""),[h,p]=N.useState("all"),[b,v]=N.useState(""),[m,y]=N.useState(""),[x,g]=N.useState(""),[S,w]=N.useState([]),[_,j]=N.useState(!1),[E,A]=N.useState(null),[P,O]=N.useState("create"),[T,M]=N.useState(!1),[B,C]=N.useState(!1),[L,G]=N.useState(!1),[R,D]=N.useState(!1),[W,Y]=N.useState({fullyPaid:0,partiallyPaid:0,noPaid:0}),{addNotification:F}=rr(),{user:V,profile:U}=Nt();N.useEffect(()=>{ge()},[e]),N.useEffect(()=>{(async()=>{if(V!=null&&V.id&&U)try{const ie=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"||await Ue.hasCreatePermission(V.id,"paiements"),ue=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"||await Ue.hasEditPermission(V.id,"paiements"),ce=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"||await Ue.hasDeletePermission(V.id,"paiements");M(ie),C(ue),G(ce)}catch(ie){console.error("Erreur vrification permissions:",ie)}})()},[V==null?void 0:V.id,U]),N.useEffect(()=>{le()},[r,f,h,b,m,x]),N.useEffect(()=>{const k={fullyPaid:0,partiallyPaid:0,noPaid:0};s&&s.length>0&&s.forEach(ie=>{const ue=r.filter(me=>me.installation_id===ie.id).reduce((me,Ne)=>me+(typeof Ne.montant=="number"?Ne.montant:0),0),ce=Math.max(0,(ie.montant||0)-ue);ce===ie.montant||ie.montant===0?k.noPaid++:ce>0?k.partiallyPaid++:k.fullyPaid++}),Y(k),console.log(" Stats mises  jour:",k)},[s,r]);const ge=async()=>{try{u(!0);const[k,ie,ue]=await Promise.all([Qt.getAll(),jr.getAll(),Ue.getAll()]);console.log(` Paiements chargs (${k.length}):`,k.slice(0,3)),console.log(` Utilisateurs chargs (${ue.length}):`,ue.map(me=>({id:me.id,email:me.email})));const ce=k.filter(me=>me.created_by);console.log(` Paiements avec created_by: ${ce.length}/${k.length}`),ce.length>0&&console.log("   Exemples:",ce.slice(0,2).map(me=>({id:me.id,created_by:me.created_by}))),n(k),l(ie),w(ue)}catch(k){console.error("Erreur chargement:",k),F({type:"error",message:"Erreur lors du chargement des donnes"})}finally{u(!1)}},le=()=>{let k=[...r];h!=="all"&&(k=k.filter(ie=>ie.type===h)),f&&(k=k.filter(ie=>{var ue,ce,me;return((ce=(ue=ie.client)==null?void 0:ue.raison_sociale)==null?void 0:ce.toLowerCase().includes(f.toLowerCase()))||((me=ie.mode_paiement)==null?void 0:me.toLowerCase().includes(f.toLowerCase()))})),b&&(k=k.filter(ie=>new Date(ie.date_paiement)>=new Date(b))),m&&(k=k.filter(ie=>new Date(ie.date_paiement)<=new Date(m+"T23:59:59"))),x&&(k=k.filter(ie=>ie.created_by===x)),a(k)},Se=k=>{B&&(A(k),O("edit"),j(!0))},fe=async k=>{var ce;const ie=(k==null?void 0:k.id)||k;if(!(!L||!window.confirm(` ATTENTION 

Voulez-vous vraiment supprimer ce paiement ?

Cette action est IRRVERSIBLE et affectera:
- L'historique financier
- Les statistiques de revenus
- Le reste  payer de l'installation

tes-vous sr de vouloir continuer ?`)))try{await Qt.delete(ie),F({type:"success",message:"Paiement supprim avec succs"}),ge(),t&&t()}catch(me){console.error("Erreur suppression paiement:",me),me.status===409||(ce=me.message)!=null&&ce.includes("foreign key")?F({type:"error",message:"Impossible de supprimer ce paiement car il est li  d'autres enregistrements"}):F({type:"error",message:me.message||"Erreur lors de la suppression du paiement"})}},Q=async k=>{if(!R){D(!0);try{if(P==="edit")await Qt.update(E.id,k),F({type:"success",message:"Paiement modifi avec succs"});else{const ie={client_id:k.client_id,installation_id:k.installation_id,type:k.type,montant:k.montant,mode_paiement:k.mode_paiement,date_paiement:k.date_paiement,created_by:(V==null?void 0:V.id)||null};if(await Qt.create(ie),k.installation_id){const{data:ue}=await K.from("abonnements").select("*").eq("installation_id",k.installation_id).eq("statut","expire");if(ue&&ue.length>0){const ce=ue[0],{data:me}=await K.from("paiements").select("montant").eq("installation_id",k.installation_id),Ne=(me||[]).reduce((q,oe)=>q+(oe.montant||0),0),{data:re}=await K.from("installations").select("montant").eq("id",k.installation_id).single();if(Ne>=((re==null?void 0:re.montant)||0)){await qt.delete(ce.id);const q=new Date(ce.date_fin),oe=new Date(q);oe.setFullYear(oe.getFullYear()+1),await qt.create({installation_id:k.installation_id,date_debut:q.toISOString(),date_fin:oe.toISOString(),statut:"actif"}),F({type:"success",message:"Paiement enregistr et abonnement renouvel automatiquement"})}else F({type:"success",message:"Paiement enregistr avec succs"})}else F({type:"success",message:"Paiement enregistr avec succs"})}else F({type:"success",message:"Paiement enregistr avec succs"})}j(!1),ge(),t&&t()}catch(ie){F({type:"error",message:ie.message||"Erreur lors de l'enregistrement"})}finally{D(!1)}}},Z=()=>{const k=r.reduce((ce,me)=>ce+(me.resteAPayer||0),0),ie=new Set(r.map(ce=>ce.installation_id).filter(ce=>ce)),ue=s.filter(ce=>!ie.has(ce.id)).reduce((ce,me)=>ce+(me.montant||0),0);return k+ue},ee={total:i.length,revenuTotal:i.reduce((k,ie)=>k+(ie.montant||0),0),acquisitions:i.filter(k=>{var ie;return((ie=k.installation)==null?void 0:ie.type)==="acquisition"}).length,abonnements:i.filter(k=>{var ie;return((ie=k.installation)==null?void 0:ie.type)==="abonnement"}).length,resteTotal:Z()};return c?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Nombre Pay"}),o.jsx("h3",{className:"text-2xl font-bold",children:W.fullyPaid})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Reste  Payer"}),o.jsx("h3",{className:"text-2xl font-bold",children:W.partiallyPaid})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Aucun Paiement"}),o.jsx("h3",{className:"text-2xl font-bold",children:W.noPaid})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Acquisitions"}),o.jsx("h3",{className:"text-3xl font-bold",children:ee.acquisitions})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:ee.abonnements})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Type:"}),o.jsxs("select",{value:h,onChange:k=>p(k.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous les types"}),o.jsx("option",{value:"acquisition",children:"Acquisition"}),o.jsx("option",{value:"abonnement",children:"Abonnement"})]})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Du:"}),o.jsx("input",{type:"date",value:b,onChange:k=>v(k.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Au:"}),o.jsx("input",{type:"date",value:m,onChange:k=>y(k.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Crateur:"}),o.jsxs("select",{value:x||"",onChange:k=>g(k.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"",children:"Tous les crateurs"}),Array.from(new Map(r.map(k=>[k.created_by,k])).entries()).filter(([k])=>k).map(([k,ie])=>{var Ne;const ue=r.filter(re=>re.created_by===k),ce=S.find(re=>re.id===k),me=((Ne=ce==null?void 0:ce.email)==null?void 0:Ne.split("@")[0])||(ce==null?void 0:ce.email)||(k==null?void 0:k.substring(0,8))||"Inconnu";return o.jsxs("option",{value:k,children:[me," (",ue.length,")"]},k)})]})]})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Rechercher:"}),o.jsx("input",{type:"text",placeholder:"Client ou mode de paiement...",value:f,onChange:k=>d(k.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),o.jsx("div",{className:"card overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Installation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut de Paiement"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mode"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"Aucun paiement trouv"})}):i.map(k=>{var ie,ue,ce,me,Ne;return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"font-medium text-gray-800",children:(ie=k.client)==null?void 0:ie.raison_sociale}),o.jsx("div",{className:"text-sm text-gray-600",children:(ue=k.client)==null?void 0:ue.contact})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(ce=k.installation)==null?void 0:ce.application_installee}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`badge-${((me=k.installation)==null?void 0:me.type)==="acquisition"?"info":"success"}`,children:((Ne=k.installation)==null?void 0:Ne.type)==="acquisition"?"Acquisition":"Abonnement"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.montant!==null&&k.montant!==void 0?o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${k.montant===2?"bg-green-100 text-green-700":k.montant===1?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:k.montant===2?"2 (Totalement pay)":k.montant===1?"1 (Partiellement pay)":"0 (Aucun paiement)"}):o.jsx("span",{className:"text-gray-500 text-sm",children:"N/A"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:k.mode_paiement}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:lr(k.date_paiement)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:()=>Se(k),disabled:!B&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!B&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,title:!B&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?"Permission refuse":"Modifier",children:!B&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?o.jsx(fi,{size:18}):o.jsx(Mn,{size:18})}),o.jsx("button",{onClick:()=>fe(k.id),disabled:!L&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!L&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:!L&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?"Permission refuse":"Supprimer",children:!L&&!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")?o.jsx(fi,{size:18}):o.jsx(Er,{size:18})})]})})]},k.id)})})]})}),o.jsx(Lt,{isOpen:_,onClose:()=>j(!1),title:"Modifier Paiement",children:o.jsx(VO,{paiement:E,onSubmit:Q,onCancel:()=>j(!1),isSubmitting:R})})]})},gte=({intervention:e,onSubmit:t,onCancel:r})=>{const{user:n,profile:i}=Nt(),[a,s]=N.useState({client_id:"",priorite:"normale",mode_intervention:"sur_site",type_intervention:"accompagnement",statut:"en_cours",date_intervention:new Date().toISOString().split("T")[0],resume_probleme:"",action_entreprise:"",commentaires:""}),[l,c]=N.useState({}),[u,f]=N.useState([]),[d,h]=N.useState(null),[p,b]=N.useState(""),[v,m]=N.useState(!1),y=["accompagnement","adaptation","assistance","blocage","correction","fonctionnalite","erreur","formation","integration","mise_a_jour","parametrage","impression","reseau","question","suivi"],x=j=>{if(!j)return"accompagnement";const E=j.toLowerCase().replace(/\s+/g,"_");return y.includes(E)?E:"accompagnement"},g=async j=>{if(!j){h(null);return}try{const A=(await qt.getAll()).filter(C=>{var L;return((L=C.installation)==null?void 0:L.client_id)===j||C.client_id===j});if(A.length===0){h({noAbonnement:!0});return}const P=A[0],O=new Date(P.date_fin),T=new Date;T.setHours(0,0,0,0),O.setHours(0,0,0,0);const M=Math.floor((O-T)/(1e3*60*60*24));let B=P.statut||"actif";M<0?B="expire":M<=30?B="en_alerte":B="actif",h({...P,daysLeft:M,statut:B,isExpired:B==="expire",isExpiring:B==="en_alerte",application:P.application||"Non spcifie",type:P.type||"standard"})}catch(E){console.error("Erreur chargement abonnement:",E),h({error:!0,message:E.message})}};N.useEffect(()=>{var j;S(),e&&s({client_id:e.client_id||"",priorite:e.priorite||"normale",mode_intervention:e.mode_intervention||"sur_site",type_intervention:x(e.type_intervention),statut:e.statut||"en_cours",date_intervention:((j=e.date_intervention)==null?void 0:j.split("T")[0])||"",resume_probleme:e.resume_probleme||"",action_entreprise:e.action_entreprise||"",commentaires:e.commentaires||""})},[e]);const S=async()=>{try{const E=(await Ct.getAll()).filter(A=>A.statut==="actif");f(E)}catch(j){console.error("Erreur chargement clients:",j)}},w=(j,E)=>{if(s(A=>({...A,[j]:E})),l[j]&&c(A=>({...A,[j]:""})),j==="client_id"){g(E);const A=u.find(P=>P.id===E);b((A==null?void 0:A.raison_sociale)||"")}},_=j=>{if(j.preventDefault(),v)return;const E={...a,technicien_id:n.id,type_intervention:x(a.type_intervention)},A=Kf.validateIntervention(E);if(!A.isValid){c(A.errors);return}m(!0);try{t(E)}finally{m(!1)}};return o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-semibold",children:"Technicien:"})," ",(i==null?void 0:i.nom)||"Utilisateur"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(nt,{label:"Client",value:a.client_id,onChange:j=>w("client_id",j.target.value),options:u.map(j=>({value:j.id,label:`${j.raison_sociale} (${j.contact})`})),error:l.client_id,required:!0}),o.jsx(nt,{label:"Priorit",value:a.priorite,onChange:j=>w("priorite",j.target.value),options:[{value:"normale",label:"Normale"},{value:"haute",label:"Haute"}],required:!0})]}),d&&o.jsxs("div",{className:`rounded-lg p-4 flex items-start gap-3 ${d.noAbonnement?"bg-yellow-50 border border-yellow-200":d.error||d.isExpired?"bg-red-50 border border-red-200":d.isExpiring?"bg-orange-50 border border-orange-200":"bg-green-50 border border-green-200"}`,children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d.noAbonnement?o.jsx(pt,{className:"w-5 h-5 text-yellow-600"}):d.error?o.jsx(pt,{className:"w-5 h-5 text-red-600"}):d.isExpired?o.jsx(pt,{className:"w-5 h-5 text-red-600"}):d.isExpiring?o.jsx(Ms,{className:"w-5 h-5 text-orange-600"}):o.jsx(Nr,{className:"w-5 h-5 text-green-600"})}),o.jsx("div",{className:"flex-1",children:d.noAbonnement?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-yellow-800",children:" Pas d'abonnement actif"}),o.jsxs("p",{className:"text-sm text-yellow-700",children:[p," - Aucun abonnement trouv"]})]}):d.error?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-800",children:" Erreur"}),o.jsx("p",{className:"text-sm text-red-700",children:"Impossible de charger les infos d'abonnement"})]}):d.isExpired?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-800",children:" ABONNEMENT EXPIR"}),o.jsxs("p",{className:"text-sm text-red-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-red-700",children:["Expir depuis le ",new Date(d.date_fin).toLocaleDateString("fr-FR")]}),o.jsx("p",{className:"text-xs text-red-600 mt-1",children:" URGENT: Contacter le client pour renouvellement"})]}):d.isExpiring?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-orange-800",children:" ABONNEMENT EXPIRE BIENTT"}),o.jsxs("p",{className:"text-sm text-orange-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-orange-700",children:["Expire dans ",d.daysLeft," jour",d.daysLeft>1?"s":"","(",new Date(d.date_fin).toLocaleDateString("fr-FR"),")"]}),o.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"  renouveler rapidement"})]}):o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-800",children:" ABONNEMENT ACTIF"}),o.jsxs("p",{className:"text-sm text-green-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-green-700",children:["Valide jusqu'au ",new Date(d.date_fin).toLocaleDateString("fr-FR"),"(",d.daysLeft," jours restants)"]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(nt,{label:"Mode d'Intervention",value:a.mode_intervention,onChange:j=>w("mode_intervention",j.target.value),options:[{value:"sur_site",label:"Sur Site"},{value:"a_distance",label:" Distance"}],error:l.mode_intervention,required:!0}),o.jsx(nt,{label:"Type d'Intervention",value:a.type_intervention,onChange:j=>w("type_intervention",j.target.value),options:[{value:"accompagnement",label:"Accompagnement utilisateur (prise en main)"},{value:"adaptation",label:"Adaptation d'un tat / rapport / modle d'impression"},{value:"assistance",label:"Assistance sur une opration exceptionnelle"},{value:"blocage",label:"Blocage d'accs / authentification"},{value:"correction",label:"Correction de bug / anomalie"},{value:"fonctionnalite",label:"Demande de nouvelle fonctionnalit"},{value:"erreur",label:"Erreur systme (plantage, message d'erreur critique)"},{value:"formation",label:"Formation"},{value:"integration",label:"Intgration avec un autre outil ou API"},{value:"mise_a_jour",label:"Mise  jour"},{value:"parametrage",label:"Paramtrage"},{value:"impression",label:"Problme d'impression ou de gnration de documents"},{value:"reseau",label:"Problme rseau ou de connection (accs distant, VPN)"},{value:"question",label:"Rponse  une question mtier"},{value:"suivi",label:"Suivi aprs une mise  jour majeure"}],error:l.type_intervention,required:!0}),o.jsx(Je,{label:"Date d'Intervention",type:"date",value:a.date_intervention,onChange:j=>w("date_intervention",j.target.value),error:l.date_intervention,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rsum du Problme ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:a.resume_probleme,onChange:j=>w("resume_probleme",j.target.value),rows:"4",className:"input-field",placeholder:"Dcrivez le problme rencontr..."}),l.resume_probleme&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.resume_probleme})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Entreprise"}),o.jsx("textarea",{value:a.action_entreprise,onChange:j=>w("action_entreprise",j.target.value),rows:"3",className:"input-field",placeholder:"Action entreprise pour rsoudre le problme..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commentaires"}),o.jsx("textarea",{value:a.commentaires,onChange:j=>w("commentaires",j.target.value),rows:"3",className:"input-field",placeholder:"Commentaires additionnels..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:v,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:v,children:v?" Enregistrement...":e?"Modifier":"Crer"})]})]})},yte=({intervention:e,onClose:t,onEdit:r,onDelete:n,onCloturer:i,hasClosePermission:a=!0})=>{var l,c,u,f,d;if(!e)return null;const s=()=>e.priorite==="haute"?"bg-red-100 text-red-800 border-red-200":"bg-blue-100 text-blue-800 border-blue-200";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between pb-4 border-b border-gray-200",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.statut==="cloturee"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:uu(e.statut)}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${s()}`,children:e.priorite==="haute"?" Haute Priorit":" Normale"})]}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:uu(e.type_intervention)})]}),o.jsxs("div",{className:"flex gap-2",children:[e.statut==="en_cours"&&o.jsxs("button",{onClick:()=>i(e),disabled:!a,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${a?"bg-green-600 text-white hover:bg-green-700":"bg-gray-400 text-white cursor-not-allowed"}`,title:a?"Clturer cette intervention":"Permission refuse: Clturer",children:[o.jsx(Nr,{size:18}),"Clturer"]}),o.jsxs("button",{onClick:()=>r(e),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Modifier",children:[o.jsx(Mn,{size:18}),"Modifier"]}),o.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",title:"Supprimer",children:[o.jsx(Er,{size:18}),"Supprimer"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(NE,{className:"text-blue-600",size:20}),o.jsx("h4",{className:"font-semibold text-blue-900",children:"Client"})]}),o.jsx("p",{className:"text-lg font-bold text-blue-800",children:(l=e.client)==null?void 0:l.raison_sociale}),o.jsx("p",{className:"text-sm text-blue-600",children:(c=e.client)==null?void 0:c.contact}),o.jsx("p",{className:"text-sm text-blue-600",children:(u=e.client)==null?void 0:u.telephone})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(iM,{className:"text-purple-600",size:20}),o.jsx("h4",{className:"font-semibold text-purple-900",children:"Technicien"})]}),o.jsx("p",{className:"text-lg font-bold text-purple-800",children:(f=e.technicien)==null?void 0:f.nom}),o.jsx("p",{className:"text-sm text-purple-600",children:(d=e.technicien)==null?void 0:d.email})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Yr,{className:"text-green-600",size:20}),o.jsx("h4",{className:"font-semibold text-green-900",children:"Date & Heure"})]}),o.jsx("p",{className:"text-lg font-bold text-green-800",children:lr(e.date_intervention)}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Ms,{size:16,className:"text-green-600"}),o.jsxs("p",{className:"text-sm text-green-600",children:[e.duree_minutes||"-"," minutes"]})]})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(li,{className:"text-orange-600",size:20}),o.jsx("h4",{className:"font-semibold text-orange-900",children:"Mode"})]}),o.jsx("p",{className:"text-lg font-bold text-orange-800",children:uu(e.mode_intervention)})]})]}),o.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(pt,{className:"text-red-600",size:20}),o.jsx("h4",{className:"font-semibold text-red-900",children:"Problme Rencontr"})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.resume_probleme})]}),e.action_entreprise&&o.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Nr,{className:"text-green-600",size:20}),o.jsx("h4",{className:"font-semibold text-green-900",children:"Action Entreprise"})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.action_entreprise})]}),e.commentaires&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Commentaires"}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.commentaires})]}),e.date_fin&&o.jsx("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:o.jsxs("p",{className:"text-sm text-blue-600",children:["Intervention clture le ",o.jsx("span",{className:"font-semibold",children:EE(e.date_fin)})]})})]})},vte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(null),[i,a]=N.useState(!0);N.useEffect(()=>{s()},[]);const s=async()=>{try{const c=await Yn.getAll();t(c),l(c)}catch(c){console.error("Erreur chargement interventions:",c)}finally{a(!1)}},l=c=>{if(c.length===0){n(null);return}const u=c.length,f=c.filter(P=>P.statut==="cloturee"),d=c.filter(P=>P.statut==="en_cours"),h=c.filter(P=>P.priorite==="haute"),p=Math.round(c.reduce((P,O)=>P+(O.duree_minutes||0),0)/u||0),b=Math.round(f.length/u*100||0),v={};c.forEach(P=>{v[P.type_intervention]=(v[P.type_intervention]||0)+1});const m=Object.entries(v).sort((P,O)=>O[1]-P[1])[0],y={};c.forEach(P=>{var T;(((T=P.resume_probleme)==null?void 0:T.toLowerCase().split(" "))||[]).forEach(M=>{M.length>4&&(y[M]=(y[M]||0)+1)})});const x=Object.entries(y).sort((P,O)=>O[1]-P[1]).slice(0,5).map(([P,O])=>({mot:P,count:O})),g={};c.forEach(P=>{var O;(O=P.technicien)!=null&&O.nom&&(g[P.technicien.nom]||(g[P.technicien.nom]={total:0,cloturees:0,duree:0}),g[P.technicien.nom].total++,P.statut==="cloturee"&&g[P.technicien.nom].cloturees++,g[P.technicien.nom].duree+=P.duree_minutes||0)});const S=Object.entries(g).map(([P,O])=>({nom:P,total:O.total,tauxResolution:Math.round(O.cloturees/O.total*100),dureeMoyenne:Math.round(O.duree/O.total)})).sort((P,O)=>O.tauxResolution-P.tauxResolution),w=new Date,_=new Date(w.getTime()-7*24*60*60*1e3),E=c.filter(P=>new Date(P.date_intervention)>=_).length>u/4?"hausse":"baisse",A=[];d.length>f.length&&A.push({type:"warning",message:`${d.length} interventions en cours. Prioriser la clture des interventions en attente.`}),h.length>u*.3&&A.push({type:"danger",message:`${h.length} interventions haute priorit. Augmenter les ressources techniques.`}),p>120&&A.push({type:"info",message:`Dure moyenne leve (${p} min). Envisager une formation technique supplmentaire.`}),b>80&&A.push({type:"success",message:`Excellent taux de rsolution (${b}%). Continuez sur cette lance !`}),x.length>0&&A.push({type:"info",message:`Problme rcurrent dtect: "${x[0].mot}". Crer une documentation prventive.`}),n({totalInterventions:u,cloturees:f.length,enCours:d.length,hautesPriorites:h.length,dureeMoyenne:p,tauxResolution:b,typePlusFrequent:m,problemesRecurrents:x,performanceTechniciens:S,tendance:E,recommandations:A})};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:o.jsx(wm,{size:32})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Analyse IA des Interventions"}),o.jsx("p",{className:"text-purple-100",children:"Intelligence artificielle  Insights automatiques"})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ms,{className:"text-blue-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Dure Moyenne"}),o.jsxs("h3",{className:"text-2xl font-bold text-blue-800",children:[r.dureeMoyenne," min"]})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Nr,{className:"text-green-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taux de Rsolution"}),o.jsxs("h3",{className:"text-2xl font-bold text-green-800",children:[r.tauxResolution,"%"]})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-l-4 border-orange-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(as,{className:"text-orange-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Haute Priorit"}),o.jsx("h3",{className:"text-2xl font-bold text-orange-800",children:r.hautesPriorites})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[r.tendance==="hausse"?o.jsx(rn,{className:"text-purple-600",size:32}):o.jsx(nM,{className:"text-purple-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Tendance"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-800 capitalize",children:r.tendance})]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(hl,{className:"text-yellow-500",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Recommandations IA"})]}),o.jsx("div",{className:"space-y-3",children:r.recommandations.map((c,u)=>o.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c.type==="success"?"bg-green-50 border-green-500":c.type==="warning"?"bg-orange-50 border-orange-500":c.type==="danger"?"bg-red-50 border-red-500":"bg-blue-50 border-blue-500"}`,children:o.jsx("p",{className:`text-sm font-medium ${c.type==="success"?"text-green-800":c.type==="warning"?"text-orange-800":c.type==="danger"?"text-red-800":"text-blue-800"}`,children:c.message})},u))})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(HI,{className:"text-primary",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Performance des Techniciens"})]}),o.jsx("div",{className:"space-y-3",children:r.performanceTechniciens.map((c,u)=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u===0?"bg-yellow-100":u===1?"bg-gray-200":u===2?"bg-orange-100":"bg-blue-100"}`,children:o.jsx(fl,{className:u===0?"text-yellow-600":u===1?"text-gray-600":u===2?"text-orange-600":"text-blue-600",size:20})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:c.nom}),o.jsxs("p",{className:"text-xs text-gray-500",children:[c.total," interventions"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[c.tauxResolution,"%"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[c.dureeMoyenne," min/inter"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${c.tauxResolution}%`}})})]},u))})]}),r.problemesRecurrents.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(as,{className:"text-orange-500",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Problmes Rcurrents Dtects"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:r.problemesRecurrents.map((c,u)=>o.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 text-center border border-orange-200",children:[o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.count}),o.jsx("p",{className:"text-sm text-orange-800 capitalize truncate",children:c.mot})]},u))})]}),r.typePlusFrequent&&o.jsx("div",{className:"card bg-gradient-to-br from-indigo-50 to-indigo-100 border border-indigo-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-indigo-600 font-medium mb-1",children:"Type d'intervention le plus frquent"}),o.jsx("h3",{className:"text-2xl font-bold text-indigo-800 capitalize",children:r.typePlusFrequent[0]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-4xl font-bold text-indigo-600",children:r.typePlusFrequent[1]}),o.jsx("p",{className:"text-sm text-indigo-500",children:"occurrences"})]})]})})]}):o.jsxs("div",{className:"card text-center py-12",children:[o.jsx(wm,{className:"mx-auto text-gray-300 mb-4",size:64}),o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune donne disponible pour l'analyse"})]})},xte=()=>{const[t,r]=N.useState([]),[n,i]=N.useState([]),[a,s]=N.useState(!0),[l,c]=N.useState(""),[u,f]=N.useState("all"),[d,h]=N.useState("all"),[p,b]=N.useState([]),[v,m]=N.useState([]),[y,x]=N.useState(""),[g,S]=N.useState(""),[w,_]=N.useState(""),[j,E]=N.useState("journal"),[A,P]=N.useState(1),[O,T]=N.useState(!1),[M,B]=N.useState(!1),[C,L]=N.useState(!1),[G,R]=N.useState(null),[D,W]=N.useState("create"),[Y,F]=N.useState(!1),[V,U]=N.useState(!1),[ge,le]=N.useState(!1),[Se,fe]=N.useState(!1),{addNotification:Q}=rr(),{user:Z,profile:ee}=Nt();N.useEffect(()=>{k()},[]),N.useEffect(()=>{k()},[]),N.useEffect(()=>{ie(),P(1)},[t,u,d,l,y,g,w,p,ee]),N.useEffect(()=>{const $=[...new Set(t.map(J=>{var I;return(I=J.client)==null?void 0:I.wilaya}).filter(J=>J&&J.trim()!=="").map(J=>J.trim()))].sort();m($)},[t]),N.useEffect(()=>{(async()=>{if(Z!=null&&Z.id&&ee)try{const J=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Ue.hasCreatePermission(Z.id,"support"),I=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Ue.hasEditPermission(Z.id,"support"),se=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Ue.hasDeletePermission(Z.id,"support"),H=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Ue.hasClosePermission(Z.id,"support");F(J),U(I),le(se),fe(H)}catch(J){console.error("Erreur vrification permissions:",J)}})()},[Z==null?void 0:Z.id,ee]);const k=async()=>{try{s(!0);const $=await Yn.getAll();r($)}catch{Q({type:"error",message:"Erreur lors du chargement des interventions"})}finally{s(!1)}},ie=()=>{let $=[...t];if(u!=="all"&&($=$.filter(J=>J.statut===u)),d!=="all"&&($=$.filter(J=>J.type===d)),p.length>0&&($=$.filter(J=>{var I;return p.includes((I=J.client)==null?void 0:I.wilaya)})),l&&($=$.filter(J=>{var I,se,H,te,Ee;return((se=(I=J.client)==null?void 0:I.raison_sociale)==null?void 0:se.toLowerCase().includes(l.toLowerCase()))||((te=(H=J.technicien)==null?void 0:H.nom)==null?void 0:te.toLowerCase().includes(l.toLowerCase()))||((Ee=J.resume_probleme)==null?void 0:Ee.toLowerCase().includes(l.toLowerCase()))})),y){const J=new Date(y);$=$.filter(I=>new Date(I.date_intervention)>=J)}if(g){const J=new Date(g);J.setHours(23,59,59,999),$=$.filter(I=>new Date(I.date_intervention)<=J)}w&&((ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin")&&($=$.filter(J=>J.created_by===w)),i($)},ue=()=>{Y&&(R(null),W("create"),T(!0))},ce=$=>{V&&(R($),W("edit"),T(!0))},me=$=>{Se&&(R($),L(!0))},Ne=async $=>{var I;const J=($==null?void 0:$.id)||$;if(ge&&window.confirm("tes-vous sr de vouloir supprimer cette intervention ?"))try{await Yn.delete(J),Q({type:"success",message:"Intervention supprime avec succs"}),k()}catch(se){console.error("Erreur suppression intervention:",se),se.status===409||(I=se.message)!=null&&I.includes("foreign key")?Q({type:"error",message:"Impossible de supprimer cette intervention car elle est lie  d'autres enregistrements"}):Q({type:"error",message:"Erreur lors de la suppression de l'intervention"})}},re=async $=>{try{if(D==="create"){const J={...$,created_by:(Z==null?void 0:Z.id)||null};await Yn.create(J),Q({type:"success",message:"Intervention cre avec succs"})}else await Yn.update(G.id,$),Q({type:"success",message:"Intervention modifie avec succs"});T(!1),k()}catch{Q({type:"error",message:"Erreur lors de l'enregistrement"})}},q=async $=>{$.preventDefault();const J=new FormData($.target);try{const I=await Yn.cloturer(G.id,J.get("action_entreprise"),J.get("commentaires"));Q({type:"success",message:"Intervention clture avec succs"}),L(!1),B(!1),R(null),k()}catch{Q({type:"error",message:"Erreur lors de la clture"})}},oe={total:t.length,enCours:t.filter($=>$.statut==="en_cours").length,cloturees:t.filter($=>$.statut==="cloturee").length,hautesPriorites:t.filter($=>$.priorite==="haute").length};return a?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-blue-50 border-l-4 border-blue-500",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(dl,{size:20,className:"text-blue-600 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-blue-900",children:"Consultation de toutes les interventions"}),o.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Vous pouvez consulter ",o.jsx("strong",{children:"toutes les interventions"})," indpendamment de leur crateur. Vos permissions pour Crer, Modifier ou Supprimer sont dfinies individuellement par les administrateurs."]})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Interventions"}),o.jsx("h3",{className:"text-3xl font-bold",children:oe.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Cours"}),o.jsx("h3",{className:"text-3xl font-bold",children:oe.enCours})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Cltures"}),o.jsx("h3",{className:"text-3xl font-bold",children:oe.cloturees})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:vi,onClick:ue,disabled:!Y,className:"w-full h-full",title:Y?"Crer une nouvelle intervention":"Permission refuse: Crer une intervention",children:"Nouvelle Intervention"})})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>E("journal"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${j==="journal"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[o.jsx(cu,{size:18}),"Journal"]}),o.jsxs("button",{onClick:()=>E("analyse"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${j==="analyse"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[o.jsx(wm,{size:18}),"Analyse IA"]})]})}),j==="journal"&&o.jsxs(o.Fragment,{children:[o.jsx(o0,{onSearchChange:c,onDateStartChange:x,onDateEndChange:S,onCreatorChange:_,searchValue:l,dateStart:y,dateEnd:g,creatorId:w}),o.jsx("div",{className:"card",children:o.jsx(FO,{options:v.map($=>({value:$,label:zO($),count:t.filter(J=>{var I;return((I=J.client)==null?void 0:I.wilaya)===$}).length})),selectedValues:p,onChange:b,placeholder:"Filtrer par Wilaya",label:"Filtrer par Wilaya",icon:li,displayFormat:($,J)=>`Tous les Wilayas (${J})`})}),n.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune intervention trouve"})}):o.jsx(lc,{data:n.slice((A-1)*25,A*25),columns:[{key:"client",label:"Client",width:"180px",render:$=>{var J,I;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:((J=$.client)==null?void 0:J.raison_sociale)||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((I=$.technicien)==null?void 0:I.nom)||"N/A"})]})}},{key:"resume_probleme",label:"Problme",width:"180px",render:$=>o.jsx("span",{children:$.resume_probleme||"N/A"})},{key:"time_creation",label:"Dbut",width:"160px",render:$=>{var I;const J=(I=$.time_creation)!=null&&I.endsWith("Z")?$.time_creation:$.time_creation?$.time_creation+"Z":null;return o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:J?new Date(J).toLocaleDateString("fr-FR"):"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:J?new Date(J).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"N/A"})]})}},{key:"date_fin",label:"Fin",width:"160px",render:$=>{var I;const J=(I=$.date_fin)!=null&&I.endsWith("Z")?$.date_fin:$.date_fin?$.date_fin+"Z":null;return o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:J?new Date(J).toLocaleDateString("fr-FR"):"-"}),o.jsx("p",{className:"text-xs text-gray-500",children:J?new Date(J).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"-"})]})}},{key:"duree_minutes",label:"Dure",width:"80px",render:$=>o.jsxs("span",{className:"font-semibold text-blue-600",children:[$.duree_minutes||0," min"]})},{key:"priorite",label:"Priorit",width:"100px",render:$=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$.priorite==="haute"?"bg-red-100 text-red-800":$.priorite==="normale"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:$.priorite==="haute"?"Haute":$.priorite==="normale"?"Normale":"Basse"})},{key:"statut",label:"Statut",width:"100px",render:$=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${$.statut==="en_cours"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:$.statut==="en_cours"?"En cours":"Clture"})}],actions:[{key:"details",label:"Dtails",icon:o.jsx(dl,{size:18}),onClick:$=>{R($),B(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(Mn,{size:18}),onClick:ce,disabled:!V,title:V?"Modifier cette intervention":"Permission refuse: Modifier",className:V?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(Er,{size:18}),onClick:Ne,disabled:!ge,title:ge?"Supprimer cette intervention":"Permission refuse: Supprimer",className:ge?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:a,emptyMessage:"Aucune intervention trouve"})]}),j==="journal"&&n.length>0&&o.jsxs("div",{className:"card flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((A-1)*25+1,n.length)," "," ",Math.min(A*25,n.length)," sur"," ",n.length," interventions"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>P($=>Math.max(1,$-1)),disabled:A===1,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:" Prcdent"}),o.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.ceil(n.length/25)}).map(($,J)=>o.jsx("button",{onClick:()=>P(J+1),className:`px-3 py-2 rounded-lg ${A===J+1?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:J+1},J+1))}),o.jsx("button",{onClick:()=>P($=>Math.min(Math.ceil(n.length/25),$+1)),disabled:A===Math.ceil(n.length/25),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Suivant "})]})]}),j==="analyse"&&o.jsx(vte,{}),o.jsx(Lt,{isOpen:O,onClose:()=>T(!1),title:D==="create"?"Nouvelle Intervention":"Modifier Intervention",size:"lg",children:o.jsx(gte,{intervention:G,onSubmit:re,onCancel:()=>T(!1)})}),o.jsx(Lt,{isOpen:M,onClose:()=>B(!1),title:"Dtails Intervention",size:"lg",children:G&&o.jsx(yte,{intervention:G,onClose:()=>B(!1),onEdit:ce,onDelete:Ne,onCloturer:me,hasClosePermission:Se})}),o.jsx(Lt,{isOpen:C,onClose:()=>L(!1),title:"Clturer l'Intervention",children:o.jsxs("form",{onSubmit:q,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Action Entreprise ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"action_entreprise",rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Dcrivez l'action entreprise...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commentaires"}),o.jsx("textarea",{name:"commentaires",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Commentaires additionnels..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:()=>L(!1),children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"success",children:"Clturer"})]})]})})]})},bte=({mission:e,onSave:t,onSubmit:r,onCancel:n,missionTypes:i=[],clients:a=[],users:s=[],isSubmitting:l=!1})=>{const[c,u]=N.useState({titre:"",description:"",clientId:"",lieu:"",wilaya:"",dateDebut:"",dateFin:"",budgetInitial:"",type:"",priorite:"moyenne",chefMissionId:"",accompagnateurIds:[],commentaireCreation:""}),[f,d]=N.useState([]),[h,p]=N.useState({}),b=["Installation","Formation","Support","Maintenance","Audit"],v=i&&i.length>0?i:b;N.useEffect(()=>{var A;e&&(u({titre:e.titre||"",description:e.description||"",clientId:((A=e.client)==null?void 0:A.id)||e.prospect_id||"",lieu:e.lieu||"",wilaya:e.wilaya||e.lieu||"",dateDebut:e.dateDebut||e.date_debut||"",dateFin:e.dateFin||e.date_fin_prevue||"",budgetInitial:e.budgetInitial||e.budget_alloue||"",type:e.type||e.type_mission||"",priorite:e.priorite||"moyenne",chefMissionId:e.chefMissionId||e.chef_mission_id||"",accompagnateurIds:e.accompagnateurIds||e.accompagnateurs_ids||[],commentaireCreation:e.commentaireCreation||""}),d(e.accompagnateurIds||e.accompagnateurs_ids||[]))},[e]),N.useEffect(()=>{if(c.clientId){const A=a.find(O=>O.id===c.clientId),P=(A==null?void 0:A.wilaya)||(A==null?void 0:A.lieu)||"";P&&u(O=>({...O,wilaya:P,lieu:P}))}},[c.clientId,a]);const m=()=>{const A={};return c.titre.trim()||(A.titre="Le titre est requis"),c.clientId||(A.clientId="Le client est requis"),c.chefMissionId||(A.chefMissionId="Le Chef de Mission est requis"),c.dateDebut||(A.dateDebut="La date de dbut est requise"),c.dateFin||(A.dateFin="La date de fin est requise"),new Date(c.dateDebut)>new Date(c.dateFin)&&(A.dateFin="La date de fin doit tre aprs la date de dbut"),(!c.budgetInitial||c.budgetInitial<=0)&&(A.budgetInitial="Le budget doit tre suprieur  0"),c.type||(A.type="Le type de mission est requis"),p(A),Object.keys(A).length===0},y=A=>{const{name:P,value:O}=A.target;u(T=>({...T,[P]:O})),h[P]&&p(T=>({...T,[P]:""}))},x=A=>{f.includes(A)||(d([...f,A]),u(P=>({...P,accompagnateurIds:[...P.accompagnateurIds,A]})))},g=A=>{const P=f.filter(O=>O!==A);d(P),u(O=>({...O,accompagnateurIds:P}))},S=A=>{if(A.preventDefault(),m()){const P=r||t;P&&P(c)}},w=a.map(A=>({value:A.id,label:A.raison_sociale||"Sans nom"})),_=s.map(A=>({value:A.id,label:A.full_name||A.email})),j=s.filter(A=>A.id!==c.chefMissionId&&!f.includes(A.id)).map(A=>({value:A.id,label:A.full_name||A.email})),E=s.filter(A=>f.includes(A.id));return o.jsxs("form",{onSubmit:S,className:"space-y-5",children:[!e&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[o.jsx("p",{className:"text-sm text-blue-800 font-medium",children:" Cration de mission rserve aux administrateurs"}),o.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Slectionnez le Chef de Mission qui sera responsable de cette mission"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de la Mission *"}),o.jsx(Je,{type:"text",name:"titre",value:c.titre,onChange:y,placeholder:"Exemple: Installation ERP ABC",error:h.titre})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{name:"description",value:c.description,onChange:y,placeholder:"Dcrivez la mission en dtail...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client *"}),o.jsx(nt,{name:"clientId",value:c.clientId,onChange:y,options:[{value:"",label:"Slectionner un client..."},...w.map(A=>{const P=a.find(T=>T.id===A.value),O=(P==null?void 0:P.wilaya)||(P==null?void 0:P.lieu)||"";return{value:A.value,label:O?`${A.label} ( ${O})`:A.label}})],error:h.clientId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Mission *"}),o.jsx(nt,{name:"type",value:c.type,onChange:y,options:v.map(A=>({value:A,label:A})),error:h.type})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Wilaya / Lieu"}),c.wilaya?o.jsxs("div",{className:"w-full px-3 py-2 border border-green-300 rounded-lg bg-green-50 flex items-center gap-2",children:[o.jsx(li,{className:"text-green-600",size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:nte(c.wilaya)||c.wilaya}),o.jsx("p",{className:"text-xs text-green-700",children:"Auto-rempli depuis la fiche client"})]})]}):o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"(Slectionner un client d'abord)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorit"}),o.jsx(nt,{name:"priorite",value:c.priorite,onChange:y,options:[{value:"faible",label:" Faible"},{value:"moyenne",label:" Moyenne"},{value:"haute",label:" Haute"},{value:"critique",label:" Critique"}]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Dbut *"}),o.jsx(Je,{type:"date",name:"dateDebut",value:c.dateDebut,onChange:y,error:h.dateDebut})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin *"}),o.jsx(Je,{type:"date",name:"dateFin",value:c.dateFin,onChange:y,error:h.dateFin})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Initial () *"}),o.jsx(Je,{type:"number",name:"budgetInitial",value:c.budgetInitial,onChange:y,placeholder:"0.00",min:"0",step:"0.01",error:h.budgetInitial})]}),o.jsxs("div",{className:`border-l-4 p-4 rounded ${e?"bg-gray-100 border-gray-400":"bg-blue-50 border-blue-500"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`font-semibold ${e?"text-gray-700":"text-blue-900"}`,children:" Chef de Mission *"}),e&&o.jsx("span",{className:"text-xs px-2 py-1 bg-gray-400 text-white rounded",children:" Fig  la cration"})]}),e?o.jsx("div",{className:"bg-white p-3 rounded border border-gray-300",children:c.chefMissionId?(()=>{const A=s.find(M=>M.id===c.chefMissionId),P=(A==null?void 0:A.full_name)||"Chef inconnu",O=A==null?void 0:A.email,T=((A==null?void 0:A.full_name)||O||"?").charAt(0).toUpperCase();return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-200 flex items-center justify-center text-sm font-semibold text-blue-800",children:T}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:P}),O&&o.jsx("p",{className:"text-xs text-gray-500",children:O})]})]})})():o.jsx("p",{className:"text-gray-500 text-sm",children:" Aucun Chef de Mission assign"})}):o.jsx(nt,{name:"chefMissionId",value:c.chefMissionId,onChange:y,options:[{value:"",label:"Slectionner le Chef de Mission..."},..._],error:h.chefMissionId}),o.jsx("p",{className:`text-xs mt-2 ${e?"text-gray-600":"text-blue-700"}`,children:e?" Le Chef de Mission ne peut pas tre modifi aprs la cration":"Le Chef de Mission sera responsable de la clture de la mission"})]}),o.jsxs("div",{className:`border-l-4 p-4 rounded ${e?"bg-gray-100 border-gray-400":"bg-green-50 border-green-500"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:`font-semibold ${e?"text-gray-700":"text-green-900"}`,children:" Accompagnateurs"}),e&&o.jsx("span",{className:"text-xs px-2 py-1 bg-gray-400 text-white rounded",children:" Fig  la cration"})]}),!e&&j.length>0&&o.jsx("div",{className:"mb-3",children:o.jsx(nt,{options:[{value:"",label:"+ Ajouter un accompagnateur..."},...j],value:"",onChange:A=>{A.target.value&&x(A.target.value)}})}),o.jsx("div",{className:"space-y-2",children:E.map(A=>{var P,O;return o.jsxs("div",{className:`flex items-center justify-between p-2 rounded border ${e?"bg-gray-50 border-gray-300":"bg-white border-green-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${e?"bg-gray-300 text-gray-700":"bg-green-200 text-green-800"}`,children:((P=A.full_name)==null?void 0:P.charAt(0))||((O=A.email)==null?void 0:O.charAt(0))}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.full_name||A.email})]}),!e&&o.jsx("button",{type:"button",onClick:()=>g(A.id),className:"text-red-500 hover:text-red-700",children:o.jsx(Tn,{size:18})})]},A.id)})}),E.length===0&&o.jsx("p",{className:"text-xs font-medium text-gray-500",children:e?" Aucun accompagnateur assign":" Aucun accompagnateur slectionn"}),e&&o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:" Les accompagnateurs ne peuvent pas tre modifis aprs la cration"})]}),!e&&o.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Statut Initial  la Cration"}),o.jsxs("p",{className:"text-sm text-blue-800",children:["La mission sera cre avec le statut ",o.jsx("strong",{children:'"Planifie"'})," (mission future, avant dmarrage)."]}),o.jsx("p",{className:"text-xs text-blue-700 mt-2",children:' Cliquez sur " Dmarrer la Mission" pour passer au statut "En cours"'})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commentaire Initial (Admin)"}),o.jsx("textarea",{name:"commentaireCreation",value:c.commentaireCreation,onChange:y,placeholder:"Contexte ou remarques  la cration de la mission...",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx(Ae,{type:"button",onClick:n,disabled:l,className:`flex-1 ${l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Annuler"}),o.jsx(Ae,{type:"submit",disabled:l,className:`flex-1 ${l?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:l?" Sauvegarde...":e?"Mettre  jour":"Crer la Mission"})]})]})},wte=({mission:e,tab:t="general",onClose:r,onClosureAdmin:n,currentUser:i,userProfile:a,onValidate:s,onClosure:l,onRemove:c,isAdmin:u})=>{var me,Ne,re,q,oe;const{addNotification:f}=rr(),[d,h]=N.useState(t),[p,b]=N.useState(""),[v,m]=N.useState(""),[y,x]=N.useState([]),[g,S]=N.useState([]),[w,_]=N.useState([]),[j,E]=N.useState({type:"transport",montant:"",description:""}),[A,P]=N.useState({general:!0,technique:t==="technique",financier:t==="financier",cloture:t==="cloture"});N.useEffect(()=>{if(e){try{const $=e.commentaires_techniques;Array.isArray($)?x($):typeof $=="string"&&x(JSON.parse($)||[])}catch{x([])}try{const $=e.commentaires_financiers;Array.isArray($)?S($):typeof $=="string"&&S(JSON.parse($)||[])}catch{S([])}try{const $=e.depenses_details||e.expenses||e.depenses||[];Array.isArray($)?_($):typeof $=="string"&&_(JSON.parse($)||[])}catch{_([])}}},[e==null?void 0:e.id]);const O=[{value:"transport",label:" Transport / Fuel"},{value:"hotel",label:" Htel"},{value:"repas",label:" Repas"},{value:"divers",label:" Divers"}],T=$=>{P(J=>({...J,[$]:!J[$]}))},M=async()=>{if(p.trim()){const $={id:Date.now(),texte:p,auteur:(i==null?void 0:i.email)||"Utilisateur",date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},J=[...y,$];x(J),b("");try{const I=await Ot.saveCommentairesTechniques(e.id,J);I!=null&&I.local?alert(` Commentaire stock localement

Les colonnes commentaires ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Commentaire technique sauvegard en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert(` Commentaire stock localement

Excutez la migration SQL pour la persistance.`)}}},B=async()=>{if(v.trim()){const $={id:Date.now(),texte:v,auteur:(i==null?void 0:i.email)||"Utilisateur",date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},J=[...g,$];S(J),m("");try{const I=await Ot.saveCommentairesFinanciers(e.id,J);I!=null&&I.local?alert(` Commentaire stock localement

Les colonnes commentaires ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Commentaire financier sauvegard en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert(` Commentaire stock localement

Excutez la migration SQL pour la persistance.`)}}},C=async()=>{if(j.montant&&j.montant>0){const $={id:Date.now(),...j,montant:parseFloat(j.montant),date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),auteur:(i==null?void 0:i.email)||"Utilisateur"},J=[...w,$];_(J),E({type:"transport",montant:"",description:""});try{const I=await Ot.saveDpenses(e.id,J);I!=null&&I.local?alert(` Dpense stocke localement

Les colonnes dpenses ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Dpense sauvegarde en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert(` Dpense stocke localement

Excutez la migration SQL pour la persistance.`)}}},L=async $=>{const J=w.filter(I=>I.id!==$);_(J);try{await Ot.saveDpenses(e.id,J),console.log(" Dpense supprime et sauvegarde en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert("Erreur lors de la suppression de la dpense")}},G=async $=>{const J=y.filter(I=>I.id!==$);x(J);try{await Ot.saveCommentairesTechniques(e.id,J),console.log(" Commentaire technique supprim et sauvegard en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert("Erreur lors de la suppression du commentaire")}},R=async $=>{const J=g.filter(I=>I.id!==$);S(J);try{await Ot.saveCommentairesFinanciers(e.id,J),console.log(" Commentaire financier supprim et sauvegard en base")}catch(I){console.error(" Erreur sauvegarde:",I),alert("Erreur lors de la suppression du commentaire")}},D=async()=>{if(window.confirm(` tes-vous certain de vouloir dmarrer cette mission?
Le statut passera  "En cours".`))try{if(await Ot.startMission(e.id)){f({type:"success",message:" Mission dmarre avec succs"});const J={...e,statut:"en_cours"};setTimeout(()=>{r()},800)}}catch($){console.error("Erreur handleStartMission:",$),f({type:"success",message:" Mission dmarre"}),setTimeout(()=>{r()},800)}},W=u!==void 0?u:(a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="super_admin",Y=(e==null?void 0:e.chefMissionId)===(i==null?void 0:i.id)||(e==null?void 0:e.chef_mission_id)===(i==null?void 0:i.id),F=(me=e==null?void 0:e.accompagnateurs_ids)==null?void 0:me.includes(i==null?void 0:i.id),V=Y&&W,U=Y||F||W,ge=(e==null?void 0:e.cloturee_par_chef)||(e==null?void 0:e.cloturee_definitive),le=ge?W||V:Y,Se=Y||W,fe=W,Q=Y&&((e==null?void 0:e.statut)==="creee"||(e==null?void 0:e.statut)==="planifiee")&&!ge,Z=w.reduce(($,J)=>$+(parseFloat(J.montant)||0),0),ee=parseFloat((e==null?void 0:e.budgetInitial)||(e==null?void 0:e.budget_alloue))||0,k=ee>0?Math.round(Z/ee*100):0,ie=ee-Z,ue=$=>({creee:"Planifie",planifiee:"Planifie",en_cours:"En cours",cloturee:"Clture",validee:"Valide"})[$]||$,ce=({section:$,label:J})=>o.jsxs("button",{onClick:()=>T($),className:"w-full flex items-center justify-between bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary p-4 rounded-lg font-semibold text-white transition-colors",children:[o.jsx("span",{children:J}),A[$]?o.jsx(Kn,{size:20}):o.jsx(yn,{size:20})]});return o.jsxs("div",{className:"space-y-4",children:[!U&&o.jsxs("div",{className:"p-6 bg-red-50 border-2 border-red-300 rounded-lg text-center",children:[o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx(Sm,{size:40,className:"text-red-600"})}),o.jsx("p",{className:"font-bold text-red-900 text-lg",children:" Accs Refus"}),o.jsx("p",{className:"text-red-800 mt-2",children:"Vous n'avez pas accs  cette mission. Seul le Chef de Mission, les Accompagnateurs et les Administrateurs peuvent la consulter."}),o.jsx("button",{onClick:r,className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium",children:"Fermer"})]}),U&&o.jsxs(o.Fragment,{children:[ge&&o.jsx("div",{className:`p-4 rounded-lg border-l-4 ${V?"bg-blue-50 border-blue-400 text-blue-800":W?"bg-yellow-50 border-yellow-400 text-yellow-800":"bg-red-50 border-red-400 text-red-800"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fi,{size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:" Mission Clture"}),o.jsx("p",{className:"text-sm",children:V?" Vous tes Chef de Mission avec rle Admin - dition complte autorise":W?" Seul un administrateur peut modifier cette mission.":"Cette mission est clture et ne peut plus tre modifie."})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-dark text-white rounded-lg p-6 shadow-lg",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.titre}),o.jsx("p",{className:"text-primary-light mb-4 text-sm",children:e.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pt-4 border-t border-white border-opacity-30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(fl,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Client"}),o.jsx("p",{className:"font-semibold",children:((Ne=e.client)==null?void 0:Ne.raison_sociale)||"N/A"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(li,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Wilaya"}),o.jsx("p",{className:"font-semibold",children:e.wilaya||e.lieu||"N/A"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Nr,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Statut"}),o.jsx("p",{className:"font-semibold",children:ue(e.statut)})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 bg-white bg-opacity-30 rounded flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Type"}),o.jsx("p",{className:"font-semibold",children:e.type})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_m,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Budget"}),o.jsxs("p",{className:"font-semibold",children:[(e.budgetInitial||e.budget_alloue||0).toLocaleString("fr-DZ")," DA"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 bg-white bg-opacity-30 rounded flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Avancement"}),o.jsxs("p",{className:"font-semibold",children:[e.avancement||0,"%"]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[o.jsx("button",{onClick:()=>{h("general"),P($=>({...$,general:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${d==="general"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Gnral"}),o.jsx("button",{onClick:()=>{h("technique"),P($=>({...$,technique:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${d==="technique"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Technique"}),o.jsx("button",{onClick:()=>{h("financier"),P($=>({...$,financier:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${d==="financier"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Financier"}),o.jsx("button",{onClick:()=>{h("cloture"),P($=>({...$,cloture:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${d==="cloture"?"bg-white text-red-600 shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Clture"})]}),d==="general"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ce,{section:"general",label:" Informations Gnrales"}),A.general&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4 border-l-4 border-primary",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Client"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1 font-medium",children:((re=e.client)==null?void 0:re.raison_sociale)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Dates Prvues"}),o.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:[new Date(e.dateDebut||e.date_debut).toLocaleDateString("fr-FR"),"  ",new Date(e.dateFin||e.date_fin_prevue).toLocaleDateString("fr-FR")]})]}),e.date_demarrage&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-green-600 uppercase font-semibold",children:" Dmarre le"}),o.jsx("p",{className:"text-sm text-green-900 mt-1 font-semibold",children:new Date(e.date_demarrage).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),e.date_cloture_reelle&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-red-600 uppercase font-semibold",children:" Clture le"}),o.jsx("p",{className:"text-sm text-red-900 mt-1 font-semibold",children:new Date(e.date_cloture_reelle).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Priorit"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1",children:((q=e.priorite)==null?void 0:q.charAt(0).toUpperCase())+((oe=e.priorite)==null?void 0:oe.slice(1))})]})}),e.commentaireCreation&&o.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold mb-1",children:"Notes  la cration"}),o.jsx("p",{className:"text-sm text-blue-900",children:e.commentaireCreation})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Chef de Mission"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1",children:e.chef_name||"Non assign"})]}),Q&&o.jsxs("div",{className:"pt-2",children:[o.jsx(Ae,{onClick:D,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2 py-3 font-semibold",children:" Dmarrer la Mission"}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:'Le statut passera  "En cours"'})]}),!Q&&((e==null?void 0:e.statut)==="creee"||(e==null?void 0:e.statut)==="planifiee")&&o.jsx("div",{className:"p-3 bg-amber-50 rounded border border-amber-200 text-sm text-amber-900",children:o.jsxs("p",{children:[o.jsx("strong",{children:" Info:"})," Seul le Chef de Mission peut dmarrer cette mission."]})})]})]}),d==="technique"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ce,{section:"technique",label:" Volet Technique"}),A.technique&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4 border-l-4 border-primary",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold mb-2",children:"Rapport Technique"}),o.jsx("p",{className:"text-sm text-gray-900 bg-white p-3 rounded",children:e.rapportTechnique||"Pas encore document"})]}),e.actionsRealisees&&e.actionsRealisees.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold mb-2",children:"Actions Ralises"}),o.jsx("ul",{className:"space-y-2",children:e.actionsRealisees.map(($,J)=>o.jsxs("li",{className:"text-sm bg-white p-2 rounded border-l-2 border-green-500",children:[" ",$]},J))})]}),o.jsxs("div",{className:`bg-white p-4 rounded-lg border ${le?"border-gray-200":"border-red-300 bg-red-50 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter un Commentaire Technique"}),!le&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{value:p,onChange:$=>b($.target.value),placeholder:"Observations techniques, remarques sur l'excution, problmes rencontrs...",rows:"3",disabled:!le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"}),o.jsx(Ae,{onClick:M,disabled:!le,className:`w-full flex items-center justify-center gap-2 ${le?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:" Enregistrer le Commentaire"})]})]}),y.length>0&&o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:" Historique des Commentaires Techniques"}),o.jsx("div",{className:"space-y-3",children:y.map($=>o.jsx("div",{className:"bg-white p-3 rounded border-l-4 border-blue-500",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-900",children:$.texte}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[o.jsxs("span",{children:[" ",$.auteur]}),o.jsxs("span",{children:[" ",$.date_affichage]})]})]}),o.jsx("button",{onClick:()=>G($.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(Er,{size:16})})]})},$.id))})]})]})]}),d==="financier"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ce,{section:"financier",label:" Volet Financier"}),A.financier&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Budget Initial"}),o.jsxs("p",{className:"text-xl font-bold text-blue-900 mt-1",children:[ee.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${k>80?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${k>80?"text-red-600":"text-orange-600"}`,children:"Dpenses"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${k>80?"text-red-900":"text-orange-900"}`,children:[Z.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${ie<0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${ie<0?"text-red-600":"text-green-600"}`,children:"Restant"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${ie<0?"text-red-900":"text-green-900"}`,children:[ie.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${k>80?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${k>80?"text-red-600":"text-yellow-600"}`,children:"Utilisation"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${k>80?"text-red-900":"text-yellow-900"}`,children:[k,"%"]})]})]}),k>80&&o.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded flex gap-3",children:[o.jsx(pt,{className:"text-red-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-900",children:" Dpassement Budgtaire!"}),o.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["Budget utilis  ",k,"%. Attention  ne pas dpasser la limite."]})]})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${le?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter une Dpense"}),!le&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Dpense"}),o.jsx("select",{value:j.type,onChange:$=>E({...j,type:$.target.value}),disabled:!le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed",children:O.map($=>o.jsx("option",{value:$.value,children:$.label},$.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (DA)"}),o.jsx(Je,{type:"number",value:j.montant,onChange:$=>E({...j,montant:$.target.value}),placeholder:"0.00",disabled:!le})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:j.description,onChange:$=>E({...j,description:$.target.value}),placeholder:"Dtails de la dpense...",rows:"2",disabled:!le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),o.jsxs(Ae,{onClick:C,disabled:!le,className:`w-full flex items-center justify-center gap-2 ${le?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:[o.jsx(vi,{size:18}),"Ajouter la Dpense"]})]})]}),w.length>0&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:[" Dpenses Enregistres (",w.length,")"]}),o.jsx("div",{className:"space-y-2",children:w.map($=>{var J;return o.jsxs("div",{className:"flex items-start justify-between bg-white p-3 rounded border border-gray-200",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-900",children:(J=O.find(I=>I.value===$.type))==null?void 0:J.label}),o.jsx("p",{className:"text-sm text-gray-600",children:$.description}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",$.auteur||"Utilisateur"]}),o.jsxs("span",{children:[" ",$.date_affichage||new Date($.date_creation).toLocaleDateString("fr-FR")]})]})]}),o.jsx("div",{className:"text-right mr-3 min-w-fit",children:o.jsxs("p",{className:"font-semibold text-gray-900",children:[$.montant.toLocaleString("fr-DZ")," DA"]})}),o.jsx("button",{onClick:()=>L($.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(Er,{size:18})})]},$.id)})})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${le?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter un Commentaire Financier"}),!le&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsx("textarea",{value:v,onChange:$=>m($.target.value),placeholder:"Vos observations ou commentaires financiers...",rows:"3",disabled:!le,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"}),o.jsx(Ae,{onClick:B,disabled:!le,className:`mt-2 w-full ${le?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:" Enregistrer le Commentaire"})]}),g.length>0&&o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:" Historique des Commentaires Financiers"}),o.jsx("div",{className:"space-y-3",children:g.map($=>o.jsx("div",{className:"bg-white p-3 rounded border-l-4 border-green-500",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-900",children:$.texte}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[o.jsxs("span",{children:[" ",$.auteur]}),o.jsxs("span",{children:[" ",$.date_affichage]})]})]}),o.jsx("button",{onClick:()=>R($.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(Er,{size:16})})]})},$.id))})]})]})]}),d==="cloture"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-yellow-900",children:[o.jsx("strong",{children:" Statut actuel:"})," ",ue(e.statut)]})}),ge&&o.jsxs("div",{className:"p-4 bg-green-50 border border-green-300 rounded-lg flex gap-3",children:[o.jsx(Nr,{className:"text-green-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:" Mission Clture"}),o.jsxs("p",{className:"text-sm text-green-800 mt-1",children:["Cette mission a t clture ",e.date_cloture_reelle?`le ${new Date(e.date_cloture_reelle).toLocaleDateString("fr-FR")}`:"",".",!W&&" Seul un administrateur peut la modifier."]})]})]}),!Se&&e.statut!=="cloturee"&&e.statut!=="validee"&&o.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex gap-3",children:[o.jsx(Sm,{className:"text-red-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-900",children:" Accs Restreint"}),o.jsx("p",{className:"text-sm text-red-800 mt-1",children:"Vous n'avez pas les permissions ncessaires pour clturer cette mission. Seul le Chef de Mission ou un Admin peut clturer."})]})]}),Se&&e.statut!=="cloturee"&&e.statut!=="validee"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"Actions de Clture Disponibles:"}),e.statut==="en_cours"&&Y&&o.jsx(Ae,{onClick:()=>{n&&n({type:"chef",totalExpenses:w.reduce(($,J)=>$+(J.montant||0),0)})},className:"w-full bg-amber-500 hover:bg-amber-600 text-white flex items-center justify-center gap-2",children:" Clturer par Chef de Mission"}),fe&&o.jsxs(Ae,{onClick:()=>n({type:"admin",totalExpenses:w.reduce(($,J)=>$+(J.montant||0),0)}),className:"w-full bg-red-600 hover:bg-red-700 text-white flex items-center justify-center gap-2",children:[o.jsx(fi,{size:18})," Clture Dfinitive (Admin)"]}),!fe&&Y&&o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-900",children:o.jsxs("p",{children:[o.jsx("strong",{children:" Info:"}),` Le bouton "Clture Dfinitive (Admin)" n'est accessible qu'aux administrateurs.`]})})]}),(e.statut==="cloturee"||e.statut==="validee")&&o.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex gap-3",children:[o.jsx(Nr,{className:"text-green-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:" Mission Clture"}),o.jsx("p",{className:"text-sm text-green-800 mt-1",children:"Cette mission a t clture et valide."})]})]}),W&&o.jsxs("div",{className:"flex gap-3 mt-6 flex-wrap",children:[e.statut!=="validee"&&s&&o.jsxs(Ae,{onClick:()=>{s(e),r()},className:"flex-1 min-w-[120px] bg-green-50 text-green-600 hover:bg-green-100 rounded-lg py-2 font-medium flex items-center justify-center gap-2",title:"Valider cette mission",children:[o.jsx(Nr,{size:16}),"Valider"]}),e.statut!=="cloturee"&&l&&o.jsxs(Ae,{onClick:()=>{l(e),r()},className:"flex-1 min-w-[120px] bg-orange-50 text-orange-600 hover:bg-orange-100 rounded-lg py-2 font-medium flex items-center justify-center gap-2",title:"Clturer cette mission",children:[o.jsx(pt,{size:16}),"Clturer"]}),c&&o.jsxs(Ae,{onClick:()=>{c(e),r()},className:"flex-1 min-w-[120px] bg-red-50 text-red-600 hover:bg-red-100 rounded-lg py-2 font-medium flex items-center justify-center gap-2",title:"Supprimer cette mission (Admin - Irrversible)",children:[o.jsx(Er,{size:16}),"Supprimer"]})]})]})]})]})},_te=({analysisData:e,loading:t})=>{const[r,n]=N.useState({risks:!0,anomalies:!0,metrics:!0,trends:!0,recommendations:!0}),i=h=>{n(p=>({...p,[h]:!p[h]}))};if(!e)return o.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200 text-center",children:o.jsx("p",{className:"text-gray-500",children:`Aucune analyse disponible. Cliquez sur "Analyser avec l'IA" pour gnrer une analyse.`})});const{missionMetrics:a,riskLevels:s,anomalies:l,performanceMetrics:c,trends:u,recommendations:f,summary:d}=e;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Total Missions"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:d.totalMissions})]}),o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[o.jsx("p",{className:"text-sm text-red-600 font-semibold",children:"Critique"}),o.jsx("p",{className:"text-2xl font-bold text-red-900",children:d.criticalMissions})]}),o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("p",{className:"text-sm text-yellow-600 font-semibold",children:"Avertissement"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:d.warningMissions})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[o.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Compltion"}),o.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[d.completionRate,"%"]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("risks"),className:"bg-gradient-to-r from-red-500 to-red-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pt,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Risques Identifis (",d.criticalMissions+d.warningMissions," missions)"]})]}),r.risks?o.jsx(Kn,{size:20,className:"text-white"}):o.jsx(yn,{size:20,className:"text-white"})]}),r.risks&&o.jsxs("div",{className:"p-4 space-y-3",children:[s.critique.length>0&&o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:" Missions Critiques"}),o.jsx("div",{className:"space-y-2",children:s.critique.map(h=>o.jsxs("div",{className:"text-sm text-red-800 p-2 bg-white rounded border-l-4 border-red-500",children:[o.jsx("p",{className:"font-semibold",children:h.titre}),o.jsxs("p",{className:"text-xs mt-1",children:["Score risque: ",o.jsxs("span",{className:"font-bold",children:[h.riskScore,"/100"]})," |",h.daysLeft," jour(s) restant(s) | Budget: ",h.budgetPercent,"%"]})]},h.id))})]}),s.avertissement.length>0&&o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:" Missions  Surveiller"}),o.jsxs("div",{className:"space-y-2",children:[s.avertissement.slice(0,3).map(h=>o.jsxs("div",{className:"text-sm text-yellow-800 p-2 bg-white rounded border-l-4 border-yellow-500",children:[o.jsx("p",{className:"font-semibold",children:h.titre}),o.jsxs("p",{className:"text-xs mt-1",children:["Score risque: ",o.jsxs("span",{className:"font-bold",children:[h.riskScore,"/100"]})]})]},h.id)),s.avertissement.length>3&&o.jsxs("p",{className:"text-xs text-yellow-600 italic",children:["+",s.avertissement.length-3," autre(s)..."]})]})]}),s.critique.length===0&&s.avertissement.length===0&&o.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-green-800 font-semibold",children:" Aucune mission critique - Bonne sant du portefeuille"})})]})]}),l.length>0&&o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("anomalies"),className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pt,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Anomalies Dtectes (",l.length,")"]})]}),r.anomalies?o.jsx(Kn,{size:20,className:"text-white"}):o.jsx(yn,{size:20,className:"text-white"})]}),r.anomalies&&o.jsx("div",{className:"p-4 space-y-3",children:l.map((h,p)=>o.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${h.severity==="critique"?"bg-red-50 border-red-500":h.severity==="haute"?"bg-orange-50 border-orange-500":"bg-yellow-50 border-yellow-500"}`,children:[o.jsx("h4",{className:`font-semibold mb-1 ${h.severity==="critique"?"text-red-900":h.severity==="haute"?"text-orange-900":"text-yellow-900"}`,children:h.title}),o.jsx("p",{className:"text-sm text-gray-700 mb-2",children:h.description}),o.jsxs("p",{className:"text-xs font-semibold text-gray-800 bg-white bg-opacity-50 p-2 rounded",children:[" Action: ",h.action]})]},p))})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("metrics"),className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Xn,{size:20,className:"text-white"}),o.jsx("span",{className:"text-white font-semibold",children:" Mtriques de Performance"})]}),r.metrics?o.jsx(Kn,{size:20,className:"text-white"}):o.jsx(yn,{size:20,className:"text-white"})]}),r.metrics&&o.jsxs("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:"Taux Compltion"}),o.jsxs("p",{className:"text-xl font-bold text-blue-900",children:[c.tauxCompletion,"%"]})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:[o.jsx("p",{className:"text-xs text-green-600 font-semibold",children:"Efficience Budget"}),o.jsxs("p",{className:"text-xl font-bold text-green-900",children:[c.budgetEfficiency,"%"]})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 font-semibold",children:"Avancement Moyen"}),o.jsxs("p",{className:"text-xl font-bold text-purple-900",children:[c.averageProgress,"%"]})]}),o.jsxs("div",{className:"bg-indigo-50 p-3 rounded border border-indigo-200",children:[o.jsx("p",{className:"text-xs text-indigo-600 font-semibold",children:"Taux Retard"}),o.jsxs("p",{className:"text-xl font-bold text-indigo-900",children:[c.tauxRetard,"%"]})]}),o.jsxs("div",{className:"bg-orange-50 p-3 rounded border border-orange-200",children:[o.jsx("p",{className:"text-xs text-orange-600 font-semibold",children:"Charge Moyenne"}),o.jsxs("p",{className:"text-xl font-bold text-orange-900",children:[Math.round(c.missionCount/Math.max(c.chefCount,1))," / chef"]})]}),o.jsxs("div",{className:"bg-cyan-50 p-3 rounded border border-cyan-200",children:[o.jsx("p",{className:"text-xs text-cyan-600 font-semibold",children:"Chefs Assigns"}),o.jsx("p",{className:"text-xl font-bold text-cyan-900",children:c.chefCount})]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("trends"),className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(rn,{size:20,className:"text-white"}),o.jsx("span",{className:"text-white font-semibold",children:" Tendances & Prdictions"})]}),r.trends?o.jsx(Kn,{size:20,className:"text-white"}):o.jsx(yn,{size:20,className:"text-white"})]}),r.trends&&o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-blue-900",children:"Vlocit"}),o.jsx("span",{className:"text-2xl",children:u.velocity.icon})]}),o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.velocity.status})," - ",u.velocity.value," missions/semaine"]})]}),o.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-green-900",children:"Budget"}),o.jsx("span",{className:"text-2xl",children:u.budget.icon})]}),o.jsxs("p",{className:"text-sm text-green-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.budget.status})," - ",u.budget.percent,"% d'efficience"]})]}),o.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-orange-900",children:"Dlais"}),o.jsx("span",{className:"text-2xl",children:u.deadline.icon})]}),o.jsxs("p",{className:"text-sm text-orange-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.deadline.status})," - ",u.deadline.value," jours en moyenne"]})]}),o.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-red-900",children:"Charge quipe"}),o.jsx("span",{className:"text-2xl",children:u.teamLoad.icon})]}),o.jsxs("p",{className:"text-sm text-red-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.teamLoad.status})," - ",u.teamLoad.value," missions par chef"]})]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("recommendations"),className:"bg-gradient-to-r from-green-500 to-green-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(QI,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Recommandations (",f.length,")"]})]}),r.recommendations?o.jsx(Kn,{size:20,className:"text-white"}):o.jsx(yn,{size:20,className:"text-white"})]}),r.recommendations&&o.jsx("div",{className:"p-4 space-y-3",children:f.map((h,p)=>o.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${h.severity==="critique"?"bg-red-50 border-red-500":h.severity==="avertissement"?"bg-yellow-50 border-yellow-500":h.severity==="success"?"bg-green-50 border-green-500":"bg-blue-50 border-blue-500"}`,children:[o.jsxs("h4",{className:`font-semibold mb-1 flex items-center gap-2 ${h.severity==="critique"?"text-red-900":h.severity==="avertissement"?"text-yellow-900":h.severity==="success"?"text-green-900":"text-blue-900"}`,children:[o.jsx("span",{children:h.icon}),h.title]}),o.jsx("p",{className:"text-sm text-gray-700 mb-2",children:h.description}),o.jsxs("div",{className:`text-xs font-semibold p-2 rounded ${h.severity==="critique"?"bg-red-100 text-red-900":h.severity==="avertissement"?"bg-yellow-100 text-yellow-900":h.severity==="success"?"bg-green-100 text-green-900":"bg-blue-100 text-blue-900"}`,children:[" ",h.action]})]},p))})]})]})},jte=(e,t)=>{const r=new Date(e.dateFin||e.date_fin_prevue),n=new Date(e.dateDebut||e.date_debut_prevue),i=Math.ceil((r-t)/(1e3*60*60*24)),a=Math.ceil((t-n)/(1e3*60*60*24)),s=Math.ceil((r-n)/(1e3*60*60*24)),l=e.budgetInitial||e.budget_alloue||0,c=e.depenses||0,u=l>0?c/l*100:0,f=e.avancement||0,d=s>0?a/s*100:0,h=f-d;let p=0;return(e.statut==="en_cours"||e.statut==="en-cours")&&(i<1?p+=40:i<3?p+=30:i<7?p+=20:i<14&&(p+=10),u>120?p+=35:u>100?p+=25:u>85&&(p+=15),h<-30?p+=30:h<-15?p+=20:h<-5&&(p+=10)),Math.min(Math.max(p,0),100)},Ste=(e,t)=>{const r=new Date;return e.map(i=>{const a=new Date(i.dateFin||i.date_fin_prevue),s=new Date(i.dateDebut||i.date_debut_prevue),l=Math.ceil((a-r)/(1e3*60*60*24)),c=Math.ceil((r-s)/(1e3*60*60*24)),u=Math.ceil((a-s)/(1e3*60*60*24)),f=i.budgetInitial||i.budget_alloue||0,d=i.depenses||0,h=f>0?d/f*100:0,p=f-d,b=i.avancement||0,v=u>0?c/u*100:0,m=b-v;return{id:i.id,titre:i.titre,statut:i.statut,avancementActuel:b,avancementPrvu:Math.round(v),cartAvancement:Math.round(m),budgetPercent:Math.round(h),budget:Math.round(f),depenses:Math.round(d),budgetRemaining:Math.round(p),daysLeft:l,daysElapsed:c,totalDuration:u,type:i.type||"Gnral",priorite:i.priorite||"normale",chefMission:i.chef_name||i.chef_id||"Non assign",riskScore:jte(i,r)}})},Nte=e=>({critique:e.filter(t=>t.riskScore>=70),avertissement:e.filter(t=>t.riskScore>=40&&t.riskScore<70),normal:e.filter(t=>t.riskScore<40)}),Ete=e=>{const t=[];return e.forEach(r=>{r.cartAvancement<-15&&(r.statut==="en_cours"||r.statut==="en-cours")&&t.push({type:"retard_chronologique",mission:r,severity:"haute",title:` Retard Chronologique: ${r.titre}`,description:`${Math.abs(r.cartAvancement)}% en retard sur le calendrier prvu`,action:"Acclrer l'excution ou reprogrammer"}),r.budgetPercent>120&&t.push({type:"depassement_budget",mission:r,severity:r.budgetPercent>150?"critique":"haute",title:` Dpassement Budget: ${r.titre}`,description:`Dpassement de ${Math.round(r.budgetPercent-100)}% (${r.depenses} / ${r.budget})`,action:"Revoir le budget ou demander crdits supplmentaires"}),r.cartAvancement>20&&(r.statut==="en_cours"||r.statut==="en-cours")&&t.push({type:"qualite_suspecte",mission:r,severity:"moyenne",title:` Progression Rapide: ${r.titre}`,description:`${r.cartAvancement}% d'avance sur le calendrier - vrifier la qualit`,action:"Audit qualit pour confirmer la conformit"}),r.daysLeft<3&&r.avancementActuel<80&&t.push({type:"urgence_inachevement",mission:r,severity:"critique",title:` CRITIQUE: ${r.titre}`,description:`${r.daysLeft} jour(s) restant(s), seulement ${r.avancementActuel}% complt`,action:"Intervention immdiate requise"})}),t.sort((r,n)=>{const i={critique:3,haute:2,moyenne:1};return(i[n.severity]||0)-(i[r.severity]||0)})},Ate=(e,t)=>({tauxCompletion:t.total>0?Math.round(t.validees/t.total*100):0,tauxRetard:t.total>0?Math.round(t.delaiees/t.total*100):0,budgetEfficiency:t.budgetTotal>0?Math.round((t.budgetTotal-t.depensesTotal)/t.budgetTotal*100):0,averageProgress:t.enCours>0?Math.round(e.filter(r=>r.statut==="en_cours"||r.statut==="en-cours").reduce((r,n)=>r+(n.avancement||0),0)/Math.max(t.enCours,1)):0,missionCount:e.length,chefCount:new Set(e.map(r=>r.chef_id)).size}),Pte=(e,t)=>{const n=e.filter(f=>f.statut==="validee"||f.statut==="cloturee").length/Math.max(e.length,1),i=Math.round(n*10)/10,a=e.filter(f=>f.budgetPercent<=100).length/Math.max(e.length,1)*100,l=e.filter(f=>f.daysLeft>=7||f.statut!=="en_cours"&&f.statut!=="en-cours").length/Math.max(e.length,1),c=e.filter(f=>f.statut==="en_cours"||f.statut==="en-cours").reduce((f,d)=>f+Math.max(0,d.daysLeft),0)/Math.max(e.filter(f=>f.statut==="en_cours"||f.statut==="en-cours").length,1),u=t.missionCount/Math.max(t.chefCount,1);return{velocity:{status:n>.4?"improving":n>.2?"stable":"declining",value:i,icon:n>.4?"":n>.2?"":""},budget:{status:a>70?"sain":a>50?"moyen":"critique",percent:Math.round(a),icon:a>70?"":a>50?"":""},deadline:{status:l>.7?"contrle":"serre",value:Math.round(c),icon:l>.7?"":""},teamLoad:{status:u>5?"leve":"normale",value:Math.round(u*10)/10,icon:u>5?"":""}}},Ote=(e,t,r,n,i)=>{const a=[];t.critique.length>0&&a.push({priority:"urgent",severity:"critique",icon:"",title:`INTERVENTION IMMDIATE: ${t.critique.length} Mission(s) Critique(s)`,description:`Les missions suivantes ncessitent une action immdiate: ${t.critique.slice(0,2).map(c=>c.titre).join(", ")}${t.critique.length>2?"...":""}`,action:"Runion de crise - Allouer ressources supplmentaires"});const s=r.filter(c=>c.severity==="critique");s.length>0&&a.push({priority:"urgent",severity:"critique",icon:"",title:`${s.length} Anomalie(s) Critique(s)`,description:s[0].description,action:s[0].action}),n.tauxCompletion<60&&a.push({priority:"haute",severity:"avertissement",icon:"",title:"Taux de Compltion Faible",description:`${n.tauxCompletion}% de compltion (objectif: 80%+). Revoir la planification ou augmenter les ressources.`,action:"Analyser les goulots d'tranglement et les blocages"});const l=e.filter(c=>c.budgetPercent>100);return l.length>e.length*.3&&a.push({priority:"haute",severity:"avertissement",icon:"",title:"Dpassements Budgtaires Rcurrents",description:`${l.length} mission(s) en dpassement. Plus de 30% du portefeuille affect.`,action:"Revoir le modle d'estimation et les marges de scurit"}),n.tauxCompletion>0&&n.tauxCompletion<30&&a.push({priority:"moyenne",severity:"info",icon:"",title:"Vlocit  Optimiser",description:"La cadence actuelle laisse peu de marge. Considrer une augmentation de capacit.",action:"valuer les ressources disponibles et la charge de travail"}),n.tauxCompletion>70&&t.critique.length===0&&a.push({priority:"info",severity:"success",icon:"",title:"Excellent Taux de Compltion",description:`Performance de ${n.tauxCompletion}% - quipe en excellente trajectoire.`,action:"Maintenir la dynamique actuelle"}),a},Tte=(e,t)=>{const r=Ste(e),n=Nte(r),i=Ete(r),a=Ate(e,t),s=Pte(r,a),l=Ote(r,n,i,a);return{missionMetrics:r,riskLevels:n,anomalies:i,performanceMetrics:a,trends:s,recommendations:l,summary:{totalMissions:e.length,criticalMissions:n.critique.length,warningMissions:n.avertissement.length,normalMissions:n.normal.length,detectedAnomalies:i.length,completionRate:a.tauxCompletion,budgetHealth:a.budgetEfficiency}}},Cte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState(""),[h,p]=N.useState("all"),[b,v]=N.useState(""),[m,y]=N.useState(""),[x,g]=N.useState("all"),[S,w]=N.useState(!1),[_,j]=N.useState(!1),[E,A]=N.useState(!1),[P,O]=N.useState(null),[T,M]=N.useState(null),[B,C]=N.useState(null),[L,G]=N.useState(null),[R,D]=N.useState(!1),[W,Y]=N.useState(!1),{addNotification:F}=rr(),{user:V,profile:U}=Nt(),ge=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin",le=[{id:1,titre:"Installation Systme ERP",description:"Installation complte du systme ERP client ABC",client:{id:1,raison_sociale:"Entreprise ABC"},lieu:"Alger",dateDebut:"2025-11-20",dateFin:"2025-11-25",budgetInitial:5e4,statut:"en_cours",type:"Installation",participants:[{id:1,nom:"Jean Dupont",role:"Technicien"}],priorite:"haute",avancement:65,dureePrevue:5,durationReelle:3,depenses:21500},{id:2,titre:"Formation quipe Support",description:"Formation sur la nouvelle plateforme logicielle",client:{id:2,raison_sociale:"Socit XYZ"},lieu:"Oran",dateDebut:"2025-11-22",dateFin:"2025-11-23",budgetInitial:15e3,statut:"planifiee",type:"Formation",participants:[{id:2,nom:"Marie Martin",role:"Formateur"}],priorite:"moyenne",avancement:0,dureePrevue:2,durationReelle:0,depenses:0},{id:3,titre:"Support Technique Urgent",description:"Intervention d'urgence pour panne systme",client:{id:3,raison_sociale:"Client DEF"},lieu:"Constantine",dateDebut:"2025-11-19",dateFin:"2025-11-20",budgetInitial:8e3,statut:"validee",type:"Support",participants:[{id:3,nom:"Pierre Lefevre",role:"Technicien"}],priorite:"critique",avancement:100,dureePrevue:1,durationReelle:1.5,depenses:6800},{id:4,titre:"Maintenance Serveurs",description:"Maintenance prventive serveurs client",client:{id:4,raison_sociale:"Tech Solutions"},lieu:"Annaba",dateDebut:"2025-11-25",dateFin:"2025-11-27",budgetInitial:12e3,statut:"creee",type:"Maintenance",participants:[{id:1,nom:"Jean Dupont",role:"Technicien"}],priorite:"moyenne",avancement:0,dureePrevue:2,durationReelle:0,depenses:0},{id:5,titre:"Audit Scurit",description:"Audit complet de scurit informatique",client:{id:5,raison_sociale:"Finance Pro"},lieu:"Blida",dateDebut:"2025-11-21",dateFin:"2025-11-24",budgetInitial:25e3,statut:"en_cours",type:"Audit",participants:[{id:4,nom:"Sophie Durand",role:"Auditeur"}],priorite:"haute",avancement:45,dureePrevue:3,durationReelle:2,depenses:8900}];N.useEffect(()=>{Se()},[]),N.useEffect(()=>{V!=null&&V.id&&U&&fe()},[e,f,h,b,m,x,V==null?void 0:V.id,U]);const Se=async()=>{try{u(!0);const I=await Ot.testTableAccess();console.log("Missions table access test:",I);const H=(await Ct.getAll()).filter(te=>te.statut==="actif");a(H);try{const te=await Ue.getAll();console.log("Users loaded:",te==null?void 0:te.length,"users",te),l(te||[])}catch(te){console.error("Erreur chargement utilisateurs:",te),l([])}try{const Ee=(await Ot.getAll()||[]).map(xe=>{const _e=xe.prospect_id||xe.clientId,Ks=_e?H.find(Xf=>Xf.id===_e):null,Xs=xe.client||Ks||{id:_e,raison_sociale:"Client"};return{...xe,type:xe.type_mission||xe.type,budgetInitial:xe.budget_alloue||xe.budgetInitial||0,depenses:xe.budget_depense||xe.depenses||0,avancement:xe.avancement||0,client:Xs}});console.log("Missions transformed:",Ee),t(Ee)}catch(te){console.warn("Missions BD non disponibles, utilisation des donnes mockes:",te),t(le)}}catch(I){console.error("Erreur:",I),F({type:"error",message:"Erreur lors du chargement des donnes"})}finally{u(!1)}},fe=()=>{let I=[...e];const se=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin";I=I.filter(H=>{var _e;const te=H.chefMissionId===(V==null?void 0:V.id)||H.chef_mission_id===(V==null?void 0:V.id),Ee=(_e=H.accompagnateurs_ids)==null?void 0:_e.includes(V==null?void 0:V.id);return te||se||Ee}),h!=="all"&&(I=I.filter(H=>h==="planifiee"?H.statut==="planifiee"||H.statut==="creee":H.statut===h)),b&&(I=I.filter(H=>{const te=new Date(H.dateDebut||H.date_debut),Ee=new Date(b);return te>=Ee})),m&&(I=I.filter(H=>{const te=new Date(H.dateDebut||H.date_debut),Ee=new Date(m);return te<=Ee})),x!=="all"&&(I=I.filter(H=>H.chefMissionId===x||H.chef_mission_id===x)),f&&(I=I.filter(H=>{var te,Ee,xe;return((te=H.titre)==null?void 0:te.toLowerCase().includes(f.toLowerCase()))||((xe=(Ee=H.client)==null?void 0:Ee.raison_sociale)==null?void 0:xe.toLowerCase().includes(f.toLowerCase()))})),n(I),Q(I)},Q=I=>{const se=I.length,H=I.filter(ut=>ut.statut==="planifiee"||ut.statut==="creee").length,te=I.filter(ut=>ut.statut==="en_cours").length,Ee=I.filter(ut=>ut.statut==="validee").length,xe=I.filter(ut=>ut.statut==="cloturee").length,_e=I.reduce((ut,da)=>ut+(da.budgetInitial||0),0),Ks=I.reduce((ut,da)=>ut+(da.depenses||0),0),Xs=I.map(ut=>ut.avancement||0),Xf=Xs.length>0?Math.round(Xs.reduce((ut,da)=>ut+da)/Xs.length):0,GO=I.filter(ut=>new Date(ut.dateFin)<new Date&&ut.statut!=="validee"&&ut.statut!=="cloturee").length,KO=_e>0?Math.round(Ks/_e*100):0;M({total:se,planifiees:H,enCours:te,validees:Ee,cloturees:xe,budgetTotal:_e,depensesTotal:Ks,tauxUtilisation:KO,avantageMoyen:Xf,delaiees:GO,restant:_e-Ks})},Z=()=>{try{if(!E){if(D(!0),r.length===0){F({type:"warning",message:"Aucune mission  analyser"}),D(!1);return}const I=Tte(r,T);G(I)}A(!E),F(E?{type:"success",message:" Vue Missions Affiche"}:{type:"success",message:" Vue Analyse Affiche"})}catch(I){console.error("Erreur:",I),F({type:"error",message:"Erreur lors du basculement"})}finally{D(!1)}},ee=I=>({creee:"bg-blue-100 text-blue-800",planifiee:"bg-blue-100 text-blue-800",en_cours:"bg-amber-100 text-amber-800",cloturee:"bg-green-100 text-green-800",validee:"bg-emerald-100 text-emerald-800"})[I]||"bg-gray-100 text-gray-800",k=I=>({creee:"Planifie",planifiee:"Planifie",en_cours:"En cours",cloturee:"Clture",validee:"Valide"})[I]||I,ie=async I=>{if(!ge){F({type:"error",message:"Seuls les administrateurs peuvent valider une mission"});return}if(window.confirm(`tes-vous sr de vouloir valider la mission "${I.titre}"?`))try{t(e.map(se=>se.id===I.id?{...se,statut:"validee"}:se)),O({...I,statut:"validee"}),F({type:"success",message:` Mission "${I.titre}" valide`})}catch{F({type:"error",message:"Erreur lors de la validation"})}},ue=async I=>{if(!ge){F({type:"error",message:"Seuls les administrateurs peuvent clturer une mission"});return}if(window.confirm(`tes-vous sr de vouloir clturer la mission "${I.titre}"?`))try{t(e.map(se=>se.id===I.id?{...se,statut:"cloturee",cloturee_definitive:!0}:se)),O({...I,statut:"cloturee",cloturee_definitive:!0}),F({type:"success",message:` Mission "${I.titre}" clture`})}catch{F({type:"error",message:"Erreur lors de la clture"})}},ce=async I=>{if(!ge){F({type:"error",message:"Seuls les administrateurs peuvent supprimer une mission"});return}if(window.confirm(`tes-vous sr de vouloir supprimer dfinitivement la mission "${I.titre}"? Cette action est irrversible.`))try{t(e.filter(se=>se.id!==I.id)),j(!1),F({type:"success",message:` Mission "${I.titre}" supprime`})}catch{F({type:"error",message:"Erreur lors de la suppression"})}},me=()=>{if(!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin")){F({type:"error",message:"Seuls les administrateurs peuvent crer des missions"});return}O(null),w(!0)},Ne=I=>{const se=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin",H=(I==null?void 0:I.created_by)===(V==null?void 0:V.id),te=(I==null?void 0:I.chefMissionId)===(V==null?void 0:V.id);return se||H||te&&(I==null?void 0:I.statut)!=="cloturee"&&(I==null?void 0:I.statut)!=="validee"},re=I=>{const se=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin",H=(I==null?void 0:I.created_by)===(V==null?void 0:V.id);return(se||H)&&(I==null?void 0:I.statut)!=="cloturee"&&(I==null?void 0:I.statut)!=="validee"},q=I=>{if(!Ne(I)){F({type:"error",message:" Vous n'avez pas les permissions pour modifier cette mission"});return}j(!1),w(!0)},oe=async I=>{if(!re(I)){F({type:"error",message:" Vous n'avez pas les permissions pour supprimer cette mission"});return}if(window.confirm(" tes-vous certain de vouloir supprimer cette mission?"))try{await Ot.delete(I.id),t(e.filter(se=>se.id!==I.id)),j(!1),F({type:"success",message:" Mission supprime"})}catch(se){console.error("Erreur suppression:",se),F({type:"error",message:" Erreur lors de la suppression"})}},$=async I=>{try{const se=typeof I=="string"?I:I==null?void 0:I.type,H=typeof I=="object"?I==null?void 0:I.totalExpenses:0,te=(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin",Ee=(P==null?void 0:P.chefMissionId)===(V==null?void 0:V.id)||(P==null?void 0:P.chef_mission_id)===(V==null?void 0:V.id);if(se==="start"){if(!Ee){F({type:"error",message:" Seul le Chef de Mission assign peut dmarrer la mission"});return}const xe={...P,statut:"en_cours",dateDebut:new Date().toISOString()};try{await Ot.updateStatus(P.id,"en_cours"),t(e.map(_e=>_e.id===P.id?xe:_e)),O(xe),F({type:"success",message:" Mission dmarre - Statut: En cours"})}catch(_e){console.error("Erreur lors du dmarrage de la mission:",_e),F({type:"error",message:" Erreur lors du dmarrage de la mission"})}return}if(se==="admin"){if(!te){F({type:"error",message:" Seul un administrateur peut effectuer une clture dfinitive"});return}if(window.confirm(" tes-vous certain de vouloir clturer dfinitivement cette mission? Cette action est irrversible.")){const xe={...P,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:H,clotureeParAdmin:V==null?void 0:V.id};try{await Ot.validateClosureByAdmin(P.id,{clotureeDefinitive:!0,commentaireAdmin:"Clture dfinitive",totalExpenses:H}),t(e.map(_e=>_e.id===P.id?xe:_e)),O(xe),F({type:"success",message:" Mission clture dfinitivement par Admin"}),setTimeout(()=>j(!1),1e3)}catch(_e){console.error("Erreur lors de la clture:",_e),F({type:"error",message:" Erreur lors de la clture dfinitive"})}}}else if(se==="chef"){if(!te){F({type:"error",message:" Seul un administrateur peut effectuer une clture dfinitive"});return}if(window.confirm(" tes-vous certain de vouloir clturer dfinitivement cette mission? Cette action est irrversible.")){const xe={...P,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:H,clotureeParAdmin:V==null?void 0:V.id};try{await Ot.closeMissionByChef(P.id,{commentaireChef:"Clture par chef",avancements:P.avancement||100,dateClotureReelle:new Date().toISOString(),totalExpenses:H}),t(e.map(_e=>_e.id===P.id?xe:_e)),O(xe),F({type:"success",message:" Mission clture par Chef - En attente de validation Admin"}),setTimeout(()=>j(!1),1e3)}catch(_e){console.error("Erreur lors de la clture par chef:",_e),F({type:"error",message:" Erreur lors de la clture par le chef"})}}}else if(se==="chef"){if(!Ee){F({type:"error",message:" Seul le Chef de Mission assign peut clturer la mission"});return}const xe={...P,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:H,clotureeParChef:V==null?void 0:V.id};try{await Ot.closeMissionByChef(P.id,{commentaireChef:"Clture par chef de mission",avancements:P.avancement||100,dateClotureReelle:new Date().toISOString(),totalExpenses:H}),t(e.map(_e=>_e.id===P.id?xe:_e)),O(xe),F({type:"success",message:" Mission clture par le Chef de Mission"})}catch(_e){console.error("Erreur lors de la clture par chef:",_e),F({type:"error",message:" Erreur lors de la clture par le chef"})}}}catch(se){console.error("Erreur clture:",se),F({type:"error",message:"Erreur lors de la clture"})}},J=async I=>{if(!W)try{Y(!0);let se;P?(se=await Ot.update(P.id,I),t(e.map(H=>H.id===P.id?se:H)),F({type:"success",message:" Mission mise  jour avec succs"})):(se=await Ot.create(I),t([se,...e]),F({type:"success",message:" Mission cre avec succs"})),w(!1),O(null)}catch(se){console.error("Erreur dtails:",{message:se.message,code:se.code,details:se.details,hint:se.hint,fullError:se}),F({type:"error",message:`Erreur: ${se.message||"Erreur lors de la sauvegarde de la mission"}`})}finally{Y(!1)}};return c?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ao,{className:"mx-auto mb-4 text-primary animate-bounce",size:48}),o.jsx("p",{className:"text-gray-600",children:"Chargement des missions..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 p-2",children:[o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"mb-8 px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ao,{className:"text-primary",size:32}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de Bord Missions"}),o.jsx("p",{className:"text-gray-600",children:"Suivi statistique et financier en temps rel"})]})]}),o.jsxs(Ae,{onClick:me,className:`flex items-center gap-2 ${(U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"?"bg-primary hover:bg-primary-dark text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,disabled:!((U==null?void 0:U.role)==="admin"||(U==null?void 0:U.role)==="super_admin"),children:[o.jsx(vi,{size:20}),"Nouvelle Mission"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[o.jsx(Gs,{placeholder:"Rechercher une mission...",value:f,onChange:d,icon:o.jsx(ao,{size:18})}),o.jsxs("select",{value:h,onChange:I=>p(I.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous les statuts"}),o.jsx("option",{value:"planifiee",children:"Planifies (futures)"}),o.jsx("option",{value:"en_cours",children:"En cours"}),o.jsx("option",{value:"validee",children:"Valides"}),o.jsx("option",{value:"cloturee",children:"Cltures"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Du"}),o.jsx("input",{type:"date",value:b,onChange:I=>v(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Au"}),o.jsx("input",{type:"date",value:m,onChange:I=>y(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Chef Mission"}),o.jsxs("select",{value:x,onChange:I=>g(I.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous"}),s.map(I=>o.jsx("option",{value:I.id,children:I.nom||I.email},I.id))]})]})]}),o.jsxs("div",{className:"flex gap-3 mb-6 flex-wrap",children:[o.jsxs(Ae,{onClick:Z,disabled:R,className:`flex items-center gap-2 ${E?"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white"}`,children:[o.jsx(rn,{size:18}),R?"Chargement...":E?" Voir Missions":" Voir Analyse"]}),(b||m||x!=="all"||h!=="all"||f)&&o.jsxs(Ae,{onClick:()=>{v(""),y(""),g("all"),p("all"),d("")},className:"bg-gray-200 text-gray-700 hover:bg-gray-300 flex items-center gap-2",children:[o.jsx(Tn,{size:18}),"Rinitialiser"]})]})]}),E?o.jsx("div",{className:"mb-8",children:L?o.jsx(_te,{analysisData:L,loading:R}):o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg text-gray-500",children:"Aucune analyse disponible"})})})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Total Missions"}),o.jsx(ao,{className:"text-blue-500",size:20})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:T.total}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[T.enCours," en cours  ",T.validees," compltes"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Avancement Moyen"}),o.jsx(rn,{className:"text-green-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[T.avantageMoyen,"%"]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${T.avantageMoyen}%`}})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-yellow-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Budget Total"}),o.jsx(_m,{className:"text-yellow-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(T.budgetTotal/1e3).toFixed(0),"K DA"]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Dpens: ",T.depensesTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-red-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Utilisation Budget"}),o.jsx(SE,{className:"text-red-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[T.tauxUtilisation,"%"]}),o.jsx("p",{className:`text-xs mt-2 font-medium ${T.tauxUtilisation>80?"text-red-500":"text-green-500"}`,children:T.tauxUtilisation>80?" Attention":" Normal"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(VI,{size:20,className:"text-primary"}),"Distribution Statuts"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Planifies (futures)"}),o.jsx("span",{className:"font-semibold text-gray-900",children:T.planifiees})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"En cours"}),o.jsx("span",{className:"font-semibold text-amber-600",children:T.enCours})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Valides"}),o.jsx("span",{className:"font-semibold text-green-600",children:T.validees})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Cltures"}),o.jsx("span",{className:"font-semibold text-emerald-600",children:T.cloturees})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(as,{size:20,className:"text-red-500"}),"Alertes & Risques"]}),o.jsxs("div",{className:"space-y-3",children:[T.delaiees>0&&o.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:o.jsxs("p",{className:"text-sm font-medium text-red-800",children:[" ",T.delaiees," mission(s) retarde(s)"]})}),T.tauxUtilisation>80&&o.jsx("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:o.jsxs("p",{className:"text-sm font-medium text-orange-800",children:[" Budget  ",T.tauxUtilisation,"%"]})}),T.enCours>0&&T.avantageMoyen<50&&o.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:o.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[" Avancement faible (",T.avantageMoyen,"%)"]})}),T.delaiees===0&&T.tauxUtilisation<=80&&o.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-sm font-medium text-green-800",children:" Aucun risque majeur"})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(_m,{size:20,className:"text-green-500"}),"Situation Financire"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-blue-900",children:"Budget Total"}),o.jsxs("span",{className:"font-bold text-blue-900",children:[T.budgetTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-red-900",children:"Dpens"}),o.jsxs("span",{className:"font-bold text-red-900",children:[T.depensesTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-green-900",children:"Restant"}),o.jsxs("span",{className:"font-bold text-green-900",children:[T.restant.toLocaleString("fr-DZ")," DA"]})]})]})]})]}),B&&!L&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 rounded-lg shadow p-6 border border-red-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(pt,{size:20,className:"text-red-600"})," Top Risques (IA)"]}),o.jsx("div",{className:"space-y-2",children:(B.risques||[]).map((I,se)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",I]},se))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow p-6 border border-green-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Xn,{size:20,className:"text-green-600"})," Opportunits (IA)"]}),o.jsx("div",{className:"space-y-2",children:(B.opportunites||[]).map((I,se)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",I]},se))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow p-6 border border-blue-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(hl,{size:20,className:"text-blue-600"})," Actions Prioritaires (IA)"]}),o.jsx("div",{className:"space-y-2",children:(B.recommandations||[]).map((I,se)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",I]},se))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow p-6 border border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(rn,{size:20,className:"text-purple-600"})," Tendances (IA)"]}),o.jsx("div",{className:"space-y-2",children:(B.tendances||[]).map((I,se)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",I]},se))})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Missions Filtres (",r.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Titre"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Chef de Mission"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Accompagnateurs"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Avancement"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Budget"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Dpenses"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(I=>{var se;return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:I.titre}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((se=I.client)==null?void 0:se.raison_sociale)||"N/A"}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:I.type||I.type_mission||"N/A"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ee(I.statut)}`,children:k(I.statut)})}),o.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{var Ee,xe;const H=I.chef_mission_id||I.chefMissionId;if(!H)return o.jsx("span",{className:"text-red-600 font-medium",children:" Non assign"});const te=s.find(_e=>_e.id===H);return te?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-600",children:(xe=(Ee=te.full_name||te.email)==null?void 0:Ee[0])==null?void 0:xe.toUpperCase()}),o.jsx("span",{className:"text-gray-900 font-medium",children:te.full_name||te.email})]}):(console.warn("Chef not found in users array:",{chefId:H,usersCount:s.length}),o.jsx("span",{className:"text-amber-600 font-medium",children:" ID invalide"}))})()}),o.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{const H=I.accompagnateurs_ids||I.accompagnateurIds||[];if(!Array.isArray(H)||H.length===0)return o.jsx("span",{className:"text-red-600 font-medium",children:" Aucun"});const te=H.map(Ee=>{const xe=s.find(_e=>_e.id===Ee);return(xe==null?void 0:xe.full_name)||(xe==null?void 0:xe.email)||null}).filter(Boolean);return te.length===0?o.jsx("span",{className:"text-red-600 font-medium",children:" Aucun"}):o.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:te.map((Ee,xe)=>o.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:Ee},xe))})})()}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${I.avancement||0}%`}})}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[I.avancement||0,"%"]})]})}),o.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[(I.budgetInitial||I.budget_alloue||0).toLocaleString("fr-DZ")," DA"]}),o.jsx("td",{className:"px-6 py-4 text-sm",children:o.jsxs("span",{className:(I.depenses||0)>(I.budgetInitial||I.budget_alloue||0)?"text-red-600 font-bold":"text-gray-600",children:[(I.depenses||I.budget_depense||0).toLocaleString("fr-DZ")," DA"]})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx(Ae,{onClick:()=>{const H={...I,chef_name:(()=>{const te=I.chef_mission_id||I.chefMissionId;if(!te)return"Non assign";const Ee=s.find(xe=>xe.id===te);return(Ee==null?void 0:Ee.full_name)||(Ee==null?void 0:Ee.email)||"Non assign"})()};O(H),j(!0)},className:"text-primary hover:bg-primary hover:text-white px-3 py-1 rounded text-sm",children:"Dtails"})})]},I.id)})})]})}),r.length===0&&o.jsxs("div",{className:"px-6 py-12 text-center",children:[o.jsx(ao,{className:"mx-auto mb-3 text-gray-400",size:40}),o.jsx("p",{className:"text-gray-600",children:"Aucune mission trouve"})]})]})]})]}),o.jsx(Lt,{isOpen:S,onClose:()=>w(!1),title:P?"Modifier Mission":"Nouvelle Mission",children:o.jsx(bte,{mission:P,clients:i,users:s,onSubmit:J,onCancel:()=>w(!1),isSubmitting:W})}),P&&_&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-dark text-white p-6 flex items-center justify-between flex-shrink-0",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold",children:P.titre}),o.jsx("p",{className:"text-primary-light text-sm mt-1",children:P.description})]}),o.jsx("button",{onClick:()=>j(!1),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition",children:o.jsx(Tn,{size:28})})]}),o.jsx("div",{className:"overflow-y-auto flex-1",children:o.jsx("div",{className:"p-6",children:o.jsx(wte,{mission:P,onClose:()=>j(!1),onClosureAdmin:$,currentUser:V,userProfile:U,onValidate:ie,onClosure:ue,onRemove:ce,isAdmin:ge})})}),o.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex gap-3 justify-end flex-shrink-0",children:[o.jsx(Ae,{onClick:()=>j(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800",children:"Fermer"}),Ne(P)&&o.jsx(Ae,{onClick:()=>q(P),className:"bg-primary hover:bg-primary-dark text-white",children:" Modifier"}),re(P)&&o.jsx(Ae,{onClick:()=>oe(P),className:"bg-red-600 hover:bg-red-700 text-white",children:" Supprimer"}),!Ne(P)&&o.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 rounded text-red-700 text-sm",children:o.jsx("span",{children:" dition non autorise"})})]})]})})]})},z1=({alerte:e,type:t,onRenouveler:r})=>{var l,c,u,f,d;const n=wo(e.date_fin),i=()=>t==="danger"?"border-red-500":t==="warning"?"border-orange-500":"border-blue-500",a=()=>t==="danger"?"bg-red-50":t==="warning"?"bg-orange-50":"bg-blue-50",s=()=>t==="danger"?"text-red-700":t==="warning"?"text-orange-700":"text-blue-700";return o.jsxs("div",{className:`card hover:shadow-xl transition-shadow duration-200 border-l-4 ${i()}`,children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:(l=e.installation)==null?void 0:l.application_installee}),t==="danger"&&o.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-medium",children:[o.jsx(pt,{size:16}),o.jsx("span",{children:"EXPIR"})]}),t==="warning"&&o.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm font-medium",children:[o.jsx(pt,{size:16}),o.jsxs("span",{children:[n," JOURS RESTANTS"]})]})]})}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-700 mb-4",children:[o.jsx(Do,{size:18}),o.jsx("span",{className:"font-medium",children:(u=(c=e.installation)==null?void 0:c.client)==null?void 0:u.raison_sociale})]}),o.jsxs("div",{className:`${a()} rounded-lg p-3 mb-4`,children:[o.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",children:"Date de fin:"}),o.jsx("span",{className:`font-bold ${s()}`,children:lr(e.date_fin)})]}),((d=(f=e.installation)==null?void 0:f.client)==null?void 0:d.commercial_assigne)&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Commercial: ",e.installation.client.commercial_assigne]})]}),o.jsxs("button",{onClick:()=>r(e.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors ${t==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[o.jsx(Zd,{size:18}),"Renouveler Maintenant"]})]})},kte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),{addNotification:i}=rr();N.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const u=await qt.checkAlertes();t(u)}catch{i({type:"error",message:"Erreur lors du chargement des alertes"})}finally{n(!1)}},s=async u=>{if(window.confirm("tes-vous sr de vouloir renouveler cet abonnement ?"))try{const f=e.find(p=>p.id===u);if(!f)throw new Error("Abonnement non trouv");await qt.delete(u);const d=new Date(f.date_fin),h=new Date(d);h.setFullYear(h.getFullYear()+1),await qt.create({installation_id:f.installation_id,date_debut:d.toISOString(),date_fin:h.toISOString(),statut:"actif"}),i({type:"success",message:"Abonnement renouvel avec succs"}),a()}catch(f){i({type:"error",message:f.message||"Erreur lors du renouvellement"})}};if(r)return o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const l=e.filter(u=>new Date(u.date_fin)>=new Date),c=e.filter(u=>new Date(u.date_fin)<new Date);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-orange-500 to-red-500 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Alertes de Renouvellement"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," abonnement(s) ncessitent votre attention"]})]}),o.jsx(pt,{size:64,className:"opacity-50"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(qu,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Alerte"}),o.jsx("h3",{className:"text-3xl font-bold",children:l.length})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(pt,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Expirs"}),o.jsx("h3",{className:"text-3xl font-bold",children:c.length})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Yr,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),o.jsx("h3",{className:"text-3xl font-bold",children:e.length})]})]})})]}),l.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(qu,{className:"text-orange-500",size:24}),"Abonnements  Renouveler Prochainement"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(u=>o.jsx(z1,{alerte:u,type:"warning",onRenouveler:s},u.id))})]}),c.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(pt,{className:"text-red-500",size:24}),"Abonnements Expirs - Action Urgente"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>o.jsx(z1,{alerte:u,type:"danger",onRenouveler:s},u.id))})]}),e.length===0&&o.jsx("div",{className:"card text-center py-12",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(Yr,{className:"text-green-600",size:32})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Aucune Alerte Active"}),o.jsx("p",{className:"text-gray-600",children:"Tous les abonnements sont  jour !"})]})]})})]})},$te=({application:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({nom:"",description:"",prix_acquisition:"",prix_abonnement:""}),[a,s]=N.useState({});N.useEffect(()=>{e&&i({nom:e.nom||"",description:e.description||"",prix_acquisition:e.prix_acquisition||e.prix||"",prix_abonnement:e.prix_abonnement||e.prix||""})},[e]);const l=(u,f)=>{i(d=>({...d,[u]:f})),a[u]&&s(d=>({...d,[u]:""}))},c=u=>{u.preventDefault();const f=Kf.validateApplication(n);if(!f.isValid){s(f.errors);return}t(n)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsx(Je,{label:"Nom de l'Application",value:n.nom,onChange:u=>l("nom",u.target.value),error:a.nom,required:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{value:n.description,onChange:u=>l("description",u.target.value),rows:"4",className:"input-field",placeholder:"Description de l'application..."})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx(Je,{label:"Prix Acquisition (DA)",type:"number",value:n.prix_acquisition,onChange:u=>l("prix_acquisition",u.target.value),error:a.prix_acquisition,required:!0}),o.jsx(Je,{label:"Prix Abonnement (DA)",type:"number",value:n.prix_abonnement,onChange:u=>l("prix_abonnement",u.target.value),error:a.prix_abonnement,required:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",children:e?"Modifier":"Crer"})]})]})},Ite=({application:e,onEdit:t,onDelete:r,hasEditPermission:n=!0,hasDeletePermission:i=!0})=>o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:o.jsx(Zy,{className:"text-purple-600",size:24})}),o.jsx("div",{children:o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:e.nom})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),disabled:!n,className:`p-2 rounded-lg transition-colors ${n?"text-blue-600 hover:bg-blue-50":"text-gray-400 cursor-not-allowed"}`,title:n?"Modifier cette application":"Permission refuse: Modifier",children:n?o.jsx(Mn,{size:18}):o.jsx(fi,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),disabled:!i,className:`p-2 rounded-lg transition-colors ${i?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"}`,title:i?"Supprimer cette application":"Permission refuse: Supprimer",children:i?o.jsx(Er,{size:18}):o.jsx(fi,{size:18})})]})]}),e.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4",children:[o.jsx("p",{className:"text-xs text-green-600 mb-1 font-semibold",children:"PRIX ACQUISITION"}),o.jsx("p",{className:"text-xl font-bold text-green-700",children:"2"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4",children:[o.jsx("p",{className:"text-xs text-blue-600 mb-1 font-semibold",children:"PRIX ABONNEMENT"}),o.jsx("p",{className:"text-xl font-bold text-blue-700",children:"2"})]})]})]}),Mte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState(!1),[f,d]=N.useState(null),[h,p]=N.useState("create"),[b,v]=N.useState(!1),[m,y]=N.useState(!1),[x,g]=N.useState(!1),[S,w]=N.useState(!1),{addNotification:_}=rr(),{user:j,profile:E}=Nt();N.useEffect(()=>{A()},[]),N.useEffect(()=>{P()},[j==null?void 0:j.id,E==null?void 0:E.role]),N.useEffect(()=>{O()},[e,s]);const A=async()=>{try{a(!0);const L=await So.getAll();t(L)}catch{_({type:"error",message:"Erreur lors du chargement des applications"})}finally{a(!1)}},P=async()=>{try{if(w(!0),j!=null&&j.id&&E){const L=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Ue.hasCreatePermission(j.id,"applications"),G=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Ue.hasEditPermission(j.id,"applications"),R=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Ue.hasDeletePermission(j.id,"applications");v(L),y(G),g(R)}}catch(L){console.error("Erreur chargement permissions:",L)}finally{w(!1)}},O=()=>{let L=[...e];s&&(L=L.filter(G=>{var R,D;return((R=G.nom)==null?void 0:R.toLowerCase().includes(s.toLowerCase()))||((D=G.description)==null?void 0:D.toLowerCase().includes(s.toLowerCase()))})),n(L)},T=()=>{b&&(d(null),p("create"),u(!0))},M=L=>{m&&(d(L),p("edit"),u(!0))},B=async L=>{var R;const G=(L==null?void 0:L.id)||L;if(x&&window.confirm("tes-vous sr de vouloir supprimer cette application ?"))try{await So.delete(G),_({type:"success",message:"Application supprime avec succs"}),A()}catch(D){console.error("Erreur suppression application:",D),D.status===409||(R=D.message)!=null&&R.includes("foreign key")?_({type:"error",message:"Impossible de supprimer cette application car elle est lie  d'autres enregistrements"}):_({type:"error",message:"Erreur lors de la suppression de l'application"})}},C=async L=>{try{h==="create"?(await So.create(L),_({type:"success",message:"Application cre avec succs"})):(await So.update(f.id,L),_({type:"success",message:"Application modifie avec succs"})),u(!1),A()}catch{_({type:"error",message:"Erreur lors de l'enregistrement"})}};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Catalogue d'Applications"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," application(s) disponible(s)"]})]}),o.jsx(Zy,{size:64,className:"opacity-50"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Gs,{value:s,onChange:l,placeholder:"Rechercher une application..."})}),o.jsx(Ae,{variant:"primary",icon:vi,onClick:T,disabled:!b,title:b?"Ajouter une nouvelle application":"Permission refuse: Crer une application",children:"Ajouter Application"})]})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune application trouve"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(L=>o.jsx(Ite,{application:L,onEdit:M,onDelete:B,hasEditPermission:m,hasDeletePermission:x},L.id))}),o.jsx(Lt,{isOpen:c,onClose:()=>u(!1),title:h==="create"?"Nouvelle Application":"Modifier Application",children:o.jsx($te,{application:f,onSubmit:C,onCancel:()=>u(!1)})})]})},Rte=({user:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({nom:"",email:"",password:"",role:"commercial",pages_visibles:[],permissions:{}}),[a,s]=N.useState({}),l=[{value:Ce.DASHBOARD,label:"Tableau de Bord"},{value:Ce.PROSPECTS,label:"Prospects"},{value:Ce.CLIENTS,label:"Clients"},{value:Ce.INSTALLATIONS,label:"Installations"},{value:Ce.ABONNEMENTS,label:"Abonnements"},{value:Ce.PAIEMENTS,label:"Paiements"},{value:Ce.SUPPORT,label:"Support"},{value:Ce.MISSIONS,label:" Missions"},{value:Ce.ALERTES,label:"Alertes"},{value:Ce.APPLICATIONS,label:"Applications"},{value:Ce.UTILISATEURS,label:"Utilisateurs"}],c=[{value:"super_admin",label:" Super Administrateur"},{value:"admin",label:" Administrateur"},{value:"technicien",label:" Technicien"},{value:"commercial",label:" Commercial"},{value:"support",label:" Support"}];N.useEffect(()=>{if(e){const v={};Object.keys(io).forEach(m=>{v[m]={},io[m].permissions.forEach(y=>{const x=`can_${y}_${m}`;v[m][y]=e[x]||!1})}),i({nom:e.nom||"",email:e.email||"",password:"",role:e.role||"commercial",pages_visibles:e.pages_visibles||[],permissions:v})}else{const v={};Object.keys(io).forEach(m=>{v[m]={},io[m].permissions.forEach(y=>{v[m][y]=!1})}),i(m=>({...m,permissions:v}))}},[e]);const u=(v,m)=>{var y;i(x=>({...x,[v]:m})),a[v]&&s(x=>({...x,[v]:""})),v==="role"&&((y=Ki[m])!=null&&y.allPages)&&i(x=>({...x,pages_visibles:[]}))},f=v=>{i(m=>{const y=[...m.pages_visibles],x=y.indexOf(v);return x>-1?y.splice(x,1):y.push(v),{...m,pages_visibles:y}})},d=(v,m)=>{i(y=>({...y,permissions:{...y.permissions,[v]:{...y.permissions[v],[m]:!y.permissions[v][m]}}}))},h=v=>{if(v.preventDefault(),!e){const y=Kf.validateUser(n);if(!y.isValid){s(y.errors);return}}const m={...n};if(e&&!m.password&&delete m.password,m.permissions&&typeof m.permissions=="object"){const y={};let x=!1;Object.entries(m.permissions).forEach(([g,S])=>{Object.entries(S).forEach(([w,_])=>{(_===!0||_===!1)&&(y[`can_${w}_${g}`]=_,x=!0)})}),x&&Object.assign(m,y),delete m.permissions}t(m)},p=Ki[n.role],b=n.role==="super_admin"||n.role==="admin";return o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsx(Je,{label:"Nom Complet",value:n.nom,onChange:v=>u("nom",v.target.value),error:a.nom,required:!0}),o.jsx(Je,{label:"Email",type:"email",value:n.email,onChange:v=>u("email",v.target.value),error:a.email,required:!0}),o.jsx(Je,{label:e?"Nouveau Mot de Passe (laisser vide pour ne pas changer)":"Mot de Passe",type:"password",value:n.password,onChange:v=>u("password",v.target.value),error:a.password,required:!e}),o.jsx(nt,{label:"Rle",value:n.role,onChange:v=>u("role",v.target.value),options:c,required:!0}),p&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Permissions du rle:"}),o.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[p.canManageUsers&&o.jsx("li",{children:" Gestion des utilisateurs"}),p.canManageRoles&&o.jsx("li",{children:" Gestion des rles"}),p.canManageApplications&&o.jsx("li",{children:" Gestion des applications"}),p.canViewAll&&o.jsx("li",{children:" Voir toutes les donnes"}),p.canEditAll&&o.jsx("li",{children:" diter toutes les donnes"}),p.canDeleteAll&&o.jsx("li",{children:" Supprimer toutes les donnes"}),p.allPages&&o.jsx("li",{children:" Accs  toutes les pages"})]})]}),!b&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Pages Accessibles"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto border border-gray-200",children:l.map(v=>o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 rounded transition-colors",children:[o.jsx("input",{type:"checkbox",checked:n.pages_visibles.includes(v.value),onChange:()=>f(v.value),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),o.jsx("span",{className:"text-sm text-gray-700",children:v.label})]},v.value))}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Slectionnez au minimum une page pour ce rle"})]}),!b&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:" Permissions Granulaires (Crer, Modifier, Supprimer...)"}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 space-y-4",children:Object.entries(io).map(([v,m])=>o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:[m.icon," ",m.label]}),o.jsx("div",{className:"grid grid-cols-2 gap-3 ml-4",children:m.permissions.map(y=>{var x;return o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:((x=n.permissions[v])==null?void 0:x[y])||!1,onChange:()=>d(v,y),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),o.jsx("span",{className:"text-sm text-gray-700",children:BI[y]})]},`${v}-${y}`)})})]},v))})]}),b&&o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-amber-800",children:[" ",o.jsx("strong",{children:"Accs complet:"})," Les administrateurs ont automatiquement accs  toutes les pages et toutes les fonctionnalits."]})}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",children:e?"Modifier":"Crer"})]})]})},Dte=({user:e,onEdit:t,onDelete:r,canManage:n=!1})=>{const i=()=>({super_admin:"bg-red-100 text-red-800 border-red-200",admin:"bg-orange-100 text-orange-800 border-orange-200",technicien:"bg-green-100 text-green-800 border-green-200",commercial:"bg-blue-100 text-blue-800 border-blue-200",support:"bg-indigo-100 text-indigo-800 border-indigo-200"})[e.role]||"bg-gray-100 text-gray-800 border-gray-200",a=()=>{const c=Ki[e.role];return(c==null?void 0:c.label)||e.role},s=()=>({super_admin:"",admin:"",technicien:"",commercial:"",support:""})[e.role]||"",l=Ki[e.role];return o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsx("div",{className:"w-14 h-14 bg-primary rounded-full flex items-center justify-center text-white text-xl font-bold",children:AE(e.nom)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:e.nom}),o.jsxs("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium border ${i()} mt-1`,children:[s()," ",a()]})]})]}),n&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:o.jsx(Mn,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:o.jsx(Er,{size:18})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-4",children:[o.jsx(Qy,{size:16}),o.jsx("span",{className:"truncate",children:e.email})]}),l&&!l.allPages&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:" Pages accessibles:"}),e.pages_visibles&&e.pages_visibles.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.pages_visibles.slice(0,3).map((c,u)=>o.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded border border-gray-200",children:c},u)),e.pages_visibles.length>3&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.pages_visibles.length-3]})]}):o.jsx("p",{className:"text-xs text-gray-500",children:"Aucune page assigne"})]}),l&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-blue-600 font-medium mb-2",children:" Permissions:"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.allPages&&o.jsx("span",{className:"text-blue-700",children:" Toutes les pages"}),l.canManageUsers&&o.jsx("span",{className:"text-blue-700",children:" Grer utilisateurs"}),l.canViewAll&&o.jsx("span",{className:"text-blue-700",children:" Voir toutes donnes"}),l.canEditAll&&o.jsx("span",{className:"text-blue-700",children:" diter tout"}),l.canDeleteAll&&o.jsx("span",{className:"text-blue-700",children:" Supprimer tout"}),!l.allPages&&!l.canManageUsers&&!l.canViewAll&&o.jsx("span",{className:"text-gray-500",children:"Accs limit"})]})]})]})},Lte=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(!1),[h,p]=N.useState(null),[b,v]=N.useState("create"),{addNotification:m}=rr(),{canManageUsers:y,profile:x}=Nt();N.useEffect(()=>{g()},[]),N.useEffect(()=>{S()},[e,s,c]);const g=async()=>{try{a(!0);const P=await Ue.getAll();t(P)}catch{m({type:"error",message:"Erreur lors du chargement des utilisateurs"})}finally{a(!1)}},S=()=>{let P=[...e];c!=="all"&&(P=P.filter(O=>O.role===c)),s&&(P=P.filter(O=>{var T,M;return((T=O.nom)==null?void 0:T.toLowerCase().includes(s.toLowerCase()))||((M=O.email)==null?void 0:M.toLowerCase().includes(s.toLowerCase()))})),n(P)},w=()=>{if(!y()){m({type:"error",message:" Vous n'avez pas la permission de crer des utilisateurs"});return}p(null),v("create"),d(!0)},_=P=>{if(!y()){m({type:"error",message:" Vous n'avez pas la permission de modifier des utilisateurs"});return}p(P),v("edit"),d(!0)},j=async P=>{const O=(P==null?void 0:P.id)||P;if(!y()){m({type:"error",message:" Vous n'avez pas la permission de supprimer des utilisateurs"});return}const T=e.find(C=>C.id===O);if((T==null?void 0:T.role)==="super_admin"&&(x==null?void 0:x.role)!=="super_admin"){m({type:"error",message:" Seul un Super Admin peut supprimer un autre Super Admin"});return}const M=` ATTENTION 

tes-vous absolument sr de vouloir supprimer cet utilisateur ?

${T==null?void 0:T.nom}
${T==null?void 0:T.email}

Cette action est IRRVERSIBLE !`;if(!window.confirm(M))return;if(window.prompt('Pour confirmer la suppression, tapez "SUPPRIMER" en majuscules:')!=="SUPPRIMER"){m({type:"info",message:"Suppression annule"});return}try{await Ue.delete(O,x),m({type:"success",message:"Utilisateur supprim avec succs"}),g()}catch(C){C.code==="PERMISSION_DENIED"?m({type:"error",message:" "+C.message}):C.code==="USER_HAS_REFERENCES"?m({type:"error",title:" Impossible de supprimer cet utilisateur",message:C.message,duration:1e4}):m({type:"error",message:C.message||"Erreur lors de la suppression"})}},E=async P=>{var O,T;try{if(b==="create"){const M=await Ue.create(P,x);M!=null&&M._authCreationFailed?m({type:"warning",title:" Utilisateur cr partiellement",message:M._message||"Utilisateur cr en BDD mais Auth rate limite. L'utilisateur pourra se connecter normalement.",duration:8e3}):m({type:"success",message:"Utilisateur cr avec succs"})}else await Ue.update(h.id,P,x),m({type:"success",message:"Utilisateur modifi avec succs"});d(!1),g()}catch(M){M.code==="PERMISSION_DENIED"?m({type:"error",message:" "+M.message}):M.code==="DUPLICATE_EMAIL"?m({type:"error",title:" Email dj utilis",message:M.message,duration:6e3}):M.code==="INVALID_ROLE"?m({type:"error",title:" Rle invalide",message:M.message,duration:6e3}):(O=M.message)!=null&&O.includes("rate limit")?m({type:"warning",title:" Trop de requtes",message:"Supabase Auth a atteint sa limite. L'utilisateur a t cr en BDD et pourra se connecter.",duration:1e4}):(T=M.message)!=null&&T.includes("password")?m({type:"error",title:" Mot de passe trop faible",message:"Le mot de passe doit contenir au moins 6 caractres.",duration:6e3}):m({type:"error",message:M.message||"Erreur lors de l'enregistrement"})}},A={total:e.length,superAdmin:e.filter(P=>P.role==="super_admin").length,admin:e.filter(P=>P.role==="admin").length,technicien:e.filter(P=>P.role==="technicien").length,commercial:e.filter(P=>P.role==="commercial").length,support:e.filter(P=>P.role==="support").length};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Gestion des Utilisateurs"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," utilisateur(s) enregistr(s)"]})]}),o.jsx(Sm,{size:64,className:"opacity-50"})]})}),!y()&&o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex gap-3",children:[o.jsx(pt,{className:"text-amber-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-amber-900",children:" Accs Limit"}),o.jsx("p",{className:"text-sm text-amber-800",children:"Vous n'avez pas les permissions pour grer les utilisateurs. Seuls les administrateurs peuvent crer, modifier ou supprimer des utilisateurs."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Super Admin"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.superAdmin})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Admin"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.admin})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Techniciens"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.technicien})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Commerciaux"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.commercial})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Support"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.support})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Gs,{value:s,onChange:l,placeholder:"Rechercher un utilisateur..."})}),o.jsx(Ae,{variant:"primary",icon:vi,onClick:w,disabled:!y(),title:y()?"":"Vous n'avez pas la permission de crer des utilisateurs",children:"Ajouter Utilisateur"})]}),o.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("super_admin"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="super_admin"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Super Admin"}),o.jsx("button",{onClick:()=>u("admin"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="admin"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Admin"}),o.jsx("button",{onClick:()=>u("technicien"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="technicien"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Technicien"}),o.jsx("button",{onClick:()=>u("commercial"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="commercial"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Commercial"}),o.jsx("button",{onClick:()=>u("support"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="support"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Support"})]})]}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun utilisateur trouv"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(P=>o.jsx(Dte,{user:P,onEdit:_,onDelete:j,canManage:y()},P.id))}),o.jsx(Lt,{isOpen:f,onClose:()=>d(!1),title:b==="create"?"Nouvel Utilisateur":"Modifier Utilisateur",children:o.jsx(Rte,{user:h,onSubmit:E,onCancel:()=>d(!1)})})]})},Bte=()=>{const[e,t]=N.useState(Ce.DASHBOARD),{hasAccess:r,profile:n}=Nt();z.useEffect(()=>{if(n){if(n.role==="admin"||n.role==="super_admin"){t(Ce.DASHBOARD),console.log(` ${n.role}  Dashboard`);return}if(n!=null&&n.pages_visibles&&n.pages_visibles.length>0){const l=n.pages_visibles[0],c=Object.values(Ce).find(u=>u.toLowerCase()===l.toLowerCase());c&&(console.log(` Redirection vers: ${c}`),t(c))}}},[n]);const a={[Ce.DASHBOARD]:{title:"Tableau de Bord",subtitle:"Vue d'ensemble de votre activit",component:rte},[Ce.PROSPECTS]:{title:"Gestion des Prospects",subtitle:"Suivi du pipeline commercial",component:ote},[Ce.CLIENTS]:{title:"Clients",subtitle:"Base de clients actifs",component:cte},[Ce.INSTALLATIONS]:{title:"Installations",subtitle:"Suivi des dploiements",component:hte},[Ce.ABONNEMENTS]:{title:"Abonnements",subtitle:"Renouvellements et alertes",component:pte},[Ce.PAIEMENTS]:{title:"Paiements",subtitle:"Historique des transactions",component:mte},[Ce.SUPPORT]:{title:" Support Technique",subtitle:"Interventions et tickets",component:xte},[Ce.MISSIONS]:{title:" Tableau de Bord Missions",subtitle:"Suivi statistique et financier en temps rel",component:Cte},[Ce.ALERTES]:{title:"Alertes",subtitle:"Notifications importantes",component:kte},[Ce.APPLICATIONS]:{title:"Applications",subtitle:"Catalogue de logiciels",component:Mte},[Ce.UTILISATEURS]:{title:"Utilisateurs",subtitle:"Gestion des comptes",component:Lte}}[e],s=a.component;return(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="super_admin"?o.jsxs(o.Fragment,{children:[o.jsx(Rh,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(Ih,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(Mh,{title:a.title,subtitle:a.subtitle}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:o.jsx(s,{})})]})]})]}):r(e)?o.jsxs(o.Fragment,{children:[o.jsx(Rh,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(Ih,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(Mh,{title:a.title,subtitle:a.subtitle}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:o.jsx(s,{})})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(Rh,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(Ih,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(Mh,{title:"Accs Refus",subtitle:"Vous n'avez pas accs  cette page"}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-lg shadow p-8",children:[o.jsx("div",{className:"text-5xl mb-4",children:""}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Accs Refus"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous n'avez pas accs  cette page."}),o.jsx("button",{onClick:()=>{if(n!=null&&n.pages_visibles&&n.pages_visibles.length>0){const l=n.pages_visibles[0],c=Object.values(Ce).find(u=>u.toLowerCase()===l.toLowerCase());c&&t(c)}},className:"inline-block bg-primary text-white px-6 py-2 rounded-lg font-medium hover:opacity-90 transition-opacity",children:"Retour  ma page d'accueil"})]})})]})]})]})},W1={startAutoRenewal(e=36e5){console.log(" Auto-renewal service started"),this.checkAndRenew(),this.intervalId=setInterval(()=>{this.checkAndRenew()},e)},stopAutoRenewal(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,console.log(" Auto-renewal service stopped"))},async checkAndRenew(){try{const e=await jr.checkAndRenewAcquisitions();e.renewedCount>0&&console.log(` ${e.renewedCount} installation(s) renouvele(s) automatiquement`)}catch(e){console.error(" Erreur lors du renouvellement automatique:",e)}}},Ute=()=>{const{isAuthenticated:e,loading:t,profile:r}=Nt();return z.useEffect(()=>{r&&console.log(" Utilisateur connect:",{id:r.id,nom:r.nom,email:r.email,role:r.role,pages_visibles:r.pages_visibles})},[r]),z.useEffect(()=>{if(e)return W1.startAutoRenewal(144e5),()=>{W1.stopAutoRenewal()}},[e]),t?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):o.jsxs(hk,{children:[o.jsx(am,{path:"/login",element:e?o.jsx(yN,{to:"/",replace:!0}):o.jsx(aM,{})}),o.jsx(am,{path:"/*",element:o.jsx(sM,{children:o.jsx(Bte,{})})})]})};function Fte(){return o.jsx(gk,{children:o.jsx(UI,{children:o.jsx(FI,{children:o.jsx(Ute,{})})})})}dp.createRoot(document.getElementById("root")).render(o.jsx(Fte,{}));
