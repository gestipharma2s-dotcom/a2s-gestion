function Z1(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Me(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function PT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var eS={exports:{}},jf={},tS={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=Symbol.for("react.element"),TT=Symbol.for("react.portal"),CT=Symbol.for("react.fragment"),kT=Symbol.for("react.strict_mode"),$T=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),MT=Symbol.for("react.context"),RT=Symbol.for("react.forward_ref"),DT=Symbol.for("react.suspense"),LT=Symbol.for("react.memo"),BT=Symbol.for("react.lazy"),rx=Symbol.iterator;function FT(e){return e===null||typeof e!="object"?null:(e=rx&&e[rx]||e["@@iterator"],typeof e=="function"?e:null)}var rS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nS=Object.assign,iS={};function Zs(e,t,r){this.props=e,this.context=t,this.refs=iS,this.updater=r||rS}Zs.prototype.isReactComponent={};Zs.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zs.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aS(){}aS.prototype=Zs.prototype;function By(e,t,r){this.props=e,this.context=t,this.refs=iS,this.updater=r||rS}var Fy=By.prototype=new aS;Fy.constructor=By;nS(Fy,Zs.prototype);Fy.isPureReactComponent=!0;var nx=Array.isArray,sS=Object.prototype.hasOwnProperty,zy={current:null},oS={key:!0,ref:!0,__self:!0,__source:!0};function lS(e,t,r){var n,i={},a=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(a=""+t.key),t)sS.call(t,n)&&!oS.hasOwnProperty(n)&&(i[n]=t[n]);var l=arguments.length-2;if(l===1)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:_c,type:e,key:a,ref:s,props:i,_owner:zy.current}}function zT(e,t){return{$$typeof:_c,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Uy(e){return typeof e=="object"&&e!==null&&e.$$typeof===_c}function UT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var ix=/\/+/g;function Dh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?UT(""+e.key):t.toString(36)}function Ou(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case _c:case TT:s=!0}}if(s)return s=e,i=i(s),e=n===""?"."+Dh(s,0):n,nx(i)?(r="",e!=null&&(r=e.replace(ix,"$&/")+"/"),Ou(i,t,r,"",function(u){return u})):i!=null&&(Uy(i)&&(i=zT(i,r+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ix,"$&/")+"/")+e)),t.push(i)),1;if(s=0,n=n===""?".":n+":",nx(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Dh(a,l);s+=Ou(a,t,r,c,i)}else if(c=FT(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Dh(a,l++),s+=Ou(a,t,r,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Uc(e,t,r){if(e==null)return e;var n=[],i=0;return Ou(e,n,"","",function(a){return t.call(r,a,i++)}),n}function qT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Gt={current:null},Pu={transition:null},WT={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:Pu,ReactCurrentOwner:zy};function cS(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:Uc,forEach:function(e,t,r){Uc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Uc(e,function(){t++}),t},toArray:function(e){return Uc(e,function(t){return t})||[]},only:function(e){if(!Uy(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=Zs;Oe.Fragment=CT;Oe.Profiler=$T;Oe.PureComponent=By;Oe.StrictMode=kT;Oe.Suspense=DT;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WT;Oe.act=cS;Oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=nS({},e.props),i=e.key,a=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,s=zy.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)sS.call(t,c)&&!oS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:_c,type:e.type,key:i,ref:a,props:n,_owner:s}};Oe.createContext=function(e){return e={$$typeof:MT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:IT,_context:e},e.Consumer=e};Oe.createElement=lS;Oe.createFactory=function(e){var t=lS.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:RT,render:e}};Oe.isValidElement=Uy;Oe.lazy=function(e){return{$$typeof:BT,_payload:{_status:-1,_result:e},_init:qT}};Oe.memo=function(e,t){return{$$typeof:LT,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=Pu.transition;Pu.transition={};try{e()}finally{Pu.transition=t}};Oe.unstable_act=cS;Oe.useCallback=function(e,t){return Gt.current.useCallback(e,t)};Oe.useContext=function(e){return Gt.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return Gt.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return Gt.current.useEffect(e,t)};Oe.useId=function(){return Gt.current.useId()};Oe.useImperativeHandle=function(e,t,r){return Gt.current.useImperativeHandle(e,t,r)};Oe.useInsertionEffect=function(e,t){return Gt.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return Gt.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return Gt.current.useMemo(e,t)};Oe.useReducer=function(e,t,r){return Gt.current.useReducer(e,t,r)};Oe.useRef=function(e){return Gt.current.useRef(e)};Oe.useState=function(e){return Gt.current.useState(e)};Oe.useSyncExternalStore=function(e,t,r){return Gt.current.useSyncExternalStore(e,t,r)};Oe.useTransition=function(){return Gt.current.useTransition()};Oe.version="18.3.1";tS.exports=Oe;var N=tS.exports;const $=Me(N),VT=Z1({__proto__:null,default:$},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HT=N,KT=Symbol.for("react.element"),GT=Symbol.for("react.fragment"),XT=Object.prototype.hasOwnProperty,YT=HT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JT={key:!0,ref:!0,__self:!0,__source:!0};function uS(e,t,r){var n,i={},a=null,s=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)XT.call(t,n)&&!JT.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:KT,type:e,key:a,ref:s,props:i,_owner:YT.current}}jf.Fragment=GT;jf.jsx=uS;jf.jsxs=uS;eS.exports=jf;var o=eS.exports,Qp={},dS={exports:{}},wr={},fS={exports:{}},hS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,I){var z=R.length;R.push(I);e:for(;0<z;){var W=z-1>>>1,C=R[W];if(0<i(C,I))R[W]=I,R[z]=C,z=W;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var I=R[0],z=R.pop();if(z!==I){R[0]=z;e:for(var W=0,C=R.length,F=C>>>1;W<F;){var Q=2*(W+1)-1,Z=R[Q],ee=Q+1,le=R[ee];if(0>i(Z,z))ee<C&&0>i(le,Z)?(R[W]=le,R[ee]=z,W=ee):(R[W]=Z,R[Q]=z,W=Q);else if(ee<C&&0>i(le,z))R[W]=le,R[ee]=z,W=ee;else break e}}return I}function i(R,I){var z=R.sortIndex-I.sortIndex;return z!==0?z:R.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();e.unstable_now=function(){return s.now()-l}}var c=[],u=[],f=1,d=null,h=3,p=!1,b=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(R){for(var I=r(u);I!==null;){if(I.callback===null)n(u);else if(I.startTime<=R)n(u),I.sortIndex=I.expirationTime,t(c,I);else break;I=r(u)}}function j(R){if(m=!1,x(R),!b)if(r(c)!==null)b=!0,D(w);else{var I=r(u);I!==null&&q(j,I.startTime-R)}}function w(R,I){b=!1,m&&(m=!1,v(E),E=-1),p=!0;var z=h;try{for(x(I),d=r(c);d!==null&&(!(d.expirationTime>I)||R&&!P());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var C=W(d.expirationTime<=I);I=e.unstable_now(),typeof C=="function"?d.callback=C:d===r(c)&&n(c),x(I)}else n(c);d=r(c)}if(d!==null)var F=!0;else{var Q=r(u);Q!==null&&q(j,Q.startTime-I),F=!1}return F}finally{d=null,h=z,p=!1}}var _=!1,S=null,E=-1,A=5,O=-1;function P(){return!(e.unstable_now()-O<A)}function k(){if(S!==null){var R=e.unstable_now();O=R;var I=!0;try{I=S(!0,R)}finally{I?M():(_=!1,S=null)}}else _=!1}var M;if(typeof g=="function")M=function(){g(k)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,B=L.port2;L.port1.onmessage=k,M=function(){B.postMessage(null)}}else M=function(){y(k,0)};function D(R){S=R,_||(_=!0,M())}function q(R,I){E=y(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){b||p||(b=!0,D(w))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var z=h;h=I;try{return R()}finally{h=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var z=h;h=R;try{return I()}finally{h=z}},e.unstable_scheduleCallback=function(R,I,z){var W=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,R){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=z+C,R={id:f++,callback:I,priorityLevel:R,startTime:z,expirationTime:C,sortIndex:-1},z>W?(R.sortIndex=z,t(u,R),r(c)===null&&R===r(u)&&(m?(v(E),E=-1):m=!0,q(j,z-W))):(R.sortIndex=C,t(c,R),b||p||(b=!0,D(w))),R},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(R){var I=h;return function(){var z=h;h=I;try{return R.apply(this,arguments)}finally{h=z}}}})(hS);fS.exports=hS;var QT=fS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT=N,br=QT;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pS=new Set,yl={};function _a(e,t){vs(e,t),vs(e+"Capture",t)}function vs(e,t){for(yl[e]=t,e=0;e<t.length;e++)pS.add(t[e])}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zp=Object.prototype.hasOwnProperty,eC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ax={},sx={};function tC(e){return Zp.call(sx,e)?!0:Zp.call(ax,e)?!1:eC.test(e)?sx[e]=!0:(ax[e]=!0,!1)}function rC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function nC(e,t,r,n){if(t===null||typeof t>"u"||rC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xt(e,t,r,n,i,a,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ct[e]=new Xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ct[t]=new Xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ct[e]=new Xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ct[e]=new Xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ct[e]=new Xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ct[e]=new Xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ct[e]=new Xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ct[e]=new Xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ct[e]=new Xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var qy=/[\-:]([a-z])/g;function Wy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qy,Wy);Ct[t]=new Xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qy,Wy);Ct[t]=new Xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qy,Wy);Ct[t]=new Xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ct[e]=new Xt(e,1,!1,e.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ct[e]=new Xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vy(e,t,r,n){var i=Ct.hasOwnProperty(t)?Ct[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(nC(t,r,i,n)&&(r=null),n||i===null?tC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Un=ZT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qc=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),Hy=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),mS=Symbol.for("react.provider"),gS=Symbol.for("react.context"),Ky=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Gy=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),yS=Symbol.for("react.offscreen"),ox=Symbol.iterator;function _o(e){return e===null||typeof e!="object"?null:(e=ox&&e[ox]||e["@@iterator"],typeof e=="function"?e:null)}var rt=Object.assign,Lh;function qo(e){if(Lh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lh=t&&t[1]||""}return`
`+Lh+e}var Bh=!1;function Fh(e,t){if(!e||Bh)return"";Bh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),s=i.length-1,l=a.length-1;1<=s&&0<=l&&i[s]!==a[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==a[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==a[l]){var c=`
`+i[s].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=s&&0<=l);break}}}finally{Bh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qo(e):""}function iC(e){switch(e.tag){case 5:return qo(e.type);case 16:return qo("Lazy");case 13:return qo("Suspense");case 19:return qo("SuspenseList");case 0:case 2:case 15:return e=Fh(e.type,!1),e;case 11:return e=Fh(e.type.render,!1),e;case 1:return e=Fh(e.type,!0),e;default:return""}}function nm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Va:return"Fragment";case Wa:return"Portal";case em:return"Profiler";case Hy:return"StrictMode";case tm:return"Suspense";case rm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gS:return(e.displayName||"Context")+".Consumer";case mS:return(e._context.displayName||"Context")+".Provider";case Ky:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gy:return t=e.displayName||null,t!==null?t:nm(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return nm(e(t))}catch{}}return null}function aC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nm(t);case 8:return t===Hy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vS(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function sC(e){var t=vS(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){n=""+s,a.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wc(e){e._valueTracker||(e._valueTracker=sC(e))}function xS(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=vS(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Wu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function im(e,t){var r=t.checked;return rt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lx(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=bi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bS(e,t){t=t.checked,t!=null&&Vy(e,"checked",t,!1)}function am(e,t){bS(e,t);var r=bi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?sm(e,t.type,r):t.hasOwnProperty("defaultValue")&&sm(e,t.type,bi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cx(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function sm(e,t,r){(t!=="number"||Wu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Wo=Array.isArray;function os(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+bi(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function om(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return rt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ux(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ne(92));if(Wo(r)){if(1<r.length)throw Error(ne(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:bi(r)}}function wS(e,t){var r=bi(t.value),n=bi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function dx(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function _S(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?_S(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Vc,jS=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Vc=Vc||document.createElement("div"),Vc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Vc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function vl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oC=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(e){oC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jo[t]=Jo[e]})});function SS(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Jo.hasOwnProperty(e)&&Jo[e]?(""+t).trim():t+"px"}function NS(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=SS(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var lC=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cm(e,t){if(t){if(lC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function um(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dm=null;function Xy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fm=null,ls=null,cs=null;function fx(e){if(e=Nc(e)){if(typeof fm!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Of(t),fm(e.stateNode,e.type,t))}}function ES(e){ls?cs?cs.push(e):cs=[e]:ls=e}function AS(){if(ls){var e=ls,t=cs;if(cs=ls=null,fx(e),t)for(e=0;e<t.length;e++)fx(t[e])}}function OS(e,t){return e(t)}function PS(){}var zh=!1;function TS(e,t,r){if(zh)return e(t,r);zh=!0;try{return OS(e,t,r)}finally{zh=!1,(ls!==null||cs!==null)&&(PS(),AS())}}function xl(e,t){var r=e.stateNode;if(r===null)return null;var n=Of(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ne(231,t,typeof r));return r}var hm=!1;if(Mn)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){hm=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{hm=!1}function cC(e,t,r,n,i,a,s,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(f){this.onError(f)}}var Qo=!1,Vu=null,Hu=!1,pm=null,uC={onError:function(e){Qo=!0,Vu=e}};function dC(e,t,r,n,i,a,s,l,c){Qo=!1,Vu=null,cC.apply(uC,arguments)}function fC(e,t,r,n,i,a,s,l,c){if(dC.apply(this,arguments),Qo){if(Qo){var u=Vu;Qo=!1,Vu=null}else throw Error(ne(198));Hu||(Hu=!0,pm=u)}}function ja(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function CS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hx(e){if(ja(e)!==e)throw Error(ne(188))}function hC(e){var t=e.alternate;if(!t){if(t=ja(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return hx(i),e;if(a===n)return hx(i),t;a=a.sibling}throw Error(ne(188))}if(r.return!==n.return)r=i,n=a;else{for(var s=!1,l=i.child;l;){if(l===r){s=!0,r=i,n=a;break}if(l===n){s=!0,n=i,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,n=i;break}if(l===n){s=!0,n=a,r=i;break}l=l.sibling}if(!s)throw Error(ne(189))}}if(r.alternate!==n)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?e:t}function kS(e){return e=hC(e),e!==null?$S(e):null}function $S(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$S(e);if(t!==null)return t;e=e.sibling}return null}var IS=br.unstable_scheduleCallback,px=br.unstable_cancelCallback,pC=br.unstable_shouldYield,mC=br.unstable_requestPaint,at=br.unstable_now,gC=br.unstable_getCurrentPriorityLevel,Yy=br.unstable_ImmediatePriority,MS=br.unstable_UserBlockingPriority,Ku=br.unstable_NormalPriority,yC=br.unstable_LowPriority,RS=br.unstable_IdlePriority,Sf=null,cn=null;function vC(e){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(Sf,e,void 0,(e.current.flags&128)===128)}catch{}}var Qr=Math.clz32?Math.clz32:wC,xC=Math.log,bC=Math.LN2;function wC(e){return e>>>=0,e===0?32:31-(xC(e)/bC|0)|0}var Hc=64,Kc=4194304;function Vo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gu(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,s=r&268435455;if(s!==0){var l=s&~i;l!==0?n=Vo(l):(a&=s,a!==0&&(n=Vo(a)))}else s=r&~i,s!==0?n=Vo(s):a!==0&&(n=Vo(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qr(t),i=1<<r,n|=e[r],t&=~i;return n}function _C(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Qr(a),l=1<<s,c=i[s];c===-1?(!(l&r)||l&n)&&(i[s]=_C(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function mm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function DS(){var e=Hc;return Hc<<=1,!(Hc&4194240)&&(Hc=64),e}function Uh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function jc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qr(t),e[t]=r}function SC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Qr(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Jy(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qr(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var Ie=0;function LS(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var BS,Qy,FS,zS,US,gm=!1,Gc=[],ui=null,di=null,fi=null,bl=new Map,wl=new Map,Qn=[],NC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mx(e,t){switch(e){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":di=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":bl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wl.delete(t.pointerId)}}function So(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Nc(t),t!==null&&Qy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function EC(e,t,r,n,i){switch(t){case"focusin":return ui=So(ui,e,t,r,n,i),!0;case"dragenter":return di=So(di,e,t,r,n,i),!0;case"mouseover":return fi=So(fi,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return bl.set(a,So(bl.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,wl.set(a,So(wl.get(a)||null,e,t,r,n,i)),!0}return!1}function qS(e){var t=Ki(e.target);if(t!==null){var r=ja(t);if(r!==null){if(t=r.tag,t===13){if(t=CS(r),t!==null){e.blockedOn=t,US(e.priority,function(){FS(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ym(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);dm=n,r.target.dispatchEvent(n),dm=null}else return t=Nc(r),t!==null&&Qy(t),e.blockedOn=r,!1;t.shift()}return!0}function gx(e,t,r){Tu(e)&&r.delete(t)}function AC(){gm=!1,ui!==null&&Tu(ui)&&(ui=null),di!==null&&Tu(di)&&(di=null),fi!==null&&Tu(fi)&&(fi=null),bl.forEach(gx),wl.forEach(gx)}function No(e,t){e.blockedOn===t&&(e.blockedOn=null,gm||(gm=!0,br.unstable_scheduleCallback(br.unstable_NormalPriority,AC)))}function _l(e){function t(i){return No(i,e)}if(0<Gc.length){No(Gc[0],e);for(var r=1;r<Gc.length;r++){var n=Gc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ui!==null&&No(ui,e),di!==null&&No(di,e),fi!==null&&No(fi,e),bl.forEach(t),wl.forEach(t),r=0;r<Qn.length;r++)n=Qn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qn.length&&(r=Qn[0],r.blockedOn===null);)qS(r),r.blockedOn===null&&Qn.shift()}var us=Un.ReactCurrentBatchConfig,Xu=!0;function OC(e,t,r,n){var i=Ie,a=us.transition;us.transition=null;try{Ie=1,Zy(e,t,r,n)}finally{Ie=i,us.transition=a}}function PC(e,t,r,n){var i=Ie,a=us.transition;us.transition=null;try{Ie=4,Zy(e,t,r,n)}finally{Ie=i,us.transition=a}}function Zy(e,t,r,n){if(Xu){var i=ym(e,t,r,n);if(i===null)Qh(e,t,n,Yu,r),mx(e,n);else if(EC(i,e,t,r,n))n.stopPropagation();else if(mx(e,n),t&4&&-1<NC.indexOf(e)){for(;i!==null;){var a=Nc(i);if(a!==null&&BS(a),a=ym(e,t,r,n),a===null&&Qh(e,t,n,Yu,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else Qh(e,t,n,null,r)}}var Yu=null;function ym(e,t,r,n){if(Yu=null,e=Xy(n),e=Ki(e),e!==null)if(t=ja(e),t===null)e=null;else if(r=t.tag,r===13){if(e=CS(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yu=e,null}function WS(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gC()){case Yy:return 1;case MS:return 4;case Ku:case yC:return 16;case RS:return 536870912;default:return 16}default:return 16}}var ai=null,ev=null,Cu=null;function VS(){if(Cu)return Cu;var e,t=ev,r=t.length,n,i="value"in ai?ai.value:ai.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===i[a-n];n++);return Cu=i.slice(e,1<n?1-n:void 0)}function ku(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xc(){return!0}function yx(){return!1}function _r(e){function t(r,n,i,a,s){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Xc:yx,this.isPropagationStopped=yx,this}return rt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Xc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Xc)},persist:function(){},isPersistent:Xc}),t}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tv=_r(eo),Sc=rt({},eo,{view:0,detail:0}),TC=_r(Sc),qh,Wh,Eo,Nf=rt({},Sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Eo&&(Eo&&e.type==="mousemove"?(qh=e.screenX-Eo.screenX,Wh=e.screenY-Eo.screenY):Wh=qh=0,Eo=e),qh)},movementY:function(e){return"movementY"in e?e.movementY:Wh}}),vx=_r(Nf),CC=rt({},Nf,{dataTransfer:0}),kC=_r(CC),$C=rt({},Sc,{relatedTarget:0}),Vh=_r($C),IC=rt({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),MC=_r(IC),RC=rt({},eo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),DC=_r(RC),LC=rt({},eo,{data:0}),xx=_r(LC),BC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function UC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zC[e])?!!t[e]:!1}function rv(){return UC}var qC=rt({},Sc,{key:function(e){if(e.key){var t=BC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ku(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?FC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rv,charCode:function(e){return e.type==="keypress"?ku(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ku(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),WC=_r(qC),VC=rt({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bx=_r(VC),HC=rt({},Sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rv}),KC=_r(HC),GC=rt({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),XC=_r(GC),YC=rt({},Nf,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),JC=_r(YC),QC=[9,13,27,32],nv=Mn&&"CompositionEvent"in window,Zo=null;Mn&&"documentMode"in document&&(Zo=document.documentMode);var ZC=Mn&&"TextEvent"in window&&!Zo,HS=Mn&&(!nv||Zo&&8<Zo&&11>=Zo),wx=" ",_x=!1;function KS(e,t){switch(e){case"keyup":return QC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GS(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ha=!1;function ek(e,t){switch(e){case"compositionend":return GS(t);case"keypress":return t.which!==32?null:(_x=!0,wx);case"textInput":return e=t.data,e===wx&&_x?null:e;default:return null}}function tk(e,t){if(Ha)return e==="compositionend"||!nv&&KS(e,t)?(e=VS(),Cu=ev=ai=null,Ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HS&&t.locale!=="ko"?null:t.data;default:return null}}var rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rk[e.type]:t==="textarea"}function XS(e,t,r,n){ES(n),t=Ju(t,"onChange"),0<t.length&&(r=new tv("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var el=null,jl=null;function nk(e){sN(e,0)}function Ef(e){var t=Xa(e);if(xS(t))return e}function ik(e,t){if(e==="change")return t}var YS=!1;if(Mn){var Hh;if(Mn){var Kh="oninput"in document;if(!Kh){var Sx=document.createElement("div");Sx.setAttribute("oninput","return;"),Kh=typeof Sx.oninput=="function"}Hh=Kh}else Hh=!1;YS=Hh&&(!document.documentMode||9<document.documentMode)}function Nx(){el&&(el.detachEvent("onpropertychange",JS),jl=el=null)}function JS(e){if(e.propertyName==="value"&&Ef(jl)){var t=[];XS(t,jl,e,Xy(e)),TS(nk,t)}}function ak(e,t,r){e==="focusin"?(Nx(),el=t,jl=r,el.attachEvent("onpropertychange",JS)):e==="focusout"&&Nx()}function sk(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ef(jl)}function ok(e,t){if(e==="click")return Ef(t)}function lk(e,t){if(e==="input"||e==="change")return Ef(t)}function ck(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rn=typeof Object.is=="function"?Object.is:ck;function Sl(e,t){if(rn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Zp.call(t,i)||!rn(e[i],t[i]))return!1}return!0}function Ex(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ax(e,t){var r=Ex(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ex(r)}}function QS(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?QS(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ZS(){for(var e=window,t=Wu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wu(e.document)}return t}function iv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function uk(e){var t=ZS(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&QS(r.ownerDocument.documentElement,r)){if(n!==null&&iv(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=Ax(r,a);var s=Ax(r,n);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dk=Mn&&"documentMode"in document&&11>=document.documentMode,Ka=null,vm=null,tl=null,xm=!1;function Ox(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;xm||Ka==null||Ka!==Wu(n)||(n=Ka,"selectionStart"in n&&iv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),tl&&Sl(tl,n)||(tl=n,n=Ju(vm,"onSelect"),0<n.length&&(t=new tv("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ka)))}function Yc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ga={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},Gh={},eN={};Mn&&(eN=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Af(e){if(Gh[e])return Gh[e];if(!Ga[e])return e;var t=Ga[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in eN)return Gh[e]=t[r];return e}var tN=Af("animationend"),rN=Af("animationiteration"),nN=Af("animationstart"),iN=Af("transitionend"),aN=new Map,Px="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){aN.set(e,t),_a(t,[e])}for(var Xh=0;Xh<Px.length;Xh++){var Yh=Px[Xh],fk=Yh.toLowerCase(),hk=Yh[0].toUpperCase()+Yh.slice(1);Si(fk,"on"+hk)}Si(tN,"onAnimationEnd");Si(rN,"onAnimationIteration");Si(nN,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(iN,"onTransitionEnd");vs("onMouseEnter",["mouseout","mouseover"]);vs("onMouseLeave",["mouseout","mouseover"]);vs("onPointerEnter",["pointerout","pointerover"]);vs("onPointerLeave",["pointerout","pointerover"]);_a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_a("onBeforeInput",["compositionend","keypress","textInput","paste"]);_a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Tx(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,fC(n,t,void 0,e),e.currentTarget=null}function sN(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var s=n.length-1;0<=s;s--){var l=n[s],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Tx(i,l,u),a=c}else for(s=0;s<n.length;s++){if(l=n[s],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Tx(i,l,u),a=c}}}if(Hu)throw e=pm,Hu=!1,pm=null,e}function He(e,t){var r=t[Sm];r===void 0&&(r=t[Sm]=new Set);var n=e+"__bubble";r.has(n)||(oN(t,e,2,!1),r.add(n))}function Jh(e,t,r){var n=0;t&&(n|=4),oN(r,e,n,t)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function Nl(e){if(!e[Jc]){e[Jc]=!0,pS.forEach(function(r){r!=="selectionchange"&&(pk.has(r)||Jh(r,!1,e),Jh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jc]||(t[Jc]=!0,Jh("selectionchange",!1,t))}}function oN(e,t,r,n){switch(WS(t)){case 1:var i=OC;break;case 4:i=PC;break;default:i=Zy}r=i.bind(null,t,r,e),i=void 0,!hm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Qh(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=n.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Ki(l),s===null)return;if(c=s.tag,c===5||c===6){n=a=s;continue e}l=l.parentNode}}n=n.return}TS(function(){var u=a,f=Xy(r),d=[];e:{var h=aN.get(e);if(h!==void 0){var p=tv,b=e;switch(e){case"keypress":if(ku(r)===0)break e;case"keydown":case"keyup":p=WC;break;case"focusin":b="focus",p=Vh;break;case"focusout":b="blur",p=Vh;break;case"beforeblur":case"afterblur":p=Vh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=vx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=kC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=KC;break;case tN:case rN:case nN:p=MC;break;case iN:p=XC;break;case"scroll":p=TC;break;case"wheel":p=JC;break;case"copy":case"cut":case"paste":p=DC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=bx}var m=(t&4)!==0,y=!m&&e==="scroll",v=m?h!==null?h+"Capture":null:h;m=[];for(var g=u,x;g!==null;){x=g;var j=x.stateNode;if(x.tag===5&&j!==null&&(x=j,v!==null&&(j=xl(g,v),j!=null&&m.push(El(g,j,x)))),y)break;g=g.return}0<m.length&&(h=new p(h,b,null,r,f),d.push({event:h,listeners:m}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==dm&&(b=r.relatedTarget||r.fromElement)&&(Ki(b)||b[Rn]))break e;if((p||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,p?(b=r.relatedTarget||r.toElement,p=u,b=b?Ki(b):null,b!==null&&(y=ja(b),b!==y||b.tag!==5&&b.tag!==6)&&(b=null)):(p=null,b=u),p!==b)){if(m=vx,j="onMouseLeave",v="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=bx,j="onPointerLeave",v="onPointerEnter",g="pointer"),y=p==null?h:Xa(p),x=b==null?h:Xa(b),h=new m(j,g+"leave",p,r,f),h.target=y,h.relatedTarget=x,j=null,Ki(f)===u&&(m=new m(v,g+"enter",b,r,f),m.target=x,m.relatedTarget=y,j=m),y=j,p&&b)t:{for(m=p,v=b,g=0,x=m;x;x=ka(x))g++;for(x=0,j=v;j;j=ka(j))x++;for(;0<g-x;)m=ka(m),g--;for(;0<x-g;)v=ka(v),x--;for(;g--;){if(m===v||v!==null&&m===v.alternate)break t;m=ka(m),v=ka(v)}m=null}else m=null;p!==null&&Cx(d,h,p,m,!1),b!==null&&y!==null&&Cx(d,y,b,m,!0)}}e:{if(h=u?Xa(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var w=ik;else if(jx(h))if(YS)w=lk;else{w=sk;var _=ak}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=ok);if(w&&(w=w(e,u))){XS(d,w,r,f);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&sm(h,"number",h.value)}switch(_=u?Xa(u):window,e){case"focusin":(jx(_)||_.contentEditable==="true")&&(Ka=_,vm=u,tl=null);break;case"focusout":tl=vm=Ka=null;break;case"mousedown":xm=!0;break;case"contextmenu":case"mouseup":case"dragend":xm=!1,Ox(d,r,f);break;case"selectionchange":if(dk)break;case"keydown":case"keyup":Ox(d,r,f)}var S;if(nv)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ha?KS(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(HS&&r.locale!=="ko"&&(Ha||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ha&&(S=VS()):(ai=f,ev="value"in ai?ai.value:ai.textContent,Ha=!0)),_=Ju(u,E),0<_.length&&(E=new xx(E,e,null,r,f),d.push({event:E,listeners:_}),S?E.data=S:(S=GS(r),S!==null&&(E.data=S)))),(S=ZC?ek(e,r):tk(e,r))&&(u=Ju(u,"onBeforeInput"),0<u.length&&(f=new xx("onBeforeInput","beforeinput",null,r,f),d.push({event:f,listeners:u}),f.data=S))}sN(d,t)})}function El(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ju(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=xl(e,r),a!=null&&n.unshift(El(e,a,i)),a=xl(e,t),a!=null&&n.push(El(e,a,i))),e=e.return}return n}function ka(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cx(e,t,r,n,i){for(var a=t._reactName,s=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=xl(r,a),c!=null&&s.unshift(El(r,c,l))):i||(c=xl(r,a),c!=null&&s.push(El(r,c,l)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var mk=/\r\n?/g,gk=/\u0000|\uFFFD/g;function kx(e){return(typeof e=="string"?e:""+e).replace(mk,`
`).replace(gk,"")}function Qc(e,t,r){if(t=kx(t),kx(e)!==t&&r)throw Error(ne(425))}function Qu(){}var bm=null,wm=null;function _m(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,yk=typeof clearTimeout=="function"?clearTimeout:void 0,$x=typeof Promise=="function"?Promise:void 0,vk=typeof queueMicrotask=="function"?queueMicrotask:typeof $x<"u"?function(e){return $x.resolve(null).then(e).catch(xk)}:jm;function xk(e){setTimeout(function(){throw e})}function Zh(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),_l(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);_l(t)}function hi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ix(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var to=Math.random().toString(36).slice(2),on="__reactFiber$"+to,Al="__reactProps$"+to,Rn="__reactContainer$"+to,Sm="__reactEvents$"+to,bk="__reactListeners$"+to,wk="__reactHandles$"+to;function Ki(e){var t=e[on];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Rn]||r[on]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ix(e);e!==null;){if(r=e[on])return r;e=Ix(e)}return t}e=r,r=e.parentNode}return null}function Nc(e){return e=e[on]||e[Rn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Of(e){return e[Al]||null}var Nm=[],Ya=-1;function Ni(e){return{current:e}}function Xe(e){0>Ya||(e.current=Nm[Ya],Nm[Ya]=null,Ya--)}function qe(e,t){Ya++,Nm[Ya]=e.current,e.current=t}var wi={},Ft=Ni(wi),nr=Ni(!1),da=wi;function xs(e,t){var r=e.type.contextTypes;if(!r)return wi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ir(e){return e=e.childContextTypes,e!=null}function Zu(){Xe(nr),Xe(Ft)}function Mx(e,t,r){if(Ft.current!==wi)throw Error(ne(168));qe(Ft,t),qe(nr,r)}function lN(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ne(108,aC(e)||"Unknown",i));return rt({},r,n)}function ed(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wi,da=Ft.current,qe(Ft,e),qe(nr,nr.current),!0}function Rx(e,t,r){var n=e.stateNode;if(!n)throw Error(ne(169));r?(e=lN(e,t,da),n.__reactInternalMemoizedMergedChildContext=e,Xe(nr),Xe(Ft),qe(Ft,e)):Xe(nr),qe(nr,r)}var jn=null,Pf=!1,ep=!1;function cN(e){jn===null?jn=[e]:jn.push(e)}function _k(e){Pf=!0,cN(e)}function Ei(){if(!ep&&jn!==null){ep=!0;var e=0,t=Ie;try{var r=jn;for(Ie=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}jn=null,Pf=!1}catch(i){throw jn!==null&&(jn=jn.slice(e+1)),IS(Yy,Ei),i}finally{Ie=t,ep=!1}}return null}var Ja=[],Qa=0,td=null,rd=0,Er=[],Ar=0,fa=null,Sn=1,Nn="";function Li(e,t){Ja[Qa++]=rd,Ja[Qa++]=td,td=e,rd=t}function uN(e,t,r){Er[Ar++]=Sn,Er[Ar++]=Nn,Er[Ar++]=fa,fa=e;var n=Sn;e=Nn;var i=32-Qr(n)-1;n&=~(1<<i),r+=1;var a=32-Qr(t)+i;if(30<a){var s=i-i%5;a=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Sn=1<<32-Qr(t)+i|r<<i|n,Nn=a+e}else Sn=1<<a|r<<i|n,Nn=e}function av(e){e.return!==null&&(Li(e,1),uN(e,1,0))}function sv(e){for(;e===td;)td=Ja[--Qa],Ja[Qa]=null,rd=Ja[--Qa],Ja[Qa]=null;for(;e===fa;)fa=Er[--Ar],Er[Ar]=null,Nn=Er[--Ar],Er[Ar]=null,Sn=Er[--Ar],Er[Ar]=null}var yr=null,gr=null,Ye=!1,Yr=null;function dN(e,t){var r=Tr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Dx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yr=e,gr=hi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yr=e,gr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fa!==null?{id:Sn,overflow:Nn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Tr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,yr=e,gr=null,!0):!1;default:return!1}}function Em(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Am(e){if(Ye){var t=gr;if(t){var r=t;if(!Dx(e,t)){if(Em(e))throw Error(ne(418));t=hi(r.nextSibling);var n=yr;t&&Dx(e,t)?dN(n,r):(e.flags=e.flags&-4097|2,Ye=!1,yr=e)}}else{if(Em(e))throw Error(ne(418));e.flags=e.flags&-4097|2,Ye=!1,yr=e}}}function Lx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yr=e}function Zc(e){if(e!==yr)return!1;if(!Ye)return Lx(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_m(e.type,e.memoizedProps)),t&&(t=gr)){if(Em(e))throw fN(),Error(ne(418));for(;t;)dN(e,t),t=hi(t.nextSibling)}if(Lx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){gr=hi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}gr=null}}else gr=yr?hi(e.stateNode.nextSibling):null;return!0}function fN(){for(var e=gr;e;)e=hi(e.nextSibling)}function bs(){gr=yr=null,Ye=!1}function ov(e){Yr===null?Yr=[e]:Yr.push(e)}var jk=Un.ReactCurrentBatchConfig;function Ao(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var n=r.stateNode}if(!n)throw Error(ne(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(s){var l=i.refs;s===null?delete l[a]:l[a]=s},t._stringRef=a,t)}if(typeof e!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,e))}return e}function eu(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Bx(e){var t=e._init;return t(e._payload)}function hN(e){function t(v,g){if(e){var x=v.deletions;x===null?(v.deletions=[g],v.flags|=16):x.push(g)}}function r(v,g){if(!e)return null;for(;g!==null;)t(v,g),g=g.sibling;return null}function n(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function i(v,g){return v=yi(v,g),v.index=0,v.sibling=null,v}function a(v,g,x){return v.index=x,e?(x=v.alternate,x!==null?(x=x.index,x<g?(v.flags|=2,g):x):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,g,x,j){return g===null||g.tag!==6?(g=op(x,v.mode,j),g.return=v,g):(g=i(g,x),g.return=v,g)}function c(v,g,x,j){var w=x.type;return w===Va?f(v,g,x.props.children,j,x.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xn&&Bx(w)===g.type)?(j=i(g,x.props),j.ref=Ao(v,g,x),j.return=v,j):(j=Bu(x.type,x.key,x.props,null,v.mode,j),j.ref=Ao(v,g,x),j.return=v,j)}function u(v,g,x,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=lp(x,v.mode,j),g.return=v,g):(g=i(g,x.children||[]),g.return=v,g)}function f(v,g,x,j,w){return g===null||g.tag!==7?(g=na(x,v.mode,j,w),g.return=v,g):(g=i(g,x),g.return=v,g)}function d(v,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=op(""+g,v.mode,x),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case qc:return x=Bu(g.type,g.key,g.props,null,v.mode,x),x.ref=Ao(v,null,g),x.return=v,x;case Wa:return g=lp(g,v.mode,x),g.return=v,g;case Xn:var j=g._init;return d(v,j(g._payload),x)}if(Wo(g)||_o(g))return g=na(g,v.mode,x,null),g.return=v,g;eu(v,g)}return null}function h(v,g,x,j){var w=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return w!==null?null:l(v,g,""+x,j);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case qc:return x.key===w?c(v,g,x,j):null;case Wa:return x.key===w?u(v,g,x,j):null;case Xn:return w=x._init,h(v,g,w(x._payload),j)}if(Wo(x)||_o(x))return w!==null?null:f(v,g,x,j,null);eu(v,x)}return null}function p(v,g,x,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(x)||null,l(g,v,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case qc:return v=v.get(j.key===null?x:j.key)||null,c(g,v,j,w);case Wa:return v=v.get(j.key===null?x:j.key)||null,u(g,v,j,w);case Xn:var _=j._init;return p(v,g,x,_(j._payload),w)}if(Wo(j)||_o(j))return v=v.get(x)||null,f(g,v,j,w,null);eu(g,j)}return null}function b(v,g,x,j){for(var w=null,_=null,S=g,E=g=0,A=null;S!==null&&E<x.length;E++){S.index>E?(A=S,S=null):A=S.sibling;var O=h(v,S,x[E],j);if(O===null){S===null&&(S=A);break}e&&S&&O.alternate===null&&t(v,S),g=a(O,g,E),_===null?w=O:_.sibling=O,_=O,S=A}if(E===x.length)return r(v,S),Ye&&Li(v,E),w;if(S===null){for(;E<x.length;E++)S=d(v,x[E],j),S!==null&&(g=a(S,g,E),_===null?w=S:_.sibling=S,_=S);return Ye&&Li(v,E),w}for(S=n(v,S);E<x.length;E++)A=p(S,v,E,x[E],j),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?E:A.key),g=a(A,g,E),_===null?w=A:_.sibling=A,_=A);return e&&S.forEach(function(P){return t(v,P)}),Ye&&Li(v,E),w}function m(v,g,x,j){var w=_o(x);if(typeof w!="function")throw Error(ne(150));if(x=w.call(x),x==null)throw Error(ne(151));for(var _=w=null,S=g,E=g=0,A=null,O=x.next();S!==null&&!O.done;E++,O=x.next()){S.index>E?(A=S,S=null):A=S.sibling;var P=h(v,S,O.value,j);if(P===null){S===null&&(S=A);break}e&&S&&P.alternate===null&&t(v,S),g=a(P,g,E),_===null?w=P:_.sibling=P,_=P,S=A}if(O.done)return r(v,S),Ye&&Li(v,E),w;if(S===null){for(;!O.done;E++,O=x.next())O=d(v,O.value,j),O!==null&&(g=a(O,g,E),_===null?w=O:_.sibling=O,_=O);return Ye&&Li(v,E),w}for(S=n(v,S);!O.done;E++,O=x.next())O=p(S,v,E,O.value,j),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?E:O.key),g=a(O,g,E),_===null?w=O:_.sibling=O,_=O);return e&&S.forEach(function(k){return t(v,k)}),Ye&&Li(v,E),w}function y(v,g,x,j){if(typeof x=="object"&&x!==null&&x.type===Va&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case qc:e:{for(var w=x.key,_=g;_!==null;){if(_.key===w){if(w=x.type,w===Va){if(_.tag===7){r(v,_.sibling),g=i(_,x.props.children),g.return=v,v=g;break e}}else if(_.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Xn&&Bx(w)===_.type){r(v,_.sibling),g=i(_,x.props),g.ref=Ao(v,_,x),g.return=v,v=g;break e}r(v,_);break}else t(v,_);_=_.sibling}x.type===Va?(g=na(x.props.children,v.mode,j,x.key),g.return=v,v=g):(j=Bu(x.type,x.key,x.props,null,v.mode,j),j.ref=Ao(v,g,x),j.return=v,v=j)}return s(v);case Wa:e:{for(_=x.key;g!==null;){if(g.key===_)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){r(v,g.sibling),g=i(g,x.children||[]),g.return=v,v=g;break e}else{r(v,g);break}else t(v,g);g=g.sibling}g=lp(x,v.mode,j),g.return=v,v=g}return s(v);case Xn:return _=x._init,y(v,g,_(x._payload),j)}if(Wo(x))return b(v,g,x,j);if(_o(x))return m(v,g,x,j);eu(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(r(v,g.sibling),g=i(g,x),g.return=v,v=g):(r(v,g),g=op(x,v.mode,j),g.return=v,v=g),s(v)):r(v,g)}return y}var ws=hN(!0),pN=hN(!1),nd=Ni(null),id=null,Za=null,lv=null;function cv(){lv=Za=id=null}function uv(e){var t=nd.current;Xe(nd),e._currentValue=t}function Om(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ds(e,t){id=e,lv=Za=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(er=!0),e.firstContext=null)}function Ir(e){var t=e._currentValue;if(lv!==e)if(e={context:e,memoizedValue:t,next:null},Za===null){if(id===null)throw Error(ne(308));Za=e,id.dependencies={lanes:0,firstContext:e}}else Za=Za.next=e;return t}var Gi=null;function dv(e){Gi===null?Gi=[e]:Gi.push(e)}function mN(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,dv(t)):(r.next=i.next,i.next=r),t.interleaved=r,Dn(e,n)}function Dn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Yn=!1;function fv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pi(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Te&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Dn(e,r)}return i=n.interleaved,i===null?(t.next=t,dv(n)):(t.next=i.next,i.next=t),n.interleaved=t,Dn(e,r)}function $u(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jy(e,r)}}function Fx(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=s:a=a.next=s,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ad(e,t,r,n){var i=e.updateQueue;Yn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,s===null?a=u:s.next=u,s=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==s&&(l===null?f.firstBaseUpdate=u:l.next=u,f.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;s=0,f=u=c=null,l=a;do{var h=l.lane,p=l.eventTime;if((n&h)===h){f!==null&&(f=f.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,m=l;switch(h=t,p=r,m.tag){case 1:if(b=m.payload,typeof b=="function"){d=b.call(p,d,h);break e}d=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=m.payload,h=typeof b=="function"?b.call(p,d,h):b,h==null)break e;d=rt({},d,h);break e;case 2:Yn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(u=f=p,c=d):f=f.next=p,s|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(f===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=f,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);pa|=s,e.lanes=s,e.memoizedState=d}}function zx(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ne(191,i));i.call(n)}}}var Ec={},un=Ni(Ec),Ol=Ni(Ec),Pl=Ni(Ec);function Xi(e){if(e===Ec)throw Error(ne(174));return e}function hv(e,t){switch(qe(Pl,t),qe(Ol,e),qe(un,Ec),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lm(t,e)}Xe(un),qe(un,t)}function _s(){Xe(un),Xe(Ol),Xe(Pl)}function yN(e){Xi(Pl.current);var t=Xi(un.current),r=lm(t,e.type);t!==r&&(qe(Ol,e),qe(un,r))}function pv(e){Ol.current===e&&(Xe(un),Xe(Ol))}var et=Ni(0);function sd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tp=[];function mv(){for(var e=0;e<tp.length;e++)tp[e]._workInProgressVersionPrimary=null;tp.length=0}var Iu=Un.ReactCurrentDispatcher,rp=Un.ReactCurrentBatchConfig,ha=0,tt=null,gt=null,_t=null,od=!1,rl=!1,Tl=0,Sk=0;function kt(){throw Error(ne(321))}function gv(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!rn(e[r],t[r]))return!1;return!0}function yv(e,t,r,n,i,a){if(ha=a,tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Iu.current=e===null||e.memoizedState===null?Ok:Pk,e=r(n,i),rl){a=0;do{if(rl=!1,Tl=0,25<=a)throw Error(ne(301));a+=1,_t=gt=null,t.updateQueue=null,Iu.current=Tk,e=r(n,i)}while(rl)}if(Iu.current=ld,t=gt!==null&&gt.next!==null,ha=0,_t=gt=tt=null,od=!1,t)throw Error(ne(300));return e}function vv(){var e=Tl!==0;return Tl=0,e}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?tt.memoizedState=_t=e:_t=_t.next=e,_t}function Mr(){if(gt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=gt.next;var t=_t===null?tt.memoizedState:_t.next;if(t!==null)_t=t,gt=e;else{if(e===null)throw Error(ne(310));gt=e,e={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},_t===null?tt.memoizedState=_t=e:_t=_t.next=e}return _t}function Cl(e,t){return typeof t=="function"?t(e):t}function np(e){var t=Mr(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=gt,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=s=null,c=null,u=a;do{var f=u.lane;if((ha&f)===f)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var d={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,s=n):c=c.next=d,tt.lanes|=f,pa|=f}u=u.next}while(u!==null&&u!==a);c===null?s=n:c.next=l,rn(n,t.memoizedState)||(er=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,tt.lanes|=a,pa|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ip(e){var t=Mr(),r=t.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);rn(a,t.memoizedState)||(er=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function vN(){}function xN(e,t){var r=tt,n=Mr(),i=t(),a=!rn(n.memoizedState,i);if(a&&(n.memoizedState=i,er=!0),n=n.queue,xv(_N.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||_t!==null&&_t.memoizedState.tag&1){if(r.flags|=2048,kl(9,wN.bind(null,r,n,i,t),void 0,null),St===null)throw Error(ne(349));ha&30||bN(r,t,i)}return i}function bN(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wN(e,t,r,n){t.value=r,t.getSnapshot=n,jN(t)&&SN(e)}function _N(e,t,r){return r(function(){jN(t)&&SN(e)})}function jN(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!rn(e,r)}catch{return!0}}function SN(e){var t=Dn(e,1);t!==null&&Zr(t,e,1,-1)}function Ux(e){var t=sn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:e},t.queue=e,e=e.dispatch=Ak.bind(null,tt,e),[t.memoizedState,e]}function kl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=tt.updateQueue,t===null?(t={lastEffect:null,stores:null},tt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function NN(){return Mr().memoizedState}function Mu(e,t,r,n){var i=sn();tt.flags|=e,i.memoizedState=kl(1|t,r,void 0,n===void 0?null:n)}function Tf(e,t,r,n){var i=Mr();n=n===void 0?null:n;var a=void 0;if(gt!==null){var s=gt.memoizedState;if(a=s.destroy,n!==null&&gv(n,s.deps)){i.memoizedState=kl(t,r,a,n);return}}tt.flags|=e,i.memoizedState=kl(1|t,r,a,n)}function qx(e,t){return Mu(8390656,8,e,t)}function xv(e,t){return Tf(2048,8,e,t)}function EN(e,t){return Tf(4,2,e,t)}function AN(e,t){return Tf(4,4,e,t)}function ON(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function PN(e,t,r){return r=r!=null?r.concat([e]):null,Tf(4,4,ON.bind(null,t,e),r)}function bv(){}function TN(e,t){var r=Mr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gv(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function CN(e,t){var r=Mr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gv(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function kN(e,t,r){return ha&21?(rn(r,t)||(r=DS(),tt.lanes|=r,pa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,er=!0),e.memoizedState=r)}function Nk(e,t){var r=Ie;Ie=r!==0&&4>r?r:4,e(!0);var n=rp.transition;rp.transition={};try{e(!1),t()}finally{Ie=r,rp.transition=n}}function $N(){return Mr().memoizedState}function Ek(e,t,r){var n=gi(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},IN(e))MN(t,r);else if(r=mN(e,t,r,n),r!==null){var i=Kt();Zr(r,e,n,i),RN(r,t,n)}}function Ak(e,t,r){var n=gi(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(IN(e))MN(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var s=t.lastRenderedState,l=a(s,r);if(i.hasEagerState=!0,i.eagerState=l,rn(l,s)){var c=t.interleaved;c===null?(i.next=i,dv(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=mN(e,t,i,n),r!==null&&(i=Kt(),Zr(r,e,n,i),RN(r,t,n))}}function IN(e){var t=e.alternate;return e===tt||t!==null&&t===tt}function MN(e,t){rl=od=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function RN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jy(e,r)}}var ld={readContext:Ir,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useInsertionEffect:kt,useLayoutEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useMutableSource:kt,useSyncExternalStore:kt,useId:kt,unstable_isNewReconciler:!1},Ok={readContext:Ir,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:Ir,useEffect:qx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mu(4194308,4,ON.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mu(4,2,e,t)},useMemo:function(e,t){var r=sn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=sn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Ek.bind(null,tt,e),[n.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:Ux,useDebugValue:bv,useDeferredValue:function(e){return sn().memoizedState=e},useTransition:function(){var e=Ux(!1),t=e[0];return e=Nk.bind(null,e[1]),sn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=tt,i=sn();if(Ye){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=t(),St===null)throw Error(ne(349));ha&30||bN(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,qx(_N.bind(null,n,a,e),[e]),n.flags|=2048,kl(9,wN.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=sn(),t=St.identifierPrefix;if(Ye){var r=Nn,n=Sn;r=(n&~(1<<32-Qr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Tl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Sk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Pk={readContext:Ir,useCallback:TN,useContext:Ir,useEffect:xv,useImperativeHandle:PN,useInsertionEffect:EN,useLayoutEffect:AN,useMemo:CN,useReducer:np,useRef:NN,useState:function(){return np(Cl)},useDebugValue:bv,useDeferredValue:function(e){var t=Mr();return kN(t,gt.memoizedState,e)},useTransition:function(){var e=np(Cl)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:vN,useSyncExternalStore:xN,useId:$N,unstable_isNewReconciler:!1},Tk={readContext:Ir,useCallback:TN,useContext:Ir,useEffect:xv,useImperativeHandle:PN,useInsertionEffect:EN,useLayoutEffect:AN,useMemo:CN,useReducer:ip,useRef:NN,useState:function(){return ip(Cl)},useDebugValue:bv,useDeferredValue:function(e){var t=Mr();return gt===null?t.memoizedState=e:kN(t,gt.memoizedState,e)},useTransition:function(){var e=ip(Cl)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:vN,useSyncExternalStore:xN,useId:$N,unstable_isNewReconciler:!1};function Wr(e,t){if(e&&e.defaultProps){t=rt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Pm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:rt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Cf={isMounted:function(e){return(e=e._reactInternals)?ja(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Kt(),i=gi(e),a=Tn(n,i);a.payload=t,r!=null&&(a.callback=r),t=pi(e,a,i),t!==null&&(Zr(t,e,i,n),$u(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Kt(),i=gi(e),a=Tn(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=pi(e,a,i),t!==null&&(Zr(t,e,i,n),$u(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Kt(),n=gi(e),i=Tn(r,n);i.tag=2,t!=null&&(i.callback=t),t=pi(e,i,n),t!==null&&(Zr(t,e,n,r),$u(t,e,n))}};function Wx(e,t,r,n,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,s):t.prototype&&t.prototype.isPureReactComponent?!Sl(r,n)||!Sl(i,a):!0}function DN(e,t,r){var n=!1,i=wi,a=t.contextType;return typeof a=="object"&&a!==null?a=Ir(a):(i=ir(t)?da:Ft.current,n=t.contextTypes,a=(n=n!=null)?xs(e,i):wi),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Cf,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Vx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Cf.enqueueReplaceState(t,t.state,null)}function Tm(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},fv(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Ir(a):(a=ir(t)?da:Ft.current,i.context=xs(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Pm(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Cf.enqueueReplaceState(i,i.state,null),ad(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function js(e,t){try{var r="",n=t;do r+=iC(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function ap(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Cm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Ck=typeof WeakMap=="function"?WeakMap:Map;function LN(e,t,r){r=Tn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){ud||(ud=!0,zm=n),Cm(e,t)},r}function BN(e,t,r){r=Tn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Cm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Cm(e,t),typeof n!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function Hx(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Ck;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Vk.bind(null,e,t,r),t.then(e,e))}function Kx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Gx(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tn(-1,1),t.tag=2,pi(r,t,1))),r.lanes|=1),e)}var kk=Un.ReactCurrentOwner,er=!1;function zt(e,t,r,n){t.child=e===null?pN(t,null,r,n):ws(t,e.child,r,n)}function Xx(e,t,r,n,i){r=r.render;var a=t.ref;return ds(t,i),n=yv(e,t,r,n,a,i),r=vv(),e!==null&&!er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ln(e,t,i)):(Ye&&r&&av(t),t.flags|=1,zt(e,t,n,i),t.child)}function Yx(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Ov(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,FN(e,t,a,n,i)):(e=Bu(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(r=r.compare,r=r!==null?r:Sl,r(s,n)&&e.ref===t.ref)return Ln(e,t,i)}return t.flags|=1,e=yi(a,n),e.ref=t.ref,e.return=t,t.child=e}function FN(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Sl(a,n)&&e.ref===t.ref)if(er=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(er=!0);else return t.lanes=e.lanes,Ln(e,t,i)}return km(e,t,r,n,i)}function zN(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(ts,ur),ur|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(ts,ur),ur|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,qe(ts,ur),ur|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,qe(ts,ur),ur|=n;return zt(e,t,i,r),t.child}function UN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function km(e,t,r,n,i){var a=ir(r)?da:Ft.current;return a=xs(t,a),ds(t,i),r=yv(e,t,r,n,a,i),n=vv(),e!==null&&!er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ln(e,t,i)):(Ye&&n&&av(t),t.flags|=1,zt(e,t,r,i),t.child)}function Jx(e,t,r,n,i){if(ir(r)){var a=!0;ed(t)}else a=!1;if(ds(t,i),t.stateNode===null)Ru(e,t),DN(t,r,n),Tm(t,r,n,i),n=!0;else if(e===null){var s=t.stateNode,l=t.memoizedProps;s.props=l;var c=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ir(u):(u=ir(r)?da:Ft.current,u=xs(t,u));var f=r.getDerivedStateFromProps,d=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Vx(t,s,n,u),Yn=!1;var h=t.memoizedState;s.state=h,ad(t,n,s,i),c=t.memoizedState,l!==n||h!==c||nr.current||Yn?(typeof f=="function"&&(Pm(t,r,f,n),c=t.memoizedState),(l=Yn||Wx(t,r,l,n,h,c,u))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),s.props=n,s.state=c,s.context=u,n=l):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,gN(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wr(t.type,l),s.props=u,d=t.pendingProps,h=s.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ir(c):(c=ir(r)?da:Ft.current,c=xs(t,c));var p=r.getDerivedStateFromProps;(f=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||h!==c)&&Vx(t,s,n,c),Yn=!1,h=t.memoizedState,s.state=h,ad(t,n,s,i);var b=t.memoizedState;l!==d||h!==b||nr.current||Yn?(typeof p=="function"&&(Pm(t,r,p,n),b=t.memoizedState),(u=Yn||Wx(t,r,u,n,h,b,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,b,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,b,c)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=b),s.props=n,s.state=b,s.context=c,n=u):(typeof s.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return $m(e,t,r,n,a,i)}function $m(e,t,r,n,i,a){UN(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return i&&Rx(t,r,!1),Ln(e,t,a);n=t.stateNode,kk.current=t;var l=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=ws(t,e.child,null,a),t.child=ws(t,null,l,a)):zt(e,t,l,a),t.memoizedState=n.state,i&&Rx(t,r,!0),t.child}function qN(e){var t=e.stateNode;t.pendingContext?Mx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Mx(e,t.context,!1),hv(e,t.containerInfo)}function Qx(e,t,r,n,i){return bs(),ov(i),t.flags|=256,zt(e,t,r,n),t.child}var Im={dehydrated:null,treeContext:null,retryLane:0};function Mm(e){return{baseLanes:e,cachePool:null,transitions:null}}function WN(e,t,r){var n=t.pendingProps,i=et.current,a=!1,s=(t.flags&128)!==0,l;if((l=s)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),qe(et,i&1),e===null)return Am(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,a?(n=t.mode,a=t.child,s={mode:"hidden",children:s},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=If(s,n,0,null),e=na(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Mm(r),t.memoizedState=Im,e):wv(t,s));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $k(e,t,s,n,l,i,r);if(a){a=n.fallback,s=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(s&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=yi(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=yi(l,a):(a=na(a,s,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,s=e.child.memoizedState,s=s===null?Mm(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~r,t.memoizedState=Im,n}return a=e.child,e=a.sibling,n=yi(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function wv(e,t){return t=If({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function tu(e,t,r,n){return n!==null&&ov(n),ws(t,e.child,null,r),e=wv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $k(e,t,r,n,i,a,s){if(r)return t.flags&256?(t.flags&=-257,n=ap(Error(ne(422))),tu(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=If({mode:"visible",children:n.children},i,0,null),a=na(a,i,s,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&ws(t,e.child,null,s),t.child.memoizedState=Mm(s),t.memoizedState=Im,a);if(!(t.mode&1))return tu(e,t,s,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(ne(419)),n=ap(a,n,void 0),tu(e,t,s,n)}if(l=(s&e.childLanes)!==0,er||l){if(n=St,n!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Dn(e,i),Zr(n,e,i,-1))}return Av(),n=ap(Error(ne(421))),tu(e,t,s,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Hk.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,gr=hi(i.nextSibling),yr=t,Ye=!0,Yr=null,e!==null&&(Er[Ar++]=Sn,Er[Ar++]=Nn,Er[Ar++]=fa,Sn=e.id,Nn=e.overflow,fa=t),t=wv(t,n.children),t.flags|=4096,t)}function Zx(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Om(e.return,t,r)}function sp(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function VN(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(zt(e,t,n.children,r),n=et.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zx(e,r,t);else if(e.tag===19)Zx(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(qe(et,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&sd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),sp(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&sd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}sp(t,!0,r,null,a);break;case"together":sp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ru(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ln(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,r=yi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=yi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Ik(e,t,r){switch(t.tag){case 3:qN(t),bs();break;case 5:yN(t);break;case 1:ir(t.type)&&ed(t);break;case 4:hv(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;qe(nd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(qe(et,et.current&1),t.flags|=128,null):r&t.child.childLanes?WN(e,t,r):(qe(et,et.current&1),e=Ln(e,t,r),e!==null?e.sibling:null);qe(et,et.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return VN(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qe(et,et.current),n)break;return null;case 22:case 23:return t.lanes=0,zN(e,t,r)}return Ln(e,t,r)}var HN,Rm,KN,GN;HN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rm=function(){};KN=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Xi(un.current);var a=null;switch(r){case"input":i=im(e,i),n=im(e,n),a=[];break;case"select":i=rt({},i,{value:void 0}),n=rt({},n,{value:void 0}),a=[];break;case"textarea":i=om(e,i),n=om(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Qu)}cm(r,n);var s;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yl.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(r||(r={}),r[s]=c[s])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yl.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&He("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};GN=function(e,t,r,n){r!==n&&(t.flags|=4)};function Oo(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $t(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Mk(e,t,r){var n=t.pendingProps;switch(sv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(t),null;case 1:return ir(t.type)&&Zu(),$t(t),null;case 3:return n=t.stateNode,_s(),Xe(nr),Xe(Ft),mv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Zc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Yr!==null&&(Wm(Yr),Yr=null))),Rm(e,t),$t(t),null;case 5:pv(t);var i=Xi(Pl.current);if(r=t.type,e!==null&&t.stateNode!=null)KN(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ne(166));return $t(t),null}if(e=Xi(un.current),Zc(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[on]=t,n[Al]=a,e=(t.mode&1)!==0,r){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(i=0;i<Ho.length;i++)He(Ho[i],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":lx(n,a),He("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},He("invalid",n);break;case"textarea":ux(n,a),He("invalid",n)}cm(r,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&Qc(n.textContent,l,e),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Qc(n.textContent,l,e),i=["children",""+l]):yl.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&He("scroll",n)}switch(r){case"input":Wc(n),cx(n,a,!0);break;case"textarea":Wc(n),dx(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Qu)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=_S(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[on]=t,e[Al]=n,HN(e,t,!1,!1),t.stateNode=e;e:{switch(s=um(r,n),r){case"dialog":He("cancel",e),He("close",e),i=n;break;case"iframe":case"object":case"embed":He("load",e),i=n;break;case"video":case"audio":for(i=0;i<Ho.length;i++)He(Ho[i],e);i=n;break;case"source":He("error",e),i=n;break;case"img":case"image":case"link":He("error",e),He("load",e),i=n;break;case"details":He("toggle",e),i=n;break;case"input":lx(e,n),i=im(e,n),He("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=rt({},n,{value:void 0}),He("invalid",e);break;case"textarea":ux(e,n),i=om(e,n),He("invalid",e);break;default:i=n}cm(r,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?NS(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jS(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&vl(e,c):typeof c=="number"&&vl(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(yl.hasOwnProperty(a)?c!=null&&a==="onScroll"&&He("scroll",e):c!=null&&Vy(e,a,c,s))}switch(r){case"input":Wc(e),cx(e,n,!1);break;case"textarea":Wc(e),dx(e);break;case"option":n.value!=null&&e.setAttribute("value",""+bi(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?os(e,!!n.multiple,a,!1):n.defaultValue!=null&&os(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Qu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $t(t),null;case 6:if(e&&t.stateNode!=null)GN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ne(166));if(r=Xi(Pl.current),Xi(un.current),Zc(t)){if(n=t.stateNode,r=t.memoizedProps,n[on]=t,(a=n.nodeValue!==r)&&(e=yr,e!==null))switch(e.tag){case 3:Qc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Qc(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[on]=t,t.stateNode=n}return $t(t),null;case 13:if(Xe(et),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&gr!==null&&t.mode&1&&!(t.flags&128))fN(),bs(),t.flags|=98560,a=!1;else if(a=Zc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ne(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[on]=t}else bs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$t(t),a=!1}else Yr!==null&&(Wm(Yr),Yr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?vt===0&&(vt=3):Av())),t.updateQueue!==null&&(t.flags|=4),$t(t),null);case 4:return _s(),Rm(e,t),e===null&&Nl(t.stateNode.containerInfo),$t(t),null;case 10:return uv(t.type._context),$t(t),null;case 17:return ir(t.type)&&Zu(),$t(t),null;case 19:if(Xe(et),a=t.memoizedState,a===null)return $t(t),null;if(n=(t.flags&128)!==0,s=a.rendering,s===null)if(n)Oo(a,!1);else{if(vt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=sd(e),s!==null){for(t.flags|=128,Oo(a,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return qe(et,et.current&1|2),t.child}e=e.sibling}a.tail!==null&&at()>Ss&&(t.flags|=128,n=!0,Oo(a,!1),t.lanes=4194304)}else{if(!n)if(e=sd(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Oo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Ye)return $t(t),null}else 2*at()-a.renderingStartTime>Ss&&r!==1073741824&&(t.flags|=128,n=!0,Oo(a,!1),t.lanes=4194304);a.isBackwards?(s.sibling=t.child,t.child=s):(r=a.last,r!==null?r.sibling=s:t.child=s,a.last=s)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=at(),t.sibling=null,r=et.current,qe(et,n?r&1|2:r&1),t):($t(t),null);case 22:case 23:return Ev(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ur&1073741824&&($t(t),t.subtreeFlags&6&&(t.flags|=8192)):$t(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function Rk(e,t){switch(sv(t),t.tag){case 1:return ir(t.type)&&Zu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _s(),Xe(nr),Xe(Ft),mv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pv(t),null;case 13:if(Xe(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));bs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Xe(et),null;case 4:return _s(),null;case 10:return uv(t.type._context),null;case 22:case 23:return Ev(),null;case 24:return null;default:return null}}var ru=!1,Dt=!1,Dk=typeof WeakSet=="function"?WeakSet:Set,ue=null;function es(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nt(e,t,n)}else r.current=null}function Dm(e,t,r){try{r()}catch(n){nt(e,t,n)}}var eb=!1;function Lk(e,t){if(bm=Xu,e=ZS(),iv(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var s=0,l=-1,c=-1,u=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==r||i!==0&&d.nodeType!==3||(l=s+i),d!==a||n!==0&&d.nodeType!==3||(c=s+n),d.nodeType===3&&(s+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===e)break t;if(h===r&&++u===i&&(l=s),h===a&&++f===n&&(c=s),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(wm={focusedElem:e,selectionRange:r},Xu=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var m=b.memoizedProps,y=b.memoizedState,v=t.stateNode,g=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wr(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(j){nt(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return b=eb,eb=!1,b}function nl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Dm(t,r,a)}i=i.next}while(i!==n)}}function kf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Lm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function XN(e){var t=e.alternate;t!==null&&(e.alternate=null,XN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[on],delete t[Al],delete t[Sm],delete t[bk],delete t[wk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YN(e){return e.tag===5||e.tag===3||e.tag===4}function tb(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Qu));else if(n!==4&&(e=e.child,e!==null))for(Bm(e,t,r),e=e.sibling;e!==null;)Bm(e,t,r),e=e.sibling}function Fm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Fm(e,t,r),e=e.sibling;e!==null;)Fm(e,t,r),e=e.sibling}var Pt=null,Hr=!1;function Kn(e,t,r){for(r=r.child;r!==null;)JN(e,t,r),r=r.sibling}function JN(e,t,r){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(Sf,r)}catch{}switch(r.tag){case 5:Dt||es(r,t);case 6:var n=Pt,i=Hr;Pt=null,Kn(e,t,r),Pt=n,Hr=i,Pt!==null&&(Hr?(e=Pt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Pt.removeChild(r.stateNode));break;case 18:Pt!==null&&(Hr?(e=Pt,r=r.stateNode,e.nodeType===8?Zh(e.parentNode,r):e.nodeType===1&&Zh(e,r),_l(e)):Zh(Pt,r.stateNode));break;case 4:n=Pt,i=Hr,Pt=r.stateNode.containerInfo,Hr=!0,Kn(e,t,r),Pt=n,Hr=i;break;case 0:case 11:case 14:case 15:if(!Dt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&Dm(r,t,s),i=i.next}while(i!==n)}Kn(e,t,r);break;case 1:if(!Dt&&(es(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){nt(r,t,l)}Kn(e,t,r);break;case 21:Kn(e,t,r);break;case 22:r.mode&1?(Dt=(n=Dt)||r.memoizedState!==null,Kn(e,t,r),Dt=n):Kn(e,t,r);break;default:Kn(e,t,r)}}function rb(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Dk),t.forEach(function(n){var i=Kk.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Fr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,s=t,l=s;e:for(;l!==null;){switch(l.tag){case 5:Pt=l.stateNode,Hr=!1;break e;case 3:Pt=l.stateNode.containerInfo,Hr=!0;break e;case 4:Pt=l.stateNode.containerInfo,Hr=!0;break e}l=l.return}if(Pt===null)throw Error(ne(160));JN(a,s,i),Pt=null,Hr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){nt(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QN(t,e),t=t.sibling}function QN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fr(t,e),an(e),n&4){try{nl(3,e,e.return),kf(3,e)}catch(m){nt(e,e.return,m)}try{nl(5,e,e.return)}catch(m){nt(e,e.return,m)}}break;case 1:Fr(t,e),an(e),n&512&&r!==null&&es(r,r.return);break;case 5:if(Fr(t,e),an(e),n&512&&r!==null&&es(r,r.return),e.flags&32){var i=e.stateNode;try{vl(i,"")}catch(m){nt(e,e.return,m)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&bS(i,a),um(l,s);var u=um(l,a);for(s=0;s<c.length;s+=2){var f=c[s],d=c[s+1];f==="style"?NS(i,d):f==="dangerouslySetInnerHTML"?jS(i,d):f==="children"?vl(i,d):Vy(i,f,d,u)}switch(l){case"input":am(i,a);break;case"textarea":wS(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?os(i,!!a.multiple,p,!1):h!==!!a.multiple&&(a.defaultValue!=null?os(i,!!a.multiple,a.defaultValue,!0):os(i,!!a.multiple,a.multiple?[]:"",!1))}i[Al]=a}catch(m){nt(e,e.return,m)}}break;case 6:if(Fr(t,e),an(e),n&4){if(e.stateNode===null)throw Error(ne(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){nt(e,e.return,m)}}break;case 3:if(Fr(t,e),an(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{_l(t.containerInfo)}catch(m){nt(e,e.return,m)}break;case 4:Fr(t,e),an(e);break;case 13:Fr(t,e),an(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Sv=at())),n&4&&rb(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(Dt=(u=Dt)||f,Fr(t,e),Dt=u):Fr(t,e),an(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!f&&e.mode&1)for(ue=e,f=e.child;f!==null;){for(d=ue=f;ue!==null;){switch(h=ue,p=h.child,h.tag){case 0:case 11:case 14:case 15:nl(4,h,h.return);break;case 1:es(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(m){nt(n,r,m)}}break;case 5:es(h,h.return);break;case 22:if(h.memoizedState!==null){ib(d);continue}}p!==null?(p.return=h,ue=p):ib(d)}f=f.sibling}e:for(f=null,d=e;;){if(d.tag===5){if(f===null){f=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=SS("display",s))}catch(m){nt(e,e.return,m)}}}else if(d.tag===6){if(f===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){nt(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Fr(t,e),an(e),n&4&&rb(e);break;case 21:break;default:Fr(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(YN(r)){var n=r;break e}r=r.return}throw Error(ne(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(vl(i,""),n.flags&=-33);var a=tb(e);Fm(e,a,i);break;case 3:case 4:var s=n.stateNode.containerInfo,l=tb(e);Bm(e,l,s);break;default:throw Error(ne(161))}}catch(c){nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bk(e,t,r){ue=e,ZN(e)}function ZN(e,t,r){for(var n=(e.mode&1)!==0;ue!==null;){var i=ue,a=i.child;if(i.tag===22&&n){var s=i.memoizedState!==null||ru;if(!s){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Dt;l=ru;var u=Dt;if(ru=s,(Dt=c)&&!u)for(ue=i;ue!==null;)s=ue,c=s.child,s.tag===22&&s.memoizedState!==null?ab(i):c!==null?(c.return=s,ue=c):ab(i);for(;a!==null;)ue=a,ZN(a),a=a.sibling;ue=i,ru=l,Dt=u}nb(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ue=a):nb(e)}}function nb(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Dt||kf(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Dt)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Wr(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&zx(t,a,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}zx(t,s,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var d=f.dehydrated;d!==null&&_l(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Dt||t.flags&512&&Lm(t)}catch(h){nt(t,t.return,h)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function ib(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function ab(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kf(4,t)}catch(c){nt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){nt(t,i,c)}}var a=t.return;try{Lm(t)}catch(c){nt(t,a,c)}break;case 5:var s=t.return;try{Lm(t)}catch(c){nt(t,s,c)}}}catch(c){nt(t,t.return,c)}if(t===e){ue=null;break}var l=t.sibling;if(l!==null){l.return=t.return,ue=l;break}ue=t.return}}var Fk=Math.ceil,cd=Un.ReactCurrentDispatcher,_v=Un.ReactCurrentOwner,kr=Un.ReactCurrentBatchConfig,Te=0,St=null,ut=null,Tt=0,ur=0,ts=Ni(0),vt=0,$l=null,pa=0,$f=0,jv=0,il=null,Qt=null,Sv=0,Ss=1/0,bn=null,ud=!1,zm=null,mi=null,nu=!1,si=null,dd=0,al=0,Um=null,Du=-1,Lu=0;function Kt(){return Te&6?at():Du!==-1?Du:Du=at()}function gi(e){return e.mode&1?Te&2&&Tt!==0?Tt&-Tt:jk.transition!==null?(Lu===0&&(Lu=DS()),Lu):(e=Ie,e!==0||(e=window.event,e=e===void 0?16:WS(e.type)),e):1}function Zr(e,t,r,n){if(50<al)throw al=0,Um=null,Error(ne(185));jc(e,r,n),(!(Te&2)||e!==St)&&(e===St&&(!(Te&2)&&($f|=r),vt===4&&Zn(e,Tt)),ar(e,n),r===1&&Te===0&&!(t.mode&1)&&(Ss=at()+500,Pf&&Ei()))}function ar(e,t){var r=e.callbackNode;jC(e,t);var n=Gu(e,e===St?Tt:0);if(n===0)r!==null&&px(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&px(r),t===1)e.tag===0?_k(sb.bind(null,e)):cN(sb.bind(null,e)),vk(function(){!(Te&6)&&Ei()}),r=null;else{switch(LS(n)){case 1:r=Yy;break;case 4:r=MS;break;case 16:r=Ku;break;case 536870912:r=RS;break;default:r=Ku}r=oE(r,eE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function eE(e,t){if(Du=-1,Lu=0,Te&6)throw Error(ne(327));var r=e.callbackNode;if(fs()&&e.callbackNode!==r)return null;var n=Gu(e,e===St?Tt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=fd(e,n);else{t=n;var i=Te;Te|=2;var a=rE();(St!==e||Tt!==t)&&(bn=null,Ss=at()+500,ra(e,t));do try{qk();break}catch(l){tE(e,l)}while(!0);cv(),cd.current=a,Te=i,ut!==null?t=0:(St=null,Tt=0,t=vt)}if(t!==0){if(t===2&&(i=mm(e),i!==0&&(n=i,t=qm(e,i))),t===1)throw r=$l,ra(e,0),Zn(e,n),ar(e,at()),r;if(t===6)Zn(e,n);else{if(i=e.current.alternate,!(n&30)&&!zk(i)&&(t=fd(e,n),t===2&&(a=mm(e),a!==0&&(n=a,t=qm(e,a))),t===1))throw r=$l,ra(e,0),Zn(e,n),ar(e,at()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ne(345));case 2:Bi(e,Qt,bn);break;case 3:if(Zn(e,n),(n&130023424)===n&&(t=Sv+500-at(),10<t)){if(Gu(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Kt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=jm(Bi.bind(null,e,Qt,bn),t);break}Bi(e,Qt,bn);break;case 4:if(Zn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var s=31-Qr(n);a=1<<s,s=t[s],s>i&&(i=s),n&=~a}if(n=i,n=at()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Fk(n/1960))-n,10<n){e.timeoutHandle=jm(Bi.bind(null,e,Qt,bn),n);break}Bi(e,Qt,bn);break;case 5:Bi(e,Qt,bn);break;default:throw Error(ne(329))}}}return ar(e,at()),e.callbackNode===r?eE.bind(null,e):null}function qm(e,t){var r=il;return e.current.memoizedState.isDehydrated&&(ra(e,t).flags|=256),e=fd(e,t),e!==2&&(t=Qt,Qt=r,t!==null&&Wm(t)),e}function Wm(e){Qt===null?Qt=e:Qt.push.apply(Qt,e)}function zk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!rn(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zn(e,t){for(t&=~jv,t&=~$f,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qr(t),n=1<<r;e[r]=-1,t&=~n}}function sb(e){if(Te&6)throw Error(ne(327));fs();var t=Gu(e,0);if(!(t&1))return ar(e,at()),null;var r=fd(e,t);if(e.tag!==0&&r===2){var n=mm(e);n!==0&&(t=n,r=qm(e,n))}if(r===1)throw r=$l,ra(e,0),Zn(e,t),ar(e,at()),r;if(r===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bi(e,Qt,bn),ar(e,at()),null}function Nv(e,t){var r=Te;Te|=1;try{return e(t)}finally{Te=r,Te===0&&(Ss=at()+500,Pf&&Ei())}}function ma(e){si!==null&&si.tag===0&&!(Te&6)&&fs();var t=Te;Te|=1;var r=kr.transition,n=Ie;try{if(kr.transition=null,Ie=1,e)return e()}finally{Ie=n,kr.transition=r,Te=t,!(Te&6)&&Ei()}}function Ev(){ur=ts.current,Xe(ts)}function ra(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,yk(r)),ut!==null)for(r=ut.return;r!==null;){var n=r;switch(sv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Zu();break;case 3:_s(),Xe(nr),Xe(Ft),mv();break;case 5:pv(n);break;case 4:_s();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:uv(n.type._context);break;case 22:case 23:Ev()}r=r.return}if(St=e,ut=e=yi(e.current,null),Tt=ur=t,vt=0,$l=null,jv=$f=pa=0,Qt=il=null,Gi!==null){for(t=0;t<Gi.length;t++)if(r=Gi[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var s=a.next;a.next=i,n.next=s}r.pending=n}Gi=null}return e}function tE(e,t){do{var r=ut;try{if(cv(),Iu.current=ld,od){for(var n=tt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}od=!1}if(ha=0,_t=gt=tt=null,rl=!1,Tl=0,_v.current=null,r===null||r.return===null){vt=1,$l=t,ut=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,f=l,d=f.tag;if(!(f.mode&1)&&(d===0||d===11||d===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=Kx(s);if(p!==null){p.flags&=-257,Gx(p,s,l,a,t),p.mode&1&&Hx(a,u,t),t=p,c=u;var b=t.updateQueue;if(b===null){var m=new Set;m.add(c),t.updateQueue=m}else b.add(c);break e}else{if(!(t&1)){Hx(a,u,t),Av();break e}c=Error(ne(426))}}else if(Ye&&l.mode&1){var y=Kx(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Gx(y,s,l,a,t),ov(js(c,l));break e}}a=c=js(c,l),vt!==4&&(vt=2),il===null?il=[a]:il.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=LN(a,c,t);Fx(a,v);break e;case 1:l=c;var g=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(mi===null||!mi.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=BN(a,l,t);Fx(a,j);break e}}a=a.return}while(a!==null)}iE(r)}catch(w){t=w,ut===r&&r!==null&&(ut=r=r.return);continue}break}while(!0)}function rE(){var e=cd.current;return cd.current=ld,e===null?ld:e}function Av(){(vt===0||vt===3||vt===2)&&(vt=4),St===null||!(pa&268435455)&&!($f&268435455)||Zn(St,Tt)}function fd(e,t){var r=Te;Te|=2;var n=rE();(St!==e||Tt!==t)&&(bn=null,ra(e,t));do try{Uk();break}catch(i){tE(e,i)}while(!0);if(cv(),Te=r,cd.current=n,ut!==null)throw Error(ne(261));return St=null,Tt=0,vt}function Uk(){for(;ut!==null;)nE(ut)}function qk(){for(;ut!==null&&!pC();)nE(ut)}function nE(e){var t=sE(e.alternate,e,ur);e.memoizedProps=e.pendingProps,t===null?iE(e):ut=t,_v.current=null}function iE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Rk(r,t),r!==null){r.flags&=32767,ut=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vt=6,ut=null;return}}else if(r=Mk(r,t,ur),r!==null){ut=r;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);vt===0&&(vt=5)}function Bi(e,t,r){var n=Ie,i=kr.transition;try{kr.transition=null,Ie=1,Wk(e,t,r,n)}finally{kr.transition=i,Ie=n}return null}function Wk(e,t,r,n){do fs();while(si!==null);if(Te&6)throw Error(ne(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(SC(e,a),e===St&&(ut=St=null,Tt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||nu||(nu=!0,oE(Ku,function(){return fs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=kr.transition,kr.transition=null;var s=Ie;Ie=1;var l=Te;Te|=4,_v.current=null,Lk(e,r),QN(r,e),uk(wm),Xu=!!bm,wm=bm=null,e.current=r,Bk(r),mC(),Te=l,Ie=s,kr.transition=a}else e.current=r;if(nu&&(nu=!1,si=e,dd=i),a=e.pendingLanes,a===0&&(mi=null),vC(r.stateNode),ar(e,at()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(ud)throw ud=!1,e=zm,zm=null,e;return dd&1&&e.tag!==0&&fs(),a=e.pendingLanes,a&1?e===Um?al++:(al=0,Um=e):al=0,Ei(),null}function fs(){if(si!==null){var e=LS(dd),t=kr.transition,r=Ie;try{if(kr.transition=null,Ie=16>e?16:e,si===null)var n=!1;else{if(e=si,si=null,dd=0,Te&6)throw Error(ne(331));var i=Te;for(Te|=4,ue=e.current;ue!==null;){var a=ue,s=a.child;if(ue.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ue=u;ue!==null;){var f=ue;switch(f.tag){case 0:case 11:case 15:nl(8,f,a)}var d=f.child;if(d!==null)d.return=f,ue=d;else for(;ue!==null;){f=ue;var h=f.sibling,p=f.return;if(XN(f),f===u){ue=null;break}if(h!==null){h.return=p,ue=h;break}ue=p}}}var b=a.alternate;if(b!==null){var m=b.child;if(m!==null){b.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}ue=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,ue=s;else e:for(;ue!==null;){if(a=ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,ue=v;break e}ue=a.return}}var g=e.current;for(ue=g;ue!==null;){s=ue;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ue=x;else e:for(s=g;ue!==null;){if(l=ue,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kf(9,l)}}catch(w){nt(l,l.return,w)}if(l===s){ue=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,ue=j;break e}ue=l.return}}if(Te=i,Ei(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(Sf,e)}catch{}n=!0}return n}finally{Ie=r,kr.transition=t}}return!1}function ob(e,t,r){t=js(r,t),t=LN(e,t,1),e=pi(e,t,1),t=Kt(),e!==null&&(jc(e,1,t),ar(e,t))}function nt(e,t,r){if(e.tag===3)ob(e,e,r);else for(;t!==null;){if(t.tag===3){ob(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(mi===null||!mi.has(n))){e=js(r,e),e=BN(t,e,1),t=pi(t,e,1),e=Kt(),t!==null&&(jc(t,1,e),ar(t,e));break}}t=t.return}}function Vk(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Kt(),e.pingedLanes|=e.suspendedLanes&r,St===e&&(Tt&r)===r&&(vt===4||vt===3&&(Tt&130023424)===Tt&&500>at()-Sv?ra(e,0):jv|=r),ar(e,t)}function aE(e,t){t===0&&(e.mode&1?(t=Kc,Kc<<=1,!(Kc&130023424)&&(Kc=4194304)):t=1);var r=Kt();e=Dn(e,t),e!==null&&(jc(e,t,r),ar(e,r))}function Hk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),aE(e,r)}function Kk(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ne(314))}n!==null&&n.delete(t),aE(e,r)}var sE;sE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||nr.current)er=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return er=!1,Ik(e,t,r);er=!!(e.flags&131072)}else er=!1,Ye&&t.flags&1048576&&uN(t,rd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ru(e,t),e=t.pendingProps;var i=xs(t,Ft.current);ds(t,r),i=yv(null,t,n,e,i,r);var a=vv();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ir(n)?(a=!0,ed(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fv(t),i.updater=Cf,t.stateNode=i,i._reactInternals=t,Tm(t,n,e,r),t=$m(null,t,n,!0,a,r)):(t.tag=0,Ye&&a&&av(t),zt(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ru(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Xk(n),e=Wr(n,e),i){case 0:t=km(null,t,n,e,r);break e;case 1:t=Jx(null,t,n,e,r);break e;case 11:t=Xx(null,t,n,e,r);break e;case 14:t=Yx(null,t,n,Wr(n.type,e),r);break e}throw Error(ne(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Wr(n,i),km(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Wr(n,i),Jx(e,t,n,i,r);case 3:e:{if(qN(t),e===null)throw Error(ne(387));n=t.pendingProps,a=t.memoizedState,i=a.element,gN(e,t),ad(t,n,null,r);var s=t.memoizedState;if(n=s.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=js(Error(ne(423)),t),t=Qx(e,t,n,r,i);break e}else if(n!==i){i=js(Error(ne(424)),t),t=Qx(e,t,n,r,i);break e}else for(gr=hi(t.stateNode.containerInfo.firstChild),yr=t,Ye=!0,Yr=null,r=pN(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(bs(),n===i){t=Ln(e,t,r);break e}zt(e,t,n,r)}t=t.child}return t;case 5:return yN(t),e===null&&Am(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,_m(n,i)?s=null:a!==null&&_m(n,a)&&(t.flags|=32),UN(e,t),zt(e,t,s,r),t.child;case 6:return e===null&&Am(t),null;case 13:return WN(e,t,r);case 4:return hv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ws(t,null,n,r):zt(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Wr(n,i),Xx(e,t,n,i,r);case 7:return zt(e,t,t.pendingProps,r),t.child;case 8:return zt(e,t,t.pendingProps.children,r),t.child;case 12:return zt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,qe(nd,n._currentValue),n._currentValue=s,a!==null)if(rn(a.value,s)){if(a.children===i.children&&!nr.current){t=Ln(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){s=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=Tn(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?c.next=c:(c.next=f.next,f.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Om(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)s=a.type===t.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(ne(341));s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Om(s,r,t),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===t){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}zt(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,ds(t,r),i=Ir(i),n=n(i),t.flags|=1,zt(e,t,n,r),t.child;case 14:return n=t.type,i=Wr(n,t.pendingProps),i=Wr(n.type,i),Yx(e,t,n,i,r);case 15:return FN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Wr(n,i),Ru(e,t),t.tag=1,ir(n)?(e=!0,ed(t)):e=!1,ds(t,r),DN(t,n,i),Tm(t,n,i,r),$m(null,t,n,!0,e,r);case 19:return VN(e,t,r);case 22:return zN(e,t,r)}throw Error(ne(156,t.tag))};function oE(e,t){return IS(e,t)}function Gk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(e,t,r,n){return new Gk(e,t,r,n)}function Ov(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Xk(e){if(typeof e=="function")return Ov(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ky)return 11;if(e===Gy)return 14}return 2}function yi(e,t){var r=e.alternate;return r===null?(r=Tr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bu(e,t,r,n,i,a){var s=2;if(n=e,typeof e=="function")Ov(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Va:return na(r.children,i,a,t);case Hy:s=8,i|=8;break;case em:return e=Tr(12,r,t,i|2),e.elementType=em,e.lanes=a,e;case tm:return e=Tr(13,r,t,i),e.elementType=tm,e.lanes=a,e;case rm:return e=Tr(19,r,t,i),e.elementType=rm,e.lanes=a,e;case yS:return If(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mS:s=10;break e;case gS:s=9;break e;case Ky:s=11;break e;case Gy:s=14;break e;case Xn:s=16,n=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=Tr(s,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function na(e,t,r,n){return e=Tr(7,e,n,t),e.lanes=r,e}function If(e,t,r,n){return e=Tr(22,e,n,t),e.elementType=yS,e.lanes=r,e.stateNode={isHidden:!1},e}function op(e,t,r){return e=Tr(6,e,null,t),e.lanes=r,e}function lp(e,t,r){return t=Tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yk(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uh(0),this.expirationTimes=Uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Pv(e,t,r,n,i,a,s,l,c){return e=new Yk(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Tr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},fv(a),e}function Jk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function lE(e){if(!e)return wi;e=e._reactInternals;e:{if(ja(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var r=e.type;if(ir(r))return lN(e,r,t)}return t}function cE(e,t,r,n,i,a,s,l,c){return e=Pv(r,n,!0,e,i,a,s,l,c),e.context=lE(null),r=e.current,n=Kt(),i=gi(r),a=Tn(n,i),a.callback=t??null,pi(r,a,i),e.current.lanes=i,jc(e,i,n),ar(e,n),e}function Mf(e,t,r,n){var i=t.current,a=Kt(),s=gi(i);return r=lE(r),t.context===null?t.context=r:t.pendingContext=r,t=Tn(a,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=pi(i,t,s),e!==null&&(Zr(e,i,s,a),$u(e,i,s)),s}function hd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lb(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Tv(e,t){lb(e,t),(e=e.alternate)&&lb(e,t)}function Qk(){return null}var uE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cv(e){this._internalRoot=e}Rf.prototype.render=Cv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Mf(e,t,null,null)};Rf.prototype.unmount=Cv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ma(function(){Mf(null,e,null,null)}),t[Rn]=null}};function Rf(e){this._internalRoot=e}Rf.prototype.unstable_scheduleHydration=function(e){if(e){var t=zS();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qn.length&&t!==0&&t<Qn[r].priority;r++);Qn.splice(r,0,e),r===0&&qS(e)}};function kv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Df(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cb(){}function Zk(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=hd(s);a.call(u)}}var s=cE(t,n,e,0,null,!1,!1,"",cb);return e._reactRootContainer=s,e[Rn]=s.current,Nl(e.nodeType===8?e.parentNode:e),ma(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=hd(c);l.call(u)}}var c=Pv(e,0,!1,null,null,!1,!1,"",cb);return e._reactRootContainer=c,e[Rn]=c.current,Nl(e.nodeType===8?e.parentNode:e),ma(function(){Mf(t,c,r,n)}),c}function Lf(e,t,r,n,i){var a=r._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var l=i;i=function(){var c=hd(s);l.call(c)}}Mf(t,s,e,i)}else s=Zk(r,t,e,i,n);return hd(s)}BS=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Vo(t.pendingLanes);r!==0&&(Jy(t,r|1),ar(t,at()),!(Te&6)&&(Ss=at()+500,Ei()))}break;case 13:ma(function(){var n=Dn(e,1);if(n!==null){var i=Kt();Zr(n,e,1,i)}}),Tv(e,1)}};Qy=function(e){if(e.tag===13){var t=Dn(e,134217728);if(t!==null){var r=Kt();Zr(t,e,134217728,r)}Tv(e,134217728)}};FS=function(e){if(e.tag===13){var t=gi(e),r=Dn(e,t);if(r!==null){var n=Kt();Zr(r,e,t,n)}Tv(e,t)}};zS=function(){return Ie};US=function(e,t){var r=Ie;try{return Ie=e,t()}finally{Ie=r}};fm=function(e,t,r){switch(t){case"input":if(am(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=Of(n);if(!i)throw Error(ne(90));xS(n),am(n,i)}}}break;case"textarea":wS(e,r);break;case"select":t=r.value,t!=null&&os(e,!!r.multiple,t,!1)}};OS=Nv;PS=ma;var e$={usingClientEntryPoint:!1,Events:[Nc,Xa,Of,ES,AS,Nv]},Po={findFiberByHostInstance:Ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},t$={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=kS(e),e===null?null:e.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||Qk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{Sf=iu.inject(t$),cn=iu}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e$;wr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kv(t))throw Error(ne(200));return Jk(e,t,null,r)};wr.createRoot=function(e,t){if(!kv(e))throw Error(ne(299));var r=!1,n="",i=uE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Pv(e,1,!1,null,null,r,!1,n,i),e[Rn]=t.current,Nl(e.nodeType===8?e.parentNode:e),new Cv(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=kS(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return ma(e)};wr.hydrate=function(e,t,r){if(!Df(t))throw Error(ne(200));return Lf(null,e,t,!0,r)};wr.hydrateRoot=function(e,t,r){if(!kv(e))throw Error(ne(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",s=uE;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=cE(t,null,e,1,r??null,i,!1,a,s),e[Rn]=t.current,Nl(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Rf(t)};wr.render=function(e,t,r){if(!Df(t))throw Error(ne(200));return Lf(null,e,t,!1,r)};wr.unmountComponentAtNode=function(e){if(!Df(e))throw Error(ne(40));return e._reactRootContainer?(ma(function(){Lf(null,null,e,!1,function(){e._reactRootContainer=null,e[Rn]=null})}),!0):!1};wr.unstable_batchedUpdates=Nv;wr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Df(r))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return Lf(e,t,r,!1,n)};wr.version="18.3.1-next-f1338f8080-20240426";function dE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dE)}catch(e){console.error(e)}}dE(),dS.exports=wr;var r$=dS.exports,ub=r$;Qp.createRoot=ub.createRoot,Qp.hydrateRoot=ub.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Il.apply(this,arguments)}var oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oi||(oi={}));const db="popstate";function n$(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:s,hash:l}=n.location;return Vm("",{pathname:a,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:hE(i)}return a$(t,r,null,e)}function dt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function i$(){return Math.random().toString(36).substr(2,8)}function fb(e,t){return{usr:e.state,key:e.key,idx:t}}function Vm(e,t,r,n){return r===void 0&&(r=null),Il({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ro(t):t,{state:r,key:t&&t.key||n||i$()})}function hE(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ro(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function a$(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,s=i.history,l=oi.Pop,c=null,u=f();u==null&&(u=0,s.replaceState(Il({},s.state,{idx:u}),""));function f(){return(s.state||{idx:null}).idx}function d(){l=oi.Pop;let y=f(),v=y==null?null:y-u;u=y,c&&c({action:l,location:m.location,delta:v})}function h(y,v){l=oi.Push;let g=Vm(m.location,y,v);u=f()+1;let x=fb(g,u),j=m.createHref(g);try{s.pushState(x,"",j)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(j)}a&&c&&c({action:l,location:m.location,delta:1})}function p(y,v){l=oi.Replace;let g=Vm(m.location,y,v);u=f();let x=fb(g,u),j=m.createHref(g);s.replaceState(x,"",j),a&&c&&c({action:l,location:m.location,delta:0})}function b(y){let v=i.location.origin!=="null"?i.location.origin:i.location.href,g=typeof y=="string"?y:hE(y);return g=g.replace(/ $/,"%20"),dt(v,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,v)}let m={get action(){return l},get location(){return e(i,s)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(db,d),c=y,()=>{i.removeEventListener(db,d),c=null}},createHref(y){return t(i,y)},createURL:b,encodeLocation(y){let v=b(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(y){return s.go(y)}};return m}var hb;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(hb||(hb={}));function s$(e,t,r){return r===void 0&&(r="/"),o$(e,t,r)}function o$(e,t,r,n){let i=typeof t=="string"?ro(t):t,a=gE(i.pathname||"/",r);if(a==null)return null;let s=pE(e);l$(s);let l=null;for(let c=0;l==null&&c<s.length;++c){let u=b$(a);l=y$(s[c],u)}return l}function pE(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,s,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:s,route:a};c.relativePath.startsWith("/")&&(dt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=ia([n,c.relativePath]),f=r.concat(c);a.children&&a.children.length>0&&(dt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),pE(a.children,t,f,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:m$(u,a.index),routesMeta:f})};return e.forEach((a,s)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,s);else for(let c of mE(a.path))i(a,s,c)}),t}function mE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let s=mE(n.join("/")),l=[];return l.push(...s.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...s),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function l$(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:g$(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const c$=/^:[\w-]+$/,u$=3,d$=2,f$=1,h$=10,p$=-2,pb=e=>e==="*";function m$(e,t){let r=e.split("/"),n=r.length;return r.some(pb)&&(n+=p$),t&&(n+=d$),r.filter(i=>!pb(i)).reduce((i,a)=>i+(c$.test(a)?u$:a===""?f$:h$),n)}function g$(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function y$(e,t,r){let{routesMeta:n}=e,i={},a="/",s=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,f=a==="/"?t:t.slice(a.length)||"/",d=v$({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},f),h=c.route;if(!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:ia([a,d.pathname]),pathnameBase:S$(ia([a,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(a=ia([a,d.pathnameBase]))}return s}function v$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=x$(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],s=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,f,d)=>{let{paramName:h,isOptional:p}=f;if(h==="*"){let m=l[d]||"";s=a.slice(0,a.length-m.length).replace(/(.)\/+$/,"$1")}const b=l[d];return p&&!b?u[h]=void 0:u[h]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:s,pattern:e}}function x$(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),fE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function b$(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function gE(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function w$(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?ro(e):e;return{pathname:r?r.startsWith("/")?r:_$(r,t):t,search:N$(n),hash:E$(i)}}function _$(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function cp(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j$(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function yE(e,t){let r=j$(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function vE(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=ro(e):(i=Il({},e),dt(!i.pathname||!i.pathname.includes("?"),cp("?","pathname","search",i)),dt(!i.pathname||!i.pathname.includes("#"),cp("#","pathname","hash",i)),dt(!i.search||!i.search.includes("#"),cp("#","search","hash",i)));let a=e===""||i.pathname==="",s=a?"/":i.pathname,l;if(s==null)l=r;else{let d=t.length-1;if(!n&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}l=d>=0?t[d]:"/"}let c=w$(i,l),u=s&&s!=="/"&&s.endsWith("/"),f=(a||s===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||f)&&(c.pathname+="/"),c}const ia=e=>e.join("/").replace(/\/\/+/g,"/"),S$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),N$=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,E$=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function A$(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xE=["post","put","patch","delete"];new Set(xE);const O$=["get",...xE];new Set(O$);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ml(){return Ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ml.apply(this,arguments)}const $v=N.createContext(null),P$=N.createContext(null),Ac=N.createContext(null),Bf=N.createContext(null),Sa=N.createContext({outlet:null,matches:[],isDataRoute:!1}),bE=N.createContext(null);function Oc(){return N.useContext(Bf)!=null}function Iv(){return Oc()||dt(!1),N.useContext(Bf).location}function wE(e){N.useContext(Ac).static||N.useLayoutEffect(e)}function T$(){let{isDataRoute:e}=N.useContext(Sa);return e?q$():C$()}function C$(){Oc()||dt(!1);let e=N.useContext($v),{basename:t,future:r,navigator:n}=N.useContext(Ac),{matches:i}=N.useContext(Sa),{pathname:a}=Iv(),s=JSON.stringify(yE(i,r.v7_relativeSplatPath)),l=N.useRef(!1);return wE(()=>{l.current=!0}),N.useCallback(function(u,f){if(f===void 0&&(f={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=vE(u,JSON.parse(s),a,f.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:ia([t,d.pathname])),(f.replace?n.replace:n.push)(d,f.state,f)},[t,n,s,a,e])}function k$(e,t){return $$(e,t)}function $$(e,t,r,n){Oc()||dt(!1);let{navigator:i}=N.useContext(Ac),{matches:a}=N.useContext(Sa),s=a[a.length-1],l=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let u=Iv(),f;if(t){var d;let y=typeof t=="string"?ro(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||dt(!1),f=y}else f=u;let h=f.pathname||"/",p=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let b=s$(e,{pathname:p}),m=L$(b&&b.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:ia([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:ia([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),a,r,n);return t&&m?N.createElement(Bf.Provider,{value:{location:Ml({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:oi.Pop}},m):m}function I$(){let e=U$(),t=A$(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:i},r):null,null)}const M$=N.createElement(I$,null);class R$ extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?N.createElement(Sa.Provider,{value:this.props.routeContext},N.createElement(bE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function D$(e){let{routeContext:t,match:r,children:n}=e,i=N.useContext($v);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),N.createElement(Sa.Provider,{value:t},n)}function L$(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let f=s.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);f>=0||dt(!1),s=s.slice(0,Math.min(s.length,f+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<s.length;f++){let d=s[f];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=f),d.route.id){let{loaderData:h,errors:p}=r,b=d.route.loader&&h[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||b){c=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((f,d,h)=>{let p,b=!1,m=null,y=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,m=d.route.errorElement||M$,c&&(u<0&&h===0?(W$("route-fallback"),b=!0,y=null):u===h&&(b=!0,y=d.route.hydrateFallbackElement||null)));let v=t.concat(s.slice(0,h+1)),g=()=>{let x;return p?x=m:b?x=y:d.route.Component?x=N.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=f,N.createElement(D$,{match:d,routeContext:{outlet:f,matches:v,isDataRoute:r!=null},children:x})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?N.createElement(R$,{location:r.location,revalidation:r.revalidation,component:m,error:p,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}var _E=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_E||{}),jE=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jE||{});function B$(e){let t=N.useContext($v);return t||dt(!1),t}function F$(e){let t=N.useContext(P$);return t||dt(!1),t}function z$(e){let t=N.useContext(Sa);return t||dt(!1),t}function SE(e){let t=z$(),r=t.matches[t.matches.length-1];return r.route.id||dt(!1),r.route.id}function U$(){var e;let t=N.useContext(bE),r=F$(),n=SE();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function q$(){let{router:e}=B$(_E.UseNavigateStable),t=SE(jE.UseNavigateStable),r=N.useRef(!1);return wE(()=>{r.current=!0}),N.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Ml({fromRouteId:t},a)))},[e,t])}const mb={};function W$(e,t,r){mb[e]||(mb[e]=!0)}function V$(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function NE(e){let{to:t,replace:r,state:n,relative:i}=e;Oc()||dt(!1);let{future:a,static:s}=N.useContext(Ac),{matches:l}=N.useContext(Sa),{pathname:c}=Iv(),u=T$(),f=vE(t,yE(l,a.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(f);return N.useEffect(()=>u(JSON.parse(d),{replace:r,state:n,relative:i}),[u,d,i,r,n]),null}function Hm(e){dt(!1)}function H$(e){let{basename:t="/",children:r=null,location:n,navigationType:i=oi.Pop,navigator:a,static:s=!1,future:l}=e;Oc()&&dt(!1);let c=t.replace(/^\/*/,"/"),u=N.useMemo(()=>({basename:c,navigator:a,static:s,future:Ml({v7_relativeSplatPath:!1},l)}),[c,l,a,s]);typeof n=="string"&&(n=ro(n));let{pathname:f="/",search:d="",hash:h="",state:p=null,key:b="default"}=n,m=N.useMemo(()=>{let y=gE(f,c);return y==null?null:{location:{pathname:y,search:d,hash:h,state:p,key:b},navigationType:i}},[c,f,d,h,p,b,i]);return m==null?null:N.createElement(Ac.Provider,{value:u},N.createElement(Bf.Provider,{children:r,value:m}))}function K$(e){let{children:t,location:r}=e;return k$(Km(t),r)}new Promise(()=>{});function Km(e,t){t===void 0&&(t=[]);let r=[];return N.Children.forEach(e,(n,i)=>{if(!N.isValidElement(n))return;let a=[...t,i];if(n.type===N.Fragment){r.push.apply(r,Km(n.props.children,a));return}n.type!==Hm&&dt(!1),!n.props.index||!n.props.children||dt(!1);let s={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(s.children=Km(n.props.children,a)),r.push(s)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const G$="6";try{window.__reactRouterVersion=G$}catch{}const X$="startTransition",gb=VT[X$];function Y$(e){let{basename:t,children:r,future:n,window:i}=e,a=N.useRef();a.current==null&&(a.current=n$({window:i,v5Compat:!0}));let s=a.current,[l,c]=N.useState({action:s.action,location:s.location}),{v7_startTransition:u}=n||{},f=N.useCallback(d=>{u&&gb?gb(()=>c(d)):c(d)},[c,u]);return N.useLayoutEffect(()=>s.listen(f),[s,f]),N.useEffect(()=>V$(n),[n]),N.createElement(H$,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:s,future:n})}var yb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(yb||(yb={}));var vb;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(vb||(vb={}));var Gm=function(e,t){return Gm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Gm(e,t)};function EE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gm(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pd=function(){return pd=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},pd.apply(this,arguments)};function no(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function AE(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(a=(i<3?s(a):i>3?s(t,r,a):s(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function OE(e,t){return function(r,n){t(r,n,e)}}function PE(e,t,r,n,i,a){function s(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,f=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),d,h=!1,p=r.length-1;p>=0;p--){var b={};for(var m in n)b[m]=m==="access"?{}:n[m];for(var m in n.access)b.access[m]=n.access[m];b.addInitializer=function(v){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(s(v||null))};var y=(0,r[p])(l==="accessor"?{get:f.get,set:f.set}:f[c],b);if(l==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(d=s(y.get))&&(f.get=d),(d=s(y.set))&&(f.set=d),(d=s(y.init))&&i.unshift(d)}else(d=s(y))&&(l==="field"?i.unshift(d):f[c]=d)}u&&Object.defineProperty(u,n.name,f),h=!0}function TE(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function CE(e){return typeof e=="symbol"?e:"".concat(e)}function kE(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function $E(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function pe(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(f){try{u(n.next(f))}catch(d){s(d)}}function c(f){try{u(n.throw(f))}catch(d){s(d)}}function u(f){f.done?a(f.value):i(f.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function IE(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=l(0),s.throw=l(1),s.return=l(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(u){return function(f){return c([u,f])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(r=0)),r;)try{if(n=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,i=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(f){u=[6,f],i=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Ff=Object.create?function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function ME(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Ff(t,e,r)}function md(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mv(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function RE(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Mv(arguments[t]));return e}function DE(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,l=a.length;s<l;s++,i++)n[i]=a[s];return n}function LE(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function Ns(e){return this instanceof Ns?(this.v=e,this):new Ns(e)}function BE(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(b){return Promise.resolve(b).then(p,d)}}function l(p,b){n[p]&&(i[p]=function(m){return new Promise(function(y,v){a.push([p,m,y,v])>1||c(p,m)})},b&&(i[p]=b(i[p])))}function c(p,b){try{u(n[p](b))}catch(m){h(a[0][3],m)}}function u(p){p.value instanceof Ns?Promise.resolve(p.value.v).then(f,d):h(a[0][2],p)}function f(p){c("next",p)}function d(p){c("throw",p)}function h(p,b){p(b),a.shift(),a.length&&c(a[0][0],a[0][1])}}function FE(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=e[i]?function(s){return(r=!r)?{value:Ns(e[i](s)),done:!1}:a?a(s):s}:a}}function zE(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof md=="function"?md(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(s){return new Promise(function(l,c){s=e[a](s),i(l,c,s.done,s.value)})}}function i(a,s,l,c){Promise.resolve(c).then(function(u){a({value:u,done:l})},s)}}function UE(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var J$=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Xm=function(e){return Xm=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Xm(e)};function qE(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Xm(e),n=0;n<r.length;n++)r[n]!=="default"&&Ff(t,e,r[n]);return J$(t,e),t}function WE(e){return e&&e.__esModule?e:{default:e}}function VE(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function HE(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function KE(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function GE(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Q$=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function XE(e){function t(a){e.error=e.hasError?new Q$(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(s){return t(s),i()})}else n|=1}catch(s){t(s)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function YE(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,s){return n?t?".jsx":".js":i&&(!a||!s)?r:i+a+"."+s.toLowerCase()+"js"}):e}const Z$={__extends:EE,__assign:pd,__rest:no,__decorate:AE,__param:OE,__esDecorate:PE,__runInitializers:TE,__propKey:CE,__setFunctionName:kE,__metadata:$E,__awaiter:pe,__generator:IE,__createBinding:Ff,__exportStar:ME,__values:md,__read:Mv,__spread:RE,__spreadArrays:DE,__spreadArray:LE,__await:Ns,__asyncGenerator:BE,__asyncDelegator:FE,__asyncValues:zE,__makeTemplateObject:UE,__importStar:qE,__importDefault:WE,__classPrivateFieldGet:VE,__classPrivateFieldSet:HE,__classPrivateFieldIn:KE,__addDisposableResource:GE,__disposeResources:XE,__rewriteRelativeImportExtension:YE},eI=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:GE,get __assign(){return pd},__asyncDelegator:FE,__asyncGenerator:BE,__asyncValues:zE,__await:Ns,__awaiter:pe,__classPrivateFieldGet:VE,__classPrivateFieldIn:KE,__classPrivateFieldSet:HE,__createBinding:Ff,__decorate:AE,__disposeResources:XE,__esDecorate:PE,__exportStar:ME,__extends:EE,__generator:IE,__importDefault:WE,__importStar:qE,__makeTemplateObject:UE,__metadata:$E,__param:OE,__propKey:CE,__read:Mv,__rest:no,__rewriteRelativeImportExtension:YE,__runInitializers:TE,__setFunctionName:kE,__spread:RE,__spreadArray:LE,__spreadArrays:DE,__values:md,default:Z$},Symbol.toStringTag,{value:"Module"})),tI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Rv extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class xb extends Rv{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class bb extends Rv{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class wb extends Rv{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Ym;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Ym||(Ym={}));class rI{constructor(t,{headers:r={},customFetch:n,region:i=Ym.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=tI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return pe(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:a,method:s,body:l,signal:c}=n;let u={},{region:f}=n;f||(f=this.region);const d=new URL(`${this.url}/${r}`);f&&f!=="any"&&(u["x-region"]=f,d.searchParams.set("forceFunctionRegion",f));let h;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const p=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:h,signal:c}).catch(v=>{throw v.name==="AbortError"?v:new xb(v)}),b=p.headers.get("x-relay-error");if(b&&b==="true")throw new bb(p);if(!p.ok)throw new wb(p);let m=((i=p.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield p.json():m==="application/octet-stream"||m==="application/pdf"?y=yield p.blob():m==="text/event-stream"?y=p:m==="multipart/form-data"?y=yield p.formData():y=yield p.text(),{data:y,error:null,response:p}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new xb(a)}:{data:null,error:a,response:a instanceof wb||a instanceof bb?a.context:void 0}}})}}var Ut={};const io=PT(eI);var au={},su={},ou={},lu={},cu={},uu={},_b;function JE(){if(_b)return uu;_b=1,Object.defineProperty(uu,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return uu.default=e,uu}var jb;function QE(){if(jb)return cu;jb=1,Object.defineProperty(cu,"__esModule",{value:!0});const t=io.__importDefault(JE());class r{constructor(i){var a,s;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(a=i.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=i.signal,this.isMaybeSingle=(s=i.isMaybeSingle)!==null&&s!==void 0?s:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=new Headers(this.headers),this.headers.set(i,a),this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let l=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,d,h;let p=null,b=null,m=null,y=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const w=await c.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?b=w:b=JSON.parse(w))}const x=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),j=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");x&&j&&j.length>1&&(m=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(b)&&(b.length>1?(p={code:"PGRST116",details:`Results contain ${b.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},b=null,m=null,y=406,v="Not Acceptable"):b.length===1?b=b[0]:b=null)}else{const x=await c.text();try{p=JSON.parse(x),Array.isArray(p)&&c.status===404&&(b=[],p=null,y=200,v="OK")}catch{c.status===404&&x===""?(y=204,v="No Content"):p={message:x}}if(p&&this.isMaybeSingle&&(!((h=p==null?void 0:p.details)===null||h===void 0)&&h.includes("0 rows"))&&(p=null,y=200,v="OK"),p&&this.shouldThrowOnError)throw new t.default(p)}return{error:p,data:b,count:m,status:y,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,d;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(d=c==null?void 0:c.code)!==null&&d!==void 0?d:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return cu.default=r,cu}var Sb;function ZE(){if(Sb)return lu;Sb=1,Object.defineProperty(lu,"__esModule",{value:!0});const t=io.__importDefault(QE());class r extends t.default{select(i){let a=!1;const s=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:s,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",f=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${f?`${f},`:""}${i}.${a?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:s=a}={}){const l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:s,referencedTable:l=s}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(u,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:s=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var f;const d=[i?"analyze":null,a?"verbose":null,s?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${d};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return lu.default=r,lu}var Nb;function Dv(){if(Nb)return ou;Nb=1,Object.defineProperty(ou,"__esModule",{value:!0});const t=io.__importDefault(ZE()),r=new RegExp("[,()]");class n extends t.default{eq(a,s){return this.url.searchParams.append(a,`eq.${s}`),this}neq(a,s){return this.url.searchParams.append(a,`neq.${s}`),this}gt(a,s){return this.url.searchParams.append(a,`gt.${s}`),this}gte(a,s){return this.url.searchParams.append(a,`gte.${s}`),this}lt(a,s){return this.url.searchParams.append(a,`lt.${s}`),this}lte(a,s){return this.url.searchParams.append(a,`lte.${s}`),this}like(a,s){return this.url.searchParams.append(a,`like.${s}`),this}likeAllOf(a,s){return this.url.searchParams.append(a,`like(all).{${s.join(",")}}`),this}likeAnyOf(a,s){return this.url.searchParams.append(a,`like(any).{${s.join(",")}}`),this}ilike(a,s){return this.url.searchParams.append(a,`ilike.${s}`),this}ilikeAllOf(a,s){return this.url.searchParams.append(a,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(a,s){return this.url.searchParams.append(a,`ilike(any).{${s.join(",")}}`),this}is(a,s){return this.url.searchParams.append(a,`is.${s}`),this}in(a,s){const l=Array.from(new Set(s)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(a,`in.(${l})`),this}contains(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cs.{${s.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(s)}`),this}containedBy(a,s){return typeof s=="string"?this.url.searchParams.append(a,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(a,`cd.{${s.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(s)}`),this}rangeGt(a,s){return this.url.searchParams.append(a,`sr.${s}`),this}rangeGte(a,s){return this.url.searchParams.append(a,`nxl.${s}`),this}rangeLt(a,s){return this.url.searchParams.append(a,`sl.${s}`),this}rangeLte(a,s){return this.url.searchParams.append(a,`nxr.${s}`),this}rangeAdjacent(a,s){return this.url.searchParams.append(a,`adj.${s}`),this}overlaps(a,s){return typeof s=="string"?this.url.searchParams.append(a,`ov.${s}`):this.url.searchParams.append(a,`ov.{${s.join(",")}}`),this}textSearch(a,s,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const f=l===void 0?"":`(${l})`;return this.url.searchParams.append(a,`${u}fts${f}.${s}`),this}match(a){return Object.entries(a).forEach(([s,l])=>{this.url.searchParams.append(s,`eq.${l}`)}),this}not(a,s,l){return this.url.searchParams.append(a,`not.${s}.${l}`),this}or(a,{foreignTable:s,referencedTable:l=s}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${a})`),this}filter(a,s,l){return this.url.searchParams.append(a,`${s}.${l}`),this}}return ou.default=n,ou}var Eb;function eA(){if(Eb)return su;Eb=1,Object.defineProperty(su,"__esModule",{value:!0});const t=io.__importDefault(Dv());class r{constructor(i,{headers:a={},schema:s,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=s,this.fetch=l}select(i,a){const{head:s=!1,count:l}=a??{},c=s?"HEAD":"GET";let u=!1;const f=(i??"*").split("").map(d=>/\s/.test(d)&&!u?"":(d==='"'&&(u=!u),d)).join("");return this.url.searchParams.set("select",f),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:s=!0}={}){var l;const c="POST";if(a&&this.headers.append("Prefer",`count=${a}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const u=i.reduce((f,d)=>f.concat(Object.keys(d)),[]);if(u.length>0){const f=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:s=!1,count:l,defaultToNull:c=!0}={}){var u;const f="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(d.length>0){const h=[...new Set(d)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(i,{count:a}={}){var s;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:i}={}){var a;const s="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return su.default=r,su}var Ab;function nI(){if(Ab)return au;Ab=1,Object.defineProperty(au,"__esModule",{value:!0});const e=io,t=e.__importDefault(eA()),r=e.__importDefault(Dv());class n{constructor(a,{headers:s={},schema:l,fetch:c}={}){this.url=a,this.headers=new Headers(s),this.schemaName=l,this.fetch=c}from(a){const s=new URL(`${this.url}/${a}`);return new t.default(s,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,s={},{head:l=!1,get:c=!1,count:u}={}){var f;let d;const h=new URL(`${this.url}/rpc/${a}`);let p;l||c?(d=l?"HEAD":"GET",Object.entries(s).filter(([m,y])=>y!==void 0).map(([m,y])=>[m,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([m,y])=>{h.searchParams.append(m,y)})):(d="POST",p=s);const b=new Headers(this.headers);return u&&b.set("Prefer",`count=${u}`),new r.default({method:d,url:h,headers:b,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return au.default=n,au}Object.defineProperty(Ut,"__esModule",{value:!0});var tA=Ut.PostgrestError=dA=Ut.PostgrestBuilder=cA=Ut.PostgrestTransformBuilder=oA=Ut.PostgrestFilterBuilder=aA=Ut.PostgrestQueryBuilder=nA=Ut.PostgrestClient=void 0;const ao=io,rA=ao.__importDefault(nI());var nA=Ut.PostgrestClient=rA.default;const iA=ao.__importDefault(eA());var aA=Ut.PostgrestQueryBuilder=iA.default;const sA=ao.__importDefault(Dv());var oA=Ut.PostgrestFilterBuilder=sA.default;const lA=ao.__importDefault(ZE());var cA=Ut.PostgrestTransformBuilder=lA.default;const uA=ao.__importDefault(QE());var dA=Ut.PostgrestBuilder=uA.default;const fA=ao.__importDefault(JE());tA=Ut.PostgrestError=fA.default;var hA=Ut.default={PostgrestClient:rA.default,PostgrestQueryBuilder:iA.default,PostgrestFilterBuilder:sA.default,PostgrestTransformBuilder:lA.default,PostgrestBuilder:uA.default,PostgrestError:fA.default};const iI=Z1({__proto__:null,get PostgrestBuilder(){return dA},get PostgrestClient(){return nA},get PostgrestError(){return tA},get PostgrestFilterBuilder(){return oA},get PostgrestQueryBuilder(){return aA},get PostgrestTransformBuilder(){return cA},default:hA},[Ut]),{PostgrestClient:aI,PostgrestQueryBuilder:dae,PostgrestFilterBuilder:fae,PostgrestTransformBuilder:hae,PostgrestBuilder:pae,PostgrestError:mae}=hA||iI;class sI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const oI="2.80.0",lI=`realtime-js/${oI}`,cI="1.0.0",Jm=1e4,uI=1e3,dI=100;var sl;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(sl||(sl={}));var mt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(mt||(mt={}));var Kr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Kr||(Kr={}));var Qm;(function(e){e.websocket="websocket"})(Qm||(Qm={}));var Wi;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Wi||(Wi={}));class fI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let s=this.HEADER_LENGTH+2;const l=n.decode(t.slice(s,s+i));s=s+i;const c=n.decode(t.slice(s,s+a));s=s+a;const u=JSON.parse(n.decode(t.slice(s,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class pA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Fe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Fe||(Fe={}));const Ob=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,s)=>(a[s]=hI(s,e,t,i),a),{}):{}},hI=(e,t,r,n)=>{const i=t.find(l=>l.name===e),a=i==null?void 0:i.type,s=r[e];return a&&!n.includes(a)?mA(a,s):Zm(s)},mA=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return yI(t,r)}switch(e){case Fe.bool:return pI(t);case Fe.float4:case Fe.float8:case Fe.int2:case Fe.int4:case Fe.int8:case Fe.numeric:case Fe.oid:return mI(t);case Fe.json:case Fe.jsonb:return gI(t);case Fe.timestamp:return vI(t);case Fe.abstime:case Fe.date:case Fe.daterange:case Fe.int4range:case Fe.int8range:case Fe.money:case Fe.reltime:case Fe.text:case Fe.time:case Fe.timestamptz:case Fe.timetz:case Fe.tsrange:case Fe.tstzrange:return Zm(t);default:return Zm(t)}},Zm=e=>e,pI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},mI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},gI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},yI=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const s=e.slice(1,r);try{a=JSON.parse("["+s+"]")}catch{a=s?s.split(","):[]}return a.map(l=>mA(t,l))}return e},vI=e=>typeof e=="string"?e.replace(" ","T"):e,gA=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class up{constructor(t,r,n={},i=Jm){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Pb;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Pb||(Pb={}));class ol{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ol.syncState(this.state,i,a,s),this.pendingDiffs.forEach(c=>{this.state=ol.syncDiff(this.state,c,a,s)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:s,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ol.syncDiff(this.state,i,a,s),l())}),this.onJoin((i,a,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:s})}),this.onLeave((i,a,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),s=this.transformState(r),l={},c={};return this.map(a,(u,f)=>{s[u]||(c[u]=f)}),this.map(s,(u,f)=>{const d=a[u];if(d){const h=f.map(y=>y.presence_ref),p=d.map(y=>y.presence_ref),b=f.filter(y=>p.indexOf(y.presence_ref)<0),m=d.filter(y=>h.indexOf(y.presence_ref)<0);b.length>0&&(l[u]=b),m.length>0&&(c[u]=m)}else l[u]=f}),this.syncDiff(a,{joins:l,leaves:c},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:s}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,c)=>{var u;const f=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),f.length>0){const d=t[l].map(p=>p.presence_ref),h=f.filter(p=>d.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,f,c)}),this.map(s,(l,c)=>{let u=t[l];if(!u)return;const f=c.map(d=>d.presence_ref);u=u.filter(d=>f.indexOf(d.presence_ref)<0),t[l]=u,i(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Tb;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Tb||(Tb={}));var ll;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ll||(ll={}));var wn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(wn||(wn={}));class Lv{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new up(this,Kr.join,this.params,this.timeout),this.rejoinTimer=new pA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mt.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Kr.reply,{},(s,l)=>{this._trigger(this._replyEventName(l),s)}),this.presence=new ol(this),this.broadcastEndpointURL=gA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==mt.closed){const{config:{broadcast:s,presence:l,private:c}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&i!==void 0?i:[],f=!!this.bindings[ll.PRESENCE]&&this.bindings[ll.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},l),{enabled:f}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(p=>t==null?void 0:t(wn.CHANNEL_ERROR,p)),this._onClose(()=>t==null?void 0:t(wn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var b;if(this.socket.setAuth(),p===void 0){t==null||t(wn.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(b=m==null?void 0:m.length)!==null&&b!==void 0?b:0,v=[];for(let g=0;g<y;g++){const x=m[g],{filter:{event:j,schema:w,table:_,filter:S}}=x,E=p&&p[g];if(E&&E.event===j&&E.schema===w&&E.table===_&&E.filter===S)v.push(Object.assign(Object.assign({},x),{id:E.id}));else{this.unsubscribe(),this.state=mt.errored,t==null||t(wn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(wn.SUBSCRIBED);return}}).receive("error",p=>{this.state=mt.errored,t==null||t(wn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(wn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===mt.joined&&t===ll.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const s={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:s}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:s,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var s,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(s=this.params)===null||s===void 0?void 0:s.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Kr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new up(this,Kr.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),s=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),s}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new up(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>dI){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const s=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:f}=Kr;if(n&&[l,c,u,f].indexOf(s)>=0&&n!==this._joinRef())return;let h=this._onMessage(s,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var b,m,y;return((b=p.filter)===null||b===void 0?void 0:b.event)==="*"||((y=(m=p.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(p=>p.callback(h,n)):(a=this.bindings[s])===null||a===void 0||a.filter(p=>{var b,m,y,v,g,x;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in p){const j=p.id,w=(b=p.filter)===null||b===void 0?void 0:b.event;return j&&((m=r.ids)===null||m===void 0?void 0:m.includes(j))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(g=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return j==="*"||j===((x=r==null?void 0:r.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===s}).map(p=>{if(typeof h=="object"&&"ids"in h){const b=h.data,{schema:m,table:y,commit_timestamp:v,type:g,errors:x}=b;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:v,eventType:g,new:{},old:{},errors:x}),this._getPayloadRecords(b))}p.callback(h,n)})}_isClosed(){return this.state===mt.closed}_isJoined(){return this.state===mt.joined}_isJoining(){return this.state===mt.joining}_isLeaving(){return this.state===mt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Lv.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Kr.close,{},t)}_onError(t){this._on(Kr.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Ob(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Ob(t.columns,t.old_record)),r}}const dp=()=>{},du={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},xI=[1e3,2e3,5e3,1e4],bI=1e4,wI=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class _I{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jm,this.transport=null,this.heartbeatIntervalMs=du.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=dp,this.ref=0,this.reconnectTimer=null,this.logger=dp,this.conn=null,this.sendBuffer=[],this.serializer=new fI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Qm.websocket}`,this.httpEndpoint=gA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=sI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cI}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case sl.connecting:return Wi.Connecting;case sl.open:return Wi.Open;case sl.closing:return Wi.Closing;default:return Wi.Closed}}isConnected(){return this.connectionState()===Wi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Lv(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,s=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(uI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},du.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:s}=r,l=s?`(${s})`:"",c=a.status||"";this.log("receive",`${c} ${n} ${i} ${l}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,s)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Kr.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([wI],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:lI};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Kr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new pA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},du.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,s,l,c,u,f;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:Jm,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:du.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(s=t==null?void 0:t.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:dp,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:d=>xI[d-1]||bI,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(d,h)=>h(JSON.stringify(d)),this.decode=(f=t==null?void 0:t.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Bv extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Qe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class jI extends Bv{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class eg extends Bv{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Fv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),SI=()=>Response,tg=e=>{if(Array.isArray(e))return e.map(r=>tg(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=tg(n)}),t},NI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},fp=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},EI=(e,t,r)=>pe(void 0,void 0,void 0,function*(){const n=yield SI();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,s=(i==null?void 0:i.statusCode)||a+"";t(new jI(fp(i),a,s))}).catch(i=>{t(new eg(fp(i),i))}):t(new eg(fp(e),e))}),AI=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(NI(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Pc(e,t,r,n,i,a){return pe(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,AI(t,n,i,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>s(c)).catch(c=>EI(c,l,n))})})}function Rl(e,t,r,n){return pe(this,void 0,void 0,function*(){return Pc(e,"GET",t,r,n)})}function Vr(e,t,r,n,i){return pe(this,void 0,void 0,function*(){return Pc(e,"POST",t,n,i,r)})}function rg(e,t,r,n,i){return pe(this,void 0,void 0,function*(){return Pc(e,"PUT",t,n,i,r)})}function OI(e,t,r,n){return pe(this,void 0,void 0,function*(){return Pc(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function zv(e,t,r,n,i){return pe(this,void 0,void 0,function*(){return Pc(e,"DELETE",t,n,i,r)})}class PI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return pe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}var yA;class TI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[yA]="BlobDownloadBuilder",this.promise=null}asStream(){return new PI(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qe(t))return{data:null,error:t};throw t}})}}yA=Symbol.toStringTag;const CI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class kI{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Fv(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return pe(this,void 0,void 0,function*(){try{let a;const s=Object.assign(Object.assign({},Cb),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(s.upsert)});const c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",s.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.has("cacheControl")||a.append("cacheControl",s.cacheControl),c&&!a.has("metadata")&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${s.cacheControl}`,l["content-type"]=s.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!s.duplex&&(s.duplex="half")),i!=null&&i.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(r),f=this._getFinalPath(u),d=yield(t=="PUT"?rg:Vr)(this.fetch,`${this.url}/object/${f}`,a,Object.assign({headers:l},s!=null&&s.duplex?{duplex:s.duplex}:{}));return{data:{path:u,id:d.Id,fullPath:d.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}upload(t,r,n){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return pe(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),s=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${s}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Cb.upsert},i),f=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType);const d=yield rg(this.fetch,l.toString(),c,{headers:f});return{data:{path:a,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Qe(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return pe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),s=new URL(this.url+a.url),l=s.searchParams.get("token");if(!l)throw new Bv("No token returned by API");return{data:{signedUrl:s.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}update(t,r,n){return pe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return pe(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}copy(t,r,n){return pe(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return pe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Vr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${s}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return pe(this,void 0,void 0,function*(){try{const i=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(s=>Object.assign(Object.assign({},s),{signedUrl:s.signedURL?encodeURI(`${this.url}${s.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),s=a?`?${a}`:"",l=this._getFinalPath(t),c=()=>Rl(this.fetch,`${this.url}/${i}/${l}${s}`,{headers:this.headers,noResolveJson:!0});return new TI(c,this.shouldThrowOnError)}info(t){return pe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Rl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:tg(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}exists(t){return pe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield OI(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n)&&n instanceof eg){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return pe(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}list(t,r,n){return pe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},CI),r),{prefix:t||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}listV2(t,r){return pe(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const vA="2.80.0",xA={"X-Client-Info":`storage-js/${vA}`};class $I{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xA),r),this.fetch=Fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return pe(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Rl(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}getBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Rl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}createBucket(t){return pe(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qe(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return pe(this,void 0,void 0,function*(){try{return{data:yield rg(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}emptyBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class II{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xA),r),this.fetch=Fv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}listBuckets(t){return pe(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Rl(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield zv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}}const Uv={"X-Client-Info":`storage-js/${vA}`,"Content-Type":"application/json"};class bA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function hr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class hp extends bA{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class MI extends bA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var kb;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(kb||(kb={}));const qv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RI=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},$b=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),DI=(e,t,r)=>pe(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(s=>{const l=(s==null?void 0:s.statusCode)||(s==null?void 0:s.code)||i+"";t(new hp($b(s),i,l))}).catch(()=>{const s=i+"",l=a.statusText||`HTTP ${i} error`;t(new hp(l,i,s))});else{const s=i+"",l=a.statusText||`HTTP ${i} error`;t(new hp(l,i,s))}}else t(new MI($b(e),e))}),LI=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(RI(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function BI(e,t,r,n,i,a){return pe(this,void 0,void 0,function*(){return new Promise((s,l)=>{e(r,LI(t,n,i,a)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>s(c)).catch(c=>DI(c,l,n))})})}function pr(e,t,r,n,i){return pe(this,void 0,void 0,function*(){return BI(e,"POST",t,n,i,r)})}class FI{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield pr(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return pe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hr(n))return{data:null,error:n};throw n}})}listIndexes(t){return pe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return pe(this,void 0,void 0,function*(){try{return{data:(yield pr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(hr(n))return{data:null,error:n};throw n}})}}class zI{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield pr(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}getVectors(t){return pe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}listVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield pr(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}queryVectors(t){return pe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return pe(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield pr(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}}class UI{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Uv),r),this.fetch=qv(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield pr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}getBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:yield pr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}listBuckets(){return pe(this,arguments,void 0,function*(t={}){try{return{data:yield pr(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pe(this,void 0,void 0,function*(){try{return{data:(yield pr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(hr(r))return{data:null,error:r};throw r}})}}class qI extends UI{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new WI(this.url,this.headers,t,this.fetch)}}class WI extends FI{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pe(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pe(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pe(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pe(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new VI(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class VI extends zI{constructor(t,r,n,i,a){super(t,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pe(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pe(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pe(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pe(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pe(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class HI extends $I{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new kI(this.url,this.headers,t,this.fetch)}get vectors(){return new qI(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new II(this.url+"/iceberg",this.headers,this.fetch)}}const KI="2.80.0";let Ko="";typeof Deno<"u"?Ko="deno":typeof document<"u"?Ko="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ko="react-native":Ko="node";const GI={"X-Client-Info":`supabase-js-${Ko}/${KI}`},XI={headers:GI},YI={schema:"public"},JI={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},QI={},ZI=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),eM=()=>Headers,tM=(e,t,r)=>{const n=ZI(r),i=eM();return async(a,s)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new i(s==null?void 0:s.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},s),{headers:u}))}};function rM(e){return e.endsWith("/")?e:e+"/"}function nM(e,t){var r,n;const{db:i,auth:a,realtime:s,global:l}=e,{db:c,auth:u,realtime:f,global:d}=t,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},f),s),storage:{},global:Object.assign(Object.assign(Object.assign({},d),l),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function iM(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rM(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const wA="2.80.0",Ua=30*1e3,ng=3,pp=ng*Ua,aM="http://localhost:9999",sM="supabase.auth.token",oM={"X-Client-Info":`gotrue-js/${wA}`},ig="X-Supabase-Api-Version",_A={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lM=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cM=10*60*1e3;class Dl extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function me(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class uM extends Dl{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function dM(e){return me(e)&&e.name==="AuthApiError"}class Vi extends Dl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Ai extends Dl{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class Ur extends Ai{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fM(e){return me(e)&&e.name==="AuthSessionMissingError"}class $a extends Ai{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fu extends Ai{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hu extends Ai{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function hM(e){return me(e)&&e.name==="AuthImplicitGrantRedirectError"}class Ib extends Ai{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ag extends Ai{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function mp(e){return me(e)&&e.name==="AuthRetryableFetchError"}class Mb extends Ai{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sg extends Ai{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const gd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Rb=` 	
\r=`.split(""),pM=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Rb.length;t+=1)e[Rb[t].charCodeAt(0)]=-2;for(let t=0;t<gd.length;t+=1)e[gd[t].charCodeAt(0)]=t;return e})();function Db(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gd[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(gd[n]),t.queuedBits-=6}}function jA(e,t,r){const n=pM[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Lb(e){const t=[],r=s=>{t.push(String.fromCodePoint(s))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=s=>{yM(s,n,r)};for(let s=0;s<e.length;s+=1)jA(e.charCodeAt(s),i,a);return t.join("")}function mM(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gM(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}mM(n,t)}}function yM(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function hs(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)jA(e.charCodeAt(i),r,n);return new Uint8Array(t)}function vM(e){const t=[];return gM(e,r=>t.push(r)),new Uint8Array(t)}function Yi(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>Db(i,r,n)),Db(null,r,n),t.join("")}function xM(e){return Math.round(Date.now()/1e3)+e}function bM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const It=()=>typeof window<"u"&&typeof document<"u",$i={tested:!1,writable:!1},SA=()=>{if(!It())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if($i.tested)return $i.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),$i.tested=!0,$i.writable=!0}catch{$i.tested=!0,$i.writable=!1}return $i.writable};function wM(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const NA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),_M=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",qa=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ii=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Gn=async(e,t)=>{await e.removeItem(t)};class zf{constructor(){this.promise=new zf.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}zf.promiseConstructor=Promise;function gp(e){const t=e.split(".");if(t.length!==3)throw new sg("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!lM.test(t[n]))throw new sg("JWT not in base64url format");return{header:JSON.parse(Lb(t[0])),payload:JSON.parse(Lb(t[1])),signature:hs(t[2]),raw:{header:t[0],payload:t[1]}}}async function jM(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SM(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const s=await e(a);if(!t(a,null,s)){n(s);return}}catch(s){if(!t(a,s)){i(s);return}}})()})}function NM(e){return("0"+e.toString(16)).substr(-2)}function EM(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,NM).join("")}async function AM(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function OM(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await AM(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ia(e,t,r=!1){const n=EM();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await qa(e,`${t}-code-verifier`,i);const a=await OM(n);return[a,n===a?"plain":"s256"]}const PM=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function TM(e){const t=e.headers.get(ig);if(!t||!t.match(PM))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function CM(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function kM(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const $M=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ma(e){if(!$M.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yp(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IM(e,t){return new Proxy(e,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,i)}})}function Bb(e){return JSON.parse(JSON.stringify(e))}const Fi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),MM=[502,503,504];async function Fb(e){var t;if(!_M(e))throw new ag(Fi(e),0);if(MM.includes(e.status))throw new ag(Fi(e),e.status);let r;try{r=await e.json()}catch(a){throw new Vi(Fi(a),a)}let n;const i=TM(e);if(i&&i.getTime()>=_A["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Mb(Fi(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ur}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,s)=>a&&typeof s=="string",!0))throw new Mb(Fi(r),e.status,r.weak_password.reasons);throw new uM(Fi(r),e.status||500,n)}const RM=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function be(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[ig]||(a[ig]=_A["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const s=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(s.redirect_to=n.redirectTo);const l=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await DM(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function DM(e,t,r,n,i,a){const s=RM(t,n,i,a);let l;try{l=await e(r,Object.assign({},s))}catch(c){throw console.error(c),new ag(Fi(c),0)}if(l.ok||await Fb(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Fb(c)}}function qr(e){var t;let r=null;FM(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=xM(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function zb(e){const t=qr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function ei(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function LM(e){return{data:e,error:null}}function BM(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,s=no(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},c=Object.assign({},s);return{data:{properties:l,user:c},error:null}}function Ub(e){return e}function FM(e){return e.access_token&&e.refresh_token&&e.expires_in}const vp=["global","local","others"];class zM{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=NA(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=vp[0]){if(vp.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vp.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:ei})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=no(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:BM,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(me(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:ei})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Ub});if(f.error)throw f.error;const d=await f.json(),h=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const m=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(me(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ma(t);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:ei})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ma(t);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:ei})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ma(t);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:ei})}catch(n){if(me(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ma(t.userId);try{const{data:r,error:n}=await be(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ma(t.userId),Ma(t.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,s,l,c;try{const u={nextPage:null,lastPage:0,total:0},f=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Ub});if(f.error)throw f.error;const d=await f.json(),h=(s=f.headers.get("x-total-count"))!==null&&s!==void 0?s:0,p=(c=(l=f.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(b=>{const m=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(b.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(me(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(me(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(me(r))return{data:null,error:r};throw r}}}function qb(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ra={debug:!!(globalThis&&SA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class EA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class UM extends EA{}async function qM(e,t,r){Ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ra.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Ra.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new UM(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ra.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function WM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function AA(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function VM(e){return parseInt(e,16)}function HM(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function KM(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:s,notBefore:l,requestId:c,resources:u,scheme:f,uri:d,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const p=AA(e.address),b=f?`${f}://${n}`:n,m=e.statement?`${e.statement}
`:"",y=`${b} wants you to sign in with your Ethereum account:
${p}

${m}`;let v=`URI: ${d}
Version: ${h}
Chain ID: ${r}${s?`
Nonce: ${s}`:""}
Issued At: ${a.toISOString()}`;if(i&&(v+=`
Expiration Time: ${i.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let g=`
Resources:`;for(const x of u){if(!x||typeof x!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${x}`);g+=`
- ${x}`}v+=g}return`${y}
${v}`}class ct extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class yd extends ct{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function GM({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ct({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ct({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ct({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ct({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ct({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new ct({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ct({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(OA(s)){if(a.rp.id!==s)return new ct({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ct({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function XM({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ct({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ct({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(OA(n)){if(r.rpId!==n)return new ct({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ct({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ct({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ct({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class YM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const JM=new YM;function QM(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=no(e,["challenge","user","excludeCredentials"]),a=hs(t).buffer,s=Object.assign(Object.assign({},r),{id:hs(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:s});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:hs(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function ZM(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=no(e,["challenge","allowCredentials"]),i=hs(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let s=0;s<r.length;s++){const l=r[s];a.allowCredentials[s]=Object.assign(Object.assign({},l),{id:hs(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function eR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yi(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yi(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function tR(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yi(new Uint8Array(i.authenticatorData)),clientDataJSON:Yi(new Uint8Array(i.clientDataJSON)),signature:Yi(new Uint8Array(i.signature)),userHandle:i.userHandle?Yi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function OA(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Wb(){var e,t;return!!(It()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function rR(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yd("Browser returned unexpected credential type",t)}:{data:null,error:new yd("Empty credential response",t)}}catch(t){return{data:null,error:GM({error:t,options:e})}}}async function nR(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new yd("Browser returned unexpected credential type",t)}:{data:null,error:new yd("Empty credential response",t)}}catch(t){return{data:null,error:XM({error:t,options:e})}}}const iR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},aR={userVerification:"preferred",hints:["security-key"]};function vd(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const s=i[a];if(s!==void 0)if(Array.isArray(s))n[a]=s;else if(r(s))n[a]=s;else if(t(s)){const l=n[a];t(l)?n[a]=vd(l,s):n[a]=vd(s)}else n[a]=s}return n}function sR(e,t){return vd(iR,e,t||{})}function oR(e,t){return vd(aR,e,t||{})}class lR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:s,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!s)return{data:null,error:l};const c=i??JM.createNewAbortSignal();if(s.webauthn.type==="create"){const{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{const u=sR(s.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:f,error:d}=await rR({publicKey:u,signal:c});return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}case"request":{const u=oR(s.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:f,error:d}=await nR(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return f?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:f}},error:null}:{data:null,error:d}}}}catch(s){return me(s)?{data:null,error:s}:{data:null,error:new Vi("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!r)return{data:null,error:new Dl("rpId is required for WebAuthn authentication")};try{if(!Wb())return{data:null,error:new Vi("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!s)return{data:null,error:l};const{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(s){return me(s)?{data:null,error:s}:{data:null,error:new Vi("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!r)return{data:null,error:new Dl("rpId is required for WebAuthn registration")};try{if(!Wb())return{data:null,error:new Vi("Browser does not support WebAuthn",null)};const{data:s,error:l}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(f=>{var d;return(d=f.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(f=>f?this.client.mfa.unenroll({factorId:f==null?void 0:f.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return me(s)?{data:null,error:s}:{data:null,error:new Vi("Unexpected error in register",s)}}}}WM();const cR={url:aM,storageKey:sM,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oM,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Vb(e,t,r){return await r()}const Da={};class Ll{get jwks(){var t,r;return(r=(t=Da[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Da[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Da[this.storageKey]=Object.assign(Object.assign({},Da[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const a=Object.assign(Object.assign({},cR),t);if(this.storageKey=a.storageKey,this.instanceID=(r=Ll.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ll.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.instanceID>0&&It()){const s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=a.persistSession,this.autoRefreshToken=a.autoRefreshToken,this.admin=new zM({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=NA(a.fetch),this.lock=a.lock||Vb,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,this.throwOnError=a.throwOnError,a.lock?this.lock=a.lock:It()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=qM:this.lock=Vb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:SA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qb(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=qb(this.memoryStorage)),It()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${wA}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(It()&&(r=wM(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),It()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),hM(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:s,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",s,"redirect type",l),await this._saveSession(s),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?this._returnResult({error:r}):this._returnResult({error:new Vi("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:qr}),{data:s,error:l}=a;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:f,password:d,options:h}=t;let p=null,b=null;this.flowType==="pkce"&&([p,b]=await Ia(this.storage,this.storageKey)),a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:f,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:b},xform:qr})}else if("phone"in t){const{phone:f,password:d,options:h}=t;a=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:f,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:qr})}else throw new fu("You must provide either an email or phone number and a password");const{data:s,error:l}=a;if(l||!s)return this._returnResult({data:{user:null,session:null},error:l});const c=s.session,u=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:s,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zb})}else if("phone"in t){const{phone:a,password:s,options:l}=t;r=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:zb})}else throw new fu("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const a=new $a;return this._returnResult({data:{user:null,session:null},error:a})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,s,l,c,u,f,d,h;let p,b;if("message"in t)p=t.message,b=t.signature;else{const{chain:m,wallet:y,statement:v,options:g}=t;let x;if(It())if(typeof y=="object")x=y;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")x=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=y}const j=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href),w=await x.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||w.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const _=AA(w[0]);let S=(n=g==null?void 0:g.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!S){const A=await x.request({method:"eth_chainId"});S=VM(A)}const E={domain:j.host,address:_,statement:v,uri:j.href,version:"1",chainId:S,nonce:(i=g==null?void 0:g.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(s=(a=g==null?void 0:g.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(l=g==null?void 0:g.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=g==null?void 0:g.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=g==null?void 0:g.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(f=g==null?void 0:g.signInWithEthereum)===null||f===void 0?void 0:f.resources};p=KM(E),b=await x.request({method:"personal_sign",params:[HM(p),_]})}try{const{data:m,error:y}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:b},!((d=t.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:qr});if(y)throw y;if(!m||!m.session||!m.user){const v=new $a;return this._returnResult({data:{user:null,session:null},error:v})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:y})}catch(m){if(me(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithSolana(t){var r,n,i,a,s,l,c,u,f,d,h,p;let b,m;if("message"in t)b=t.message,m=t.signature;else{const{chain:y,wallet:v,statement:g,options:x}=t;let j;if(It())if(typeof v=="object")j=v;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(x!=null&&x.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const w=new URL((r=x==null?void 0:x.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x==null?void 0:x.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),g?{statement:g}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)b=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),m=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${w.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(i=(n=x==null?void 0:x.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=x==null?void 0:x.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((s=x==null?void 0:x.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x==null?void 0:x.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x==null?void 0:x.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x==null?void 0:x.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((d=(f=x==null?void 0:x.signInWithSolana)===null||f===void 0?void 0:f.resources)===null||d===void 0)&&d.length?["Resources",...x.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(b),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=_}}try{const{data:y,error:v}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:Yi(m)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:qr});if(v)throw v;if(!y||!y.session||!y.user){const g=new $a;return this._returnResult({data:{user:null,session:null},error:g})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:v})}catch(y){if(me(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async _exchangeCodeForSession(t){const r=await Ii(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:s}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:qr});if(await Gn(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!a||!a.session||!a.user){const l=new $a;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:s})}catch(a){if(me(a))return this._returnResult({data:{user:null,session:null,redirectType:null},error:a});throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:s}=t,l=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:s,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:qr}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const f=new $a;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,i,a,s;try{if("email"in t){const{email:l,options:c}=t;let u=null,f=null;this.flowType==="pkce"&&([u,f]=await Ia(this.storage,this.storageKey));const{error:d}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:f},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:f}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(s=c==null?void 0:c.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new fu("You must provide either an email or phone number.")}catch(l){if(me(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:s,error:l}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:qr});if(l)throw l;if(!s)throw new Error("An error occurred on token verification.");const c=s.session,u=s.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,s=null;this.flowType==="pkce"&&([a,s]=await Ia(this.storage,this.storageKey));const l=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:s}),headers:this.headers,xform:LM});return this._returnResult(l)}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ur;const{error:i}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(t){if(me(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:s}=await be(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:s,error:l}=await be(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s==null?void 0:s.message_id},error:l})}throw new fu("You must provide either an email or phone number and a type")}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ii(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<pp:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const s=await Ii(this.userStorage,this.storageKey+"-user");s!=null&&s.user?t.user=s.user:t.user=yp()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const s={value:this.suppressGetSessionWarning};t.user=IM(t.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{session:null},error:a}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:ei}):await this._useSession(async r=>{var n,i,a;const{data:s,error:l}=r;if(l)throw l;return!(!((n=s.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ur}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:ei})})}catch(r){if(me(r))return fM(r)&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new Ur;const s=i.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Ia(this.storage,this.storageKey));const{data:u,error:f}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:s.access_token,xform:ei});if(f)throw f;return s.user=u.user,await this._saveSession(s),await this._notifyAllSubscribers("USER_UPDATED",s),this._returnResult({data:{user:s.user},error:null})})}catch(n){if(me(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ur;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:s}=gp(t.access_token);if(s.exp&&(n=s.exp,i=n<=r),i){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return this._returnResult({data:{user:a.user,session:a},error:null})}catch(r){if(me(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:s,error:l}=r;if(l)throw l;t=(n=s.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ur;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?this._returnResult({data:{user:null,session:null},error:a}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(me(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!It())throw new hu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Ib("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hu("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Ib("No code detected.");const{data:g,error:x}=await this._exchangeCodeForSession(t.code);if(x)throw x;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:s,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!s||!u)throw new hu("No session defined in URL");const f=Math.round(Date.now()/1e3),d=parseInt(l);let h=f+d;c&&(h=parseInt(c));const p=h-f;p*1e3<=Ua&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${d}s`);const b=h-d;f-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,h,f):f-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,h,f);const{data:m,error:y}=await this._getUser(a);if(y)throw y;const v={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:d,expires_at:h,refresh_token:s,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(me(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ii(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({error:a});const s=(n=i.session)===null||n===void 0?void 0:n.access_token;if(s){const{error:l}=await this.admin.signOut(s,t);if(l&&!(dM(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await Gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=bM(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:s}=r;if(s)throw s;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Ia(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(me(a))return this._returnResult({data:null,error:a});throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var s,l,c,u,f;const{data:d,error:h}=a;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(f=(u=d.session)===null||u===void 0?void 0:u.access_token)!==null&&f!==void 0?f:void 0})});if(i)throw i;return It()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(me(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:s,provider:l,token:c,access_token:u,nonce:f}=t,d=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a==null?void 0:a.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:f,link_identity:!0,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:qr}),{data:h,error:p}=d;return p?this._returnResult({data:{user:null,session:null},error:p}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new $a}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:p}))}catch(i){if(me(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)throw s;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await SM(async i=>(i>0&&await jM(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:qr})),(i,a)=>{const s=200*Math.pow(2,i);return a&&mp(a)&&Date.now()+s-n<Ua})}catch(n){if(this._debug(r,"error",n),me(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),It()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Ii(this.storage,this.storageKey);if(i&&this.userStorage){let s=await Ii(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:i.user},await qa(this.userStorage,this.storageKey+"-user",s)),i.user=(t=s==null?void 0:s.user)!==null&&t!==void 0?t:yp()}else if(i&&!i.user&&!i.user){const s=await Ii(this.storage,this.storageKey+"-user");s&&(s!=null&&s.user)?(i.user=s.user,await Gn(this.storage,this.storageKey+"-user"),await qa(this.storage,this.storageKey,i)):i.user=yp()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<pp;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${pp}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:s}=await this._callRefreshToken(i.refresh_token);s&&(console.error(s),mp(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:s,error:l}=await this._getUser(i.access_token);!l&&(s!=null&&s.user)?(i.user=s.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ur;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new zf;const{data:a,error:s}=await this._refreshAccessToken(t);if(s)throw s;if(!a.session)throw new Ur;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),me(a)){const s={data:null,error:a};return mp(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],s=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(s),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await qa(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=Bb(i);await qa(this.storage,this.storageKey,a)}else{const i=Bb(r);await qa(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Gn(this.storage,this.storageKey),await Gn(this.storage,this.storageKey+"-code-verifier"),await Gn(this.storage,this.storageKey+"-user"),this.userStorage&&await Gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&It()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ua);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/Ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ua}ms, refresh threshold is ${ng} ticks`),i<=ng&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof EA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!It()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,s]=await Ia(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(s)}`});i.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?this._returnResult({data:null,error:a}):await be(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:s}=r;if(s)return this._returnResult({data:null,error:s});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await be(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?eR(t.webauthn.credential_response):tR(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:s,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=await be(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(s.error)return s;const{data:l}=s;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:QM(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:ZM(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=gp(n.access_token);let s=null;a.aal&&(s=a.aal);let l=s;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:s,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Ur})})}catch(r){if(me(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Ur});const s=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&It()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:i},error:a}=n;if(a)return this._returnResult({data:null,error:a});if(!i)return this._returnResult({data:null,error:new Ur});const s=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return s.data&&s.data.redirect_url&&It()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(s.data.redirect_url),s})}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+cM>i)return n;const{data:a,error:s}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:b}=await this.getSession();if(b||!p.session)return this._returnResult({data:null,error:b});n=p.session.access_token}const{header:i,payload:a,signature:s,raw:{header:l,payload:c}}=gp(n);r!=null&&r.allowExpired||CM(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:a,header:i,signature:s},error:null}}const f=kM(i.alg),d=await crypto.subtle.importKey("jwk",u,f,!0,["verify"]);if(!await crypto.subtle.verify(f,d,s,vM(`${l}.${c}`)))throw new sg("Invalid JWT signature");return{data:{claims:a,header:i,signature:s},error:null}}catch(n){if(me(n))return this._returnResult({data:null,error:n});throw n}}}Ll.nextInstanceID={};const uR=Ll;class dR extends uR{constructor(t){super(t)}}class fR{constructor(t,r,n){var i,a,s;this.supabaseUrl=t,this.supabaseKey=r;const l=iM(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:YI,realtime:QI,auth:Object.assign(Object.assign({},JI),{storageKey:c}),global:XI},f=nM(n??{},u);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((s=f.auth)!==null&&s!==void 0?s:{},this.headers,f.global.fetch),this.fetch=tM(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new aI(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new HI(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new rI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:s,flowType:l,lock:c,debug:u,throwOnError:f},d,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new dR({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),d),storageKey:s,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:c,debug:u,throwOnError:f,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new _I(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const hR=(e,t,r)=>new fR(e,t,r);function pR(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}pR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const mR="https://ynoxsibapzatlxhmredp.supabase.co",gR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlub3hzaWJhcHphdGx4aG1yZWRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI0NTQ5OTcsImV4cCI6MjA3ODAzMDk5N30.39C4_sEXIeplYHBYPEGa-_pnan-1SHM6cgNJ-FrtsvU",G=hR(mR,gR,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}});let og=null;function yR(){og=G.auth.onAuthStateChange((e,t)=>{e==="SIGNED_OUT"?console.log(" Utilisateur dconnect"):e==="TOKEN_REFRESHED"?console.log(" Token actualis"):e==="USER_UPDATED"?console.log(" Utilisateur mis  jour"):e==="SIGNED_IN"&&console.log(" Utilisateur connect")})}function vR(){og&&og()}const oe={PROSPECTS:"prospects",INSTALLATIONS:"installations",ABONNEMENTS:"abonnements",PAIEMENTS:"paiements",INTERVENTIONS:"interventions",USERS:"users",APPLICATIONS:"applications",HISTORIQUE_ACTIONS:"prospect_history"},Hb={SUPER_ADMIN:"super_admin",ADMIN:"admin",TECHNICIEN:"technicien",COMMERCIAL:"commercial",SUPPORT:"support"},aa={super_admin:{label:"Super Administrateur",canManageUsers:!0,canManageRoles:!0,canManageApplications:!0,canViewAll:!0,canEditAll:!0,canDeleteAll:!0,allPages:!0},admin:{label:"Administrateur",canManageUsers:!0,canManageRoles:!1,canManageApplications:!0,canViewAll:!0,canEditAll:!0,canDeleteAll:!0,allPages:!0},technicien:{label:"Technicien",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","installations","abonnements","support","missions"]},commercial:{label:"Commercial",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","prospects","clients","installations","abonnements","paiements","alertes","missions"]},support:{label:"Support",canManageUsers:!1,canManageRoles:!1,canManageApplications:!1,canViewAll:!1,canEditAll:!1,canDeleteAll:!1,allPages:!1,defaultPages:["dashboard","support","missions","clients"]}},Pe={DASHBOARD:"dashboard",PROSPECTS:"prospects",CLIENTS:"clients",INSTALLATIONS:"installations",ABONNEMENTS:"abonnements",PAIEMENTS:"paiements",SUPPORT:"support",MISSIONS:"missions",ALERTES:"alertes",APPLICATIONS:"applications",UTILISATEURS:"utilisateurs"},To={prospects:{label:" Prospects",icon:"",permissions:["create","edit","delete"]},clients:{label:" Clients",icon:"",permissions:["create","edit","delete"]},installations:{label:" Installations",icon:"",permissions:["create","edit","delete"]},abonnements:{label:" Abonnements",icon:"",permissions:["create","edit","delete"]},paiements:{label:" Paiements",icon:"",permissions:["create","edit","delete"]},support:{label:" Support",icon:"",permissions:["create","edit","delete"]},missions:{label:" Missions",icon:"",permissions:["create","edit","delete","close","validate"]},alertes:{label:" Alertes",icon:"",permissions:["create","edit","delete"]},applications:{label:" Applications",icon:"",permissions:["create","edit","delete"]}},xR={create:" Crer",edit:" Modifier",delete:" Supprimer",close:" Clturer",validate:" Valider"},Yt={async signIn(e,t){try{const{data:r,error:n}=await G.rpc("verify_user_password",{p_email:e.toLowerCase(),p_password:t});if(n)throw console.error("Erreur vrification mot de passe:",n),new Error("Email ou mot de passe incorrect");if(!r||r.length===0)throw console.warn("Utilisateur non trouv:",e),new Error("Email ou mot de passe incorrect");const i=r[0];if(!i.is_valid)throw console.warn("Mot de passe incorrect pour:",e),new Error("Email ou mot de passe incorrect");try{await G.rpc("update_last_login",{p_email:e.toLowerCase()})}catch(c){console.warn("Note: update_last_login choue (non-bloquant):",c)}const a={id:i.user_id,email:i.email,nom:i.nom,role:i.role,pages_visibles:[]},{data:s,error:l}=await G.from("users").select("pages_visibles").eq("id",i.user_id).single();return!l&&s&&(a.pages_visibles=s.pages_visibles||[]),console.log(" Connexion russie (authentification locale):",{email:e,role:a.role}),localStorage.setItem("currentUser",JSON.stringify(a)),{user:{id:i.user_id},profile:a}}catch(r){throw console.error(" Erreur de connexion:",r),r}},async signOut(){try{localStorage.removeItem("currentUser"),console.log(" Dconnexion russie")}catch(e){throw console.error("Erreur de dconnexion:",e),e}},async getCurrentUser(){try{const e=localStorage.getItem("currentUser");if(!e)return console.log(" Pas d'utilisateur en session"),null;try{const t=JSON.parse(e);return console.log(" Utilisateur rcupr du localStorage:",t.email),t}catch(t){console.warn(" Erreur parsing localStorage:",t);try{const{data:{user:r},error:n}=await G.auth.getUser();if(!n&&r)return console.log(" Utilisateur rcupr depuis Supabase"),{user:r,profile:{id:r.id,email:r.email}}}catch{console.warn(" Impossible de rcuprer depuis Supabase")}return null}}catch(e){return console.error("Erreur critique rcupration utilisateur:",e),null}},hasPageAccess(e,t){if(!e)return!1;const r=e.role||"commercial",n=aa[r];return n?n.allPages?!0:(e.pages_visibles||[]).includes(t):(console.warn(`Rle inconnu: ${r}`),!1)},hasPermission(e,t){if(!e)return!1;const r=e.role||"commercial",n=aa[r];return n?n[t]===!0:(console.warn(`Rle inconnu: ${r}`),!1)},canManageUsers(e){return this.hasPermission(e,"canManageUsers")},canManageRoles(e){return this.hasPermission(e,"canManageRoles")},canManageApplications(e){return this.hasPermission(e,"canManageApplications")},canViewAll(e){return this.hasPermission(e,"canViewAll")},canEditAll(e){return this.hasPermission(e,"canEditAll")},canDeleteAll(e){return this.hasPermission(e,"canDeleteAll")},getDefaultPages(e){const t=aa[e];return t!=null&&t.allPages?["dashboard","prospects","clients","installations","abonnements","paiements","support","applications","utilisateurs"]:(t==null?void 0:t.defaultPages)||[]}},PA=N.createContext(null),bR=({children:e})=>{const[t,r]=N.useState(null),[n,i]=N.useState(null),[a,s]=N.useState(!0);N.useEffect(()=>(l(),yR(),()=>{vR()}),[]);const l=async()=>{try{const x=await Yt.getCurrentUser();x&&(r(x.user),i(x.profile))}catch(x){console.error("Erreur vrification utilisateur:",x)}finally{s(!1)}},g={user:t,profile:n,loading:a,signIn:async(x,j)=>{try{const{user:w,profile:_}=await Yt.signIn(x,j);return r(w),i(_),console.log(" Connexion russie:",{email:x,role:_==null?void 0:_.role}),{user:w,profile:_}}catch(w){throw console.error(" Erreur de connexion:",w),r(null),i(null),w}},signOut:async()=>{await Yt.signOut(),r(null),i(null)},hasAccess:x=>Yt.hasPageAccess(n,x),canManageUsers:()=>Yt.canManageUsers(n),canManageRoles:()=>Yt.canManageRoles(n),canManageApplications:()=>Yt.canManageApplications(n),canViewAll:()=>Yt.canViewAll(n),canEditAll:()=>Yt.canEditAll(n),canDeleteAll:()=>Yt.canDeleteAll(n),hasPermission:x=>Yt.hasPermission(n,x),isAuthenticated:!!t};return o.jsx(PA.Provider,{value:g,children:e})},Et=()=>{const e=N.useContext(PA);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},TA=N.createContext(null),wR=({children:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0),a=u=>{const f=Date.now();r(h=>[...h,{...u,id:f}]);const d=u.duration||(u.type==="error"?8e3:5e3);setTimeout(()=>{s(f)},d)},s=u=>{r(f=>f.filter(d=>d.id!==u))},c={notifications:t,addNotification:a,removeNotification:s,sidebarOpen:n,setSidebarOpen:i,toggleSidebar:()=>{i(u=>!u)}};return o.jsx(TA.Provider,{value:c,children:e})},sr=()=>{const e=N.useContext(TA);if(!e)throw new Error("useApp must be used within AppProvider");return e};var _R={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const jR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),SR=(e,t)=>{const r=N.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,children:l,...c},u)=>N.createElement("svg",{ref:u,..._R,width:i,height:i,stroke:n,strokeWidth:s?Number(a)*24/Number(i):a,className:`lucide lucide-${jR(e)}`,...c},[...t.map(([f,d])=>N.createElement(f,d)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var xe=SR;const Nt=xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Es=xe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),NR=xe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),ER=xe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),xd=xe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),lg=xe("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Co=xe("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),cl=xe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Rr=xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),dn=xe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ti=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ri=xe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Tc=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),li=xe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),As=xe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),CA=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Uf=xe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Fu=xe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),AR=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),xp=xe("Gift",[["polyline",{points:"20 12 20 22 4 22 4 12",key:"nda8fc"}],["rect",{width:"20",height:"5",x:"2",y:"7",key:"wkgdzj"}],["line",{x1:"12",x2:"12",y1:"22",y2:"7",key:"1n8zgp"}],["path",{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z",key:"zighg4"}],["path",{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z",key:"1pa5tk"}]]),OR=xe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),PR=xe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),TR=xe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),CR=xe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),kR=xe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),_i=xe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$R=xe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),IR=xe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Wv=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Vv=xe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),kA=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Hv=xe("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),qn=xe("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),cg=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),MR=xe("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),Oi=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$A=xe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Kv=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),RR=xe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ug=xe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),DR=xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ji=xe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),en=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),LR=xe("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),En=xe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),IA=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Bl=xe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),BR=xe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),ji=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bd=xe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),FR=()=>{const[e,t]=N.useState(""),[r,n]=N.useState(""),[i,a]=N.useState(""),[s,l]=N.useState(!1),{signIn:c}=Et(),u=async f=>{var d,h,p,b;f.preventDefault(),a(""),l(!0);try{await c(e,r)}catch(m){m.code==="AUTH_NOT_INITIALIZED"?a(m.message):(d=m.message)!=null&&d.includes("Email ou mot de passe incorrect")?a(" Email ou mot de passe incorrect"):(h=m.message)!=null&&h.includes("Email not confirmed")?a(" Veuillez confirmer votre adresse email"):(p=m.message)!=null&&p.includes("rate limit")?a(" Trop de tentatives. Veuillez ressayer dans un moment."):(b=m.message)!=null&&b.includes("not found")?a(" Cet utilisateur n'existe pas"):a(m.message||" Erreur de connexion")}finally{l(!1)}};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"bg-primary w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-3xl font-bold",children:"A2S"})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"A2S Gestion"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Connectez-vous  votre compte"})]}),o.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm whitespace-pre-wrap",children:i}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),o.jsx("input",{type:"email",value:e,onChange:f=>t(f.target.value),className:"input-field",placeholder:"votre@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de passe"}),o.jsx("input",{type:"password",value:r,onChange:f=>n(f.target.value),className:"input-field",placeholder:"",required:!0})]}),o.jsx("button",{type:"submit",disabled:s,className:"w-full btn-primary py-3 flex items-center justify-center gap-2",children:s?o.jsx("span",{children:"Connexion en cours..."}):o.jsxs(o.Fragment,{children:[o.jsx($R,{size:20}),o.jsx("span",{children:"Se connecter"})]})})]}),o.jsx("div",{className:"mt-8 text-center text-sm text-gray-600",children:o.jsx("p",{children:" 2025 SARL A2S - Tous droits rservs"})})]})})},zR=({children:e,requiredPage:t})=>{const{isAuthenticated:r,loading:n,hasAccess:i,profile:a}=Et();return n?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r?t&&!i(t)?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:o.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-lg shadow p-8",children:[o.jsx(Nt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:" Accs Refus"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous n'avez pas accs  cette page."}),o.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:[o.jsx("strong",{children:"Rle actuel:"})," ",(a==null?void 0:a.role)||"Non dfini"]}),o.jsx("p",{className:"text-xs text-gray-400 mb-6",children:"Demandez  un administrateur pour accorder l'accs  cette page."}),o.jsx("a",{href:"/",className:"inline-block bg-primary text-white px-6 py-2 rounded-lg font-medium hover:opacity-90 transition-opacity",children:"Retour au Tableau de Bord"})]})}):e:o.jsx(NE,{to:"/login",replace:!0})},$r=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"",MA=e=>e?new Date(e).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",Ze=e=>!e&&e!==0?"0 DA":new Intl.NumberFormat("fr-DZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)+" DA",Go=e=>{if(!e)return 0;const t=new Date,n=new Date(e)-t;return Math.ceil(n/(1e3*60*60*24))},UR=e=>({actif:"badge-success",prospect:"badge-info",inactif:"badge-danger",en_cours:"badge-warning",terminee:"badge-success",en_alerte:"badge-warning",expire:"badge-danger",cloturee:"badge-success",normale:"badge-info",haute:"badge-danger"})[e]||"badge-info",ps=e=>({actif:"Actif",prospect:"Prospect",inactif:"Inactif",en_cours:"En Cours",terminee:"Termine",en_alerte:"En Alerte",expire:"Expir",cloturee:"Clture",normale:"Normale",haute:"Haute",sur_site:"Sur Site",a_distance:" Distance",maintenance:"Maintenance",formation:"Formation",autre:"Autre",especes:"Espces",virement:"Virement",cheque:"Chque",acquisition:"Acquisition",abonnement:"Abonnement"})[e]||e,RA=e=>{if(!e)return"";const t=e.split(" ");return t.length===1?t[0].charAt(0).toUpperCase():(t[0].charAt(0)+t[t.length-1].charAt(0)).toUpperCase()},bp=({currentPage:e,onPageChange:t})=>{const{profile:r,signOut:n,hasAccess:i}=Et(),{sidebarOpen:a,toggleSidebar:s}=sr(),c=[{id:Pe.DASHBOARD,label:"Tableau de Bord",icon:CR},{id:Pe.PROSPECTS,label:"Prospects",icon:Ji},{id:Pe.CLIENTS,label:"Clients",icon:Bl},{id:Pe.INSTALLATIONS,label:"Installations",icon:CA},{id:Pe.ABONNEMENTS,label:"Abonnements",icon:Rr},{id:Pe.PAIEMENTS,label:"Paiements",icon:li},{id:Pe.SUPPORT,label:" Support",icon:OR},{id:Pe.MISSIONS,label:" Missions",icon:dn},{id:Pe.APPLICATIONS,label:"Applications",icon:Hv},{id:Pe.UTILISATEURS,label:"Utilisateurs",icon:Bl}].filter(f=>i(f.id)),u=async()=>{try{await n()}catch(f){console.error("Erreur dconnexion:",f)}};return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:s,className:"lg:hidden fixed top-4 left-4 z-50 bg-primary text-white p-2 rounded-lg shadow-lg",children:a?o.jsx(ji,{size:24}):o.jsx(kA,{size:24})}),a&&o.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:s}),o.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-40
          w-64 bg-primary text-white
          transform transition-transform duration-300 ease-in-out
          ${a?"translate-x-0":"-translate-x-full lg:translate-x-0"}
          flex flex-col
        `,children:[o.jsx("div",{className:"p-6 border-b border-primary-light",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-white w-12 h-12 rounded-xl flex items-center justify-center",children:o.jsx("span",{className:"text-primary text-xl font-bold",children:"A2S"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:"A2S Gestion"}),o.jsx("p",{className:"text-sm text-blue-200",children:r==null?void 0:r.role})]})]})}),o.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:c.map(f=>{const d=f.icon,h=e===f.id;return o.jsxs("button",{onClick:()=>{t(f.id),window.innerWidth<1024&&s()},className:`
                  w-full flex items-center gap-3 px-6 py-3 
                  transition-colors duration-200
                  ${h?"bg-white bg-opacity-20 border-l-4 border-white":"hover:bg-white hover:bg-opacity-10"}
                `,children:[o.jsx(d,{size:20}),o.jsx("span",{className:"font-medium",children:f.label})]},f.id)})}),o.jsxs("div",{className:"p-4 border-t border-primary-light",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center font-bold",children:RA((r==null?void 0:r.nom)||"User")}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-medium truncate",children:r==null?void 0:r.nom}),o.jsx("p",{className:"text-sm text-blue-200 truncate",children:"Utilisateur"})]})]}),o.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-white bg-opacity-10 hover:bg-opacity-20 rounded-lg transition-colors",children:[o.jsx(IR,{size:18}),o.jsx("span",{children:"Dconnexion"})]})]})]})]})},qt={async getAll(){try{const{data:e,error:t}=await G.from(oe.ABONNEMENTS).select("*").order("date_fin",{ascending:!0});if(t)throw t;const r=new Date;r.setHours(0,0,0,0);const n=new Date;return n.setDate(n.getDate()+30),n.setHours(0,0,0,0),await Promise.all(e.map(async a=>{const s=new Date(a.date_fin);s.setHours(0,0,0,0);let l=a.statut;s<r?l="expire":s<=n?l="en_alerte":l="actif",a.statut!==l&&await G.from(oe.ABONNEMENTS).update({statut:l}).eq("id",a.id);let c={};if(a.installation_id){const{data:u}=await G.from(oe.INSTALLATIONS).select("*").eq("id",a.installation_id).single();if(u){const{data:f}=await G.from(oe.PROSPECTS).select("raison_sociale, contact, telephone, email").eq("id",u.client_id).single();c={...u,client:f||{}}}}return{...a,statut:l,installation:c}}))}catch(e){throw console.error("Erreur rcupration abonnements:",e),e}},async createFromInstallation(e){try{const{data:t,error:r}=await G.from(oe.ABONNEMENTS).select("id").eq("installation_id",e).in("statut",["actif","en_alerte"]);if(r)throw r;if(t&&t.length>0)throw new Error("Un abonnement actif ou en alerte existe dj pour cette installation.");const{data:n,error:i}=await G.from(oe.INSTALLATIONS).select("date_installation").eq("id",e).single();if(i)throw i;const a=new Date(n.date_installation),s=new Date(a);s.setFullYear(s.getFullYear()+1);const l=new Date;l.setHours(0,0,0,0);const c=new Date(l);c.setDate(c.getDate()+30);let u="actif";s<l?u="expire":s<=c&&(u="en_alerte");const{error:f}=await G.from(oe.ABONNEMENTS).insert([{installation_id:e,date_debut:a.toISOString().split("T")[0],date_fin:s.toISOString().split("T")[0],statut:u}]);if(f)throw f;return console.log(` Abonnement cr: Installation ${e}, Statut: ${u}, Fin: ${s.toISOString().split("T")[0]}`),{success:!0,installationId:e,statut:u}}catch(t){throw console.error("Erreur cration abonnement:",t),t}},async create(e){try{const{data:t,error:r}=await G.from(oe.ABONNEMENTS).insert([{installation_id:e.installation_id,date_debut:e.date_debut,date_fin:e.date_fin,statut:e.statut||"actif"}]).select().single();if(r)throw r;return t}catch(t){throw console.error("Erreur cration abonnement:",t),t}},async hasPaiements(e){try{return!1}catch(t){return console.error("Erreur vrification paiements:",t),!1}},async hasActiveAbonnement(e){try{const{data:t,error:r}=await G.from(oe.ABONNEMENTS).select("id",{count:"exact",head:!0}).eq("installation_id",e).in("statut",["actif","en_alerte"]);if(r)throw r;return t&&t.length>0}catch(t){return console.error("Erreur vrification abonnement actif:",t),!1}},async update(e,t){try{if(await this.hasPaiements(e))throw new Error("Impossible de modifier : cet abonnement a des paiements associs");const{data:n,error:i}=await G.from(oe.ABONNEMENTS).update(t).eq("id",e).select().single();if(i)throw i;return n}catch(r){throw console.error("Erreur mise  jour abonnement:",r),r}},async delete(e){try{if(await this.hasPaiements(e))throw new Error("Impossible de supprimer : cet abonnement a des paiements associs");const{error:r}=await G.from(oe.ABONNEMENTS).delete().eq("id",e);if(r)throw r;return!0}catch(t){throw console.error("Erreur suppression abonnement:",t),t}},async renouveler(e){try{const{data:t,error:r}=await G.from(oe.ABONNEMENTS).select("*").eq("id",e).single();if(r)throw r;const{data:n,error:i}=await G.from(oe.ABONNEMENTS).select("id").eq("installation_id",t.installation_id).in("statut",["actif","en_alerte"]).neq("id",e);if(i)throw i;if(n&&n.length>0)throw new Error("Un abonnement actif ou en alerte existe dj pour cette installation. Veuillez supprimer ou modifier l'abonnement existant.");const{error:a}=await G.from(oe.ABONNEMENTS).update({statut:"expire"}).eq("id",e);if(a)throw a;const s=new Date(t.date_fin),l=new Date(s);l.setFullYear(l.getFullYear()+1);const{data:c,error:u}=await G.from(oe.ABONNEMENTS).insert([{installation_id:t.installation_id,date_debut:s.toISOString(),date_fin:l.toISOString(),statut:"actif"}]).select().single();if(u)throw u;return c}catch(t){throw console.error("Erreur renouvellement abonnement:",t),t}},async checkAlertes(){try{const e=new Date;e.setHours(0,0,0,0);const t=new Date;t.setDate(t.getDate()+30),t.setHours(23,59,59,999);const{data:r,error:n}=await G.from(oe.ABONNEMENTS).select("*").in("statut",["actif","en_alerte"]).order("date_fin",{ascending:!0});if(n)throw n;return(await Promise.all(r.map(async a=>{const s=new Date(a.date_fin);s.setHours(0,0,0,0);let l=a.statut;s<e?(l="expire",await G.from(oe.ABONNEMENTS).update({statut:"expire"}).eq("id",a.id)):s<=t?(l="en_alerte",await G.from(oe.ABONNEMENTS).update({statut:"en_alerte"}).eq("id",a.id)):(l="actif",await G.from(oe.ABONNEMENTS).update({statut:"actif"}).eq("id",a.id));let c={};if(a.installation_id){const{data:u}=await G.from(oe.INSTALLATIONS).select("*").eq("id",a.installation_id).single();if(u){const{data:f}=await G.from(oe.PROSPECTS).select("raison_sociale, contact, telephone, email").eq("id",u.client_id).single();c={...u,client:f||{}}}}return{...a,statut:l,installation:c}}))).filter(a=>a.statut==="en_alerte")}catch(e){throw console.error("Erreur vrification alertes:",e),e}},async getStats(){try{const{data:e,error:t}=await G.from(oe.ABONNEMENTS).select("statut");if(t)throw t;return{total:e.length,actifs:e.filter(n=>n.statut==="actif").length,enAlerte:e.filter(n=>n.statut==="en_alerte").length,expires:e.filter(n=>n.statut==="expire").length}}catch(e){throw console.error("Erreur statistiques abonnements:",e),e}}},qR=({onClose:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(!0),[a,s]=N.useState(null);N.useEffect(()=>{l()},[]);const l=async()=>{try{i(!0);const d=await qt.checkAlertes();r(d)}catch(d){console.error("Erreur chargement alertes:",d)}finally{i(!1)}},c=async d=>{try{s(d),await qt.renouveler(d),await l()}catch(h){console.error("Erreur renouvellement:",h),alert("Erreur lors du renouvellement")}finally{s(null)}};if(n)return o.jsx("div",{className:"fixed top-4 right-4 bg-white rounded-xl shadow-2xl p-6 w-96 z-50 border border-gray-200",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-purple-500 mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-3 text-sm",children:"Vrification des abonnements..."})]})});if(t.length===0)return null;const u=t.filter(d=>Go(d.date_fin)<0),f=t.filter(d=>Go(d.date_fin)>=0);return o.jsxs("div",{className:"fixed top-4 right-4 bg-white rounded-xl shadow-2xl w-[420px] z-50 max-h-[85vh] overflow-hidden border border-gray-200",children:[o.jsxs("div",{className:"bg-gradient-to-r from-red-500 via-orange-500 to-amber-500 text-white p-5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:o.jsx(xd,{size:24,className:"animate-pulse"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:"Alertes Abonnements"}),o.jsxs("p",{className:"text-sm opacity-90",children:[u.length," expir(s)  ",f.length," proche(s)"]})]})]}),e&&o.jsx("button",{onClick:e,className:"text-white hover:bg-white/20 p-2 rounded-lg transition-all",children:o.jsx(ji,{size:20})})]}),o.jsxs("div",{className:"overflow-y-auto max-h-[calc(85vh-80px)]",children:[u.length>0&&o.jsxs("div",{className:"p-4 bg-red-50 border-b-2 border-red-200",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Es,{size:18,className:"text-red-600"}),o.jsxs("h4",{className:"font-bold text-red-800 text-sm uppercase",children:["Expirs (",u.length,")"]})]}),o.jsx("div",{className:"space-y-3",children:u.map(d=>{const h=Math.abs(Go(d.date_fin));return o.jsx(Kb,{alerte:d,isExpired:!0,jours:h,renewing:a,onRenouveler:c},d.id)})})]}),f.length>0&&o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Tc,{size:18,className:"text-orange-600"}),o.jsxs("h4",{className:"font-bold text-orange-800 text-sm uppercase",children:["Expirent bientt (",f.length,")"]})]}),o.jsx("div",{className:"space-y-3",children:f.map(d=>{const h=Go(d.date_fin);return o.jsx(Kb,{alerte:d,isExpired:!1,jours:h,renewing:a,onRenouveler:c},d.id)})})]})]})]})},Kb=({alerte:e,isExpired:t,jours:r,renewing:n,onRenouveler:i})=>{var a,s,l,c,u,f,d;return o.jsxs("div",{className:`border-l-4 rounded-lg p-4 transition-all hover:shadow-md ${t?"bg-white border-red-500 shadow-sm":"bg-white border-orange-500 shadow-sm"}`,children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h5",{className:"font-bold text-gray-800 text-sm mb-1",children:((s=(a=e.installation)==null?void 0:a.client)==null?void 0:s.raison_sociale)||"Client inconnu"}),o.jsx("p",{className:"text-xs text-gray-600 font-medium",children:((l=e.installation)==null?void 0:l.application_installee)||"Application inconnue"})]}),o.jsxs("div",{className:"space-y-2 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs",children:[o.jsx("span",{className:"text-gray-600",children:"Date d'expiration:"}),o.jsx("span",{className:`font-semibold ${t?"text-red-600":"text-orange-600"}`,children:$r(e.date_fin)})]}),o.jsx("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-bold ${t?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:t?o.jsxs(o.Fragment,{children:[o.jsx(Es,{size:12}),"EXPIR depuis ",r," jour",r>1?"s":""]}):o.jsxs(o.Fragment,{children:[o.jsx(Tc,{size:12}),r," jour",r>1?"s":""," restant",r>1?"s":""]})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(e.id),disabled:n===e.id,className:`flex-1 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-xs font-semibold transition-all ${t?"bg-red-600 hover:bg-red-700 text-white disabled:bg-red-400":"bg-orange-600 hover:bg-orange-700 text-white disabled:bg-orange-400"}`,children:n===e.id?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),"Renouvellement..."]}):o.jsxs(o.Fragment,{children:[o.jsx($A,{size:14}),"Renouveler"]})}),((u=(c=e.installation)==null?void 0:c.client)==null?void 0:u.telephone)&&o.jsx("a",{href:`tel:${e.installation.client.telephone}`,className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200 transition-colors",title:"Appeler le client",children:o.jsx(cg,{size:16})}),((d=(f=e.installation)==null?void 0:f.client)==null?void 0:d.email)&&o.jsx("a",{href:`mailto:${e.installation.client.email}`,className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",title:"Envoyer un email",children:o.jsx(Wv,{size:16})})]})]})},wp=({title:e,subtitle:t})=>{const{toggleSidebar:r}=sr(),[n,i]=N.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:r,className:"lg:hidden text-gray-600 hover:text-gray-800",children:o.jsx(kA,{size:24})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:e}),t&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"hidden md:flex items-center gap-2 bg-gray-100 px-4 py-2 rounded-lg",children:[o.jsx(Kv,{size:20,className:"text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Rechercher...",className:"bg-transparent outline-none text-sm w-64"})]}),o.jsxs("button",{onClick:()=>i(!n),className:"relative p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[o.jsx(xd,{size:22}),o.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]})]})]})}),n&&o.jsx(qR,{onClose:()=>i(!1)})]})},_p=()=>{const{notifications:e,removeNotification:t}=sr(),r=a=>{switch(a){case"error":return o.jsx(Nt,{className:"w-5 h-5"});case"success":return o.jsx(dn,{className:"w-5 h-5"});case"warning":return o.jsx(Es,{className:"w-5 h-5"});case"info":default:return o.jsx(TR,{className:"w-5 h-5"})}},n=a=>{switch(a){case"error":return"bg-red-50 border-red-200 text-red-800";case"success":return"bg-green-50 border-green-200 text-green-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":default:return"bg-blue-50 border-blue-200 text-blue-800"}},i=a=>{switch(a){case"error":return"text-red-500";case"success":return"text-green-500";case"warning":return"text-yellow-500";case"info":default:return"text-blue-500"}};return o.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-md",children:e.map(a=>o.jsxs("div",{className:`flex gap-3 p-4 rounded-lg border ${n(a.type)} shadow-lg animate-slideIn`,children:[o.jsx("div",{className:`flex-shrink-0 ${i(a.type)}`,children:r(a.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[a.title&&o.jsx("h3",{className:"font-semibold mb-1",children:a.title}),o.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:a.message})]}),o.jsx("button",{onClick:()=>t(a.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Fermer",children:o.jsx(ji,{className:"w-5 h-5"})})]},a.id))})};function DA(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=DA(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ee(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=DA(e))&&(n&&(n+=" "),n+=t);return n}var WR=Array.isArray,or=WR,VR=typeof zc=="object"&&zc&&zc.Object===Object&&zc,LA=VR,HR=LA,KR=typeof self=="object"&&self&&self.Object===Object&&self,GR=HR||KR||Function("return this")(),yn=GR,XR=yn,YR=XR.Symbol,Cc=YR,Gb=Cc,BA=Object.prototype,JR=BA.hasOwnProperty,QR=BA.toString,ko=Gb?Gb.toStringTag:void 0;function ZR(e){var t=JR.call(e,ko),r=e[ko];try{e[ko]=void 0;var n=!0}catch{}var i=QR.call(e);return n&&(t?e[ko]=r:delete e[ko]),i}var eD=ZR,tD=Object.prototype,rD=tD.toString;function nD(e){return rD.call(e)}var iD=nD,Xb=Cc,aD=eD,sD=iD,oD="[object Null]",lD="[object Undefined]",Yb=Xb?Xb.toStringTag:void 0;function cD(e){return e==null?e===void 0?lD:oD:Yb&&Yb in Object(e)?aD(e):sD(e)}var Wn=cD;function uD(e){return e!=null&&typeof e=="object"}var Vn=uD,dD=Wn,fD=Vn,hD="[object Symbol]";function pD(e){return typeof e=="symbol"||fD(e)&&dD(e)==hD}var so=pD,mD=or,gD=so,yD=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vD=/^\w*$/;function xD(e,t){if(mD(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||gD(e)?!0:vD.test(e)||!yD.test(e)||t!=null&&e in Object(t)}var Gv=xD;function bD(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pi=bD;const oo=Me(Pi);var wD=Wn,_D=Pi,jD="[object AsyncFunction]",SD="[object Function]",ND="[object GeneratorFunction]",ED="[object Proxy]";function AD(e){if(!_D(e))return!1;var t=wD(e);return t==SD||t==ND||t==jD||t==ED}var Xv=AD;const je=Me(Xv);var OD=yn,PD=OD["__core-js_shared__"],TD=PD,jp=TD,Jb=function(){var e=/[^.]+$/.exec(jp&&jp.keys&&jp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function CD(e){return!!Jb&&Jb in e}var kD=CD,$D=Function.prototype,ID=$D.toString;function MD(e){if(e!=null){try{return ID.call(e)}catch{}try{return e+""}catch{}}return""}var FA=MD,RD=Xv,DD=kD,LD=Pi,BD=FA,FD=/[\\^$.*+?()[\]{}|]/g,zD=/^\[object .+?Constructor\]$/,UD=Function.prototype,qD=Object.prototype,WD=UD.toString,VD=qD.hasOwnProperty,HD=RegExp("^"+WD.call(VD).replace(FD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KD(e){if(!LD(e)||DD(e))return!1;var t=RD(e)?HD:zD;return t.test(BD(e))}var GD=KD;function XD(e,t){return e==null?void 0:e[t]}var YD=XD,JD=GD,QD=YD;function ZD(e,t){var r=QD(e,t);return JD(r)?r:void 0}var Na=ZD,e3=Na,t3=e3(Object,"create"),qf=t3,Qb=qf;function r3(){this.__data__=Qb?Qb(null):{},this.size=0}var n3=r3;function i3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var a3=i3,s3=qf,o3="__lodash_hash_undefined__",l3=Object.prototype,c3=l3.hasOwnProperty;function u3(e){var t=this.__data__;if(s3){var r=t[e];return r===o3?void 0:r}return c3.call(t,e)?t[e]:void 0}var d3=u3,f3=qf,h3=Object.prototype,p3=h3.hasOwnProperty;function m3(e){var t=this.__data__;return f3?t[e]!==void 0:p3.call(t,e)}var g3=m3,y3=qf,v3="__lodash_hash_undefined__";function x3(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=y3&&t===void 0?v3:t,this}var b3=x3,w3=n3,_3=a3,j3=d3,S3=g3,N3=b3;function lo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}lo.prototype.clear=w3;lo.prototype.delete=_3;lo.prototype.get=j3;lo.prototype.has=S3;lo.prototype.set=N3;var E3=lo;function A3(){this.__data__=[],this.size=0}var O3=A3;function P3(e,t){return e===t||e!==e&&t!==t}var Yv=P3,T3=Yv;function C3(e,t){for(var r=e.length;r--;)if(T3(e[r][0],t))return r;return-1}var Wf=C3,k3=Wf,$3=Array.prototype,I3=$3.splice;function M3(e){var t=this.__data__,r=k3(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():I3.call(t,r,1),--this.size,!0}var R3=M3,D3=Wf;function L3(e){var t=this.__data__,r=D3(t,e);return r<0?void 0:t[r][1]}var B3=L3,F3=Wf;function z3(e){return F3(this.__data__,e)>-1}var U3=z3,q3=Wf;function W3(e,t){var r=this.__data__,n=q3(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var V3=W3,H3=O3,K3=R3,G3=B3,X3=U3,Y3=V3;function co(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}co.prototype.clear=H3;co.prototype.delete=K3;co.prototype.get=G3;co.prototype.has=X3;co.prototype.set=Y3;var Vf=co,J3=Na,Q3=yn,Z3=J3(Q3,"Map"),Jv=Z3,Zb=E3,eL=Vf,tL=Jv;function rL(){this.size=0,this.__data__={hash:new Zb,map:new(tL||eL),string:new Zb}}var nL=rL;function iL(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var aL=iL,sL=aL;function oL(e,t){var r=e.__data__;return sL(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Hf=oL,lL=Hf;function cL(e){var t=lL(this,e).delete(e);return this.size-=t?1:0,t}var uL=cL,dL=Hf;function fL(e){return dL(this,e).get(e)}var hL=fL,pL=Hf;function mL(e){return pL(this,e).has(e)}var gL=mL,yL=Hf;function vL(e,t){var r=yL(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var xL=vL,bL=nL,wL=uL,_L=hL,jL=gL,SL=xL;function uo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}uo.prototype.clear=bL;uo.prototype.delete=wL;uo.prototype.get=_L;uo.prototype.has=jL;uo.prototype.set=SL;var Qv=uo,zA=Qv,NL="Expected a function";function Zv(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(NL);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var s=e.apply(this,n);return r.cache=a.set(i,s)||a,s};return r.cache=new(Zv.Cache||zA),r}Zv.Cache=zA;var UA=Zv;const EL=Me(UA);var AL=UA,OL=500;function PL(e){var t=AL(e,function(n){return r.size===OL&&r.clear(),n}),r=t.cache;return t}var TL=PL,CL=TL,kL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$L=/\\(\\)?/g,IL=CL(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kL,function(r,n,i,a){t.push(i?a.replace($L,"$1"):n||r)}),t}),ML=IL;function RL(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var e0=RL,ew=Cc,DL=e0,LL=or,BL=so,tw=ew?ew.prototype:void 0,rw=tw?tw.toString:void 0;function qA(e){if(typeof e=="string")return e;if(LL(e))return DL(e,qA)+"";if(BL(e))return rw?rw.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var FL=qA,zL=FL;function UL(e){return e==null?"":zL(e)}var WA=UL,qL=or,WL=Gv,VL=ML,HL=WA;function KL(e,t){return qL(e)?e:WL(e,t)?[e]:VL(HL(e))}var VA=KL,GL=so;function XL(e){if(typeof e=="string"||GL(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Kf=XL,YL=VA,JL=Kf;function QL(e,t){t=YL(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[JL(t[r++])];return r&&r==n?e:void 0}var t0=QL,ZL=t0;function e4(e,t,r){var n=e==null?void 0:ZL(e,t);return n===void 0?r:n}var HA=e4;const vr=Me(HA);function t4(e){return e==null}var r4=t4;const Ne=Me(r4);var n4=Wn,i4=or,a4=Vn,s4="[object String]";function o4(e){return typeof e=="string"||!i4(e)&&a4(e)&&n4(e)==s4}var l4=o4;const ga=Me(l4);var KA={exports:{}},Re={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r0=Symbol.for("react.element"),n0=Symbol.for("react.portal"),Gf=Symbol.for("react.fragment"),Xf=Symbol.for("react.strict_mode"),Yf=Symbol.for("react.profiler"),Jf=Symbol.for("react.provider"),Qf=Symbol.for("react.context"),c4=Symbol.for("react.server_context"),Zf=Symbol.for("react.forward_ref"),eh=Symbol.for("react.suspense"),th=Symbol.for("react.suspense_list"),rh=Symbol.for("react.memo"),nh=Symbol.for("react.lazy"),u4=Symbol.for("react.offscreen"),GA;GA=Symbol.for("react.module.reference");function Lr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case r0:switch(e=e.type,e){case Gf:case Yf:case Xf:case eh:case th:return e;default:switch(e=e&&e.$$typeof,e){case c4:case Qf:case Zf:case nh:case rh:case Jf:return e;default:return t}}case n0:return t}}}Re.ContextConsumer=Qf;Re.ContextProvider=Jf;Re.Element=r0;Re.ForwardRef=Zf;Re.Fragment=Gf;Re.Lazy=nh;Re.Memo=rh;Re.Portal=n0;Re.Profiler=Yf;Re.StrictMode=Xf;Re.Suspense=eh;Re.SuspenseList=th;Re.isAsyncMode=function(){return!1};Re.isConcurrentMode=function(){return!1};Re.isContextConsumer=function(e){return Lr(e)===Qf};Re.isContextProvider=function(e){return Lr(e)===Jf};Re.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===r0};Re.isForwardRef=function(e){return Lr(e)===Zf};Re.isFragment=function(e){return Lr(e)===Gf};Re.isLazy=function(e){return Lr(e)===nh};Re.isMemo=function(e){return Lr(e)===rh};Re.isPortal=function(e){return Lr(e)===n0};Re.isProfiler=function(e){return Lr(e)===Yf};Re.isStrictMode=function(e){return Lr(e)===Xf};Re.isSuspense=function(e){return Lr(e)===eh};Re.isSuspenseList=function(e){return Lr(e)===th};Re.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Gf||e===Yf||e===Xf||e===eh||e===th||e===u4||typeof e=="object"&&e!==null&&(e.$$typeof===nh||e.$$typeof===rh||e.$$typeof===Jf||e.$$typeof===Qf||e.$$typeof===Zf||e.$$typeof===GA||e.getModuleId!==void 0)};Re.typeOf=Lr;KA.exports=Re;var d4=KA.exports,f4=Wn,h4=Vn,p4="[object Number]";function m4(e){return typeof e=="number"||h4(e)&&f4(e)==p4}var XA=m4;const g4=Me(XA);var y4=XA;function v4(e){return y4(e)&&e!=+e}var x4=v4;const kc=Me(x4);var Wt=function(t){return t===0?0:t>0?1:-1},Qi=function(t){return ga(t)&&t.indexOf("%")===t.length-1},se=function(t){return g4(t)&&!kc(t)},b4=function(t){return Ne(t)},xt=function(t){return se(t)||ga(t)},w4=0,fo=function(t){var r=++w4;return"".concat(t||"").concat(r)},Vt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!se(t)&&!ga(t))return n;var a;if(Qi(t)){var s=t.indexOf("%");a=r*parseFloat(t.slice(0,s))/100}else a=+t;return kc(a)&&(a=n),i&&a>r&&(a=r),a},ni=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},_4=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},fr=function(t,r){return se(t)&&se(r)?function(n){return t+n*(r-t)}:function(){return r}};function wd(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):vr(n,t))===r})}var j4=function(t,r){return se(t)&&se(r)?t-r:ga(t)&&ga(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function ms(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function dg(e){"@babel/helpers - typeof";return dg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dg(e)}var S4=["viewBox","children"],N4=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],nw=["points","pathLength"],Sp={svg:S4,polygon:nw,polyline:nw},i0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],_d=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!oo(n))return null;var i={};return Object.keys(n).forEach(function(a){i0.includes(a)&&(i[a]=r||function(s){return n[a](n,s)})}),i},E4=function(t,r,n){return function(i){return t(r,n,i),null}},ya=function(t,r,n){if(!oo(t)||dg(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var s=t[a];i0.includes(a)&&typeof s=="function"&&(i||(i={}),i[a]=E4(s,r,n))}),i},A4=["children"],O4=["children"];function iw(e,t){if(e==null)return{};var r=P4(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fg(e){"@babel/helpers - typeof";return fg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fg(e)}var aw={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Cn=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},sw=null,Np=null,a0=function e(t){if(t===sw&&Array.isArray(Np))return Np;var r=[];return N.Children.forEach(t,function(n){Ne(n)||(d4.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Np=r,sw=t,r};function xr(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Cn(i)}):n=[Cn(t)],a0(e).forEach(function(i){var a=vr(i,"type.displayName")||vr(i,"type.name");n.indexOf(a)!==-1&&r.push(i)}),r}function dr(e,t){var r=xr(e,t);return r&&r[0]}var ow=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!se(n)||n<=0||!se(i)||i<=0)},T4=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],C4=function(t){return t&&t.type&&ga(t.type)&&T4.indexOf(t.type)>=0},k4=function(t){return t&&fg(t)==="object"&&"clipDot"in t},$4=function(t,r,n,i){var a,s=(a=Sp==null?void 0:Sp[i])!==null&&a!==void 0?a:[];return r.startsWith("data-")||!je(t)&&(i&&s.includes(r)||N4.includes(r))||n&&i0.includes(r)},ye=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(N.isValidElement(t)&&(i=t.props),!oo(i))return null;var a={};return Object.keys(i).forEach(function(s){var l;$4((l=i)===null||l===void 0?void 0:l[s],s,r,n)&&(a[s]=i[s])}),a},hg=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return lw(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var a=t[i],s=r[i];if(Array.isArray(a)||Array.isArray(s)){if(!e(a,s))return!1}else if(!lw(a,s))return!1}return!0},lw=function(t,r){if(Ne(t)&&Ne(r))return!0;if(!Ne(t)&&!Ne(r)){var n=t.props||{},i=n.children,a=iw(n,A4),s=r.props||{},l=s.children,c=iw(s,O4);return i&&l?ms(a,c)&&hg(i,l):!i&&!l?ms(a,c):!1}return!1},cw=function(t,r){var n=[],i={};return a0(t).forEach(function(a,s){if(C4(a))n.push(a);else if(a){var l=Cn(a.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!i[l])){var d=u(a,l,s);n.push(d),i[l]=!0}}}),n},I4=function(t){var r=t&&t.type;return r&&aw[r]?aw[r]:null},M4=function(t,r){return a0(r).indexOf(t)},R4=["children","width","height","viewBox","className","style","title","desc"];function pg(){return pg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pg.apply(this,arguments)}function D4(e,t){if(e==null)return{};var r=L4(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function L4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function mg(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,a=e.className,s=e.style,l=e.title,c=e.desc,u=D4(e,R4),f=i||{width:r,height:n,x:0,y:0},d=Ee("recharts-surface",a);return $.createElement("svg",pg({},ye(u,!0,"svg"),{className:d,width:r,height:n,style:s,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),$.createElement("title",null,l),$.createElement("desc",null,c),t)}var B4=["children","className"];function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gg.apply(this,arguments)}function F4(e,t){if(e==null)return{};var r=z4(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ce=$.forwardRef(function(e,t){var r=e.children,n=e.className,i=F4(e,B4),a=Ee("recharts-layer",n);return $.createElement("g",gg({className:a},ye(i,!0),{ref:t}),r)}),tn=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a]};function U4(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+t];return a}var q4=U4,W4=q4;function V4(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:W4(e,t,r)}var H4=V4,K4="\\ud800-\\udfff",G4="\\u0300-\\u036f",X4="\\ufe20-\\ufe2f",Y4="\\u20d0-\\u20ff",J4=G4+X4+Y4,Q4="\\ufe0e\\ufe0f",Z4="\\u200d",e5=RegExp("["+Z4+K4+J4+Q4+"]");function t5(e){return e5.test(e)}var YA=t5;function r5(e){return e.split("")}var n5=r5,JA="\\ud800-\\udfff",i5="\\u0300-\\u036f",a5="\\ufe20-\\ufe2f",s5="\\u20d0-\\u20ff",o5=i5+a5+s5,l5="\\ufe0e\\ufe0f",c5="["+JA+"]",yg="["+o5+"]",vg="\\ud83c[\\udffb-\\udfff]",u5="(?:"+yg+"|"+vg+")",QA="[^"+JA+"]",ZA="(?:\\ud83c[\\udde6-\\uddff]){2}",eO="[\\ud800-\\udbff][\\udc00-\\udfff]",d5="\\u200d",tO=u5+"?",rO="["+l5+"]?",f5="(?:"+d5+"(?:"+[QA,ZA,eO].join("|")+")"+rO+tO+")*",h5=rO+tO+f5,p5="(?:"+[QA+yg+"?",yg,ZA,eO,c5].join("|")+")",m5=RegExp(vg+"(?="+vg+")|"+p5+h5,"g");function g5(e){return e.match(m5)||[]}var y5=g5,v5=n5,x5=YA,b5=y5;function w5(e){return x5(e)?b5(e):v5(e)}var _5=w5,j5=H4,S5=YA,N5=_5,E5=WA;function A5(e){return function(t){t=E5(t);var r=S5(t)?N5(t):void 0,n=r?r[0]:t.charAt(0),i=r?j5(r,1).join(""):t.slice(1);return n[e]()+i}}var O5=A5,P5=O5,T5=P5("toUpperCase"),C5=T5;const ih=Me(C5);function Ue(e){return function(){return e}}const nO=Math.cos,jd=Math.sin,nn=Math.sqrt,Sd=Math.PI,ah=2*Sd,xg=Math.PI,bg=2*xg,zi=1e-6,k5=bg-zi;function iO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function $5(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iO;const r=10**t;return function(n){this._+=n[0];for(let i=1,a=n.length;i<a;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class I5{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iO:$5(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,a,s){this._append`C${+t},${+r},${+n},${+i},${this._x1=+a},${this._y1=+s}`}arcTo(t,r,n,i,a){if(t=+t,r=+r,n=+n,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,l=this._y1,c=n-t,u=i-r,f=s-t,d=l-r,h=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>zi)if(!(Math.abs(d*c-u*f)>zi)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-s,b=i-l,m=c*c+u*u,y=p*p+b*b,v=Math.sqrt(m),g=Math.sqrt(h),x=a*Math.tan((xg-Math.acos((m+h-y)/(2*v*g)))/2),j=x/g,w=x/v;Math.abs(j-1)>zi&&this._append`L${t+j*f},${r+j*d}`,this._append`A${a},${a},0,0,${+(d*p>f*b)},${this._x1=t+w*c},${this._y1=r+w*u}`}}arc(t,r,n,i,a,s){if(t=+t,r=+r,n=+n,s=!!s,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=t+l,f=r+c,d=1^s,h=s?i-a:a-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>zi||Math.abs(this._y1-f)>zi)&&this._append`L${u},${f}`,n&&(h<0&&(h=h%bg+bg),h>k5?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:h>zi&&this._append`A${n},${n},0,${+(h>=xg)},${d},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function s0(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new I5(t)}function o0(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aO(e){this._context=e}aO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function sh(e){return new aO(e)}function sO(e){return e[0]}function oO(e){return e[1]}function lO(e,t){var r=Ue(!0),n=null,i=sh,a=null,s=s0(l);e=typeof e=="function"?e:e===void 0?sO:Ue(e),t=typeof t=="function"?t:t===void 0?oO:Ue(t);function l(c){var u,f=(c=o0(c)).length,d,h=!1,p;for(n==null&&(a=i(p=s())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(d,u,c),+t(d,u,c));if(p)return a=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ue(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ue(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Ue(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(a=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=a=null:a=i(n=c),l):n},l}function pu(e,t,r){var n=null,i=Ue(!0),a=null,s=sh,l=null,c=s0(u);e=typeof e=="function"?e:e===void 0?sO:Ue(+e),t=typeof t=="function"?t:Ue(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?oO:Ue(+r);function u(d){var h,p,b,m=(d=o0(d)).length,y,v=!1,g,x=new Array(m),j=new Array(m);for(a==null&&(l=s(g=c())),h=0;h<=m;++h){if(!(h<m&&i(y=d[h],h,d))===v)if(v=!v)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=h-1;b>=p;--b)l.point(x[b],j[b]);l.lineEnd(),l.areaEnd()}v&&(x[h]=+e(y,h,d),j[h]=+t(y,h,d),l.point(n?+n(y,h,d):x[h],r?+r(y,h,d):j[h]))}if(g)return l=null,g+""||null}function f(){return lO().defined(i).curve(s).context(a)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Ue(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Ue(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Ue(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Ue(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Ue(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Ue(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:Ue(!!d),u):i},u.curve=function(d){return arguments.length?(s=d,a!=null&&(l=s(a)),u):s},u.context=function(d){return arguments.length?(d==null?a=l=null:l=s(a=d),u):a},u}class cO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function M5(e){return new cO(e,!0)}function R5(e){return new cO(e,!1)}const l0={draw(e,t){const r=nn(t/Sd);e.moveTo(r,0),e.arc(0,0,r,0,ah)}},D5={draw(e,t){const r=nn(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},uO=nn(1/3),L5=uO*2,B5={draw(e,t){const r=nn(t/L5),n=r*uO;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},F5={draw(e,t){const r=nn(t),n=-r/2;e.rect(n,n,r,r)}},z5=.8908130915292852,dO=jd(Sd/10)/jd(7*Sd/10),U5=jd(ah/10)*dO,q5=-nO(ah/10)*dO,W5={draw(e,t){const r=nn(t*z5),n=U5*r,i=q5*r;e.moveTo(0,-r),e.lineTo(n,i);for(let a=1;a<5;++a){const s=ah*a/5,l=nO(s),c=jd(s);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*i,c*n+l*i)}e.closePath()}},Ep=nn(3),V5={draw(e,t){const r=-nn(t/(Ep*3));e.moveTo(0,r*2),e.lineTo(-Ep*r,-r),e.lineTo(Ep*r,-r),e.closePath()}},jr=-.5,Sr=nn(3)/2,wg=1/nn(12),H5=(wg/2+1)*3,K5={draw(e,t){const r=nn(t/H5),n=r/2,i=r*wg,a=n,s=r*wg+r,l=-a,c=s;e.moveTo(n,i),e.lineTo(a,s),e.lineTo(l,c),e.lineTo(jr*n-Sr*i,Sr*n+jr*i),e.lineTo(jr*a-Sr*s,Sr*a+jr*s),e.lineTo(jr*l-Sr*c,Sr*l+jr*c),e.lineTo(jr*n+Sr*i,jr*i-Sr*n),e.lineTo(jr*a+Sr*s,jr*s-Sr*a),e.lineTo(jr*l+Sr*c,jr*c-Sr*l),e.closePath()}};function G5(e,t){let r=null,n=s0(i);e=typeof e=="function"?e:Ue(e||l0),t=typeof t=="function"?t:Ue(t===void 0?64:+t);function i(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ue(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ue(+a),i):t},i.context=function(a){return arguments.length?(r=a??null,i):r},i}function Nd(){}function Ed(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fO(e){this._context=e}fO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ed(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X5(e){return new fO(e)}function hO(e){this._context=e}hO.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Y5(e){return new hO(e)}function pO(e){this._context=e}pO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ed(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function J5(e){return new pO(e)}function mO(e){this._context=e}mO.prototype={areaStart:Nd,areaEnd:Nd,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Q5(e){return new mO(e)}function uw(e){return e<0?-1:1}function dw(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),s=(r-e._y1)/(i||n<0&&-0),l=(a*i+s*n)/(n+i);return(uw(a)+uw(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(l))||0}function fw(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ap(e,t,r){var n=e._x0,i=e._y0,a=e._x1,s=e._y1,l=(a-n)/3;e._context.bezierCurveTo(n+l,i+l*t,a-l,s-l*r,a,s)}function Ad(e){this._context=e}Ad.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ap(this,this._t0,fw(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ap(this,fw(this,r=dw(this,e,t)),r);break;default:Ap(this,this._t0,r=dw(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function gO(e){this._context=new yO(e)}(gO.prototype=Object.create(Ad.prototype)).point=function(e,t){Ad.prototype.point.call(this,t,e)};function yO(e){this._context=e}yO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}};function Z5(e){return new Ad(e)}function e6(e){return new gO(e)}function vO(e){this._context=e}vO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hw(e),i=hw(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[s],t[s]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hw(e){var t,r=e.length-1,n,i=new Array(r),a=new Array(r),s=new Array(r);for(i[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,s[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,s[t]-=n*s[t-1];for(i[r-1]=s[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(s[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function t6(e){return new vO(e)}function oh(e,t){this._context=e,this._t=t}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function r6(e){return new oh(e,.5)}function n6(e){return new oh(e,0)}function i6(e){return new oh(e,1)}function Os(e,t){if((s=e.length)>1)for(var r=1,n,i,a=e[t[0]],s,l=a.length;r<s;++r)for(i=a,a=e[t[r]],n=0;n<l;++n)a[n][1]+=a[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function _g(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function a6(e,t){return e[t]}function s6(e){const t=[];return t.key=e,t}function o6(){var e=Ue([]),t=_g,r=Os,n=a6;function i(a){var s=Array.from(e.apply(this,arguments),s6),l,c=s.length,u=-1,f;for(const d of a)for(l=0,++u;l<c;++l)(s[l][u]=[0,+n(d,s[l].key,u,a)]).data=d;for(l=0,f=o0(t(s));l<c;++l)s[f[l]].index=l;return r(s,f),s}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ue(Array.from(a)),i):e},i.value=function(a){return arguments.length?(n=typeof a=="function"?a:Ue(+a),i):n},i.order=function(a){return arguments.length?(t=a==null?_g:typeof a=="function"?a:Ue(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(r=a??Os,i):r},i}function l6(e,t){if((n=e.length)>0){for(var r,n,i=0,a=e[0].length,s;i<a;++i){for(s=r=0;r<n;++r)s+=e[r][i][1]||0;if(s)for(r=0;r<n;++r)e[r][i][1]/=s}Os(e,t)}}function c6(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,a=n.length;r<a;++r){for(var s=0,l=0;s<i;++s)l+=e[s][r][1]||0;n[r][1]+=n[r][0]=-l/2}Os(e,t)}}function u6(e,t){if(!(!((s=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,a,s;n<a;++n){for(var l=0,c=0,u=0;l<s;++l){for(var f=e[t[l]],d=f[n][1]||0,h=f[n-1][1]||0,p=(d-h)/2,b=0;b<l;++b){var m=e[t[b]],y=m[n][1]||0,v=m[n-1][1]||0;p+=y-v}c+=d,u+=p*d}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Os(e,t)}}function Fl(e){"@babel/helpers - typeof";return Fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fl(e)}var d6=["type","size","sizeType"];function jg(){return jg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jg.apply(this,arguments)}function pw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pw(Object(r),!0).forEach(function(n){f6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f6(e,t,r){return t=h6(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h6(e){var t=p6(e,"string");return Fl(t)=="symbol"?t:t+""}function p6(e,t){if(Fl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m6(e,t){if(e==null)return{};var r=g6(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g6(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var xO={symbolCircle:l0,symbolCross:D5,symbolDiamond:B5,symbolSquare:F5,symbolStar:W5,symbolTriangle:V5,symbolWye:K5},y6=Math.PI/180,v6=function(t){var r="symbol".concat(ih(t));return xO[r]||l0},x6=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*y6;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},b6=function(t,r){xO["symbol".concat(ih(t))]=r},c0=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,a=i===void 0?64:i,s=t.sizeType,l=s===void 0?"area":s,c=m6(t,d6),u=mw(mw({},c),{},{type:n,size:a,sizeType:l}),f=function(){var y=v6(n),v=G5().type(y).size(x6(a,l,n));return v()},d=u.className,h=u.cx,p=u.cy,b=ye(u,!0);return h===+h&&p===+p&&a===+a?$.createElement("path",jg({},b,{className:Ee("recharts-symbols",d),transform:"translate(".concat(h,", ").concat(p,")"),d:f()})):null};c0.registerSymbol=b6;function Ps(e){"@babel/helpers - typeof";return Ps=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ps(e)}function Sg(){return Sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sg.apply(this,arguments)}function gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function w6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gw(Object(r),!0).forEach(function(n){zl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j6(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wO(n.key),n)}}function S6(e,t,r){return t&&j6(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function N6(e,t,r){return t=Od(t),E6(e,bO()?Reflect.construct(t,r||[],Od(e).constructor):t.apply(e,r))}function E6(e,t){if(t&&(Ps(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return A6(e)}function A6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!e})()}function Od(e){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Od(e)}function O6(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ng(e,t)}function Ng(e,t){return Ng=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ng(e,t)}function zl(e,t,r){return t=wO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wO(e){var t=P6(e,"string");return Ps(t)=="symbol"?t:t+""}function P6(e,t){if(Ps(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ps(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Nr=32,u0=function(e){function t(){return _6(this,t),N6(this,t,arguments)}return O6(t,e),S6(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,a=Nr/2,s=Nr/6,l=Nr/3,c=n.inactive?i:n.color;if(n.type==="plainline")return $.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:a,x2:Nr,y2:a,className:"recharts-legend-icon"});if(n.type==="line")return $.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Nr,"M").concat(2*l,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(n.type==="rect")return $.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Nr/8,"h").concat(Nr,"v").concat(Nr*3/4,"h").concat(-Nr,"z"),className:"recharts-legend-icon"});if($.isValidElement(n.legendIcon)){var u=w6({},n);return delete u.legendIcon,$.cloneElement(n.legendIcon,u)}return $.createElement(c0,{fill:c,cx:a,cy:a,size:Nr,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,a=i.payload,s=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,f={x:0,y:0,width:Nr,height:Nr},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(p,b){var m=p.formatter||c,y=Ee(zl(zl({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",p.inactive));if(p.type==="none")return null;var v=je(p.value)?null:p.value;tn(!je(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var g=p.inactive?u:p.color;return $.createElement("li",Sg({className:y,style:d,key:"legend-item-".concat(b)},ya(n.props,p,b)),$.createElement(mg,{width:s,height:s,viewBox:f,style:h},n.renderIcon(p)),$.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},m?m(v,p,b):v))})}},{key:"render",value:function(){var n=this.props,i=n.payload,a=n.layout,s=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?s:"left"};return $.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(N.PureComponent);zl(u0,"displayName","Legend");zl(u0,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var T6=Vf;function C6(){this.__data__=new T6,this.size=0}var k6=C6;function $6(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var I6=$6;function M6(e){return this.__data__.get(e)}var R6=M6;function D6(e){return this.__data__.has(e)}var L6=D6,B6=Vf,F6=Jv,z6=Qv,U6=200;function q6(e,t){var r=this.__data__;if(r instanceof B6){var n=r.__data__;if(!F6||n.length<U6-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new z6(n)}return r.set(e,t),this.size=r.size,this}var W6=q6,V6=Vf,H6=k6,K6=I6,G6=R6,X6=L6,Y6=W6;function ho(e){var t=this.__data__=new V6(e);this.size=t.size}ho.prototype.clear=H6;ho.prototype.delete=K6;ho.prototype.get=G6;ho.prototype.has=X6;ho.prototype.set=Y6;var _O=ho,J6="__lodash_hash_undefined__";function Q6(e){return this.__data__.set(e,J6),this}var Z6=Q6;function eB(e){return this.__data__.has(e)}var tB=eB,rB=Qv,nB=Z6,iB=tB;function Pd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new rB;++t<r;)this.add(e[t])}Pd.prototype.add=Pd.prototype.push=nB;Pd.prototype.has=iB;var jO=Pd;function aB(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var SO=aB;function sB(e,t){return e.has(t)}var NO=sB,oB=jO,lB=SO,cB=NO,uB=1,dB=2;function fB(e,t,r,n,i,a){var s=r&uB,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e),f=a.get(t);if(u&&f)return u==t&&f==e;var d=-1,h=!0,p=r&dB?new oB:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var b=e[d],m=t[d];if(n)var y=s?n(m,b,d,t,e,a):n(b,m,d,e,t,a);if(y!==void 0){if(y)continue;h=!1;break}if(p){if(!lB(t,function(v,g){if(!cB(p,g)&&(b===v||i(b,v,r,n,a)))return p.push(g)})){h=!1;break}}else if(!(b===m||i(b,m,r,n,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var EO=fB,hB=yn,pB=hB.Uint8Array,mB=pB;function gB(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var yB=gB;function vB(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var d0=vB,yw=Cc,vw=mB,xB=Yv,bB=EO,wB=yB,_B=d0,jB=1,SB=2,NB="[object Boolean]",EB="[object Date]",AB="[object Error]",OB="[object Map]",PB="[object Number]",TB="[object RegExp]",CB="[object Set]",kB="[object String]",$B="[object Symbol]",IB="[object ArrayBuffer]",MB="[object DataView]",xw=yw?yw.prototype:void 0,Op=xw?xw.valueOf:void 0;function RB(e,t,r,n,i,a,s){switch(r){case MB:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case IB:return!(e.byteLength!=t.byteLength||!a(new vw(e),new vw(t)));case NB:case EB:case PB:return xB(+e,+t);case AB:return e.name==t.name&&e.message==t.message;case TB:case kB:return e==t+"";case OB:var l=wB;case CB:var c=n&jB;if(l||(l=_B),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;n|=SB,s.set(e,t);var f=bB(l(e),l(t),n,i,a,s);return s.delete(e),f;case $B:if(Op)return Op.call(e)==Op.call(t)}return!1}var DB=RB;function LB(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var AO=LB,BB=AO,FB=or;function zB(e,t,r){var n=t(e);return FB(e)?n:BB(n,r(e))}var UB=zB;function qB(e,t){for(var r=-1,n=e==null?0:e.length,i=0,a=[];++r<n;){var s=e[r];t(s,r,e)&&(a[i++]=s)}return a}var WB=qB;function VB(){return[]}var HB=VB,KB=WB,GB=HB,XB=Object.prototype,YB=XB.propertyIsEnumerable,bw=Object.getOwnPropertySymbols,JB=bw?function(e){return e==null?[]:(e=Object(e),KB(bw(e),function(t){return YB.call(e,t)}))}:GB,QB=JB;function ZB(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var e8=ZB,t8=Wn,r8=Vn,n8="[object Arguments]";function i8(e){return r8(e)&&t8(e)==n8}var a8=i8,ww=a8,s8=Vn,OO=Object.prototype,o8=OO.hasOwnProperty,l8=OO.propertyIsEnumerable,c8=ww(function(){return arguments}())?ww:function(e){return s8(e)&&o8.call(e,"callee")&&!l8.call(e,"callee")},f0=c8,Td={exports:{}};function u8(){return!1}var d8=u8;Td.exports;(function(e,t){var r=yn,n=d8,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,l=s?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Td,Td.exports);var PO=Td.exports,f8=9007199254740991,h8=/^(?:0|[1-9]\d*)$/;function p8(e,t){var r=typeof e;return t=t??f8,!!t&&(r=="number"||r!="symbol"&&h8.test(e))&&e>-1&&e%1==0&&e<t}var h0=p8,m8=9007199254740991;function g8(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=m8}var p0=g8,y8=Wn,v8=p0,x8=Vn,b8="[object Arguments]",w8="[object Array]",_8="[object Boolean]",j8="[object Date]",S8="[object Error]",N8="[object Function]",E8="[object Map]",A8="[object Number]",O8="[object Object]",P8="[object RegExp]",T8="[object Set]",C8="[object String]",k8="[object WeakMap]",$8="[object ArrayBuffer]",I8="[object DataView]",M8="[object Float32Array]",R8="[object Float64Array]",D8="[object Int8Array]",L8="[object Int16Array]",B8="[object Int32Array]",F8="[object Uint8Array]",z8="[object Uint8ClampedArray]",U8="[object Uint16Array]",q8="[object Uint32Array]",Ke={};Ke[M8]=Ke[R8]=Ke[D8]=Ke[L8]=Ke[B8]=Ke[F8]=Ke[z8]=Ke[U8]=Ke[q8]=!0;Ke[b8]=Ke[w8]=Ke[$8]=Ke[_8]=Ke[I8]=Ke[j8]=Ke[S8]=Ke[N8]=Ke[E8]=Ke[A8]=Ke[O8]=Ke[P8]=Ke[T8]=Ke[C8]=Ke[k8]=!1;function W8(e){return x8(e)&&v8(e.length)&&!!Ke[y8(e)]}var V8=W8;function H8(e){return function(t){return e(t)}}var TO=H8,Cd={exports:{}};Cd.exports;(function(e,t){var r=LA,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===n,s=a&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||s&&s.binding&&s.binding("util")}catch{}}();e.exports=l})(Cd,Cd.exports);var K8=Cd.exports,G8=V8,X8=TO,_w=K8,jw=_w&&_w.isTypedArray,Y8=jw?X8(jw):G8,CO=Y8,J8=e8,Q8=f0,Z8=or,eF=PO,tF=h0,rF=CO,nF=Object.prototype,iF=nF.hasOwnProperty;function aF(e,t){var r=Z8(e),n=!r&&Q8(e),i=!r&&!n&&eF(e),a=!r&&!n&&!i&&rF(e),s=r||n||i||a,l=s?J8(e.length,String):[],c=l.length;for(var u in e)(t||iF.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||tF(u,c)))&&l.push(u);return l}var sF=aF,oF=Object.prototype;function lF(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||oF;return e===r}var cF=lF;function uF(e,t){return function(r){return e(t(r))}}var kO=uF,dF=kO,fF=dF(Object.keys,Object),hF=fF,pF=cF,mF=hF,gF=Object.prototype,yF=gF.hasOwnProperty;function vF(e){if(!pF(e))return mF(e);var t=[];for(var r in Object(e))yF.call(e,r)&&r!="constructor"&&t.push(r);return t}var xF=vF,bF=Xv,wF=p0;function _F(e){return e!=null&&wF(e.length)&&!bF(e)}var $c=_F,jF=sF,SF=xF,NF=$c;function EF(e){return NF(e)?jF(e):SF(e)}var lh=EF,AF=UB,OF=QB,PF=lh;function TF(e){return AF(e,PF,OF)}var CF=TF,Sw=CF,kF=1,$F=Object.prototype,IF=$F.hasOwnProperty;function MF(e,t,r,n,i,a){var s=r&kF,l=Sw(e),c=l.length,u=Sw(t),f=u.length;if(c!=f&&!s)return!1;for(var d=c;d--;){var h=l[d];if(!(s?h in t:IF.call(t,h)))return!1}var p=a.get(e),b=a.get(t);if(p&&b)return p==t&&b==e;var m=!0;a.set(e,t),a.set(t,e);for(var y=s;++d<c;){h=l[d];var v=e[h],g=t[h];if(n)var x=s?n(g,v,h,t,e,a):n(v,g,h,e,t,a);if(!(x===void 0?v===g||i(v,g,r,n,a):x)){m=!1;break}y||(y=h=="constructor")}if(m&&!y){var j=e.constructor,w=t.constructor;j!=w&&"constructor"in e&&"constructor"in t&&!(typeof j=="function"&&j instanceof j&&typeof w=="function"&&w instanceof w)&&(m=!1)}return a.delete(e),a.delete(t),m}var RF=MF,DF=Na,LF=yn,BF=DF(LF,"DataView"),FF=BF,zF=Na,UF=yn,qF=zF(UF,"Promise"),WF=qF,VF=Na,HF=yn,KF=VF(HF,"Set"),$O=KF,GF=Na,XF=yn,YF=GF(XF,"WeakMap"),JF=YF,Eg=FF,Ag=Jv,Og=WF,Pg=$O,Tg=JF,IO=Wn,po=FA,Nw="[object Map]",QF="[object Object]",Ew="[object Promise]",Aw="[object Set]",Ow="[object WeakMap]",Pw="[object DataView]",ZF=po(Eg),ez=po(Ag),tz=po(Og),rz=po(Pg),nz=po(Tg),Ui=IO;(Eg&&Ui(new Eg(new ArrayBuffer(1)))!=Pw||Ag&&Ui(new Ag)!=Nw||Og&&Ui(Og.resolve())!=Ew||Pg&&Ui(new Pg)!=Aw||Tg&&Ui(new Tg)!=Ow)&&(Ui=function(e){var t=IO(e),r=t==QF?e.constructor:void 0,n=r?po(r):"";if(n)switch(n){case ZF:return Pw;case ez:return Nw;case tz:return Ew;case rz:return Aw;case nz:return Ow}return t});var iz=Ui,Pp=_O,az=EO,sz=DB,oz=RF,Tw=iz,Cw=or,kw=PO,lz=CO,cz=1,$w="[object Arguments]",Iw="[object Array]",mu="[object Object]",uz=Object.prototype,Mw=uz.hasOwnProperty;function dz(e,t,r,n,i,a){var s=Cw(e),l=Cw(t),c=s?Iw:Tw(e),u=l?Iw:Tw(t);c=c==$w?mu:c,u=u==$w?mu:u;var f=c==mu,d=u==mu,h=c==u;if(h&&kw(e)){if(!kw(t))return!1;s=!0,f=!1}if(h&&!f)return a||(a=new Pp),s||lz(e)?az(e,t,r,n,i,a):sz(e,t,c,r,n,i,a);if(!(r&cz)){var p=f&&Mw.call(e,"__wrapped__"),b=d&&Mw.call(t,"__wrapped__");if(p||b){var m=p?e.value():e,y=b?t.value():t;return a||(a=new Pp),i(m,y,r,n,a)}}return h?(a||(a=new Pp),oz(e,t,r,n,i,a)):!1}var fz=dz,hz=fz,Rw=Vn;function MO(e,t,r,n,i){return e===t?!0:e==null||t==null||!Rw(e)&&!Rw(t)?e!==e&&t!==t:hz(e,t,r,n,MO,i)}var m0=MO,pz=_O,mz=m0,gz=1,yz=2;function vz(e,t,r,n){var i=r.length,a=i,s=!n;if(e==null)return!a;for(e=Object(e);i--;){var l=r[i];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=r[i];var c=l[0],u=e[c],f=l[1];if(s&&l[2]){if(u===void 0&&!(c in e))return!1}else{var d=new pz;if(n)var h=n(u,f,c,e,t,d);if(!(h===void 0?mz(f,u,gz|yz,n,d):h))return!1}}return!0}var xz=vz,bz=Pi;function wz(e){return e===e&&!bz(e)}var RO=wz,_z=RO,jz=lh;function Sz(e){for(var t=jz(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,_z(i)]}return t}var Nz=Sz;function Ez(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var DO=Ez,Az=xz,Oz=Nz,Pz=DO;function Tz(e){var t=Oz(e);return t.length==1&&t[0][2]?Pz(t[0][0],t[0][1]):function(r){return r===e||Az(r,e,t)}}var Cz=Tz;function kz(e,t){return e!=null&&t in Object(e)}var $z=kz,Iz=VA,Mz=f0,Rz=or,Dz=h0,Lz=p0,Bz=Kf;function Fz(e,t,r){t=Iz(t,e);for(var n=-1,i=t.length,a=!1;++n<i;){var s=Bz(t[n]);if(!(a=e!=null&&r(e,s)))break;e=e[s]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&Lz(i)&&Dz(s,i)&&(Rz(e)||Mz(e)))}var zz=Fz,Uz=$z,qz=zz;function Wz(e,t){return e!=null&&qz(e,t,Uz)}var Vz=Wz,Hz=m0,Kz=HA,Gz=Vz,Xz=Gv,Yz=RO,Jz=DO,Qz=Kf,Zz=1,eU=2;function tU(e,t){return Xz(e)&&Yz(t)?Jz(Qz(e),t):function(r){var n=Kz(r,e);return n===void 0&&n===t?Gz(r,e):Hz(t,n,Zz|eU)}}var rU=tU;function nU(e){return e}var mo=nU;function iU(e){return function(t){return t==null?void 0:t[e]}}var aU=iU,sU=t0;function oU(e){return function(t){return sU(t,e)}}var lU=oU,cU=aU,uU=lU,dU=Gv,fU=Kf;function hU(e){return dU(e)?cU(fU(e)):uU(e)}var pU=hU,mU=Cz,gU=rU,yU=mo,vU=or,xU=pU;function bU(e){return typeof e=="function"?e:e==null?yU:typeof e=="object"?vU(e)?gU(e[0],e[1]):mU(e):xU(e)}var vn=bU;function wU(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var LO=wU;function _U(e){return e!==e}var jU=_U;function SU(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var NU=SU,EU=LO,AU=jU,OU=NU;function PU(e,t,r){return t===t?OU(e,t,r):EU(e,AU,r)}var TU=PU,CU=TU;function kU(e,t){var r=e==null?0:e.length;return!!r&&CU(e,t,0)>-1}var $U=kU;function IU(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var MU=IU;function RU(){}var DU=RU,Tp=$O,LU=DU,BU=d0,FU=1/0,zU=Tp&&1/BU(new Tp([,-0]))[1]==FU?function(e){return new Tp(e)}:LU,UU=zU,qU=jO,WU=$U,VU=MU,HU=NO,KU=UU,GU=d0,XU=200;function YU(e,t,r){var n=-1,i=WU,a=e.length,s=!0,l=[],c=l;if(r)s=!1,i=VU;else if(a>=XU){var u=t?null:KU(e);if(u)return GU(u);s=!1,i=HU,c=new qU}else c=t?[]:l;e:for(;++n<a;){var f=e[n],d=t?t(f):f;if(f=r||f!==0?f:0,s&&d===d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),l.push(f)}else i(c,d,r)||(c!==l&&c.push(d),l.push(f))}return l}var JU=YU,QU=vn,ZU=JU;function eq(e,t){return e&&e.length?ZU(e,QU(t)):[]}var tq=eq;const Dw=Me(tq);function BO(e,t,r){return t===!0?Dw(e,r):je(t)?Dw(e,t):e}function Ts(e){"@babel/helpers - typeof";return Ts=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(e)}var rq=["ref"];function Lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lw(Object(r),!0).forEach(function(n){ch(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zO(n.key),n)}}function iq(e,t,r){return t&&Bw(e.prototype,t),r&&Bw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aq(e,t,r){return t=kd(t),sq(e,FO()?Reflect.construct(t,r||[],kd(e).constructor):t.apply(e,r))}function sq(e,t){if(t&&(Ts(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oq(e)}function oq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FO=function(){return!!e})()}function kd(e){return kd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kd(e)}function lq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cg(e,t)}function Cg(e,t){return Cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Cg(e,t)}function ch(e,t,r){return t=zO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zO(e){var t=cq(e,"string");return Ts(t)=="symbol"?t:t+""}function cq(e,t){if(Ts(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ts(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uq(e,t){if(e==null)return{};var r=dq(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fq(e){return e.value}function hq(e,t){if($.isValidElement(e))return $.cloneElement(e,t);if(typeof e=="function")return $.createElement(e,t);t.ref;var r=uq(t,rq);return $.createElement(u0,r)}var Fw=1,vi=function(e){function t(){var r;nq(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=aq(this,t,[].concat(i)),ch(r,"lastBoundingBox",{width:-1,height:-1}),r}return lq(t,e),iq(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>Fw||Math.abs(i.height-this.lastBoundingBox.height)>Fw)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?xn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,a=i.layout,s=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,f=i.chartHeight,d,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(s==="center"&&a==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=s==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();h={top:((f||0)-b.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return xn(xn({},d),h)}},{key:"render",value:function(){var n=this,i=this.props,a=i.content,s=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,f=i.payload,d=xn(xn({position:"absolute",width:s||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return $.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},hq(a,xn(xn({},this.props),{},{payload:BO(f,u,fq)})))}}],[{key:"getWithHeight",value:function(n,i){var a=xn(xn({},this.defaultProps),n.props),s=a.layout;return s==="vertical"&&se(n.props.height)?{height:n.props.height}:s==="horizontal"?{width:n.props.width||i}:null}}])}(N.PureComponent);ch(vi,"displayName","Legend");ch(vi,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var zw=Cc,pq=f0,mq=or,Uw=zw?zw.isConcatSpreadable:void 0;function gq(e){return mq(e)||pq(e)||!!(Uw&&e&&e[Uw])}var yq=gq,vq=AO,xq=yq;function UO(e,t,r,n,i){var a=-1,s=e.length;for(r||(r=xq),i||(i=[]);++a<s;){var l=e[a];t>0&&r(l)?t>1?UO(l,t-1,r,n,i):vq(i,l):n||(i[i.length]=l)}return i}var qO=UO;function bq(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++i];if(r(a[c],c,a)===!1)break}return t}}var wq=bq,_q=wq,jq=_q(),Sq=jq,Nq=Sq,Eq=lh;function Aq(e,t){return e&&Nq(e,t,Eq)}var WO=Aq,Oq=$c;function Pq(e,t){return function(r,n){if(r==null)return r;if(!Oq(r))return e(r,n);for(var i=r.length,a=t?i:-1,s=Object(r);(t?a--:++a<i)&&n(s[a],a,s)!==!1;);return r}}var Tq=Pq,Cq=WO,kq=Tq,$q=kq(Cq),g0=$q,Iq=g0,Mq=$c;function Rq(e,t){var r=-1,n=Mq(e)?Array(e.length):[];return Iq(e,function(i,a,s){n[++r]=t(i,a,s)}),n}var VO=Rq;function Dq(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Lq=Dq,qw=so;function Bq(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,a=qw(e),s=t!==void 0,l=t===null,c=t===t,u=qw(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||n&&s&&c||!r&&c||!i)return 1;if(!n&&!a&&!u&&e<t||u&&r&&i&&!n&&!a||l&&r&&i||!s&&i||!c)return-1}return 0}var Fq=Bq,zq=Fq;function Uq(e,t,r){for(var n=-1,i=e.criteria,a=t.criteria,s=i.length,l=r.length;++n<s;){var c=zq(i[n],a[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var qq=Uq,Cp=e0,Wq=t0,Vq=vn,Hq=VO,Kq=Lq,Gq=TO,Xq=qq,Yq=mo,Jq=or;function Qq(e,t,r){t.length?t=Cp(t,function(a){return Jq(a)?function(s){return Wq(s,a.length===1?a[0]:a)}:a}):t=[Yq];var n=-1;t=Cp(t,Gq(Vq));var i=Hq(e,function(a,s,l){var c=Cp(t,function(u){return u(a)});return{criteria:c,index:++n,value:a}});return Kq(i,function(a,s){return Xq(a,s,r)})}var Zq=Qq;function e7(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var t7=e7,r7=t7,Ww=Math.max;function n7(e,t,r){return t=Ww(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=Ww(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=n[i];return l[t]=r(s),r7(e,this,l)}}var i7=n7;function a7(e){return function(){return e}}var s7=a7,o7=Na,l7=function(){try{var e=o7(Object,"defineProperty");return e({},"",{}),e}catch{}}(),HO=l7,c7=s7,Vw=HO,u7=mo,d7=Vw?function(e,t){return Vw(e,"toString",{configurable:!0,enumerable:!1,value:c7(t),writable:!0})}:u7,f7=d7,h7=800,p7=16,m7=Date.now;function g7(e){var t=0,r=0;return function(){var n=m7(),i=p7-(n-r);if(r=n,i>0){if(++t>=h7)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var y7=g7,v7=f7,x7=y7,b7=x7(v7),w7=b7,_7=mo,j7=i7,S7=w7;function N7(e,t){return S7(j7(e,t,_7),e+"")}var E7=N7,A7=Yv,O7=$c,P7=h0,T7=Pi;function C7(e,t,r){if(!T7(r))return!1;var n=typeof t;return(n=="number"?O7(r)&&P7(t,r.length):n=="string"&&t in r)?A7(r[t],e):!1}var uh=C7,k7=qO,$7=Zq,I7=E7,Hw=uh,M7=I7(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Hw(e,t[0],t[1])?t=[]:r>2&&Hw(t[0],t[1],t[2])&&(t=[t[0]]),$7(e,k7(t,1),[])}),R7=M7;const y0=Me(R7);function Ul(e){"@babel/helpers - typeof";return Ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ul(e)}function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kg.apply(this,arguments)}function D7(e,t){return z7(e)||F7(e,t)||B7(e,t)||L7()}function L7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B7(e,t){if(e){if(typeof e=="string")return Kw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kw(e,t)}}function Kw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function z7(e){if(Array.isArray(e))return e}function Gw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gw(Object(r),!0).forEach(function(n){U7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U7(e,t,r){return t=q7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q7(e){var t=W7(e,"string");return Ul(t)=="symbol"?t:t+""}function W7(e,t){if(Ul(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ul(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V7(e){return Array.isArray(e)&&xt(e[0])&&xt(e[1])?e.join(" ~ "):e}var H7=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,a=i===void 0?{}:i,s=t.itemStyle,l=s===void 0?{}:s,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,h=t.itemSorter,p=t.wrapperClassName,b=t.labelClassName,m=t.label,y=t.labelFormatter,v=t.accessibilityLayer,g=v===void 0?!1:v,x=function(){if(f&&f.length){var k={padding:0,margin:0},M=(h?y0(f,h):f).map(function(L,B){if(L.type==="none")return null;var D=kp({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),q=L.formatter||d||V7,R=L.value,I=L.name,z=R,W=I;if(q&&z!=null&&W!=null){var C=q(R,I,L,B,f);if(Array.isArray(C)){var F=D7(C,2);z=F[0],W=F[1]}else z=C}return $.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:D},xt(W)?$.createElement("span",{className:"recharts-tooltip-item-name"},W):null,xt(W)?$.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,$.createElement("span",{className:"recharts-tooltip-item-value"},z),$.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return $.createElement("ul",{className:"recharts-tooltip-item-list",style:k},M)}return null},j=kp({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),w=kp({margin:0},u),_=!Ne(m),S=_?m:"",E=Ee("recharts-default-tooltip",p),A=Ee("recharts-tooltip-label",b);_&&y&&f!==void 0&&f!==null&&(S=y(m,f));var O=g?{role:"status","aria-live":"assertive"}:{};return $.createElement("div",kg({className:E,style:j},O),$.createElement("p",{className:A,style:w},$.isValidElement(S)?S:"".concat(S)),x())};function ql(e){"@babel/helpers - typeof";return ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ql(e)}function gu(e,t,r){return t=K7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K7(e){var t=G7(e,"string");return ql(t)=="symbol"?t:t+""}function G7(e,t){if(ql(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ql(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $o="recharts-tooltip-wrapper",X7={visibility:"hidden"};function Y7(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Ee($o,gu(gu(gu(gu({},"".concat($o,"-right"),se(r)&&t&&se(t.x)&&r>=t.x),"".concat($o,"-left"),se(r)&&t&&se(t.x)&&r<t.x),"".concat($o,"-bottom"),se(n)&&t&&se(t.y)&&n>=t.y),"".concat($o,"-top"),se(n)&&t&&se(t.y)&&n<t.y))}function Xw(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,a=e.position,s=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(a&&se(a[n]))return a[n];var f=r[n]-l-i,d=r[n]+i;if(t[n])return s[n]?f:d;if(s[n]){var h=f,p=c[n];return h<p?Math.max(d,c[n]):Math.max(f,c[n])}var b=d+l,m=c[n]+u;return b>m?Math.max(f,c[n]):Math.max(d,c[n])}function J7(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Q7(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,a=e.reverseDirection,s=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return s.height>0&&s.width>0&&r?(f=Xw({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.width,viewBox:c,viewBoxDimension:c.width}),d=Xw({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:a,tooltipDimension:s.height,viewBox:c,viewBoxDimension:c.height}),u=J7({translateX:f,translateY:d,useTranslate3d:l})):u=X7,{cssProperties:u,cssClasses:Y7({translateX:f,translateY:d,coordinate:r})}}function Cs(e){"@babel/helpers - typeof";return Cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cs(e)}function Yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(r),!0).forEach(function(n){Ig(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,GO(n.key),n)}}function t9(e,t,r){return t&&e9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r9(e,t,r){return t=$d(t),n9(e,KO()?Reflect.construct(t,r||[],$d(e).constructor):t.apply(e,r))}function n9(e,t){if(t&&(Cs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i9(e)}function i9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(KO=function(){return!!e})()}function $d(e){return $d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$d(e)}function a9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$g(e,t)}function $g(e,t){return $g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},$g(e,t)}function Ig(e,t,r){return t=GO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GO(e){var t=s9(e,"string");return Cs(t)=="symbol"?t:t+""}function s9(e,t){if(Cs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qw=1,o9=function(e){function t(){var r;Z7(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=r9(this,t,[].concat(i)),Ig(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Ig(r,"handleKeyDown",function(s){if(s.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return a9(t,e),t9(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Qw||Math.abs(n.height-this.state.lastBoundingBox.height)>Qw)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,f=i.coordinate,d=i.hasPayload,h=i.isAnimationActive,p=i.offset,b=i.position,m=i.reverseDirection,y=i.useTranslate3d,v=i.viewBox,g=i.wrapperStyle,x=Q7({allowEscapeViewBox:s,coordinate:f,offsetTopLeft:p,position:b,reverseDirection:m,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),j=x.cssClasses,w=x.cssProperties,_=Jw(Jw({transition:h&&a?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&d?"visible":"hidden",position:"absolute",top:0,left:0},g);return $.createElement("div",{tabIndex:-1,className:j,style:_,ref:function(E){n.wrapperNode=E}},u)}}])}(N.PureComponent),l9=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ea={isSsr:l9()};function ks(e){"@babel/helpers - typeof";return ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ks(e)}function Zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zw(Object(r),!0).forEach(function(n){v0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YO(n.key),n)}}function d9(e,t,r){return t&&u9(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f9(e,t,r){return t=Id(t),h9(e,XO()?Reflect.construct(t,r||[],Id(e).constructor):t.apply(e,r))}function h9(e,t){if(t&&(ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p9(e)}function p9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XO=function(){return!!e})()}function Id(e){return Id=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Id(e)}function m9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mg(e,t)}function Mg(e,t){return Mg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Mg(e,t)}function v0(e,t,r){return t=YO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YO(e){var t=g9(e,"string");return ks(t)=="symbol"?t:t+""}function g9(e,t){if(ks(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ks(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function y9(e){return e.dataKey}function v9(e,t){return $.isValidElement(e)?$.cloneElement(e,t):typeof e=="function"?$.createElement(e,t):$.createElement(H7,t)}var Jt=function(e){function t(){return c9(this,t),f9(this,t,arguments)}return m9(t,e),d9(t,[{key:"render",value:function(){var n=this,i=this.props,a=i.active,s=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,f=i.coordinate,d=i.filterNull,h=i.isAnimationActive,p=i.offset,b=i.payload,m=i.payloadUniqBy,y=i.position,v=i.reverseDirection,g=i.useTranslate3d,x=i.viewBox,j=i.wrapperStyle,w=b??[];d&&w.length&&(w=BO(b.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),m,y9));var _=w.length>0;return $.createElement(o9,{allowEscapeViewBox:s,animationDuration:l,animationEasing:c,isAnimationActive:h,active:a,coordinate:f,hasPayload:_,offset:p,position:y,reverseDirection:v,useTranslate3d:g,viewBox:x,wrapperStyle:j},v9(u,e_(e_({},this.props),{},{payload:w})))}}])}(N.PureComponent);v0(Jt,"displayName","Tooltip");v0(Jt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ea.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var x9=yn,b9=function(){return x9.Date.now()},w9=b9,_9=/\s/;function j9(e){for(var t=e.length;t--&&_9.test(e.charAt(t)););return t}var S9=j9,N9=S9,E9=/^\s+/;function A9(e){return e&&e.slice(0,N9(e)+1).replace(E9,"")}var O9=A9,P9=O9,t_=Pi,T9=so,r_=NaN,C9=/^[-+]0x[0-9a-f]+$/i,k9=/^0b[01]+$/i,$9=/^0o[0-7]+$/i,I9=parseInt;function M9(e){if(typeof e=="number")return e;if(T9(e))return r_;if(t_(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=t_(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=P9(e);var r=k9.test(e);return r||$9.test(e)?I9(e.slice(2),r?2:8):C9.test(e)?r_:+e}var JO=M9,R9=Pi,$p=w9,n_=JO,D9="Expected a function",L9=Math.max,B9=Math.min;function F9(e,t,r){var n,i,a,s,l,c,u=0,f=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(D9);t=n_(t)||0,R9(r)&&(f=!!r.leading,d="maxWait"in r,a=d?L9(n_(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h);function p(_){var S=n,E=i;return n=i=void 0,u=_,s=e.apply(E,S),s}function b(_){return u=_,l=setTimeout(v,t),f?p(_):s}function m(_){var S=_-c,E=_-u,A=t-S;return d?B9(A,a-E):A}function y(_){var S=_-c,E=_-u;return c===void 0||S>=t||S<0||d&&E>=a}function v(){var _=$p();if(y(_))return g(_);l=setTimeout(v,m(_))}function g(_){return l=void 0,h&&n?p(_):(n=i=void 0,s)}function x(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function j(){return l===void 0?s:g($p())}function w(){var _=$p(),S=y(_);if(n=arguments,i=this,c=_,S){if(l===void 0)return b(c);if(d)return clearTimeout(l),l=setTimeout(v,t),p(c)}return l===void 0&&(l=setTimeout(v,t)),s}return w.cancel=x,w.flush=j,w}var z9=F9,U9=z9,q9=Pi,W9="Expected a function";function V9(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(W9);return q9(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),U9(e,t,{leading:n,maxWait:t,trailing:i})}var H9=V9;const QO=Me(H9);function Wl(e){"@babel/helpers - typeof";return Wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wl(e)}function i_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i_(Object(r),!0).forEach(function(n){K9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K9(e,t,r){return t=G9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G9(e){var t=X9(e,"string");return Wl(t)=="symbol"?t:t+""}function X9(e,t){if(Wl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y9(e,t){return eW(e)||Z9(e,t)||Q9(e,t)||J9()}function J9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q9(e,t){if(e){if(typeof e=="string")return a_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a_(e,t)}}function a_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z9(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function eW(e){if(Array.isArray(e))return e}var Io=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,i=n===void 0?{width:-1,height:-1}:n,a=e.width,s=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,h=e.maxHeight,p=e.children,b=e.debounce,m=b===void 0?0:b,y=e.id,v=e.className,g=e.onResize,x=e.style,j=x===void 0?{}:x,w=N.useRef(null),_=N.useRef();_.current=g,N.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var S=N.useState({containerWidth:i.width,containerHeight:i.height}),E=Y9(S,2),A=E[0],O=E[1],P=N.useCallback(function(M,L){O(function(B){var D=Math.round(M),q=Math.round(L);return B.containerWidth===D&&B.containerHeight===q?B:{containerWidth:D,containerHeight:q}})},[]);N.useEffect(function(){var M=function(I){var z,W=I[0].contentRect,C=W.width,F=W.height;P(C,F),(z=_.current)===null||z===void 0||z.call(_,C,F)};m>0&&(M=QO(M,m,{trailing:!0,leading:!1}));var L=new ResizeObserver(M),B=w.current.getBoundingClientRect(),D=B.width,q=B.height;return P(D,q),L.observe(w.current),function(){L.disconnect()}},[P,m]);var k=N.useMemo(function(){var M=A.containerWidth,L=A.containerHeight;if(M<0||L<0)return null;tn(Qi(s)||Qi(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,c),tn(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=Qi(s)?M:s,D=Qi(c)?L:c;r&&r>0&&(B?D=B/r:D&&(B=D*r),h&&D>h&&(D=h)),tn(B>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,D,s,c,f,d,r);var q=!Array.isArray(p)&&Cn(p.type).endsWith("Chart");return $.Children.map(p,function(R){return $.isValidElement(R)?N.cloneElement(R,yu({width:B,height:D},q?{style:yu({height:"100%",width:"100%",maxHeight:D,maxWidth:B},R.props.style)}:{})):R})},[r,p,c,h,d,f,A,s]);return $.createElement("div",{id:y?"".concat(y):void 0,className:Ee("recharts-responsive-container",v),style:yu(yu({},j),{},{width:s,height:c,minWidth:f,minHeight:d,maxHeight:h}),ref:w},k)}),Vl=function(t){return null};Vl.displayName="Cell";function Hl(e){"@babel/helpers - typeof";return Hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(e)}function s_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s_(Object(r),!0).forEach(function(n){tW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tW(e,t,r){return t=rW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rW(e){var t=nW(e,"string");return Hl(t)=="symbol"?t:t+""}function nW(e,t){if(Hl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var La={widthCache:{},cacheCount:0},iW=2e3,aW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},o_="recharts_measurement_span";function sW(e){var t=Rg({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var ul=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ea.isSsr)return{width:0,height:0};var n=sW(r),i=JSON.stringify({text:t,copyStyle:n});if(La.widthCache[i])return La.widthCache[i];try{var a=document.getElementById(o_);a||(a=document.createElement("span"),a.setAttribute("id",o_),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var s=Rg(Rg({},aW),n);Object.assign(a.style,s),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return La.widthCache[i]=c,++La.cacheCount>iW&&(La.cacheCount=0,La.widthCache={}),c}catch{return{width:0,height:0}}},oW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Kl(e){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kl(e)}function Md(e,t){return dW(e)||uW(e,t)||cW(e,t)||lW()}function lW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cW(e,t){if(e){if(typeof e=="string")return l_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l_(e,t)}}function l_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function dW(e){if(Array.isArray(e))return e}function fW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c_(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pW(n.key),n)}}function hW(e,t,r){return t&&c_(e.prototype,t),r&&c_(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pW(e){var t=mW(e,"string");return Kl(t)=="symbol"?t:t+""}function mW(e,t){if(Kl(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kl(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var u_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,d_=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,gW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,yW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ZO={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},vW=Object.keys(ZO),rs="NaN";function xW(e,t){return e*ZO[t]}var vu=function(){function e(t,r){fW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!gW.test(r)&&(this.num=NaN,this.unit=""),vW.includes(r)&&(this.num=xW(t,r),this.unit="px")}return hW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=yW.exec(r))!==null&&n!==void 0?n:[],a=Md(i,3),s=a[1],l=a[2];return new e(parseFloat(s),l??"")}}])}();function eP(e){if(e.includes(rs))return rs;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=u_.exec(t))!==null&&r!==void 0?r:[],i=Md(n,4),a=i[1],s=i[2],l=i[3],c=vu.parse(a??""),u=vu.parse(l??""),f=s==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return rs;t=t.replace(u_,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,h=(d=d_.exec(t))!==null&&d!==void 0?d:[],p=Md(h,4),b=p[1],m=p[2],y=p[3],v=vu.parse(b??""),g=vu.parse(y??""),x=m==="+"?v.add(g):v.subtract(g);if(x.isNaN())return rs;t=t.replace(d_,x.toString())}return t}var f_=/\(([^()]*)\)/;function bW(e){for(var t=e;t.includes("(");){var r=f_.exec(t),n=Md(r,2),i=n[1];t=t.replace(f_,eP(i))}return t}function wW(e){var t=e.replace(/\s+/g,"");return t=bW(t),t=eP(t),t}function _W(e){try{return wW(e)}catch{return rs}}function Ip(e){var t=_W(e.slice(5,-1));return t===rs?"":t}var jW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],SW=["dx","dy","angle","className","breakAll"];function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dg.apply(this,arguments)}function h_(e,t){if(e==null)return{};var r=NW(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function p_(e,t){return PW(e)||OW(e,t)||AW(e,t)||EW()}function EW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AW(e,t){if(e){if(typeof e=="string")return m_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m_(e,t)}}function m_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function OW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function PW(e){if(Array.isArray(e))return e}var tP=/[ \f\n\r\t\v\u2028\u2029]+/,rP=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var a=[];Ne(r)||(n?a=r.toString().split(""):a=r.toString().split(tP));var s=a.map(function(c){return{word:c,width:ul(c,i).width}}),l=n?0:ul("",i).width;return{wordsWithComputedWidth:s,spaceWidth:l}}catch{return null}},TW=function(t,r,n,i,a){var s=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=se(s),d=l,h=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(D,q){var R=q.word,I=q.width,z=D[D.length-1];if(z&&(i==null||a||z.width+I+n<Number(i)))z.words.push(R),z.width+=I+n;else{var W={words:[R],width:I};D.push(W)}return D},[])},p=h(r),b=function(B){return B.reduce(function(D,q){return D.width>q.width?D:q})};if(!f)return p;for(var m="",y=function(B){var D=d.slice(0,B),q=rP({breakAll:u,style:c,children:D+m}).wordsWithComputedWidth,R=h(q),I=R.length>s||b(R).width>Number(i);return[I,R]},v=0,g=d.length-1,x=0,j;v<=g&&x<=d.length-1;){var w=Math.floor((v+g)/2),_=w-1,S=y(_),E=p_(S,2),A=E[0],O=E[1],P=y(w),k=p_(P,1),M=k[0];if(!A&&!M&&(v=w+1),A&&M&&(g=w-1),!A&&M){j=O;break}x++}return j||p},g_=function(t){var r=Ne(t)?[]:t.toString().split(tP);return[{words:r}]},CW=function(t){var r=t.width,n=t.scaleToFit,i=t.children,a=t.style,s=t.breakAll,l=t.maxLines;if((r||n)&&!Ea.isSsr){var c,u,f=rP({breakAll:s,children:i,style:a});if(f){var d=f.wordsWithComputedWidth,h=f.spaceWidth;c=d,u=h}else return g_(i);return TW({breakAll:s,children:i,maxLines:l,style:a},c,u,r,n)}return g_(i)},y_="#808080",va=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.lineHeight,l=s===void 0?"1em":s,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,h=t.textAnchor,p=h===void 0?"start":h,b=t.verticalAnchor,m=b===void 0?"end":b,y=t.fill,v=y===void 0?y_:y,g=h_(t,jW),x=N.useMemo(function(){return CW({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:d,style:g.style,width:g.width})},[g.breakAll,g.children,g.maxLines,d,g.style,g.width]),j=g.dx,w=g.dy,_=g.angle,S=g.className,E=g.breakAll,A=h_(g,SW);if(!xt(n)||!xt(a))return null;var O=n+(se(j)?j:0),P=a+(se(w)?w:0),k;switch(m){case"start":k=Ip("calc(".concat(u,")"));break;case"middle":k=Ip("calc(".concat((x.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:k=Ip("calc(".concat(x.length-1," * -").concat(l,")"));break}var M=[];if(d){var L=x[0].width,B=g.width;M.push("scale(".concat((se(B)?B/L:1)/L,")"))}return _&&M.push("rotate(".concat(_,", ").concat(O,", ").concat(P,")")),M.length&&(A.transform=M.join(" ")),$.createElement("text",Dg({},ye(A,!0),{x:O,y:P,className:Ee("recharts-text",S),textAnchor:p,fill:v.includes("url")?y_:v}),x.map(function(D,q){var R=D.words.join(E?"":" ");return $.createElement("tspan",{x:O,dy:q===0?k:l,key:"".concat(R,"-").concat(q)},R)}))};function xi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function x0(e){let t,r,n;e.length!==2?(t=xi,r=(l,c)=>xi(e(l),c),n=(l,c)=>e(l)-c):(t=e===xi||e===kW?e:$W,r=e,n=e);function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function s(l,c,u=0,f=l.length){const d=i(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:i,center:s,right:a}}function $W(){return 0}function nP(e){return e===null?NaN:+e}function*IW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const MW=x0(xi),Ic=MW.right;x0(nP).center;class v_ extends Map{constructor(t,r=LW){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(x_(this,t))}has(t){return super.has(x_(this,t))}set(t,r){return super.set(RW(this,t),r)}delete(t){return super.delete(DW(this,t))}}function x_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function RW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function DW({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function LW(e){return e!==null&&typeof e=="object"?e.valueOf():e}function BW(e=xi){if(e===xi)return iP;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function iP(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const FW=Math.sqrt(50),zW=Math.sqrt(10),UW=Math.sqrt(2);function Rd(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),a=n/Math.pow(10,i),s=a>=FW?10:a>=zW?5:a>=UW?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/s,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*s,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Rd(e,t,r*2):[l,c,u]}function Lg(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,a,s]=n?Rd(t,e,r):Rd(e,t,r);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(n)if(s<0)for(let u=0;u<l;++u)c[u]=(a-u)/-s;else for(let u=0;u<l;++u)c[u]=(a-u)*s;else if(s<0)for(let u=0;u<l;++u)c[u]=(i+u)/-s;else for(let u=0;u<l;++u)c[u]=(i+u)*s;return c}function Bg(e,t,r){return t=+t,e=+e,r=+r,Rd(e,t,r)[2]}function Fg(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Bg(t,e,r):Bg(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function b_(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function w_(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function aP(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?iP:BW(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),h=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/c+h)),b=Math.min(n,Math.floor(t+(c-u)*d/c+h));aP(e,t,p,b,i)}const a=e[t];let s=r,l=n;for(Mo(e,r,t),i(e[n],a)>0&&Mo(e,r,n);s<l;){for(Mo(e,s,l),++s,--l;i(e[s],a)<0;)++s;for(;i(e[l],a)>0;)--l}i(e[r],a)===0?Mo(e,r,l):(++l,Mo(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Mo(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function qW(e,t,r){if(e=Float64Array.from(IW(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return w_(e);if(t>=1)return b_(e);var n,i=(n-1)*t,a=Math.floor(i),s=b_(aP(e,a).subarray(0,a+1)),l=w_(e.subarray(a+1));return s+(l-s)*(i-a)}}function WW(e,t,r=nP){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),s=+r(e[a],a,e),l=+r(e[a+1],a+1,e);return s+(l-s)*(i-a)}}function VW(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(i);++n<i;)a[n]=e+n*r;return a}function Br(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hn(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const zg=Symbol("implicit");function b0(){var e=new v_,t=[],r=[],n=zg;function i(a){let s=e.get(a);if(s===void 0){if(n!==zg)return n;e.set(a,s=t.push(a)-1)}return r[s%r.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new v_;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return i},i.range=function(a){return arguments.length?(r=Array.from(a),i):r.slice()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return b0(t,r).unknown(n)},Br.apply(i,arguments),i}function Gl(){var e=b0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,a,s,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var h=t().length,p=i<n,b=p?i:n,m=p?n:i;a=(m-b)/Math.max(1,h-c+u*2),l&&(a=Math.floor(a)),b+=(m-b-a*(h-c))*f,s=a*(1-c),l&&(b=Math.round(b),s=Math.round(s));var y=VW(h).map(function(v){return b+a*v});return r(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?([n,i]=h,n=+n,i=+i,d()):[n,i]},e.rangeRound=function(h){return[n,i]=h,n=+n,i=+i,l=!0,d()},e.bandwidth=function(){return s},e.step=function(){return a},e.round=function(h){return arguments.length?(l=!!h,d()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),d()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),d()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.copy=function(){return Gl(t(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(f)},Br.apply(d(),arguments)}function sP(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return sP(t())},e}function dl(){return sP(Gl.apply(null,arguments).paddingInner(1))}function w0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oP(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Mc(){}var Xl=.7,Dd=1/Xl,gs="\\s*([+-]?\\d+)\\s*",Yl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HW=/^#([0-9a-f]{3,8})$/,KW=new RegExp(`^rgb\\(${gs},${gs},${gs}\\)$`),GW=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),XW=new RegExp(`^rgba\\(${gs},${gs},${gs},${Yl}\\)$`),YW=new RegExp(`^rgba\\(${fn},${fn},${fn},${Yl}\\)$`),JW=new RegExp(`^hsl\\(${Yl},${fn},${fn}\\)$`),QW=new RegExp(`^hsla\\(${Yl},${fn},${fn},${Yl}\\)$`),__={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};w0(Mc,Jl,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:j_,formatHex:j_,formatHex8:ZW,formatHsl:eV,formatRgb:S_,toString:S_});function j_(){return this.rgb().formatHex()}function ZW(){return this.rgb().formatHex8()}function eV(){return lP(this).formatHsl()}function S_(){return this.rgb().formatRgb()}function Jl(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=HW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?N_(t):r===3?new tr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?xu(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?xu(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KW.exec(e))?new tr(t[1],t[2],t[3],1):(t=GW.exec(e))?new tr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=XW.exec(e))?xu(t[1],t[2],t[3],t[4]):(t=YW.exec(e))?xu(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=JW.exec(e))?O_(t[1],t[2]/100,t[3]/100,1):(t=QW.exec(e))?O_(t[1],t[2]/100,t[3]/100,t[4]):__.hasOwnProperty(e)?N_(__[e]):e==="transparent"?new tr(NaN,NaN,NaN,0):null}function N_(e){return new tr(e>>16&255,e>>8&255,e&255,1)}function xu(e,t,r,n){return n<=0&&(e=t=r=NaN),new tr(e,t,r,n)}function tV(e){return e instanceof Mc||(e=Jl(e)),e?(e=e.rgb(),new tr(e.r,e.g,e.b,e.opacity)):new tr}function Ug(e,t,r,n){return arguments.length===1?tV(e):new tr(e,t,r,n??1)}function tr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}w0(tr,Ug,oP(Mc,{brighter(e){return e=e==null?Dd:Math.pow(Dd,e),new tr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xl:Math.pow(Xl,e),new tr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tr(sa(this.r),sa(this.g),sa(this.b),Ld(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E_,formatHex:E_,formatHex8:rV,formatRgb:A_,toString:A_}));function E_(){return`#${Zi(this.r)}${Zi(this.g)}${Zi(this.b)}`}function rV(){return`#${Zi(this.r)}${Zi(this.g)}${Zi(this.b)}${Zi((isNaN(this.opacity)?1:this.opacity)*255)}`}function A_(){const e=Ld(this.opacity);return`${e===1?"rgb(":"rgba("}${sa(this.r)}, ${sa(this.g)}, ${sa(this.b)}${e===1?")":`, ${e})`}`}function Ld(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Zi(e){return e=sa(e),(e<16?"0":"")+e.toString(16)}function O_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Jr(e,t,r,n)}function lP(e){if(e instanceof Jr)return new Jr(e.h,e.s,e.l,e.opacity);if(e instanceof Mc||(e=Jl(e)),!e)return new Jr;if(e instanceof Jr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),s=NaN,l=a-i,c=(a+i)/2;return l?(t===a?s=(r-n)/l+(r<n)*6:r===a?s=(n-t)/l+2:s=(t-r)/l+4,l/=c<.5?a+i:2-a-i,s*=60):l=c>0&&c<1?0:s,new Jr(s,l,c,e.opacity)}function nV(e,t,r,n){return arguments.length===1?lP(e):new Jr(e,t,r,n??1)}function Jr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}w0(Jr,nV,oP(Mc,{brighter(e){return e=e==null?Dd:Math.pow(Dd,e),new Jr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xl:Math.pow(Xl,e),new Jr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new tr(Mp(e>=240?e-240:e+120,i,n),Mp(e,i,n),Mp(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Jr(P_(this.h),bu(this.s),bu(this.l),Ld(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ld(this.opacity);return`${e===1?"hsl(":"hsla("}${P_(this.h)}, ${bu(this.s)*100}%, ${bu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function P_(e){return e=(e||0)%360,e<0?e+360:e}function bu(e){return Math.max(0,Math.min(1,e||0))}function Mp(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _0=e=>()=>e;function iV(e,t){return function(r){return e+r*t}}function aV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function sV(e){return(e=+e)==1?cP:function(t,r){return r-t?aV(t,r,e):_0(isNaN(t)?r:t)}}function cP(e,t){var r=t-e;return r?iV(e,r):_0(isNaN(e)?t:e)}const T_=function e(t){var r=sV(t);function n(i,a){var s=r((i=Ug(i)).r,(a=Ug(a)).r),l=r(i.g,a.g),c=r(i.b,a.b),u=cP(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=c(f),i.opacity=u(f),i+""}}return n.gamma=e,n}(1);function oV(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(a){for(i=0;i<r;++i)n[i]=e[i]*(1-a)+t[i]*a;return n}}function lV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cV(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),a=new Array(r),s;for(s=0;s<n;++s)i[s]=go(e[s],t[s]);for(;s<r;++s)a[s]=t[s];return function(l){for(s=0;s<n;++s)a[s]=i[s](l);return a}}function uV(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Bd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function dV(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=go(e[i],t[i]):n[i]=t[i];return function(a){for(i in r)n[i]=r[i](a);return n}}var qg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rp=new RegExp(qg.source,"g");function fV(e){return function(){return e}}function hV(e){return function(t){return e(t)+""}}function pV(e,t){var r=qg.lastIndex=Rp.lastIndex=0,n,i,a,s=-1,l=[],c=[];for(e=e+"",t=t+"";(n=qg.exec(e))&&(i=Rp.exec(t));)(a=i.index)>r&&(a=t.slice(r,a),l[s]?l[s]+=a:l[++s]=a),(n=n[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,c.push({i:s,x:Bd(n,i)})),r=Rp.lastIndex;return r<t.length&&(a=t.slice(r),l[s]?l[s]+=a:l[++s]=a),l.length<2?c[0]?hV(c[0].x):fV(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function go(e,t){var r=typeof t,n;return t==null||r==="boolean"?_0(t):(r==="number"?Bd:r==="string"?(n=Jl(t))?(t=n,T_):pV:t instanceof Jl?T_:t instanceof Date?uV:lV(t)?oV:Array.isArray(t)?cV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?dV:Bd)(e,t)}function j0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function mV(e,t){t===void 0&&(t=e,e=go);for(var r=0,n=t.length-1,i=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(s){var l=Math.max(0,Math.min(n-1,Math.floor(s*=n)));return a[l](s-l)}}function gV(e){return function(){return e}}function Fd(e){return+e}var C_=[0,1];function Ht(e){return e}function Wg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:gV(isNaN(t)?NaN:.5)}function yV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function vV(e,t,r){var n=e[0],i=e[1],a=t[0],s=t[1];return i<n?(n=Wg(i,n),a=r(s,a)):(n=Wg(n,i),a=r(a,s)),function(l){return a(n(l))}}function xV(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),a=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<n;)i[s]=Wg(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(l){var c=Ic(e,l,1,n)-1;return a[c](i[c](l))}}function Rc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dh(){var e=C_,t=C_,r=go,n,i,a,s=Ht,l,c,u;function f(){var h=Math.min(e.length,t.length);return s!==Ht&&(s=yV(e[0],e[h-1])),l=h>2?xV:vV,c=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(c||(c=l(e.map(n),t,r)))(n(s(h)))}return d.invert=function(h){return s(i((u||(u=l(t,e.map(n),Bd)))(h)))},d.domain=function(h){return arguments.length?(e=Array.from(h,Fd),f()):e.slice()},d.range=function(h){return arguments.length?(t=Array.from(h),f()):t.slice()},d.rangeRound=function(h){return t=Array.from(h),r=j0,f()},d.clamp=function(h){return arguments.length?(s=h?!0:Ht,f()):s!==Ht},d.interpolate=function(h){return arguments.length?(r=h,f()):r},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,p){return n=h,i=p,f()}}function S0(){return dh()(Ht,Ht)}function bV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zd(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function $s(e){return e=zd(Math.abs(e)),e?e[1]:NaN}function wV(e,t){return function(r,n){for(var i=r.length,a=[],s=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),a.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=e[s=(s+1)%e.length];return a.reverse().join(t)}}function _V(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var jV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ql(e){if(!(t=jV.exec(e)))throw new Error("invalid format: "+e);var t;return new N0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ql.prototype=N0.prototype;function N0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}N0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function SV(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var uP;function NV(e,t){var r=zd(e,t);if(!r)return e+"";var n=r[0],i=r[1],a=i-(uP=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=n.length;return a===s?n:a>s?n+new Array(a-s+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+zd(e,Math.max(0,t+a-1))[0]}function k_(e,t){var r=zd(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const $_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:bV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>k_(e*100,t),r:k_,s:NV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function I_(e){return e}var M_=Array.prototype.map,R_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function EV(e){var t=e.grouping===void 0||e.thousands===void 0?I_:wV(M_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?I_:_V(M_.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Ql(d);var h=d.fill,p=d.align,b=d.sign,m=d.symbol,y=d.zero,v=d.width,g=d.comma,x=d.precision,j=d.trim,w=d.type;w==="n"?(g=!0,w="g"):$_[w]||(x===void 0&&(x=12),j=!0,w="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var _=m==="$"?r:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",S=m==="$"?n:/[%p]/.test(w)?s:"",E=$_[w],A=/[defgprs%]/.test(w);x=x===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function O(P){var k=_,M=S,L,B,D;if(w==="c")M=E(P)+M,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?c:E(Math.abs(P),x),j&&(P=SV(P)),q&&+P==0&&b!=="+"&&(q=!1),k=(q?b==="("?b:l:b==="-"||b==="("?"":b)+k,M=(w==="s"?R_[8+uP/3]:"")+M+(q&&b==="("?")":""),A){for(L=-1,B=P.length;++L<B;)if(D=P.charCodeAt(L),48>D||D>57){M=(D===46?i+P.slice(L+1):P.slice(L))+M,P=P.slice(0,L);break}}}g&&!y&&(P=t(P,1/0));var R=k.length+P.length+M.length,I=R<v?new Array(v-R+1).join(h):"";switch(g&&y&&(P=t(I+P,I.length?v-M.length:1/0),I=""),p){case"<":P=k+P+M+I;break;case"=":P=k+I+P+M;break;case"^":P=I.slice(0,R=I.length>>1)+k+P+M+I.slice(R);break;default:P=I+k+P+M;break}return a(P)}return O.toString=function(){return d+""},O}function f(d,h){var p=u((d=Ql(d),d.type="f",d)),b=Math.max(-8,Math.min(8,Math.floor($s(h)/3)))*3,m=Math.pow(10,-b),y=R_[8+b/3];return function(v){return p(m*v)+y}}return{format:u,formatPrefix:f}}var wu,E0,dP;AV({thousands:",",grouping:[3],currency:["$",""]});function AV(e){return wu=EV(e),E0=wu.format,dP=wu.formatPrefix,wu}function OV(e){return Math.max(0,-$s(Math.abs(e)))}function PV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($s(t)/3)))*3-$s(Math.abs(e)))}function TV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$s(t)-$s(e))+1}function fP(e,t,r,n){var i=Fg(e,t,r),a;switch(n=Ql(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=PV(i,s))&&(n.precision=a),dP(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=TV(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=OV(i))&&(n.precision=a-(n.type==="%")*2);break}}return E0(n)}function Ti(e){var t=e.domain;return e.ticks=function(r){var n=t();return Lg(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return fP(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,a=n.length-1,s=n[i],l=n[a],c,u,f=10;for(l<s&&(u=s,s=l,l=u,u=i,i=a,a=u);f-- >0;){if(u=Bg(s,l,r),u===c)return n[i]=s,n[a]=l,t(n);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Ud(){var e=S0();return e.copy=function(){return Rc(e,Ud())},Br.apply(e,arguments),Ti(e)}function hP(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Fd),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return hP(e).unknown(t)},e=arguments.length?Array.from(e,Fd):[0,1],Ti(r)}function pP(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],a=e[n],s;return a<i&&(s=r,r=n,n=s,s=i,i=a,a=s),e[r]=t.floor(i),e[n]=t.ceil(a),e}function D_(e){return Math.log(e)}function L_(e){return Math.exp(e)}function CV(e){return-Math.log(-e)}function kV(e){return-Math.exp(-e)}function $V(e){return isFinite(e)?+("1e"+e):e<0?0:e}function IV(e){return e===10?$V:e===Math.E?Math.exp:t=>Math.pow(e,t)}function MV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function B_(e){return(t,r)=>-e(-t,r)}function A0(e){const t=e(D_,L_),r=t.domain;let n=10,i,a;function s(){return i=MV(n),a=IV(n),r()[0]<0?(i=B_(i),a=B_(a),e(CV,kV)):e(D_,L_),t}return t.base=function(l){return arguments.length?(n=+l,s()):n},t.domain=function(l){return arguments.length?(r(l),s()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let h=i(u),p=i(f),b,m;const y=l==null?10:+l;let v=[];if(!(n%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(b=1;b<n;++b)if(m=h<0?b/a(-h):b*a(h),!(m<u)){if(m>f)break;v.push(m)}}else for(;h<=p;++h)for(b=n-1;b>=1;--b)if(m=h>0?b/a(-h):b*a(h),!(m<u)){if(m>f)break;v.push(m)}v.length*2<y&&(v=Lg(u,f,y))}else v=Lg(h,p,Math.min(p-h,y)).map(a);return d?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Ql(c)).precision==null&&(c.trim=!0),c=E0(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/a(Math.round(i(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(pP(r(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function mP(){const e=A0(dh()).domain([1,10]);return e.copy=()=>Rc(e,mP()).base(e.base()),Br.apply(e,arguments),e}function F_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function z_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function O0(e){var t=1,r=e(F_(t),z_(t));return r.constant=function(n){return arguments.length?e(F_(t=+n),z_(t)):t},Ti(r)}function gP(){var e=O0(dh());return e.copy=function(){return Rc(e,gP()).constant(e.constant())},Br.apply(e,arguments)}function U_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function RV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function DV(e){return e<0?-e*e:e*e}function P0(e){var t=e(Ht,Ht),r=1;function n(){return r===1?e(Ht,Ht):r===.5?e(RV,DV):e(U_(r),U_(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Ti(t)}function T0(){var e=P0(dh());return e.copy=function(){return Rc(e,T0()).exponent(e.exponent())},Br.apply(e,arguments),e}function LV(){return T0.apply(null,arguments).exponent(.5)}function q_(e){return Math.sign(e)*e*e}function BV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function yP(){var e=S0(),t=[0,1],r=!1,n;function i(a){var s=BV(e(a));return isNaN(s)?n:r?Math.round(s):s}return i.invert=function(a){return e.invert(q_(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,Fd)).map(q_)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(r=!!a,i):r},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return yP(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Br.apply(i,arguments),Ti(i)}function vP(){var e=[],t=[],r=[],n;function i(){var s=0,l=Math.max(1,t.length);for(r=new Array(l-1);++s<l;)r[s-1]=WW(e,s/l);return a}function a(s){return s==null||isNaN(s=+s)?n:t[Ic(r,s)]}return a.invertExtent=function(s){var l=t.indexOf(s);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let l of s)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(xi),i()},a.range=function(s){return arguments.length?(t=Array.from(s),i()):t.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.quantiles=function(){return r.slice()},a.copy=function(){return vP().domain(e).range(t).unknown(n)},Br.apply(a,arguments)}function xP(){var e=0,t=1,r=1,n=[.5],i=[0,1],a;function s(c){return c!=null&&c<=c?i[Ic(n,c,0,r)]:a}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return s}return s.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},s.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},s.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},s.unknown=function(c){return arguments.length&&(a=c),s},s.thresholds=function(){return n.slice()},s.copy=function(){return xP().domain([e,t]).range(i).unknown(a)},Br.apply(Ti(s),arguments)}function bP(){var e=[.5],t=[0,1],r,n=1;function i(a){return a!=null&&a<=a?t[Ic(e,a,0,n)]:r}return i.domain=function(a){return arguments.length?(e=Array.from(a),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return bP().domain(e).range(t).unknown(r)},Br.apply(i,arguments)}const Dp=new Date,Lp=new Date;function bt(e,t,r,n){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const s=i(a),l=i.ceil(a);return a-s<l-a?s:l},i.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),i.range=(a,s,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<s)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<s);return c},i.filter=a=>bt(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,l)=>{if(s>=s)if(l<0)for(;++l<=0;)for(;t(s,-1),!a(s););else for(;--l>=0;)for(;t(s,1),!a(s););}),r&&(i.count=(a,s)=>(Dp.setTime(+a),Lp.setTime(+s),e(Dp),e(Lp),Math.floor(r(Dp,Lp))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(n?s=>n(s)%a===0:s=>i.count(0,s)%a===0):i)),i}const qd=bt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);qd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?bt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):qd);qd.range;const An=1e3,Cr=An*60,On=Cr*60,Bn=On*24,C0=Bn*7,W_=Bn*30,Bp=Bn*365,ea=bt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*An)},(e,t)=>(t-e)/An,e=>e.getUTCSeconds());ea.range;const k0=bt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*An)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getMinutes());k0.range;const $0=bt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Cr)},(e,t)=>(t-e)/Cr,e=>e.getUTCMinutes());$0.range;const I0=bt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*An-e.getMinutes()*Cr)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getHours());I0.range;const M0=bt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*On)},(e,t)=>(t-e)/On,e=>e.getUTCHours());M0.range;const Dc=bt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/Bn,e=>e.getDate()-1);Dc.range;const fh=bt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bn,e=>e.getUTCDate()-1);fh.range;const wP=bt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bn,e=>Math.floor(e/Bn));wP.range;function Aa(e){return bt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/C0)}const hh=Aa(0),Wd=Aa(1),FV=Aa(2),zV=Aa(3),Is=Aa(4),UV=Aa(5),qV=Aa(6);hh.range;Wd.range;FV.range;zV.range;Is.range;UV.range;qV.range;function Oa(e){return bt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/C0)}const ph=Oa(0),Vd=Oa(1),WV=Oa(2),VV=Oa(3),Ms=Oa(4),HV=Oa(5),KV=Oa(6);ph.range;Vd.range;WV.range;VV.range;Ms.range;HV.range;KV.range;const R0=bt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());R0.range;const D0=bt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());D0.range;const Fn=bt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Fn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Fn.range;const zn=bt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});zn.range;function _P(e,t,r,n,i,a){const s=[[ea,1,An],[ea,5,5*An],[ea,15,15*An],[ea,30,30*An],[a,1,Cr],[a,5,5*Cr],[a,15,15*Cr],[a,30,30*Cr],[i,1,On],[i,3,3*On],[i,6,6*On],[i,12,12*On],[n,1,Bn],[n,2,2*Bn],[r,1,C0],[t,1,W_],[t,3,3*W_],[e,1,Bp]];function l(u,f,d){const h=f<u;h&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:c(u,f,d),b=p?p.range(u,+f+1):[];return h?b.reverse():b}function c(u,f,d){const h=Math.abs(f-u)/d,p=x0(([,,y])=>y).right(s,h);if(p===s.length)return e.every(Fg(u/Bp,f/Bp,d));if(p===0)return qd.every(Math.max(Fg(u,f,d),1));const[b,m]=s[h/s[p-1][2]<s[p][2]/h?p-1:p];return b.every(m)}return[l,c]}const[GV,XV]=_P(zn,D0,ph,wP,M0,$0),[YV,JV]=_P(Fn,R0,hh,Dc,I0,k0);function Fp(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zp(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ro(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function QV(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,s=e.shortDays,l=e.months,c=e.shortMonths,u=Do(i),f=Lo(i),d=Do(a),h=Lo(a),p=Do(s),b=Lo(s),m=Do(l),y=Lo(l),v=Do(c),g=Lo(c),x={a:q,A:R,b:I,B:z,c:null,d:Y_,e:Y_,f:wH,g:CH,G:$H,H:vH,I:xH,j:bH,L:jP,m:_H,M:jH,p:W,q:C,Q:Z_,s:ej,S:SH,u:NH,U:EH,V:AH,w:OH,W:PH,x:null,X:null,y:TH,Y:kH,Z:IH,"%":Q_},j={a:F,A:Q,b:Z,B:ee,c:null,d:J_,e:J_,f:LH,g:GH,G:YH,H:MH,I:RH,j:DH,L:NP,m:BH,M:FH,p:le,q:ce,Q:Z_,s:ej,S:zH,u:UH,U:qH,V:WH,w:VH,W:HH,x:null,X:null,y:KH,Y:XH,Z:JH,"%":Q_},w={a:O,A:P,b:k,B:M,c:L,d:G_,e:G_,f:pH,g:K_,G:H_,H:X_,I:X_,j:uH,L:hH,m:cH,M:dH,p:A,q:lH,Q:gH,s:yH,S:fH,u:nH,U:iH,V:aH,w:rH,W:sH,x:B,X:D,y:K_,Y:H_,Z:oH,"%":mH};x.x=_(r,x),x.X=_(n,x),x.c=_(t,x),j.x=_(r,j),j.X=_(n,j),j.c=_(t,j);function _(te,V){return function(ie){var K=[],H=-1,J=0,he=te.length,we,Y,fe;for(ie instanceof Date||(ie=new Date(+ie));++H<he;)te.charCodeAt(H)===37&&(K.push(te.slice(J,H)),(Y=V_[we=te.charAt(++H)])!=null?we=te.charAt(++H):Y=we==="e"?" ":"0",(fe=V[we])&&(we=fe(ie,Y)),K.push(we),J=H+1);return K.push(te.slice(J,H)),K.join("")}}function S(te,V){return function(ie){var K=Ro(1900,void 0,1),H=E(K,te,ie+="",0),J,he;if(H!=ie.length)return null;if("Q"in K)return new Date(K.Q);if("s"in K)return new Date(K.s*1e3+("L"in K?K.L:0));if(V&&!("Z"in K)&&(K.Z=0),"p"in K&&(K.H=K.H%12+K.p*12),K.m===void 0&&(K.m="q"in K?K.q:0),"V"in K){if(K.V<1||K.V>53)return null;"w"in K||(K.w=1),"Z"in K?(J=zp(Ro(K.y,0,1)),he=J.getUTCDay(),J=he>4||he===0?Vd.ceil(J):Vd(J),J=fh.offset(J,(K.V-1)*7),K.y=J.getUTCFullYear(),K.m=J.getUTCMonth(),K.d=J.getUTCDate()+(K.w+6)%7):(J=Fp(Ro(K.y,0,1)),he=J.getDay(),J=he>4||he===0?Wd.ceil(J):Wd(J),J=Dc.offset(J,(K.V-1)*7),K.y=J.getFullYear(),K.m=J.getMonth(),K.d=J.getDate()+(K.w+6)%7)}else("W"in K||"U"in K)&&("w"in K||(K.w="u"in K?K.u%7:"W"in K?1:0),he="Z"in K?zp(Ro(K.y,0,1)).getUTCDay():Fp(Ro(K.y,0,1)).getDay(),K.m=0,K.d="W"in K?(K.w+6)%7+K.W*7-(he+5)%7:K.w+K.U*7-(he+6)%7);return"Z"in K?(K.H+=K.Z/100|0,K.M+=K.Z%100,zp(K)):Fp(K)}}function E(te,V,ie,K){for(var H=0,J=V.length,he=ie.length,we,Y;H<J;){if(K>=he)return-1;if(we=V.charCodeAt(H++),we===37){if(we=V.charAt(H++),Y=w[we in V_?V.charAt(H++):we],!Y||(K=Y(te,ie,K))<0)return-1}else if(we!=ie.charCodeAt(K++))return-1}return K}function A(te,V,ie){var K=u.exec(V.slice(ie));return K?(te.p=f.get(K[0].toLowerCase()),ie+K[0].length):-1}function O(te,V,ie){var K=p.exec(V.slice(ie));return K?(te.w=b.get(K[0].toLowerCase()),ie+K[0].length):-1}function P(te,V,ie){var K=d.exec(V.slice(ie));return K?(te.w=h.get(K[0].toLowerCase()),ie+K[0].length):-1}function k(te,V,ie){var K=v.exec(V.slice(ie));return K?(te.m=g.get(K[0].toLowerCase()),ie+K[0].length):-1}function M(te,V,ie){var K=m.exec(V.slice(ie));return K?(te.m=y.get(K[0].toLowerCase()),ie+K[0].length):-1}function L(te,V,ie){return E(te,t,V,ie)}function B(te,V,ie){return E(te,r,V,ie)}function D(te,V,ie){return E(te,n,V,ie)}function q(te){return s[te.getDay()]}function R(te){return a[te.getDay()]}function I(te){return c[te.getMonth()]}function z(te){return l[te.getMonth()]}function W(te){return i[+(te.getHours()>=12)]}function C(te){return 1+~~(te.getMonth()/3)}function F(te){return s[te.getUTCDay()]}function Q(te){return a[te.getUTCDay()]}function Z(te){return c[te.getUTCMonth()]}function ee(te){return l[te.getUTCMonth()]}function le(te){return i[+(te.getUTCHours()>=12)]}function ce(te){return 1+~~(te.getUTCMonth()/3)}return{format:function(te){var V=_(te+="",x);return V.toString=function(){return te},V},parse:function(te){var V=S(te+="",!1);return V.toString=function(){return te},V},utcFormat:function(te){var V=_(te+="",j);return V.toString=function(){return te},V},utcParse:function(te){var V=S(te+="",!0);return V.toString=function(){return te},V}}}var V_={"-":"",_:" ",0:"0"},At=/^\s*\d+/,ZV=/^%/,eH=/[\\^$*+?|[\]().{}]/g;function ke(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?new Array(r-a+1).join(t)+i:i)}function tH(e){return e.replace(eH,"\\$&")}function Do(e){return new RegExp("^(?:"+e.map(tH).join("|")+")","i")}function Lo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function rH(e,t,r){var n=At.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function nH(e,t,r){var n=At.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function iH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function aH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function sH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function H_(e,t,r){var n=At.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function K_(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function oH(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function lH(e,t,r){var n=At.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function cH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function G_(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function uH(e,t,r){var n=At.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function X_(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function fH(e,t,r){var n=At.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hH(e,t,r){var n=At.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function pH(e,t,r){var n=At.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function mH(e,t,r){var n=ZV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function gH(e,t,r){var n=At.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function yH(e,t,r){var n=At.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Y_(e,t){return ke(e.getDate(),t,2)}function vH(e,t){return ke(e.getHours(),t,2)}function xH(e,t){return ke(e.getHours()%12||12,t,2)}function bH(e,t){return ke(1+Dc.count(Fn(e),e),t,3)}function jP(e,t){return ke(e.getMilliseconds(),t,3)}function wH(e,t){return jP(e,t)+"000"}function _H(e,t){return ke(e.getMonth()+1,t,2)}function jH(e,t){return ke(e.getMinutes(),t,2)}function SH(e,t){return ke(e.getSeconds(),t,2)}function NH(e){var t=e.getDay();return t===0?7:t}function EH(e,t){return ke(hh.count(Fn(e)-1,e),t,2)}function SP(e){var t=e.getDay();return t>=4||t===0?Is(e):Is.ceil(e)}function AH(e,t){return e=SP(e),ke(Is.count(Fn(e),e)+(Fn(e).getDay()===4),t,2)}function OH(e){return e.getDay()}function PH(e,t){return ke(Wd.count(Fn(e)-1,e),t,2)}function TH(e,t){return ke(e.getFullYear()%100,t,2)}function CH(e,t){return e=SP(e),ke(e.getFullYear()%100,t,2)}function kH(e,t){return ke(e.getFullYear()%1e4,t,4)}function $H(e,t){var r=e.getDay();return e=r>=4||r===0?Is(e):Is.ceil(e),ke(e.getFullYear()%1e4,t,4)}function IH(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ke(t/60|0,"0",2)+ke(t%60,"0",2)}function J_(e,t){return ke(e.getUTCDate(),t,2)}function MH(e,t){return ke(e.getUTCHours(),t,2)}function RH(e,t){return ke(e.getUTCHours()%12||12,t,2)}function DH(e,t){return ke(1+fh.count(zn(e),e),t,3)}function NP(e,t){return ke(e.getUTCMilliseconds(),t,3)}function LH(e,t){return NP(e,t)+"000"}function BH(e,t){return ke(e.getUTCMonth()+1,t,2)}function FH(e,t){return ke(e.getUTCMinutes(),t,2)}function zH(e,t){return ke(e.getUTCSeconds(),t,2)}function UH(e){var t=e.getUTCDay();return t===0?7:t}function qH(e,t){return ke(ph.count(zn(e)-1,e),t,2)}function EP(e){var t=e.getUTCDay();return t>=4||t===0?Ms(e):Ms.ceil(e)}function WH(e,t){return e=EP(e),ke(Ms.count(zn(e),e)+(zn(e).getUTCDay()===4),t,2)}function VH(e){return e.getUTCDay()}function HH(e,t){return ke(Vd.count(zn(e)-1,e),t,2)}function KH(e,t){return ke(e.getUTCFullYear()%100,t,2)}function GH(e,t){return e=EP(e),ke(e.getUTCFullYear()%100,t,2)}function XH(e,t){return ke(e.getUTCFullYear()%1e4,t,4)}function YH(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ms(e):Ms.ceil(e),ke(e.getUTCFullYear()%1e4,t,4)}function JH(){return"+0000"}function Q_(){return"%"}function Z_(e){return+e}function ej(e){return Math.floor(+e/1e3)}var Ba,AP,OP;QH({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function QH(e){return Ba=QV(e),AP=Ba.format,Ba.parse,OP=Ba.utcFormat,Ba.utcParse,Ba}function ZH(e){return new Date(e)}function eK(e){return e instanceof Date?+e:+new Date(+e)}function L0(e,t,r,n,i,a,s,l,c,u){var f=S0(),d=f.invert,h=f.domain,p=u(".%L"),b=u(":%S"),m=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),g=u("%b %d"),x=u("%B"),j=u("%Y");function w(_){return(c(_)<_?p:l(_)<_?b:s(_)<_?m:a(_)<_?y:n(_)<_?i(_)<_?v:g:r(_)<_?x:j)(_)}return f.invert=function(_){return new Date(d(_))},f.domain=function(_){return arguments.length?h(Array.from(_,eK)):h().map(ZH)},f.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},f.tickFormat=function(_,S){return S==null?w:u(S)},f.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(pP(S,_)):f},f.copy=function(){return Rc(f,L0(e,t,r,n,i,a,s,l,c,u))},f}function tK(){return Br.apply(L0(YV,JV,Fn,R0,hh,Dc,I0,k0,ea,AP).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rK(){return Br.apply(L0(GV,XV,zn,D0,ph,fh,M0,$0,ea,OP).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mh(){var e=0,t=1,r,n,i,a,s=Ht,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:s(i===0?.5:(d=(a(d)-r)*i,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=a(e=+e),n=a(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(s=d,u):s};function f(d){return function(h){var p,b;return arguments.length?([p,b]=h,s=d(p,b),u):[s(0),s(1)]}}return u.range=f(go),u.rangeRound=f(j0),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return a=d,r=d(e),n=d(t),i=r===n?0:1/(n-r),u}}function Ci(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PP(){var e=Ti(mh()(Ht));return e.copy=function(){return Ci(e,PP())},Hn.apply(e,arguments)}function TP(){var e=A0(mh()).domain([1,10]);return e.copy=function(){return Ci(e,TP()).base(e.base())},Hn.apply(e,arguments)}function CP(){var e=O0(mh());return e.copy=function(){return Ci(e,CP()).constant(e.constant())},Hn.apply(e,arguments)}function B0(){var e=P0(mh());return e.copy=function(){return Ci(e,B0()).exponent(e.exponent())},Hn.apply(e,arguments)}function nK(){return B0.apply(null,arguments).exponent(.5)}function kP(){var e=[],t=Ht;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ic(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(xi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,a)=>qW(e,a/n))},r.copy=function(){return kP(t).domain(e)},Hn.apply(r,arguments)}function gh(){var e=0,t=.5,r=1,n=1,i,a,s,l,c,u=Ht,f,d=!1,h;function p(m){return isNaN(m=+m)?h:(m=.5+((m=+f(m))-a)*(n*m<n*a?l:c),u(d?Math.max(0,Math.min(1,m)):m))}p.domain=function(m){return arguments.length?([e,t,r]=m,i=f(e=+e),a=f(t=+t),s=f(r=+r),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,p):[e,t,r]},p.clamp=function(m){return arguments.length?(d=!!m,p):d},p.interpolator=function(m){return arguments.length?(u=m,p):u};function b(m){return function(y){var v,g,x;return arguments.length?([v,g,x]=y,u=mV(m,[v,g,x]),p):[u(0),u(.5),u(1)]}}return p.range=b(go),p.rangeRound=b(j0),p.unknown=function(m){return arguments.length?(h=m,p):h},function(m){return f=m,i=m(e),a=m(t),s=m(r),l=i===a?0:.5/(a-i),c=a===s?0:.5/(s-a),n=a<i?-1:1,p}}function $P(){var e=Ti(gh()(Ht));return e.copy=function(){return Ci(e,$P())},Hn.apply(e,arguments)}function IP(){var e=A0(gh()).domain([.1,1,10]);return e.copy=function(){return Ci(e,IP()).base(e.base())},Hn.apply(e,arguments)}function MP(){var e=O0(gh());return e.copy=function(){return Ci(e,MP()).constant(e.constant())},Hn.apply(e,arguments)}function F0(){var e=P0(gh());return e.copy=function(){return Ci(e,F0()).exponent(e.exponent())},Hn.apply(e,arguments)}function iK(){return F0.apply(null,arguments).exponent(.5)}const tj=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Gl,scaleDiverging:$P,scaleDivergingLog:IP,scaleDivergingPow:F0,scaleDivergingSqrt:iK,scaleDivergingSymlog:MP,scaleIdentity:hP,scaleImplicit:zg,scaleLinear:Ud,scaleLog:mP,scaleOrdinal:b0,scalePoint:dl,scalePow:T0,scaleQuantile:vP,scaleQuantize:xP,scaleRadial:yP,scaleSequential:PP,scaleSequentialLog:TP,scaleSequentialPow:B0,scaleSequentialQuantile:kP,scaleSequentialSqrt:nK,scaleSequentialSymlog:CP,scaleSqrt:LV,scaleSymlog:gP,scaleThreshold:bP,scaleTime:tK,scaleUtc:rK,tickFormat:fP},Symbol.toStringTag,{value:"Module"}));var aK=so;function sK(e,t,r){for(var n=-1,i=e.length;++n<i;){var a=e[n],s=t(a);if(s!=null&&(l===void 0?s===s&&!aK(s):r(s,l)))var l=s,c=a}return c}var yh=sK;function oK(e,t){return e>t}var RP=oK,lK=yh,cK=RP,uK=mo;function dK(e){return e&&e.length?lK(e,uK,cK):void 0}var fK=dK;const vh=Me(fK);function hK(e,t){return e<t}var DP=hK,pK=yh,mK=DP,gK=mo;function yK(e){return e&&e.length?pK(e,gK,mK):void 0}var vK=yK;const xh=Me(vK);var xK=e0,bK=vn,wK=VO,_K=or;function jK(e,t){var r=_K(e)?xK:wK;return r(e,bK(t))}var SK=jK,NK=qO,EK=SK;function AK(e,t){return NK(EK(e,t),1)}var OK=AK;const PK=Me(OK);var TK=m0;function CK(e,t){return TK(e,t)}var kK=CK;const Lc=Me(kK);var yo=1e9,$K={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},U0,Je=!0,Dr="[DecimalError] ",oa=Dr+"Invalid argument: ",z0=Dr+"Exponent out of range: ",vo=Math.floor,qi=Math.pow,IK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mr,wt=1e7,Ge=7,LP=9007199254740991,Hd=vo(LP/Ge),de={};de.absoluteValue=de.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};de.comparedTo=de.cmp=function(e){var t,r,n,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(n=a.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===i?0:n>i^a.s<0?1:-1};de.decimalPlaces=de.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ge;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};de.dividedBy=de.div=function(e){return kn(this,new this.constructor(e))};de.dividedToIntegerBy=de.idiv=function(e){var t=this,r=t.constructor;return Le(kn(t,new r(e),0,1),r.precision)};de.equals=de.eq=function(e){return!this.cmp(e)};de.exponent=function(){return ft(this)};de.greaterThan=de.gt=function(e){return this.cmp(e)>0};de.greaterThanOrEqualTo=de.gte=function(e){return this.cmp(e)>=0};de.isInteger=de.isint=function(){return this.e>this.d.length-2};de.isNegative=de.isneg=function(){return this.s<0};de.isPositive=de.ispos=function(){return this.s>0};de.isZero=function(){return this.s===0};de.lessThan=de.lt=function(e){return this.cmp(e)<0};de.lessThanOrEqualTo=de.lte=function(e){return this.cmp(e)<1};de.logarithm=de.log=function(e){var t,r=this,n=r.constructor,i=n.precision,a=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(mr))throw Error(Dr+"NaN");if(r.s<1)throw Error(Dr+(r.s?"NaN":"-Infinity"));return r.eq(mr)?new n(0):(Je=!1,t=kn(Zl(r,a),Zl(e,a),a),Je=!0,Le(t,i))};de.minus=de.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zP(t,e):BP(t,(e.s=-e.s,e))};de.modulo=de.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Dr+"NaN");return r.s?(Je=!1,t=kn(r,e,0,1).times(e),Je=!0,r.minus(t)):Le(new n(r),i)};de.naturalExponential=de.exp=function(){return FP(this)};de.naturalLogarithm=de.ln=function(){return Zl(this)};de.negated=de.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};de.plus=de.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?BP(t,e):zP(t,(e.s=-e.s,e))};de.precision=de.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(oa+e);if(t=ft(i)+1,n=i.d.length-1,r=n*Ge+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};de.squareRoot=de.sqrt=function(){var e,t,r,n,i,a,s,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Dr+"NaN")}for(e=ft(l),Je=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=ln(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=vo((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=s=r+3;;)if(a=n,n=a.plus(kn(l,a,s+2)).times(.5),ln(a.d).slice(0,s)===(t=ln(n.d)).slice(0,s)){if(t=t.slice(s-3,s+1),i==s&&t=="4999"){if(Le(a,r+1,0),a.times(a).eq(l)){n=a;break}}else if(t!="9999")break;s+=4}return Je=!0,Le(n,r)};de.times=de.mul=function(e){var t,r,n,i,a,s,l,c,u,f=this,d=f.constructor,h=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=h.length,u=p.length,c<u&&(a=h,h=p,p=a,s=c,c=u,u=s),a=[],s=c+u,n=s;n--;)a.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)l=a[i]+p[n]*h[i-n-1]+t,a[i--]=l%wt|0,t=l/wt|0;a[i]=(a[i]+t)%wt|0}for(;!a[--s];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,Je?Le(e,d.precision):e};de.toDecimalPlaces=de.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(pn(e,0,yo),t===void 0?t=n.rounding:pn(t,0,8),Le(r,e+ft(r)+1,t))};de.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=xa(n,!0):(pn(e,0,yo),t===void 0?t=i.rounding:pn(t,0,8),n=Le(new i(n),e+1,t),r=xa(n,!0,e+1)),r};de.toFixed=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?xa(i):(pn(e,0,yo),t===void 0?t=a.rounding:pn(t,0,8),n=Le(new a(i),e+ft(i)+1,t),r=xa(n.abs(),!1,e+ft(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};de.toInteger=de.toint=function(){var e=this,t=e.constructor;return Le(new t(e),ft(e)+1,t.rounding)};de.toNumber=function(){return+this};de.toPower=de.pow=function(e){var t,r,n,i,a,s,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(mr);if(l=new c(l),!l.s){if(e.s<1)throw Error(Dr+"Infinity");return l}if(l.eq(mr))return l;if(n=c.precision,e.eq(mr))return Le(l,n);if(t=e.e,r=e.d.length-1,s=t>=r,a=l.s,s){if((r=f<0?-f:f)<=LP){for(i=new c(mr),t=Math.ceil(n/Ge+4),Je=!1;r%2&&(i=i.times(l),nj(i.d,t)),r=vo(r/2),r!==0;)l=l.times(l),nj(l.d,t);return Je=!0,e.s<0?new c(mr).div(i):Le(i,n)}}else if(a<0)throw Error(Dr+"NaN");return a=a<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Je=!1,i=e.times(Zl(l,n+u)),Je=!0,i=FP(i),i.s=a,i};de.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return e===void 0?(r=ft(i),n=xa(i,r<=a.toExpNeg||r>=a.toExpPos)):(pn(e,1,yo),t===void 0?t=a.rounding:pn(t,0,8),i=Le(new a(i),e,t),r=ft(i),n=xa(i,e<=r||r<=a.toExpNeg,e)),n};de.toSignificantDigits=de.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(pn(e,1,yo),t===void 0?t=n.rounding:pn(t,0,8)),Le(new n(r),e,t)};de.toString=de.valueOf=de.val=de.toJSON=de[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ft(e),r=e.constructor;return xa(e,t<=r.toExpNeg||t>=r.toExpPos)};function BP(e,t){var r,n,i,a,s,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),Je?Le(t,d):t;if(c=e.d,u=t.d,s=e.e,i=t.e,c=c.slice(),a=s-i,a){for(a<0?(n=c,a=-a,l=u.length):(n=u,i=s,l=c.length),s=Math.ceil(d/Ge),l=s>l?s+1:l+1,a>l&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for(l=c.length,a=u.length,l-a<0&&(a=l,n=u,u=c,c=n),r=0;a;)r=(c[--a]=c[a]+u[a]+r)/wt|0,c[a]%=wt;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,Je?Le(t,d):t}function pn(e,t,r){if(e!==~~e||e<t||e>r)throw Error(oa+e)}function ln(e){var t,r,n,i=e.length-1,a="",s=e[0];if(i>0){for(a+=s,t=1;t<i;t++)n=e[t]+"",r=Ge-n.length,r&&(a+=Jn(r)),a+=n;s=e[t],n=s+"",r=Ge-n.length,r&&(a+=Jn(r))}else if(s===0)return"0";for(;s%10===0;)s/=10;return a+s}var kn=function(){function e(n,i){var a,s=0,l=n.length;for(n=n.slice();l--;)a=n[l]*i+s,n[l]=a%wt|0,s=a/wt|0;return s&&n.unshift(s),n}function t(n,i,a,s){var l,c;if(a!=s)c=a>s?1:-1;else for(l=c=0;l<a;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,a){for(var s=0;a--;)n[a]-=s,s=n[a]<i[a]?1:0,n[a]=s*wt+n[a]-i[a];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,a,s){var l,c,u,f,d,h,p,b,m,y,v,g,x,j,w,_,S,E,A=n.constructor,O=n.s==i.s?1:-1,P=n.d,k=i.d;if(!n.s)return new A(n);if(!i.s)throw Error(Dr+"Division by zero");for(c=n.e-i.e,S=k.length,w=P.length,p=new A(O),b=p.d=[],u=0;k[u]==(P[u]||0);)++u;if(k[u]>(P[u]||0)&&--c,a==null?g=a=A.precision:s?g=a+(ft(n)-ft(i))+1:g=a,g<0)return new A(0);if(g=g/Ge+2|0,u=0,S==1)for(f=0,k=k[0],g++;(u<w||f)&&g--;u++)x=f*wt+(P[u]||0),b[u]=x/k|0,f=x%k|0;else{for(f=wt/(k[0]+1)|0,f>1&&(k=e(k,f),P=e(P,f),S=k.length,w=P.length),j=S,m=P.slice(0,S),y=m.length;y<S;)m[y++]=0;E=k.slice(),E.unshift(0),_=k[0],k[1]>=wt/2&&++_;do f=0,l=t(k,m,S,y),l<0?(v=m[0],S!=y&&(v=v*wt+(m[1]||0)),f=v/_|0,f>1?(f>=wt&&(f=wt-1),d=e(k,f),h=d.length,y=m.length,l=t(d,m,h,y),l==1&&(f--,r(d,S<h?E:k,h))):(f==0&&(l=f=1),d=k.slice()),h=d.length,h<y&&d.unshift(0),r(m,d,y),l==-1&&(y=m.length,l=t(k,m,S,y),l<1&&(f++,r(m,S<y?E:k,y))),y=m.length):l===0&&(f++,m=[0]),b[u++]=f,l&&m[0]?m[y++]=P[j]||0:(m=[P[j]],y=1);while((j++<w||m[0]!==void 0)&&g--)}return b[0]||b.shift(),p.e=c,Le(p,s?a+ft(p)+1:a)}}();function FP(e,t){var r,n,i,a,s,l,c=0,u=0,f=e.constructor,d=f.precision;if(ft(e)>16)throw Error(z0+ft(e));if(!e.s)return new f(mr);for(Je=!1,l=d,s=new f(.03125);e.abs().gte(.1);)e=e.times(s),u+=5;for(n=Math.log(qi(2,u))/Math.LN10*2+5|0,l+=n,r=i=a=new f(mr),f.precision=l;;){if(i=Le(i.times(e),l),r=r.times(++c),s=a.plus(kn(i,r,l)),ln(s.d).slice(0,l)===ln(a.d).slice(0,l)){for(;u--;)a=Le(a.times(a),l);return f.precision=d,t==null?(Je=!0,Le(a,d)):a}a=s}}function ft(e){for(var t=e.e*Ge,r=e.d[0];r>=10;r/=10)t++;return t}function Up(e,t,r){if(t>e.LN10.sd())throw Je=!0,r&&(e.precision=r),Error(Dr+"LN10 precision limit exceeded");return Le(new e(e.LN10),t)}function Jn(e){for(var t="";e--;)t+="0";return t}function Zl(e,t){var r,n,i,a,s,l,c,u,f,d=1,h=10,p=e,b=p.d,m=p.constructor,y=m.precision;if(p.s<1)throw Error(Dr+(p.s?"NaN":"-Infinity"));if(p.eq(mr))return new m(0);if(t==null?(Je=!1,u=y):u=t,p.eq(10))return t==null&&(Je=!0),Up(m,u);if(u+=h,m.precision=u,r=ln(b),n=r.charAt(0),a=ft(p),Math.abs(a)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=ln(p.d),n=r.charAt(0),d++;a=ft(p),n>1?(p=new m("0."+r),a++):p=new m(n+"."+r.slice(1))}else return c=Up(m,u+2,y).times(a+""),p=Zl(new m(n+"."+r.slice(1)),u-h).plus(c),m.precision=y,t==null?(Je=!0,Le(p,y)):p;for(l=s=p=kn(p.minus(mr),p.plus(mr),u),f=Le(p.times(p),u),i=3;;){if(s=Le(s.times(f),u),c=l.plus(kn(s,new m(i),u)),ln(c.d).slice(0,u)===ln(l.d).slice(0,u))return l=l.times(2),a!==0&&(l=l.plus(Up(m,u+2,y).times(a+""))),l=kn(l,new m(d),u),m.precision=y,t==null?(Je=!0,Le(l,y)):l;l=c,i+=2}}function rj(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=vo(r/Ge),e.d=[],n=(r+1)%Ge,r<0&&(n+=Ge),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ge;n<i;)e.d.push(+t.slice(n,n+=Ge));t=t.slice(n),n=Ge-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Je&&(e.e>Hd||e.e<-Hd))throw Error(z0+r)}else e.s=0,e.e=0,e.d=[0];return e}function Le(e,t,r){var n,i,a,s,l,c,u,f,d=e.d;for(s=1,a=d[0];a>=10;a/=10)s++;if(n=t-s,n<0)n+=Ge,i=t,u=d[f=0];else{if(f=Math.ceil((n+1)/Ge),a=d.length,f>=a)return e;for(u=a=d[f],s=1;a>=10;a/=10)s++;n%=Ge,i=n-Ge+s}if(r!==void 0&&(a=qi(10,s-i-1),l=u/a%10|0,c=t<0||d[f+1]!==void 0||u%a,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/qi(10,s-i):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(a=ft(e),d.length=1,t=t-a-1,d[0]=qi(10,(Ge-t%Ge)%Ge),e.e=vo(-t/Ge)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,a=1,f--):(d.length=f+1,a=qi(10,Ge-n),d[f]=i>0?(u/qi(10,s-i)%qi(10,i)|0)*a:0),c)for(;;)if(f==0){(d[0]+=a)==wt&&(d[0]=1,++e.e);break}else{if(d[f]+=a,d[f]!=wt)break;d[f--]=0,a=1}for(n=d.length;d[--n]===0;)d.pop();if(Je&&(e.e>Hd||e.e<-Hd))throw Error(z0+ft(e));return e}function zP(e,t){var r,n,i,a,s,l,c,u,f,d,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Je?Le(t,p):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),s=u-n,s){for(f=s<0,f?(r=c,s=-s,l=d.length):(r=d,n=u,l=c.length),i=Math.max(Math.ceil(p/Ge),l)+2,s>i&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=d.length,f=i<l,f&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){f=c[i]<d[i];break}s=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>s;){if(c[--i]<d[i]){for(a=i;a&&c[--a]===0;)c[a]=wt-1;--c[a],c[i]+=wt}c[i]-=d[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Je?Le(t,p):t):new h(0)}function xa(e,t,r){var n,i=ft(e),a=ln(e.d),s=a.length;return t?(r&&(n=r-s)>0?a=a.charAt(0)+"."+a.slice(1)+Jn(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Jn(-i-1)+a,r&&(n=r-s)>0&&(a+=Jn(n))):i>=s?(a+=Jn(i+1-s),r&&(n=r-i-1)>0&&(a=a+"."+Jn(n))):((n=i+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-s)>0&&(i+1===s&&(a+="."),a+=Jn(n))),e.s<0?"-"+a:a}function nj(e,t){if(e.length>t)return e.length=t,!0}function UP(e){var t,r,n;function i(a){var s=this;if(!(s instanceof i))return new i(a);if(s.constructor=i,a instanceof i){s.s=a.s,s.e=a.e,s.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(oa+a);if(a>0)s.s=1;else if(a<0)a=-a,s.s=-1;else{s.s=0,s.e=0,s.d=[0];return}if(a===~~a&&a<1e7){s.e=0,s.d=[a];return}return rj(s,a.toString())}else if(typeof a!="string")throw Error(oa+a);if(a.charCodeAt(0)===45?(a=a.slice(1),s.s=-1):s.s=1,IK.test(a))rj(s,a);else throw Error(oa+a)}if(i.prototype=de,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=UP,i.config=i.set=MK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function MK(e){if(!e||typeof e!="object")throw Error(Dr+"Object expected");var t,r,n,i=["precision",1,yo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(vo(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(oa+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(oa+r+": "+n);return this}var U0=UP($K);mr=new U0(1);const De=U0;function RK(e){return FK(e)||BK(e)||LK(e)||DK()}function DK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LK(e,t){if(e){if(typeof e=="string")return Vg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vg(e,t)}}function BK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function FK(e){if(Array.isArray(e))return Vg(e)}function Vg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zK=function(t){return t},qP={},WP=function(t){return t===qP},ij=function(t){return function r(){return arguments.length===0||arguments.length===1&&WP(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},UK=function e(t,r){return t===1?r:ij(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var s=i.filter(function(l){return l!==qP}).length;return s>=t?r.apply(void 0,i):e(t-s,ij(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=i.map(function(d){return WP(d)?c.shift():d});return r.apply(void 0,RK(f).concat(c))}))})},bh=function(t){return UK(t.length,t)},Hg=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},qK=bh(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),WK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return zK;var i=r.reverse(),a=i[0],s=i.slice(1);return function(){return s.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},Kg=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},VP=function(t){var r=null,n=null;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return r&&a.every(function(l,c){return l===r[c]})||(r=a,n=t.apply(void 0,a)),n}};function VK(e){var t;return e===0?t=1:t=Math.floor(new De(e).abs().log(10).toNumber())+1,t}function HK(e,t,r){for(var n=new De(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var KK=bh(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),GK=bh(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),XK=bh(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const wh={rangeStep:HK,getDigitCount:VK,interpolateNumber:KK,uninterpolateNumber:GK,uninterpolateTruncation:XK};function Gg(e){return QK(e)||JK(e)||HP(e)||YK()}function YK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function QK(e){if(Array.isArray(e))return Xg(e)}function ec(e,t){return tG(e)||eG(e,t)||HP(e,t)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HP(e,t){if(e){if(typeof e=="string")return Xg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xg(e,t)}}function Xg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eG(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,a=void 0;try{for(var s=e[Symbol.iterator](),l;!(n=(l=s.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,a=c}finally{try{!n&&s.return!=null&&s.return()}finally{if(i)throw a}}return r}}function tG(e){if(Array.isArray(e))return e}function KP(e){var t=ec(e,2),r=t[0],n=t[1],i=r,a=n;return r>n&&(i=n,a=r),[i,a]}function GP(e,t,r){if(e.lte(0))return new De(0);var n=wh.getDigitCount(e.toNumber()),i=new De(10).pow(n),a=e.div(i),s=n!==1?.05:.1,l=new De(Math.ceil(a.div(s).toNumber())).add(r).mul(s),c=l.mul(i);return t?c:new De(Math.ceil(c))}function rG(e,t,r){var n=1,i=new De(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new De(10).pow(wh.getDigitCount(e)-1),i=new De(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new De(Math.floor(e)))}else e===0?i=new De(Math.floor((t-1)/2)):r||(i=new De(Math.floor(e)));var s=Math.floor((t-1)/2),l=WK(qK(function(c){return i.add(new De(c-s).mul(n)).toNumber()}),Hg);return l(0,t)}function XP(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new De(0),tickMin:new De(0),tickMax:new De(0)};var a=GP(new De(t).sub(e).div(r-1),n,i),s;e<=0&&t>=0?s=new De(0):(s=new De(e).add(t).div(2),s=s.sub(new De(s).mod(a)));var l=Math.ceil(s.sub(e).div(a).toNumber()),c=Math.ceil(new De(t).sub(s).div(a).toNumber()),u=l+c+1;return u>r?XP(e,t,r,n,i+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:a,tickMin:s.sub(new De(l).mul(a)),tickMax:s.add(new De(c).mul(a))})}function nG(e){var t=ec(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),l=KP([r,n]),c=ec(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(Gg(Hg(0,i-1).map(function(){return 1/0}))):[].concat(Gg(Hg(0,i-1).map(function(){return-1/0})),[f]);return r>n?Kg(d):d}if(u===f)return rG(u,i,a);var h=XP(u,f,s,a),p=h.step,b=h.tickMin,m=h.tickMax,y=wh.rangeStep(b,m.add(new De(.1).mul(p)),p);return r>n?Kg(y):y}function iG(e,t){var r=ec(e,2),n=r[0],i=r[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=KP([n,i]),l=ec(s,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var f=Math.max(t,2),d=GP(new De(u).sub(c).div(f-1),a,0),h=[].concat(Gg(wh.rangeStep(new De(c),new De(u).sub(new De(.99).mul(d)),d)),[u]);return n>i?Kg(h):h}var aG=VP(nG),sG=VP(iG),oG="Invariant failed";function ba(e,t){throw new Error(oG)}var lG=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Rs(e){"@babel/helpers - typeof";return Rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rs(e)}function Kd(){return Kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kd.apply(this,arguments)}function cG(e,t){return hG(e)||fG(e,t)||dG(e,t)||uG()}function uG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dG(e,t){if(e){if(typeof e=="string")return aj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aj(e,t)}}function aj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fG(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function hG(e){if(Array.isArray(e))return e}function pG(e,t){if(e==null)return{};var r=mG(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mG(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yG(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QP(n.key),n)}}function vG(e,t,r){return t&&yG(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xG(e,t,r){return t=Gd(t),bG(e,YP()?Reflect.construct(t,r||[],Gd(e).constructor):t.apply(e,r))}function bG(e,t){if(t&&(Rs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wG(e)}function wG(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function YP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(YP=function(){return!!e})()}function Gd(e){return Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Gd(e)}function _G(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yg(e,t)}function Yg(e,t){return Yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Yg(e,t)}function JP(e,t,r){return t=QP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QP(e){var t=jG(e,"string");return Rs(t)=="symbol"?t:t+""}function jG(e,t){if(Rs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bc=function(e){function t(){return gG(this,t),xG(this,t,arguments)}return _G(t,e),vG(t,[{key:"render",value:function(){var n=this.props,i=n.offset,a=n.layout,s=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,h=pG(n,lG),p=ye(h,!1);this.props.direction==="x"&&f.type!=="number"&&ba();var b=c.map(function(m){var y=u(m,l),v=y.x,g=y.y,x=y.value,j=y.errorVal;if(!j)return null;var w=[],_,S;if(Array.isArray(j)){var E=cG(j,2);_=E[0],S=E[1]}else _=S=j;if(a==="vertical"){var A=f.scale,O=g+i,P=O+s,k=O-s,M=A(x-_),L=A(x+S);w.push({x1:L,y1:P,x2:L,y2:k}),w.push({x1:M,y1:O,x2:L,y2:O}),w.push({x1:M,y1:P,x2:M,y2:k})}else if(a==="horizontal"){var B=d.scale,D=v+i,q=D-s,R=D+s,I=B(x-_),z=B(x+S);w.push({x1:q,y1:z,x2:R,y2:z}),w.push({x1:D,y1:I,x2:D,y2:z}),w.push({x1:q,y1:I,x2:R,y2:I})}return $.createElement(Ce,Kd({className:"recharts-errorBar",key:"bar-".concat(w.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},p),w.map(function(W){return $.createElement("line",Kd({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return $.createElement(Ce,{className:"recharts-errorBars"},b)}}])}($.Component);JP(Bc,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});JP(Bc,"displayName","ErrorBar");function tc(e){"@babel/helpers - typeof";return tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tc(e)}function sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sj(Object(r),!0).forEach(function(n){SG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SG(e,t,r){return t=NG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NG(e){var t=EG(e,"string");return tc(t)=="symbol"?t:t+""}function EG(e,t){if(tc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(tc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZP=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,s=dr(r,vi);if(!s)return null;var l=vi.defaultProps,c=l!==void 0?Mi(Mi({},l),s.props):{},u;return s.props&&s.props.payload?u=s.props&&s.props.payload:a==="children"?u=(n||[]).reduce(function(f,d){var h=d.item,p=d.props,b=p.sectors||p.data||[];return f.concat(b.map(function(m){return{type:s.props.iconType||h.props.legendType,value:m.name,color:m.fill,payload:m}}))},[]):u=(n||[]).map(function(f){var d=f.item,h=d.type.defaultProps,p=h!==void 0?Mi(Mi({},h),d.props):{},b=p.dataKey,m=p.name,y=p.legendType,v=p.hide;return{inactive:v,dataKey:b,type:c.iconType||y||"square",color:q0(d),value:m||b,payload:p}}),Mi(Mi(Mi({},c),vi.getWithHeight(s,i)),{},{payload:u,item:s})};function rc(e){"@babel/helpers - typeof";return rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(e)}function oj(e){return TG(e)||PG(e)||OG(e)||AG()}function AG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OG(e,t){if(e){if(typeof e=="string")return Jg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jg(e,t)}}function PG(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TG(e){if(Array.isArray(e))return Jg(e)}function Jg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lj(Object(r),!0).forEach(function(n){ys(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ys(e,t,r){return t=CG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=kG(e,"string");return rc(t)=="symbol"?t:t+""}function kG(e,t){if(rc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(rc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yt(e,t,r){return Ne(e)||Ne(t)?r:xt(t)?vr(e,t,r):je(t)?t(e):r}function fl(e,t,r,n){var i=PK(e,function(l){return yt(l,t)});if(r==="number"){var a=i.filter(function(l){return se(l)||parseFloat(l)});return a.length?[xh(a),vh(a)]:[1/0,-1/0]}var s=n?i.filter(function(l){return!Ne(l)}):i;return s.map(function(l){return xt(l)||l instanceof Date?l:""})}var $G=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,u=0;u<l;u++){var f=u>0?i[u-1].coordinate:i[l-1].coordinate,d=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,p=void 0;if(Wt(d-f)!==Wt(h-d)){var b=[];if(Wt(h-d)===Wt(c[1]-c[0])){p=h;var m=d+c[1]-c[0];b[0]=Math.min(m,(m+f)/2),b[1]=Math.max(m,(m+f)/2)}else{p=f;var y=h+c[1]-c[0];b[0]=Math.min(d,(y+d)/2),b[1]=Math.max(d,(y+d)/2)}var v=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>v[0]&&t<=v[1]||t>=b[0]&&t<=b[1]){s=i[u].index;break}}else{var g=Math.min(f,h),x=Math.max(f,h);if(t>(g+d)/2&&t<=(x+d)/2){s=i[u].index;break}}}else for(var j=0;j<l;j++)if(j===0&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j>0&&j<l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2&&t<=(n[j].coordinate+n[j+1].coordinate)/2||j===l-1&&t>(n[j].coordinate+n[j-1].coordinate)/2){s=n[j].index;break}return s},q0=function(t){var r,n=t,i=n.type.displayName,a=(r=t.type)!==null&&r!==void 0&&r.defaultProps?it(it({},t.type.defaultProps),t.props):t.props,s=a.stroke,l=a.fill,c;switch(i){case"Line":c=s;break;case"Area":case"Radar":c=s&&s!=="none"?s:l;break;default:c=l;break}return c},IG=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var s={},l=Object.keys(a),c=0,u=l.length;c<u;c++)for(var f=a[l[c]].stackGroups,d=Object.keys(f),h=0,p=d.length;h<p;h++){var b=f[d[h]],m=b.items,y=b.cateAxisId,v=m.filter(function(S){return Cn(S.type).indexOf("Bar")>=0});if(v&&v.length){var g=v[0].type.defaultProps,x=g!==void 0?it(it({},g),v[0].props):v[0].props,j=x.barSize,w=x[y];s[w]||(s[w]=[]);var _=Ne(j)?r:j;s[w].push({item:v[0],stackList:v.slice(1),barSize:Ne(_)?void 0:Vt(_,n,0)})}}return s},MG=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,a=t.sizeList,s=a===void 0?[]:a,l=t.maxBarSize,c=s.length;if(c<1)return null;var u=Vt(r,i,0,!0),f,d=[];if(s[0].barSize===+s[0].barSize){var h=!1,p=i/c,b=s.reduce(function(j,w){return j+w.barSize||0},0);b+=(c-1)*u,b>=i&&(b-=(c-1)*u,u=0),b>=i&&p>0&&(h=!0,p*=.9,b=c*p);var m=(i-b)/2>>0,y={offset:m-u,size:0};f=s.reduce(function(j,w){var _={item:w.item,position:{offset:y.offset+y.size+u,size:h?p:w.barSize}},S=[].concat(oj(j),[_]);return y=S[S.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:y})}),S},d)}else{var v=Vt(n,i,0,!0);i-2*v-(c-1)*u<=0&&(u=0);var g=(i-2*v-(c-1)*u)/c;g>1&&(g>>=0);var x=l===+l?Math.min(g,l):g;f=s.reduce(function(j,w,_){var S=[].concat(oj(j),[{item:w.item,position:{offset:v+(g+u)*_+(g-x)/2,size:x}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(E){S.push({item:E,position:S[S.length-1].position})}),S},d)}return f},RG=function(t,r,n,i){var a=n.children,s=n.width,l=n.margin,c=s-(l.left||0)-(l.right||0),u=ZP({children:a,legendWidth:c});if(u){var f=i||{},d=f.width,h=f.height,p=u.align,b=u.verticalAlign,m=u.layout;if((m==="vertical"||m==="horizontal"&&b==="middle")&&p!=="center"&&se(t[p]))return it(it({},t),{},ys({},p,t[p]+(d||0)));if((m==="horizontal"||m==="vertical"&&p==="center")&&b!=="middle"&&se(t[b]))return it(it({},t),{},ys({},b,t[b]+(h||0)))}return t},DG=function(t,r,n){return Ne(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},e2=function(t,r,n,i,a){var s=r.props.children,l=xr(s,Bc).filter(function(u){return DG(i,a,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=yt(f,n);if(Ne(d))return u;var h=Array.isArray(d)?[xh(d),vh(d)]:[d,d],p=c.reduce(function(b,m){var y=yt(f,m,0),v=h[0]-Math.abs(Array.isArray(y)?y[0]:y),g=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,b[0]),Math.max(g,b[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},LG=function(t,r,n,i,a){var s=r.map(function(l){return e2(t,l,n,a,i)}).filter(function(l){return!Ne(l)});return s&&s.length?s.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},t2=function(t,r,n,i,a){var s=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&e2(t,c,u,i)||fl(t,u,n,a)});if(n==="number")return s.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return s.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},r2=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},n2=function(t,r,n,i){if(i)return t.map(function(c){return c.coordinate});var a,s,l=t.map(function(c){return c.coordinate===r&&(a=!0),c.coordinate===n&&(s=!0),c.coordinate});return a||l.push(r),s||l.push(n),l},Pn=function(t,r,n){if(!t)return null;var i=t.scale,a=t.duplicateDomain,s=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&s==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Wt(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var h=a?a.indexOf(d):d;return{coordinate:i(h)+u,value:d,offset:u}});return f.filter(function(d){return!kc(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,h){return{coordinate:i(d)+u,value:d,index:h,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(d){return{coordinate:i(d)+u,value:d,offset:u}}):i.domain().map(function(d,h){return{coordinate:i(d)+u,value:a?a[d]:d,index:h,offset:u}})},qp=new WeakMap,_u=function(t,r){if(typeof r!="function")return t;qp.has(t)||qp.set(t,new WeakMap);var n=qp.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},i2=function(t,r,n){var i=t.scale,a=t.type,s=t.layout,l=t.axisType;if(i==="auto")return s==="radial"&&l==="radiusAxis"?{scale:Gl(),realScaleType:"band"}:s==="radial"&&l==="angleAxis"?{scale:Ud(),realScaleType:"linear"}:a==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:dl(),realScaleType:"point"}:a==="category"?{scale:Gl(),realScaleType:"band"}:{scale:Ud(),realScaleType:"linear"};if(ga(i)){var c="scale".concat(ih(i));return{scale:(tj[c]||dl)(),realScaleType:tj[c]?c:"point"}}return je(i)?{scale:i}:{scale:dl(),realScaleType:"point"}},cj=1e-4,a2=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),a=Math.min(i[0],i[1])-cj,s=Math.max(i[0],i[1])+cj,l=t(r[0]),c=t(r[n-1]);(l<a||l>s||c<a||c>s)&&t.domain([r[0],r[n-1]])}},BG=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},FG=function(t,r){if(!r||r.length!==2||!se(r[0])||!se(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),a=[t[0],t[1]];return(!se(t[0])||t[0]<n)&&(a[0]=n),(!se(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<n&&(a[1]=n),a},zG=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0,l=0;l<r;++l){var c=kc(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=a,t[l][n][1]=a+c,a=t[l][n][1]):(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1])}},UG=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var a=0,s=0;s<r;++s){var l=kc(t[s][n][1])?t[s][n][0]:t[s][n][1];l>=0?(t[s][n][0]=a,t[s][n][1]=a+l,a=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},qG={sign:zG,expand:l6,none:Os,silhouette:c6,wiggle:u6,positive:UG},WG=function(t,r,n){var i=r.map(function(l){return l.props.dataKey}),a=qG[n],s=o6().keys(i).value(function(l,c){return+yt(l,c,0)}).order(_g).offset(a);return s(t)},VG=function(t,r,n,i,a,s){if(!t)return null;var l=s?r.reverse():r,c={},u=l.reduce(function(d,h){var p,b=(p=h.type)!==null&&p!==void 0&&p.defaultProps?it(it({},h.type.defaultProps),h.props):h.props,m=b.stackId,y=b.hide;if(y)return d;var v=b[n],g=d[v]||{hasStack:!1,stackGroups:{}};if(xt(m)){var x=g.stackGroups[m]||{numericAxisId:n,cateAxisId:i,items:[]};x.items.push(h),g.hasStack=!0,g.stackGroups[m]=x}else g.stackGroups[fo("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[h]};return it(it({},d),{},ys({},v,g))},c),f={};return Object.keys(u).reduce(function(d,h){var p=u[h];if(p.hasStack){var b={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(m,y){var v=p.stackGroups[y];return it(it({},m),{},ys({},y,{numericAxisId:n,cateAxisId:i,items:v.items,stackedData:WG(t,v.items,a)}))},b)}return it(it({},d),{},ys({},h,p))},f)},s2=function(t,r){var n=r.realScaleType,i=r.type,a=r.tickCount,s=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&s&&(s[0]==="auto"||s[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=aG(u,a,l);return t.domain([xh(f),vh(f)]),{niceTicks:f}}if(a&&i==="number"){var d=t.domain(),h=sG(d,a,l);return{niceTicks:h}}return null};function uj(e){var t=e.axis,r=e.ticks,n=e.bandSize,i=e.entry,a=e.index,s=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ne(i[t.dataKey])){var l=wd(r,"value",i[t.dataKey]);if(l)return l.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var c=yt(i,Ne(s)?t.dataKey:s);return Ne(c)?null:t.scale(c)}var dj=function(t){var r=t.axis,n=t.ticks,i=t.offset,a=t.bandSize,s=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=yt(s,r.dataKey,r.domain[l]);return Ne(c)?null:r.scale(c)-a/2+i},HG=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]);return i<=0&&a>=0?0:a<0?a:i}return n[0]},KG=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?it(it({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(xt(a)){var s=r[a];if(s){var l=s.items.indexOf(t);return l>=0?s.stackedData[l]:null}}return null},GG=function(t){return t.reduce(function(r,n){return[xh(n.concat([r[0]]).filter(se)),vh(n.concat([r[1]]).filter(se))]},[1/0,-1/0])},o2=function(t,r,n){return Object.keys(t).reduce(function(i,a){var s=t[a],l=s.stackedData,c=l.reduce(function(u,f){var d=GG(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},fj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qg=function(t,r,n){if(je(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(se(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(fj.test(t[0])){var a=+fj.exec(t[0])[1];i[0]=r[0]-a}else je(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(se(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(hj.test(t[1])){var s=+hj.exec(t[1])[1];i[1]=r[1]+s}else je(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},Xd=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var a=y0(r,function(d){return d.coordinate}),s=1/0,l=1,c=a.length;l<c;l++){var u=a[l],f=a[l-1];s=Math.min((u.coordinate||0)-(f.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0},pj=function(t,r,n){return!t||!t.length||Lc(t,vr(n,"type.defaultProps.domain"))?r:t},l2=function(t,r){var n=t.type.defaultProps?it(it({},t.type.defaultProps),t.props):t.props,i=n.dataKey,a=n.name,s=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return it(it({},ye(t,!1)),{},{dataKey:i,unit:s,formatter:l,name:a||i,color:q0(t),value:yt(r,i),type:c,payload:r,chartType:u,hide:f})};function nc(e){"@babel/helpers - typeof";return nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(e)}function mj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mj(Object(r),!0).forEach(function(n){c2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c2(e,t,r){return t=XG(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XG(e){var t=YG(e,"string");return nc(t)=="symbol"?t:t+""}function YG(e,t){if(nc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JG(e,t){return tX(e)||eX(e,t)||ZG(e,t)||QG()}function QG(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZG(e,t){if(e){if(typeof e=="string")return gj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gj(e,t)}}function gj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function tX(e){if(Array.isArray(e))return e}var Yd=Math.PI/180,rX=function(t){return t*180/Math.PI},Ve=function(t,r,n,i){return{x:t+Math.cos(-Yd*i)*n,y:r+Math.sin(-Yd*i)*n}},u2=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},nX=function(t,r,n,i,a){var s=t.width,l=t.height,c=t.startAngle,u=t.endAngle,f=Vt(t.cx,s,s/2),d=Vt(t.cy,l,l/2),h=u2(s,l,n),p=Vt(t.innerRadius,h,0),b=Vt(t.outerRadius,h,h*.8),m=Object.keys(r);return m.reduce(function(y,v){var g=r[v],x=g.domain,j=g.reversed,w;if(Ne(g.range))i==="angleAxis"?w=[c,u]:i==="radiusAxis"&&(w=[p,b]),j&&(w=[w[1],w[0]]);else{w=g.range;var _=w,S=JG(_,2);c=S[0],u=S[1]}var E=i2(g,a),A=E.realScaleType,O=E.scale;O.domain(x).range(w),a2(O);var P=s2(O,_n(_n({},g),{},{realScaleType:A})),k=_n(_n(_n({},g),P),{},{range:w,radius:b,realScaleType:A,scale:O,cx:f,cy:d,innerRadius:p,outerRadius:b,startAngle:c,endAngle:u});return _n(_n({},y),{},c2({},v,k))},{})},iX=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(i-s,2))},aX=function(t,r){var n=t.x,i=t.y,a=r.cx,s=r.cy,l=iX({x:n,y:i},{x:a,y:s});if(l<=0)return{radius:l};var c=(n-a)/l,u=Math.acos(c);return i>s&&(u=2*Math.PI-u),{radius:l,angle:rX(u),angleInRadian:u}},sX=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),a=Math.floor(n/360),s=Math.min(i,a);return{startAngle:r-s*360,endAngle:n-s*360}},oX=function(t,r){var n=r.startAngle,i=r.endAngle,a=Math.floor(n/360),s=Math.floor(i/360),l=Math.min(a,s);return t+l*360},yj=function(t,r){var n=t.x,i=t.y,a=aX({x:n,y:i},r),s=a.radius,l=a.angle,c=r.innerRadius,u=r.outerRadius;if(s<c||s>u)return!1;if(s===0)return!0;var f=sX(r),d=f.startAngle,h=f.endAngle,p=l,b;if(d<=h){for(;p>h;)p-=360;for(;p<d;)p+=360;b=p>=d&&p<=h}else{for(;p>d;)p-=360;for(;p<h;)p+=360;b=p>=h&&p<=d}return b?_n(_n({},r),{},{radius:s,angle:oX(p,r)}):null},d2=function(t){return!N.isValidElement(t)&&!je(t)&&typeof t!="boolean"?t.className:""};function ic(e){"@babel/helpers - typeof";return ic=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ic(e)}var lX=["offset"];function cX(e){return hX(e)||fX(e)||dX(e)||uX()}function uX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dX(e,t){if(e){if(typeof e=="string")return Zg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zg(e,t)}}function fX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hX(e){if(Array.isArray(e))return Zg(e)}function Zg(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pX(e,t){if(e==null)return{};var r=mX(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function mX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vj(Object(r),!0).forEach(function(n){gX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gX(e,t,r){return t=yX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=vX(e,"string");return ic(t)=="symbol"?t:t+""}function vX(e,t){if(ic(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ic(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ac(){return ac=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ac.apply(this,arguments)}var xX=function(t){var r=t.value,n=t.formatter,i=Ne(t.children)?r:t.children;return je(n)?n(i):i},bX=function(t,r){var n=Wt(r-t),i=Math.min(Math.abs(r-t),360);return n*i},wX=function(t,r,n){var i=t.position,a=t.viewBox,s=t.offset,l=t.className,c=a,u=c.cx,f=c.cy,d=c.innerRadius,h=c.outerRadius,p=c.startAngle,b=c.endAngle,m=c.clockWise,y=(d+h)/2,v=bX(p,b),g=v>=0?1:-1,x,j;i==="insideStart"?(x=p+g*s,j=m):i==="insideEnd"?(x=b-g*s,j=!m):i==="end"&&(x=b+g*s,j=m),j=v<=0?j:!j;var w=Ve(u,f,y,x),_=Ve(u,f,y,x+(j?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(j?0:1,`,
    `).concat(_.x,",").concat(_.y),E=Ne(t.id)?fo("recharts-radial-line-"):t.id;return $.createElement("text",ac({},n,{dominantBaseline:"central",className:Ee("recharts-radial-bar-label",l)}),$.createElement("defs",null,$.createElement("path",{id:E,d:S})),$.createElement("textPath",{xlinkHref:"#".concat(E)},r))},_X=function(t){var r=t.viewBox,n=t.offset,i=t.position,a=r,s=a.cx,l=a.cy,c=a.innerRadius,u=a.outerRadius,f=a.startAngle,d=a.endAngle,h=(f+d)/2;if(i==="outside"){var p=Ve(s,l,u+n,h),b=p.x,m=p.y;return{x:b,y:m,textAnchor:b>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+u)/2,v=Ve(s,l,y,h),g=v.x,x=v.y;return{x:g,y:x,textAnchor:"middle",verticalAnchor:"middle"}},jX=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,a=t.position,s=r,l=s.x,c=s.y,u=s.width,f=s.height,d=f>=0?1:-1,h=d*i,p=d>0?"end":"start",b=d>0?"start":"end",m=u>=0?1:-1,y=m*i,v=m>0?"end":"start",g=m>0?"start":"end";if(a==="top"){var x={x:l+u/2,y:c-d*i,textAnchor:"middle",verticalAnchor:p};return pt(pt({},x),n?{height:Math.max(c-n.y,0),width:u}:{})}if(a==="bottom"){var j={x:l+u/2,y:c+f+h,textAnchor:"middle",verticalAnchor:b};return pt(pt({},j),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(a==="left"){var w={x:l-y,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return pt(pt({},w),n?{width:Math.max(w.x-n.x,0),height:f}:{})}if(a==="right"){var _={x:l+u+y,y:c+f/2,textAnchor:g,verticalAnchor:"middle"};return pt(pt({},_),n?{width:Math.max(n.x+n.width-_.x,0),height:f}:{})}var S=n?{width:u,height:f}:{};return a==="insideLeft"?pt({x:l+y,y:c+f/2,textAnchor:g,verticalAnchor:"middle"},S):a==="insideRight"?pt({x:l+u-y,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},S):a==="insideTop"?pt({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:b},S):a==="insideBottom"?pt({x:l+u/2,y:c+f-h,textAnchor:"middle",verticalAnchor:p},S):a==="insideTopLeft"?pt({x:l+y,y:c+h,textAnchor:g,verticalAnchor:b},S):a==="insideTopRight"?pt({x:l+u-y,y:c+h,textAnchor:v,verticalAnchor:b},S):a==="insideBottomLeft"?pt({x:l+y,y:c+f-h,textAnchor:g,verticalAnchor:p},S):a==="insideBottomRight"?pt({x:l+u-y,y:c+f-h,textAnchor:v,verticalAnchor:p},S):oo(a)&&(se(a.x)||Qi(a.x))&&(se(a.y)||Qi(a.y))?pt({x:l+Vt(a.x,u),y:c+Vt(a.y,f),textAnchor:"end",verticalAnchor:"end"},S):pt({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},S)},SX=function(t){return"cx"in t&&se(t.cx)};function jt(e){var t=e.offset,r=t===void 0?5:t,n=pX(e,lX),i=pt({offset:r},n),a=i.viewBox,s=i.position,l=i.value,c=i.children,u=i.content,f=i.className,d=f===void 0?"":f,h=i.textBreakAll;if(!a||Ne(l)&&Ne(c)&&!N.isValidElement(u)&&!je(u))return null;if(N.isValidElement(u))return N.cloneElement(u,i);var p;if(je(u)){if(p=N.createElement(u,i),N.isValidElement(p))return p}else p=xX(i);var b=SX(a),m=ye(i,!0);if(b&&(s==="insideStart"||s==="insideEnd"||s==="end"))return wX(i,p,m);var y=b?_X(i):jX(i);return $.createElement(va,ac({className:Ee("recharts-label",d)},m,y,{breakAll:h}),p)}jt.displayName="Label";var f2=function(t){var r=t.cx,n=t.cy,i=t.angle,a=t.startAngle,s=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,h=t.y,p=t.top,b=t.left,m=t.width,y=t.height,v=t.clockWise,g=t.labelViewBox;if(g)return g;if(se(m)&&se(y)){if(se(d)&&se(h))return{x:d,y:h,width:m,height:y};if(se(p)&&se(b))return{x:p,y:b,width:m,height:y}}return se(d)&&se(h)?{x:d,y:h,width:0,height:0}:se(r)&&se(n)?{cx:r,cy:n,startAngle:a||i||0,endAngle:s||i||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},NX=function(t,r){return t?t===!0?$.createElement(jt,{key:"label-implicit",viewBox:r}):xt(t)?$.createElement(jt,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===jt?N.cloneElement(t,{key:"label-implicit",viewBox:r}):$.createElement(jt,{key:"label-implicit",content:t,viewBox:r}):je(t)?$.createElement(jt,{key:"label-implicit",content:t,viewBox:r}):oo(t)?$.createElement(jt,ac({viewBox:r},t,{key:"label-implicit"})):null:null},EX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,a=f2(t),s=xr(i,jt).map(function(c,u){return N.cloneElement(c,{viewBox:r||a,key:"label-".concat(u)})});if(!n)return s;var l=NX(t.label,r||a);return[l].concat(cX(s))};jt.parseViewBox=f2;jt.renderCallByParent=EX;function AX(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var OX=AX;const PX=Me(OX);function sc(e){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sc(e)}var TX=["valueAccessor"],CX=["data","dataKey","clockWise","id","textBreakAll"];function kX(e){return RX(e)||MX(e)||IX(e)||$X()}function $X(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IX(e,t){if(e){if(typeof e=="string")return ey(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ey(e,t)}}function MX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RX(e){if(Array.isArray(e))return ey(e)}function ey(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jd(){return Jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jd.apply(this,arguments)}function xj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xj(Object(r),!0).forEach(function(n){DX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DX(e,t,r){return t=LX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LX(e){var t=BX(e,"string");return sc(t)=="symbol"?t:t+""}function BX(e,t){if(sc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wj(e,t){if(e==null)return{};var r=FX(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function FX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var zX=function(t){return Array.isArray(t.value)?PX(t.value):t.value};function $n(e){var t=e.valueAccessor,r=t===void 0?zX:t,n=wj(e,TX),i=n.data,a=n.dataKey,s=n.clockWise,l=n.id,c=n.textBreakAll,u=wj(n,CX);return!i||!i.length?null:$.createElement(Ce,{className:"recharts-label-list"},i.map(function(f,d){var h=Ne(a)?r(f,d):yt(f&&f.payload,a),p=Ne(l)?{}:{id:"".concat(l,"-").concat(d)};return $.createElement(jt,Jd({},ye(f,!0),u,p,{parentViewBox:f.parentViewBox,value:h,textBreakAll:c,viewBox:jt.parseViewBox(Ne(s)?f:bj(bj({},f),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}$n.displayName="LabelList";function UX(e,t){return e?e===!0?$.createElement($n,{key:"labelList-implicit",data:t}):$.isValidElement(e)||je(e)?$.createElement($n,{key:"labelList-implicit",data:t,content:e}):oo(e)?$.createElement($n,Jd({data:t},e,{key:"labelList-implicit"})):null:null}function qX(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=xr(n,$n).map(function(s,l){return N.cloneElement(s,{data:t,key:"labelList-".concat(l)})});if(!r)return i;var a=UX(e.label,t);return[a].concat(kX(i))}$n.renderCallByParent=qX;function oc(e){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oc(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}function _j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_j(Object(r),!0).forEach(function(n){WX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_j(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WX(e,t,r){return t=VX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VX(e){var t=HX(e,"string");return oc(t)=="symbol"?t:t+""}function HX(e,t){if(oc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(oc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KX=function(t,r){var n=Wt(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},ju=function(t){var r=t.cx,n=t.cy,i=t.radius,a=t.angle,s=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+i,d=Math.asin(c/f)/Yd,h=u?a:a+s*d,p=Ve(r,n,f,h),b=Ve(r,n,i,h),m=u?a-s*d:a,y=Ve(r,n,f*Math.cos(d*Yd),m);return{center:p,circleTangency:b,lineTangency:y,theta:d}},h2=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.startAngle,l=t.endAngle,c=KX(s,l),u=s+c,f=Ve(r,n,a,s),d=Ve(r,n,a,u),h="M ".concat(f.x,",").concat(f.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(s>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(i>0){var p=Ve(r,n,i,s),b=Ve(r,n,i,u);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(s<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},GX=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,a=t.outerRadius,s=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Wt(f-u),h=ju({cx:r,cy:n,radius:a,angle:u,sign:d,cornerRadius:s,cornerIsExternal:c}),p=h.circleTangency,b=h.lineTangency,m=h.theta,y=ju({cx:r,cy:n,radius:a,angle:f,sign:-d,cornerRadius:s,cornerIsExternal:c}),v=y.circleTangency,g=y.lineTangency,x=y.theta,j=c?Math.abs(u-f):Math.abs(u-f)-m-x;if(j<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):h2({cx:r,cy:n,innerRadius:i,outerRadius:a,startAngle:u,endAngle:f});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(j>180),",").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
  `);if(i>0){var _=ju({cx:r,cy:n,radius:i,angle:u,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),S=_.circleTangency,E=_.lineTangency,A=_.theta,O=ju({cx:r,cy:n,radius:i,angle:f,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),P=O.circleTangency,k=O.lineTangency,M=O.theta,L=c?Math.abs(u-f):Math.abs(u-f)-A-M;if(L<0&&s===0)return"".concat(w,"L").concat(r,",").concat(n,"Z");w+="L".concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(L>180),",").concat(+(d>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,"Z")}else w+="L".concat(r,",").concat(n,"Z");return w},XX={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},p2=function(t){var r=jj(jj({},XX),t),n=r.cx,i=r.cy,a=r.innerRadius,s=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,h=r.className;if(s<a||f===d)return null;var p=Ee("recharts-sector",h),b=s-a,m=Vt(l,b,0,!0),y;return m>0&&Math.abs(f-d)<360?y=GX({cx:n,cy:i,innerRadius:a,outerRadius:s,cornerRadius:Math.min(m,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):y=h2({cx:n,cy:i,innerRadius:a,outerRadius:s,startAngle:f,endAngle:d}),$.createElement("path",ty({},ye(r,!0),{className:p,d:y,role:"img"}))};function lc(e){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(e)}function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ry.apply(this,arguments)}function Sj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sj(Object(r),!0).forEach(function(n){YX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YX(e,t,r){return t=JX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JX(e){var t=QX(e,"string");return lc(t)=="symbol"?t:t+""}function QX(e,t){if(lc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ej={curveBasisClosed:Y5,curveBasisOpen:J5,curveBasis:X5,curveBumpX:M5,curveBumpY:R5,curveLinearClosed:Q5,curveLinear:sh,curveMonotoneX:Z5,curveMonotoneY:e6,curveNatural:t6,curveStep:r6,curveStepAfter:i6,curveStepBefore:n6},Su=function(t){return t.x===+t.x&&t.y===+t.y},Bo=function(t){return t.x},Fo=function(t){return t.y},ZX=function(t,r){if(je(t))return t;var n="curve".concat(ih(t));return(n==="curveMonotone"||n==="curveBump")&&r?Ej["".concat(n).concat(r==="vertical"?"Y":"X")]:Ej[n]||sh},eY=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,a=i===void 0?[]:i,s=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=ZX(n,l),d=u?a.filter(function(m){return Su(m)}):a,h;if(Array.isArray(s)){var p=u?s.filter(function(m){return Su(m)}):s,b=d.map(function(m,y){return Nj(Nj({},m),{},{base:p[y]})});return l==="vertical"?h=pu().y(Fo).x1(Bo).x0(function(m){return m.base.x}):h=pu().x(Bo).y1(Fo).y0(function(m){return m.base.y}),h.defined(Su).curve(f),h(b)}return l==="vertical"&&se(s)?h=pu().y(Fo).x1(Bo).x0(s):se(s)?h=pu().x(Bo).y1(Fo).y0(s):h=lO().x(Bo).y(Fo),h.defined(Su).curve(f),h(d)},Qd=function(t){var r=t.className,n=t.points,i=t.path,a=t.pathRef;if((!n||!n.length)&&!i)return null;var s=n&&n.length?eY(t):i;return N.createElement("path",ry({},ye(t,!1),_d(t),{className:Ee("recharts-curve",r),d:s,ref:a}))},m2={exports:{}},tY="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",rY=tY,nY=rY;function g2(){}function y2(){}y2.resetWarningCache=g2;var iY=function(){function e(n,i,a,s,l,c){if(c!==nY){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:y2,resetWarningCache:g2};return r.PropTypes=r,r};m2.exports=iY();var aY=m2.exports;const $e=Me(aY);var sY=Object.getOwnPropertyNames,oY=Object.getOwnPropertySymbols,lY=Object.prototype.hasOwnProperty;function Aj(e,t){return function(n,i,a){return e(n,i,a)&&t(n,i,a)}}function Nu(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var a=i.cache,s=a.get(r),l=a.get(n);if(s&&l)return s===n&&l===r;a.set(r,n),a.set(n,r);var c=e(r,n,i);return a.delete(r),a.delete(n),c}}function cY(e){return e!=null?e[Symbol.toStringTag]:void 0}function Oj(e){return sY(e).concat(oY(e))}var uY=Object.hasOwn||function(e,t){return lY.call(e,t)};function Pa(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var dY="__v",fY="__o",hY="_owner",Pj=Object.getOwnPropertyDescriptor,Tj=Object.keys;function pY(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function mY(e,t){return Pa(e.getTime(),t.getTime())}function gY(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function yY(e,t){return e===t}function Cj(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.entries(),s,l,c=0;(s=a.next())&&!s.done;){for(var u=t.entries(),f=!1,d=0;(l=u.next())&&!l.done;){if(i[d]){d++;continue}var h=s.value,p=l.value;if(r.equals(h[0],p[0],c,d,e,t,r)&&r.equals(h[1],p[1],h[0],p[0],e,t,r)){f=i[d]=!0;break}d++}if(!f)return!1;c++}return!0}var vY=Pa;function xY(e,t,r){var n=Tj(e),i=n.length;if(Tj(t).length!==i)return!1;for(;i-- >0;)if(!v2(e,t,r,n[i]))return!1;return!0}function zo(e,t,r){var n=Oj(e),i=n.length;if(Oj(t).length!==i)return!1;for(var a,s,l;i-- >0;)if(a=n[i],!v2(e,t,r,a)||(s=Pj(e,a),l=Pj(t,a),(s||l)&&(!s||!l||s.configurable!==l.configurable||s.enumerable!==l.enumerable||s.writable!==l.writable)))return!1;return!0}function bY(e,t){return Pa(e.valueOf(),t.valueOf())}function wY(e,t){return e.source===t.source&&e.flags===t.flags}function kj(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),a=e.values(),s,l;(s=a.next())&&!s.done;){for(var c=t.values(),u=!1,f=0;(l=c.next())&&!l.done;){if(!i[f]&&r.equals(s.value,l.value,s.value,l.value,e,t,r)){u=i[f]=!0;break}f++}if(!u)return!1}return!0}function _Y(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function jY(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function v2(e,t,r,n){return(n===hY||n===fY||n===dY)&&(e.$$typeof||t.$$typeof)?!0:uY(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var SY="[object Arguments]",NY="[object Boolean]",EY="[object Date]",AY="[object Error]",OY="[object Map]",PY="[object Number]",TY="[object Object]",CY="[object RegExp]",kY="[object Set]",$Y="[object String]",IY="[object URL]",MY=Array.isArray,$j=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ij=Object.assign,RY=Object.prototype.toString.call.bind(Object.prototype.toString);function DY(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,s=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,f=e.areSetsEqual,d=e.areTypedArraysEqual,h=e.areUrlsEqual,p=e.unknownTagComparators;return function(m,y,v){if(m===y)return!0;if(m==null||y==null)return!1;var g=typeof m;if(g!==typeof y)return!1;if(g!=="object")return g==="number"?s(m,y,v):g==="function"?i(m,y,v):!1;var x=m.constructor;if(x!==y.constructor)return!1;if(x===Object)return l(m,y,v);if(MY(m))return t(m,y,v);if($j!=null&&$j(m))return d(m,y,v);if(x===Date)return r(m,y,v);if(x===RegExp)return u(m,y,v);if(x===Map)return a(m,y,v);if(x===Set)return f(m,y,v);var j=RY(m);if(j===EY)return r(m,y,v);if(j===CY)return u(m,y,v);if(j===OY)return a(m,y,v);if(j===kY)return f(m,y,v);if(j===TY)return typeof m.then!="function"&&typeof y.then!="function"&&l(m,y,v);if(j===IY)return h(m,y,v);if(j===AY)return n(m,y,v);if(j===SY)return l(m,y,v);if(j===NY||j===PY||j===$Y)return c(m,y,v);if(p){var w=p[j];if(!w){var _=cY(m);_&&(w=p[_])}if(w)return w(m,y,v)}return!1}}function LY(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?zo:pY,areDatesEqual:mY,areErrorsEqual:gY,areFunctionsEqual:yY,areMapsEqual:n?Aj(Cj,zo):Cj,areNumbersEqual:vY,areObjectsEqual:n?zo:xY,arePrimitiveWrappersEqual:bY,areRegExpsEqual:wY,areSetsEqual:n?Aj(kj,zo):kj,areTypedArraysEqual:n?zo:_Y,areUrlsEqual:jY,unknownTagComparators:void 0};if(r&&(i=Ij({},i,r(i))),t){var a=Nu(i.areArraysEqual),s=Nu(i.areMapsEqual),l=Nu(i.areObjectsEqual),c=Nu(i.areSetsEqual);i=Ij({},i,{areArraysEqual:a,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:c})}return i}function BY(e){return function(t,r,n,i,a,s,l){return e(t,r,l)}}function FY(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,a=e.strict;if(n)return function(c,u){var f=n(),d=f.cache,h=d===void 0?t?new WeakMap:void 0:d,p=f.meta;return r(c,u,{cache:h,equals:i,meta:p,strict:a})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var s={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,u){return r(c,u,s)}}var zY=ki();ki({strict:!0});ki({circular:!0});ki({circular:!0,strict:!0});ki({createInternalComparator:function(){return Pa}});ki({strict:!0,createInternalComparator:function(){return Pa}});ki({circular:!0,createInternalComparator:function(){return Pa}});ki({circular:!0,createInternalComparator:function(){return Pa},strict:!0});function ki(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,a=e.strict,s=a===void 0?!1:a,l=LY(e),c=DY(l),u=n?n(c):BY(c);return FY({circular:r,comparator:c,createState:i,equals:u,strict:s})}function UY(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Mj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(a){r<0&&(r=a),a-r>t?(e(a),r=-1):UY(i)};requestAnimationFrame(n)}function ny(e){"@babel/helpers - typeof";return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(e)}function qY(e){return KY(e)||HY(e)||VY(e)||WY()}function WY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VY(e,t){if(e){if(typeof e=="string")return Rj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rj(e,t)}}function Rj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KY(e){if(Array.isArray(e))return e}function GY(){var e={},t=function(){return null},r=!1,n=function i(a){if(!r){if(Array.isArray(a)){if(!a.length)return;var s=a,l=qY(s),c=l[0],u=l.slice(1);if(typeof c=="number"){Mj(i.bind(null,u),c);return}i(c),Mj(i.bind(null,u));return}ny(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){r=!0},start:function(a){r=!1,n(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function cc(e){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(e)}function Dj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dj(Object(r),!0).forEach(function(n){x2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x2(e,t,r){return t=XY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XY(e){var t=YY(e,"string");return cc(t)==="symbol"?t:String(t)}function YY(e,t){if(cc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JY=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(a){return i.includes(a)})})},QY=function(t){return t},ZY=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},hl=function(t,r){return Object.keys(r).reduce(function(n,i){return Lj(Lj({},n),{},x2({},i,t(i,r[i])))},{})},Bj=function(t,r,n){return t.map(function(i){return"".concat(ZY(i)," ").concat(r,"ms ").concat(n)}).join(",")};function eJ(e,t){return nJ(e)||rJ(e,t)||b2(e,t)||tJ()}function tJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function nJ(e){if(Array.isArray(e))return e}function iJ(e){return oJ(e)||sJ(e)||b2(e)||aJ()}function aJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b2(e,t){if(e){if(typeof e=="string")return iy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iy(e,t)}}function sJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oJ(e){if(Array.isArray(e))return iy(e)}function iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zd=1e-4,w2=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},_2=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Fj=function(t,r){return function(n){var i=w2(t,r);return _2(i,n)}},lJ=function(t,r){return function(n){var i=w2(t,r),a=[].concat(iJ(i.map(function(s,l){return s*l}).slice(1)),[0]);return _2(a,n)}},zj=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],a=r[1],s=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,a=0,s=1,l=1;break;case"ease":i=.25,a=.1,s=.25,l=1;break;case"ease-in":i=.42,a=0,s=1,l=1;break;case"ease-out":i=.42,a=0,s=.58,l=1;break;case"ease-in-out":i=0,a=0,s=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),f=eJ(u,4);i=f[0],a=f[1],s=f[2],l=f[3]}}}var d=Fj(i,s),h=Fj(a,l),p=lJ(i,s),b=function(v){return v>1?1:v<0?0:v},m=function(v){for(var g=v>1?1:v,x=g,j=0;j<8;++j){var w=d(x)-g,_=p(x);if(Math.abs(w-g)<Zd||_<Zd)return h(x);x=b(x-w/_)}return h(x)};return m.isStepper=!1,m},cJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,a=i===void 0?8:i,s=t.dt,l=s===void 0?17:s,c=function(f,d,h){var p=-(f-d)*n,b=h*a,m=h+(p-b)*l/1e3,y=h*l/1e3+f;return Math.abs(y-d)<Zd&&Math.abs(m)<Zd?[d,0]:[y,m]};return c.isStepper=!0,c.dt=l,c},uJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return zj(i);case"spring":return cJ();default:if(i.split("(")[0]==="cubic-bezier")return zj(i)}return typeof i=="function"?i:null};function uc(e){"@babel/helpers - typeof";return uc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uc(e)}function Uj(e){return hJ(e)||fJ(e)||j2(e)||dJ()}function dJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hJ(e){if(Array.isArray(e))return sy(e)}function qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qj(Object(r),!0).forEach(function(n){ay(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ay(e,t,r){return t=pJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pJ(e){var t=mJ(e,"string");return uc(t)==="symbol"?t:String(t)}function mJ(e,t){if(uc(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(uc(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gJ(e,t){return xJ(e)||vJ(e,t)||j2(e,t)||yJ()}function yJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j2(e,t){if(e){if(typeof e=="string")return sy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sy(e,t)}}function sy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function xJ(e){if(Array.isArray(e))return e}var ef=function(t,r,n){return t+(r-t)*n},oy=function(t){var r=t.from,n=t.to;return r!==n},bJ=function e(t,r,n){var i=hl(function(a,s){if(oy(s)){var l=t(s.from,s.to,s.velocity),c=gJ(l,2),u=c[0],f=c[1];return Ot(Ot({},s),{},{from:u,velocity:f})}return s},r);return n<1?hl(function(a,s){return oy(s)?Ot(Ot({},s),{},{velocity:ef(s.velocity,i[a].velocity,n),from:ef(s.from,i[a].from,n)}):s},r):e(t,i,n-1)};const wJ=function(e,t,r,n,i){var a=JY(e,t),s=a.reduce(function(y,v){return Ot(Ot({},y),{},ay({},v,[e[v],t[v]]))},{}),l=a.reduce(function(y,v){return Ot(Ot({},y),{},ay({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,u,f,d=function(){return null},h=function(){return hl(function(v,g){return g.from},l)},p=function(){return!Object.values(l).filter(oy).length},b=function(v){u||(u=v);var g=v-u,x=g/r.dt;l=bJ(r,l,x),i(Ot(Ot(Ot({},e),t),h())),u=v,p()||(c=requestAnimationFrame(d))},m=function(v){f||(f=v);var g=(v-f)/n,x=hl(function(w,_){return ef.apply(void 0,Uj(_).concat([r(g)]))},s);if(i(Ot(Ot(Ot({},e),t),x)),g<1)c=requestAnimationFrame(d);else{var j=hl(function(w,_){return ef.apply(void 0,Uj(_).concat([r(1)]))},s);i(Ot(Ot(Ot({},e),t),j))}};return d=r.isStepper?b:m,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function Ds(e){"@babel/helpers - typeof";return Ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(e)}var _J=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jJ(e,t){if(e==null)return{};var r=SJ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function SJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function Wp(e){return OJ(e)||AJ(e)||EJ(e)||NJ()}function NJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EJ(e,t){if(e){if(typeof e=="string")return ly(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ly(e,t)}}function AJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OJ(e){if(Array.isArray(e))return ly(e)}function ly(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wj(Object(r),!0).forEach(function(n){Xo(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xo(e,t,r){return t=S2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TJ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S2(n.key),n)}}function CJ(e,t,r){return t&&TJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function S2(e){var t=kJ(e,"string");return Ds(t)==="symbol"?t:String(t)}function kJ(e,t){if(Ds(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ds(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $J(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cy(e,t)}function cy(e,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cy(e,t)}function IJ(e){var t=MJ();return function(){var n=tf(e),i;if(t){var a=tf(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return uy(this,i)}}function uy(e,t){if(t&&(Ds(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dy(e)}function dy(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function tf(e){return tf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tf(e)}var mn=function(e){$J(r,e);var t=IJ(r);function r(n,i){var a;PJ(this,r),a=t.call(this,n,i);var s=a.props,l=s.isActive,c=s.attributeName,u=s.from,f=s.to,d=s.steps,h=s.children,p=s.duration;if(a.handleStyleChange=a.handleStyleChange.bind(dy(a)),a.changeStyle=a.changeStyle.bind(dy(a)),!l||p<=0)return a.state={style:{}},typeof h=="function"&&(a.state={style:f}),uy(a);if(d&&d.length)a.state={style:d[0].style};else if(u){if(typeof h=="function")return a.state={style:u},uy(a);a.state={style:c?Xo({},c,u):u}}else a.state={style:{}};return a}return CJ(r,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,s=i.canBegin;this.mounted=!0,!(!a||!s)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,s=a.isActive,l=a.canBegin,c=a.attributeName,u=a.shouldReAnimate,f=a.to,d=a.from,h=this.state.style;if(l){if(!s){var p={style:c?Xo({},c,f):f};this.state&&h&&(c&&h[c]!==f||!c&&h!==f)&&this.setState(p);return}if(!(zY(i.to,f)&&i.canBegin&&i.isActive)){var b=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var m=b||u?d:i.to;if(this.state&&h){var y={style:c?Xo({},c,m):m};(c&&h[c]!==m||!c&&h!==m)&&this.setState(y)}this.runAnimation(zr(zr({},this.props),{},{from:m,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,s=i.from,l=i.to,c=i.duration,u=i.easing,f=i.begin,d=i.onAnimationEnd,h=i.onAnimationStart,p=wJ(s,l,uJ(u),c,this.changeStyle),b=function(){a.stopJSAnimation=p()};this.manager.start([h,f,b,c,d])}},{key:"runStepAnimation",value:function(i){var a=this,s=i.steps,l=i.begin,c=i.onAnimationStart,u=s[0],f=u.style,d=u.duration,h=d===void 0?0:d,p=function(m,y,v){if(v===0)return m;var g=y.duration,x=y.easing,j=x===void 0?"ease":x,w=y.style,_=y.properties,S=y.onAnimationEnd,E=v>0?s[v-1]:y,A=_||Object.keys(w);if(typeof j=="function"||j==="spring")return[].concat(Wp(m),[a.runJSAnimation.bind(a,{from:E.style,to:w,duration:g,easing:j}),g]);var O=Bj(A,g,j),P=zr(zr(zr({},E.style),w),{},{transition:O});return[].concat(Wp(m),[P,g,S]).filter(QY)};return this.manager.start([c].concat(Wp(s.reduce(p,[f,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=GY());var a=i.begin,s=i.duration,l=i.attributeName,c=i.to,u=i.easing,f=i.onAnimationStart,d=i.onAnimationEnd,h=i.steps,p=i.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var m=l?Xo({},l,c):c,y=Bj(Object.keys(m),s,u);b.start([f,a,zr(zr({},m),{},{transition:y}),s,d])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var s=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=jJ(i,_J),u=N.Children.count(a),f=this.state.style;if(typeof a=="function")return a(f);if(!l||u===0||s<=0)return a;var d=function(p){var b=p.props,m=b.style,y=m===void 0?{}:m,v=b.className,g=N.cloneElement(p,zr(zr({},c),{},{style:zr(zr({},y),f),className:v}));return g};return u===1?d(N.Children.only(a)):$.createElement("div",null,N.Children.map(a,function(h){return d(h)}))}}]),r}(N.PureComponent);mn.displayName="Animate";mn.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};mn.propTypes={from:$e.oneOfType([$e.object,$e.string]),to:$e.oneOfType([$e.object,$e.string]),attributeName:$e.string,duration:$e.number,begin:$e.number,easing:$e.oneOfType([$e.string,$e.func]),steps:$e.arrayOf($e.shape({duration:$e.number.isRequired,style:$e.object.isRequired,easing:$e.oneOfType([$e.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),$e.func]),properties:$e.arrayOf("string"),onAnimationEnd:$e.func})),children:$e.oneOfType([$e.node,$e.func]),isActive:$e.bool,canBegin:$e.bool,onAnimationEnd:$e.func,shouldReAnimate:$e.bool,onAnimationStart:$e.func,onAnimationReStart:$e.func};function dc(e){"@babel/helpers - typeof";return dc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dc(e)}function rf(){return rf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rf.apply(this,arguments)}function RJ(e,t){return FJ(e)||BJ(e,t)||LJ(e,t)||DJ()}function DJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LJ(e,t){if(e){if(typeof e=="string")return Vj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(e,t)}}function Vj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function FJ(e){if(Array.isArray(e))return e}function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){zJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zJ(e,t,r){return t=UJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=qJ(e,"string");return dc(t)=="symbol"?t:t+""}function qJ(e,t){if(dc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gj=function(t,r,n,i,a){var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,f;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],h=0,p=4;h<p;h++)d[h]=a[h]>s?s:a[h];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+i-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+i)),f+="L ".concat(t+c*d[3],",").concat(r+i),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-l*d[3])),f+="Z"}else if(s>0&&a===+a&&a>0){var b=Math.min(s,a);f="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+n-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*b,`
            L `).concat(t+n,",").concat(r+i-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-c*b,",").concat(r+i,`
            L `).concat(t+c*b,",").concat(r+i,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(r+i-l*b," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return f},WJ=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,a=r.x,s=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(a,a+l),f=Math.max(a,a+l),d=Math.min(s,s+c),h=Math.max(s,s+c);return n>=u&&n<=f&&i>=d&&i<=h}return!1},VJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},W0=function(t){var r=Kj(Kj({},VJ),t),n=N.useRef(),i=N.useState(-1),a=RJ(i,2),s=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,h=r.radius,p=r.className,b=r.animationEasing,m=r.animationDuration,y=r.animationBegin,v=r.isAnimationActive,g=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var x=Ee("recharts-rectangle",p);return g?$.createElement(mn,{canBegin:s>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:m,animationEasing:b,isActive:g},function(j){var w=j.width,_=j.height,S=j.x,E=j.y;return $.createElement(mn,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,isActive:v,easing:b},$.createElement("path",rf({},ye(r,!0),{className:x,d:Gj(S,E,w,_,h),ref:n})))}):$.createElement("path",rf({},ye(r,!0),{className:x,d:Gj(c,u,f,d,h)}))},HJ=["points","className","baseLinePoints","connectNulls"];function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ns.apply(this,arguments)}function KJ(e,t){if(e==null)return{};var r=GJ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function GJ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xj(e){return QJ(e)||JJ(e)||YJ(e)||XJ()}function XJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YJ(e,t){if(e){if(typeof e=="string")return fy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fy(e,t)}}function JJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function QJ(e){if(Array.isArray(e))return fy(e)}function fy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yj=function(t){return t&&t.x===+t.x&&t.y===+t.y},ZJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){Yj(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Yj(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},pl=function(t,r){var n=ZJ(t);r&&(n=[n.reduce(function(a,s){return[].concat(Xj(a),Xj(s))},[])]);var i=n.map(function(a){return a.reduce(function(s,l,c){return"".concat(s).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},eQ=function(t,r,n){var i=pl(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(pl(r.reverse(),n).slice(1))},tQ=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,a=t.connectNulls,s=KJ(t,HJ);if(!r||!r.length)return null;var l=Ee("recharts-polygon",n);if(i&&i.length){var c=s.stroke&&s.stroke!=="none",u=eQ(r,i,a);return $.createElement("g",{className:l},$.createElement("path",ns({},ye(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:u})),c?$.createElement("path",ns({},ye(s,!0),{fill:"none",d:pl(r,a)})):null,c?$.createElement("path",ns({},ye(s,!0),{fill:"none",d:pl(i,a)})):null)}var f=pl(r,a);return $.createElement("path",ns({},ye(s,!0),{fill:f.slice(-1)==="Z"?s.fill:"none",className:l,d:f}))};function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hy.apply(this,arguments)}var _h=function(t){var r=t.cx,n=t.cy,i=t.r,a=t.className,s=Ee("recharts-dot",a);return r===+r&&n===+n&&i===+i?N.createElement("circle",hy({},ye(t,!1),_d(t),{className:s,cx:r,cy:n,r:i})):null};function fc(e){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fc(e)}var rQ=["x","y","top","left","width","height","className"];function py(){return py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},py.apply(this,arguments)}function Jj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jj(Object(r),!0).forEach(function(n){iQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iQ(e,t,r){return t=aQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aQ(e){var t=sQ(e,"string");return fc(t)=="symbol"?t:t+""}function sQ(e,t){if(fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oQ(e,t){if(e==null)return{};var r=lQ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function lQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var cQ=function(t,r,n,i,a,s){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(s,",").concat(r,"h").concat(n)},uQ=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,a=i===void 0?0:i,s=t.top,l=s===void 0?0:s,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,h=t.height,p=h===void 0?0:h,b=t.className,m=oQ(t,rQ),y=nQ({x:n,y:a,top:l,left:u,width:d,height:p},m);return!se(n)||!se(a)||!se(d)||!se(p)||!se(l)||!se(u)?null:$.createElement("path",py({},ye(y,!0),{className:Ee("recharts-cross",b),d:cQ(n,a,d,p,l,u)}))},dQ=yh,fQ=RP,hQ=vn;function pQ(e,t){return e&&e.length?dQ(e,hQ(t),fQ):void 0}var mQ=pQ;const gQ=Me(mQ);var yQ=yh,vQ=vn,xQ=DP;function bQ(e,t){return e&&e.length?yQ(e,vQ(t),xQ):void 0}var wQ=bQ;const _Q=Me(wQ);var jQ=["cx","cy","angle","ticks","axisLine"],SQ=["ticks","tick","angle","tickFormatter","stroke"];function Ls(e){"@babel/helpers - typeof";return Ls=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ls(e)}function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ml.apply(this,arguments)}function Qj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qj(Object(r),!0).forEach(function(n){jh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zj(e,t){if(e==null)return{};var r=NQ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function NQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function EQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,E2(n.key),n)}}function AQ(e,t,r){return t&&e1(e.prototype,t),r&&e1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OQ(e,t,r){return t=nf(t),PQ(e,N2()?Reflect.construct(t,r||[],nf(e).constructor):t.apply(e,r))}function PQ(e,t){if(t&&(Ls(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TQ(e)}function TQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N2=function(){return!!e})()}function nf(e){return nf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nf(e)}function CQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&my(e,t)}function my(e,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},my(e,t)}function jh(e,t,r){return t=E2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E2(e){var t=kQ(e,"string");return Ls(t)=="symbol"?t:t+""}function kQ(e,t){if(Ls(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ls(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Sh=function(e){function t(){return EQ(this,t),OQ(this,t,arguments)}return CQ(t,e),AQ(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,a=this.props,s=a.angle,l=a.cx,c=a.cy;return Ve(l,c,i,s)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,c=gQ(l,function(f){return f.coordinate||0}),u=_Q(l,function(f){return f.coordinate||0});return{cx:i,cy:a,startAngle:s,endAngle:s,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.angle,l=n.ticks,c=n.axisLine,u=Zj(n,jQ),f=l.reduce(function(b,m){return[Math.min(b[0],m.coordinate),Math.max(b[1],m.coordinate)]},[1/0,-1/0]),d=Ve(i,a,f[0],s),h=Ve(i,a,f[1],s),p=Ri(Ri(Ri({},ye(u,!1)),{},{fill:"none"},ye(c,!1)),{},{x1:d.x,y1:d.y,x2:h.x,y2:h.y});return $.createElement("line",ml({className:"recharts-polar-radius-axis-line"},p))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,f=Zj(i,SQ),d=this.getTickTextAnchor(),h=ye(f,!1),p=ye(s,!1),b=a.map(function(m,y){var v=n.getTickValueCoord(m),g=Ri(Ri(Ri(Ri({textAnchor:d,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:u},p),{},{index:y},v),{},{payload:m});return $.createElement(Ce,ml({className:Ee("recharts-polar-radius-axis-tick",d2(s)),key:"tick-".concat(m.coordinate)},ya(n.props,m,y)),t.renderTickItem(s,g,c?c(m.value,y):m.value))});return $.createElement(Ce,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.axisLine,s=n.tick;return!i||!i.length?null:$.createElement(Ce,{className:Ee("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),s&&this.renderTicks(),jt.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,a){var s;return $.isValidElement(n)?s=$.cloneElement(n,i):je(n)?s=n(i):s=$.createElement(va,ml({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),s}}])}(N.PureComponent);jh(Sh,"displayName","PolarRadiusAxis");jh(Sh,"axisType","radiusAxis");jh(Sh,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Bs(e){"@babel/helpers - typeof";return Bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bs(e)}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hi.apply(this,arguments)}function t1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t1(Object(r),!0).forEach(function(n){Nh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O2(n.key),n)}}function IQ(e,t,r){return t&&r1(e.prototype,t),r&&r1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MQ(e,t,r){return t=af(t),RQ(e,A2()?Reflect.construct(t,r||[],af(e).constructor):t.apply(e,r))}function RQ(e,t){if(t&&(Bs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DQ(e)}function DQ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A2=function(){return!!e})()}function af(e){return af=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},af(e)}function LQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gy(e,t)}function gy(e,t){return gy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gy(e,t)}function Nh(e,t,r){return t=O2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O2(e){var t=BQ(e,"string");return Bs(t)=="symbol"?t:t+""}function BQ(e,t){if(Bs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var FQ=Math.PI/180,n1=1e-5,Eh=function(e){function t(){return $Q(this,t),MQ(this,t,arguments)}return LQ(t,e),IQ(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.cx,s=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,f=u||8,d=Ve(a,s,l,n.coordinate),h=Ve(a,s,l+(c==="inner"?-1:1)*f,n.coordinate);return{x1:d.x,y1:d.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,a=Math.cos(-n.coordinate*FQ),s;return a>n1?s=i==="outer"?"start":"end":a<-n1?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,a=n.cy,s=n.radius,l=n.axisLine,c=n.axisLineType,u=Di(Di({},ye(this.props,!1)),{},{fill:"none"},ye(l,!1));if(c==="circle")return $.createElement(_h,Hi({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:a,r:s}));var f=this.props.ticks,d=f.map(function(h){return Ve(i,a,s,h.coordinate)});return $.createElement(tQ,Hi({className:"recharts-polar-angle-axis-line"},u,{points:d}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,a=i.ticks,s=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,f=ye(this.props,!1),d=ye(s,!1),h=Di(Di({},f),{},{fill:"none"},ye(l,!1)),p=a.map(function(b,m){var y=n.getTickLineCoord(b),v=n.getTickTextAnchor(b),g=Di(Di(Di({textAnchor:v},f),{},{stroke:"none",fill:u},d),{},{index:m,payload:b,x:y.x2,y:y.y2});return $.createElement(Ce,Hi({className:Ee("recharts-polar-angle-axis-tick",d2(s)),key:"tick-".concat(b.coordinate)},ya(n.props,b,m)),l&&$.createElement("line",Hi({className:"recharts-polar-angle-axis-tick-line"},h,y)),s&&t.renderTickItem(s,g,c?c(b.value,m):b.value))});return $.createElement(Ce,{className:"recharts-polar-angle-axis-ticks"},p)}},{key:"render",value:function(){var n=this.props,i=n.ticks,a=n.radius,s=n.axisLine;return a<=0||!i||!i.length?null:$.createElement(Ce,{className:Ee("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,a){var s;return $.isValidElement(n)?s=$.cloneElement(n,i):je(n)?s=n(i):s=$.createElement(va,Hi({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),s}}])}(N.PureComponent);Nh(Eh,"displayName","PolarAngleAxis");Nh(Eh,"axisType","angleAxis");Nh(Eh,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var zQ=kO,UQ=zQ(Object.getPrototypeOf,Object),qQ=UQ,WQ=Wn,VQ=qQ,HQ=Vn,KQ="[object Object]",GQ=Function.prototype,XQ=Object.prototype,P2=GQ.toString,YQ=XQ.hasOwnProperty,JQ=P2.call(Object);function QQ(e){if(!HQ(e)||WQ(e)!=KQ)return!1;var t=VQ(e);if(t===null)return!0;var r=YQ.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&P2.call(r)==JQ}var ZQ=QQ;const eZ=Me(ZQ);var tZ=Wn,rZ=Vn,nZ="[object Boolean]";function iZ(e){return e===!0||e===!1||rZ(e)&&tZ(e)==nZ}var aZ=iZ;const sZ=Me(aZ);function hc(e){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hc(e)}function sf(){return sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sf.apply(this,arguments)}function oZ(e,t){return dZ(e)||uZ(e,t)||cZ(e,t)||lZ()}function lZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cZ(e,t){if(e){if(typeof e=="string")return i1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i1(e,t)}}function i1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function dZ(e){if(Array.isArray(e))return e}function a1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function s1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a1(Object(r),!0).forEach(function(n){fZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fZ(e,t,r){return t=hZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hZ(e){var t=pZ(e,"string");return hc(t)=="symbol"?t:t+""}function pZ(e,t){if(hc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o1=function(t,r,n,i,a){var s=n-i,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-s/2,",").concat(r+a),l+="L ".concat(t+n-s/2-i,",").concat(r+a),l+="L ".concat(t,",").concat(r," Z"),l},mZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gZ=function(t){var r=s1(s1({},mZ),t),n=N.useRef(),i=N.useState(-1),a=oZ(i,2),s=a[0],l=a[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var x=n.current.getTotalLength();x&&l(x)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,h=r.height,p=r.className,b=r.animationEasing,m=r.animationDuration,y=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||h!==+h||f===0&&d===0||h===0)return null;var g=Ee("recharts-trapezoid",p);return v?$.createElement(mn,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:h,x:c,y:u},duration:m,animationEasing:b,isActive:v},function(x){var j=x.upperWidth,w=x.lowerWidth,_=x.height,S=x.x,E=x.y;return $.createElement(mn,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:m,easing:b},$.createElement("path",sf({},ye(r,!0),{className:g,d:o1(S,E,j,w,_),ref:n})))}):$.createElement("g",null,$.createElement("path",sf({},ye(r,!0),{className:g,d:o1(c,u,f,d,h)})))},yZ=["option","shapeType","propTransformer","activeClassName","isActive"];function pc(e){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pc(e)}function vZ(e,t){if(e==null)return{};var r=xZ(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function xZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function l1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l1(Object(r),!0).forEach(function(n){bZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bZ(e,t,r){return t=wZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wZ(e){var t=_Z(e,"string");return pc(t)=="symbol"?t:t+""}function _Z(e,t){if(pc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jZ(e,t){return of(of({},t),e)}function SZ(e,t){return e==="symbols"}function c1(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return $.createElement(W0,r);case"trapezoid":return $.createElement(gZ,r);case"sector":return $.createElement(p2,r);case"symbols":if(SZ(t))return $.createElement(c0,r);break;default:return null}}function NZ(e){return N.isValidElement(e)?e.props:e}function T2(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?jZ:n,a=e.activeClassName,s=a===void 0?"recharts-active-shape":a,l=e.isActive,c=vZ(e,yZ),u;if(N.isValidElement(t))u=N.cloneElement(t,of(of({},c),NZ(t)));else if(je(t))u=t(c);else if(eZ(t)&&!sZ(t)){var f=i(t,c);u=$.createElement(c1,{shapeType:r,elementProps:f})}else{var d=c;u=$.createElement(c1,{shapeType:r,elementProps:d})}return l?$.createElement(Ce,{className:s},u):u}function Ah(e,t){return t!=null&&"trapezoids"in e.props}function Oh(e,t){return t!=null&&"sectors"in e.props}function mc(e,t){return t!=null&&"points"in e.props}function EZ(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,a=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&a}function AZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function OZ(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function PZ(e,t){var r;return Ah(e,t)?r=EZ:Oh(e,t)?r=AZ:mc(e,t)&&(r=OZ),r}function TZ(e,t){var r;return Ah(e,t)?r="trapezoids":Oh(e,t)?r="sectors":mc(e,t)&&(r="points"),r}function CZ(e,t){if(Ah(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Oh(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return mc(e,t)?t.payload:{}}function kZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=TZ(r,t),a=CZ(r,t),s=n.filter(function(c,u){var f=Lc(a,c),d=r.props[i].filter(function(b){var m=PZ(r,t);return m(b,t)}),h=r.props[i].indexOf(d[d.length-1]),p=u===h;return f&&p}),l=n.indexOf(s[s.length-1]);return l}var zu;function Fs(e){"@babel/helpers - typeof";return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(e)}function is(){return is=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},is.apply(this,arguments)}function u1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ze(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(r),!0).forEach(function(n){Or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k2(n.key),n)}}function IZ(e,t,r){return t&&d1(e.prototype,t),r&&d1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MZ(e,t,r){return t=lf(t),RZ(e,C2()?Reflect.construct(t,r||[],lf(e).constructor):t.apply(e,r))}function RZ(e,t){if(t&&(Fs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DZ(e)}function DZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C2=function(){return!!e})()}function lf(e){return lf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lf(e)}function LZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yy(e,t)}function yy(e,t){return yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},yy(e,t)}function Or(e,t,r){return t=k2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k2(e){var t=BZ(e,"string");return Fs(t)=="symbol"?t:t+""}function BZ(e,t){if(Fs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gn=function(e){function t(r){var n;return $Z(this,t),n=MZ(this,t,[r]),Or(n,"pieRef",null),Or(n,"sectorRefs",[]),Or(n,"id",fo("recharts-pie-")),Or(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),je(i)&&i()}),Or(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),je(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return LZ(t,e),IZ(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.label,l=a.labelLine,c=a.dataKey,u=a.valueKey,f=ye(this.props,!1),d=ye(s,!1),h=ye(l,!1),p=s&&s.offsetRadius||20,b=n.map(function(m,y){var v=(m.startAngle+m.endAngle)/2,g=Ve(m.cx,m.cy,m.outerRadius+p,v),x=ze(ze(ze(ze({},f),m),{},{stroke:"none"},d),{},{index:y,textAnchor:t.getTextAnchor(g.x,m.cx)},g),j=ze(ze(ze(ze({},f),m),{},{fill:"none",stroke:m.fill},h),{},{index:y,points:[Ve(m.cx,m.cy,m.outerRadius,v),g]}),w=c;return Ne(c)&&Ne(u)?w="value":Ne(c)&&(w=u),$.createElement(Ce,{key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,j,"line"),t.renderLabelItem(s,x,yt(m,w)))});return $.createElement(Ce,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(n){var i=this,a=this.props,s=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return n.map(function(u,f){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var d=i.isActiveIndex(f),h=c&&i.hasActiveIndex()?c:null,p=d?s:h,b=ze(ze({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return $.createElement(Ce,is({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},ya(i.props,u,f),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(f)}),$.createElement(T2,is({option:p,isActive:d,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,a=i.sectors,s=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,f=i.animationId,d=this.state,h=d.prevSectors,p=d.prevIsAnimationActive;return $.createElement(mn,{begin:l,duration:c,isActive:s,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(f,"-").concat(p),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var m=b.t,y=[],v=a&&a[0],g=v.startAngle;return a.forEach(function(x,j){var w=h&&h[j],_=j>0?vr(x,"paddingAngle",0):0;if(w){var S=fr(w.endAngle-w.startAngle,x.endAngle-x.startAngle),E=ze(ze({},x),{},{startAngle:g+_,endAngle:g+S(m)+_});y.push(E),g=E.endAngle}else{var A=x.endAngle,O=x.startAngle,P=fr(0,A-O),k=P(m),M=ze(ze({},x),{},{startAngle:g+_,endAngle:g+k+_});y.push(M),g=M.endAngle}}),$.createElement(Ce,null,n.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,a=n.isAnimationActive,s=this.state.prevSectors;return a&&i&&i.length&&(!s||!Lc(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,a=i.hide,s=i.sectors,l=i.className,c=i.label,u=i.cx,f=i.cy,d=i.innerRadius,h=i.outerRadius,p=i.isAnimationActive,b=this.state.isAnimationFinished;if(a||!s||!s.length||!se(u)||!se(f)||!se(d)||!se(h))return null;var m=Ee("recharts-pie",l);return $.createElement(Ce,{tabIndex:this.props.rootTabIndex,className:m,ref:function(v){n.pieRef=v}},this.renderSectors(),c&&this.renderLabels(s),jt.renderCallByParent(this.props,null,!1),(!p||b)&&$n.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,a){if($.isValidElement(n))return $.cloneElement(n,i);if(je(n))return n(i);var s=Ee("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return $.createElement(Qd,is({},i,{key:a,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(n,i,a){if($.isValidElement(n))return $.cloneElement(n,i);var s=a;if(je(n)&&(s=n(i),$.isValidElement(s)))return s;var l=Ee("recharts-pie-label-text",typeof n!="boolean"&&!je(n)?n.className:"");return $.createElement(va,is({},i,{alignmentBaseline:"middle",className:l}),s)}}])}(N.PureComponent);zu=gn;Or(gn,"displayName","Pie");Or(gn,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Ea.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Or(gn,"parseDeltaAngle",function(e,t){var r=Wt(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Or(gn,"getRealPieData",function(e){var t=e.data,r=e.children,n=ye(e,!1),i=xr(r,Vl);return t&&t.length?t.map(function(a,s){return ze(ze(ze({payload:a},n),a),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(a){return ze(ze({},n),a.props)}):[]});Or(gn,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,a=t.height,s=u2(i,a),l=n+Vt(e.cx,i,i/2),c=r+Vt(e.cy,a,a/2),u=Vt(e.innerRadius,s,0),f=Vt(e.outerRadius,s,s*.8),d=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:f,maxRadius:d}});Or(gn,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?ze(ze({},t.type.defaultProps),t.props):t.props,i=zu.getRealPieData(n);if(!i||!i.length)return null;var a=n.cornerRadius,s=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,f=n.nameKey,d=n.valueKey,h=n.tooltipType,p=Math.abs(n.minAngle),b=zu.parseCoordinateOfPie(n,r),m=zu.parseDeltaAngle(s,l),y=Math.abs(m),v=u;Ne(u)&&Ne(d)?(tn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):Ne(u)&&(tn(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=d);var g=i.filter(function(E){return yt(E,v,0)!==0}).length,x=(y>=360?g:g-1)*c,j=y-g*p-x,w=i.reduce(function(E,A){var O=yt(A,v,0);return E+(se(O)?O:0)},0),_;if(w>0){var S;_=i.map(function(E,A){var O=yt(E,v,0),P=yt(E,f,A),k=(se(O)?O:0)/w,M;A?M=S.endAngle+Wt(m)*c*(O!==0?1:0):M=s;var L=M+Wt(m)*((O!==0?p:0)+k*j),B=(M+L)/2,D=(b.innerRadius+b.outerRadius)/2,q=[{name:P,value:O,payload:E,dataKey:v,type:h}],R=Ve(b.cx,b.cy,D,B);return S=ze(ze(ze({percent:k,cornerRadius:a,name:P,tooltipPayload:q,midAngle:B,middleRadius:D,tooltipPosition:R},E),b),{},{value:yt(E,v),startAngle:M,endAngle:L,payload:E,paddingAngle:Wt(m)*c}),S})}return ze(ze({},b),{},{sectors:_,data:i})});var FZ=Math.ceil,zZ=Math.max;function UZ(e,t,r,n){for(var i=-1,a=zZ(FZ((t-e)/(r||1)),0),s=Array(a);a--;)s[n?a:++i]=e,e+=r;return s}var qZ=UZ,WZ=JO,f1=1/0,VZ=17976931348623157e292;function HZ(e){if(!e)return e===0?e:0;if(e=WZ(e),e===f1||e===-f1){var t=e<0?-1:1;return t*VZ}return e===e?e:0}var $2=HZ,KZ=qZ,GZ=uh,Vp=$2;function XZ(e){return function(t,r,n){return n&&typeof n!="number"&&GZ(t,r,n)&&(r=n=void 0),t=Vp(t),r===void 0?(r=t,t=0):r=Vp(r),n=n===void 0?t<r?1:-1:Vp(n),KZ(t,r,n,e)}}var YZ=XZ,JZ=YZ,QZ=JZ(),ZZ=QZ;const cf=Me(ZZ);function gc(e){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gc(e)}function h1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function p1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(r),!0).forEach(function(n){I2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I2(e,t,r){return t=eee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eee(e){var t=tee(e,"string");return gc(t)=="symbol"?t:t+""}function tee(e,t){if(gc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ree=["Webkit","Moz","O","ms"],nee=function(t,r){var n=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=ree.reduce(function(a,s){return p1(p1({},a),{},I2({},s+n,r))},{});return i[t]=r,i};function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function uf(){return uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uf.apply(this,arguments)}function m1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m1(Object(r),!0).forEach(function(n){cr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R2(n.key),n)}}function aee(e,t,r){return t&&g1(e.prototype,t),r&&g1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function see(e,t,r){return t=df(t),oee(e,M2()?Reflect.construct(t,r||[],df(e).constructor):t.apply(e,r))}function oee(e,t){if(t&&(zs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lee(e)}function lee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M2=function(){return!!e})()}function df(e){return df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},df(e)}function cee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vy(e,t)}function vy(e,t){return vy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},vy(e,t)}function cr(e,t,r){return t=R2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R2(e){var t=uee(e,"string");return zs(t)=="symbol"?t:t+""}function uee(e,t){if(zs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dee=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,a=t.x,s=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=dl().domain(cf(0,c)).range([a,a+s-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:f}},y1=function(t){return t.changedTouches&&!!t.changedTouches.length},Us=function(e){function t(r){var n;return iee(this,t),n=see(this,t,[r]),cr(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),cr(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),cr(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,a=i.endIndex,s=i.onDragEnd,l=i.startIndex;s==null||s({endIndex:a,startIndex:l})}),n.detachDragEndListener()}),cr(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),cr(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),cr(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),cr(n,"handleSlideDragStart",function(i){var a=y1(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return cee(t,e),aee(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,a=n.endX,s=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(i,a),h=Math.max(i,a),p=t.getIndexInRange(s,d),b=t.getIndexInRange(s,h);return{startIndex:p-p%c,endIndex:b===f?f:b-b%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,a=i.data,s=i.tickFormatter,l=i.dataKey,c=yt(a[n],l,n);return je(s)?s(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,a=i.slideMoveStartX,s=i.startX,l=i.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,h=c.startIndex,p=c.endIndex,b=c.onChange,m=n.pageX-a;m>0?m=Math.min(m,u+f-d-l,u+f-d-s):m<0&&(m=Math.max(m,u-s,u-l));var y=this.getIndex({startX:s+m,endX:l+m});(y.startIndex!==h||y.endIndex!==p)&&b&&b(y),this.setState({startX:s+m,endX:l+m,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var a=y1(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,a=i.brushMoveStartX,s=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[s],f=this.props,d=f.x,h=f.width,p=f.travellerWidth,b=f.onChange,m=f.gap,y=f.data,v={startX:this.state.startX,endX:this.state.endX},g=n.pageX-a;g>0?g=Math.min(g,d+h-p-u):g<0&&(g=Math.max(g,d-u)),v[s]=u+g;var x=this.getIndex(v),j=x.startIndex,w=x.endIndex,_=function(){var E=y.length-1;return s==="startX"&&(l>c?j%m===0:w%m===0)||l<c&&w===E||s==="endX"&&(l>c?w%m===0:j%m===0)||l>c&&w===E};this.setState(cr(cr({},s,u+g),"brushMoveStartX",n.pageX),function(){b&&_()&&b(x)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var a=this,s=this.state,l=s.scaleValues,c=s.startX,u=s.endX,f=this.state[i],d=l.indexOf(f);if(d!==-1){var h=d+n;if(!(h===-1||h>=l.length)){var p=l[h];i==="startX"&&p>=u||i==="endX"&&p<=c||this.setState(cr({},i,p),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,c=n.fill,u=n.stroke;return $.createElement("rect",{stroke:u,fill:c,x:i,y:a,width:s,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=N.Children.only(u);return d?$.cloneElement(d,{x:i,y:a,width:s,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var a,s,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,h=c.traveller,p=c.ariaLabel,b=c.data,m=c.startIndex,y=c.endIndex,v=Math.max(n,this.props.x),g=Hp(Hp({},ye(this.props,!1)),{},{x:v,y:u,width:f,height:d}),x=p||"Min value: ".concat((a=b[m])===null||a===void 0?void 0:a.name,", Max value: ").concat((s=b[y])===null||s===void 0?void 0:s.name);return $.createElement(Ce,{tabIndex:0,role:"slider","aria-label":x,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,g))}},{key:"renderSlide",value:function(n,i){var a=this.props,s=a.y,l=a.height,c=a.stroke,u=a.travellerWidth,f=Math.min(n,i)+u,d=Math.max(Math.abs(i-n)-u,0);return $.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:s,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,a=n.endIndex,s=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,h=f.endX,p=5,b={pointerEvents:"none",fill:u};return $.createElement(Ce,{className:"recharts-brush-texts"},$.createElement(va,uf({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,h)-p,y:s+l/2},b),this.getTextOfTick(i)),$.createElement(va,uf({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,h)+c+p,y:s+l/2},b),this.getTextOfTick(a)))}},{key:"render",value:function(){var n=this.props,i=n.data,a=n.className,s=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,h=this.state,p=h.startX,b=h.endX,m=h.isTextActive,y=h.isSlideMoving,v=h.isTravellerMoving,g=h.isTravellerFocused;if(!i||!i.length||!se(l)||!se(c)||!se(u)||!se(f)||u<=0||f<=0)return null;var x=Ee("recharts-brush",a),j=$.Children.count(s)===1,w=nee("userSelect","none");return $.createElement(Ce,{className:x,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),j&&this.renderPanorama(),this.renderSlide(p,b),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(b,"endX"),(m||y||v||g||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,a=n.y,s=n.width,l=n.height,c=n.stroke,u=Math.floor(a+l/2)-1;return $.createElement($.Fragment,null,$.createElement("rect",{x:i,y:a,width:s,height:l,fill:c,stroke:"none"}),$.createElement("line",{x1:i+1,y1:u,x2:i+s-1,y2:u,fill:"none",stroke:"#fff"}),$.createElement("line",{x1:i+1,y1:u+2,x2:i+s-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var a;return $.isValidElement(n)?a=$.cloneElement(n,i):je(n)?a=n(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(n,i){var a=n.data,s=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(a!==i.prevData||u!==i.prevUpdateId)return Hp({prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s},a&&a.length?dee({data:a,width:s,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(i.scale&&(s!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+s-c]);var h=i.scale.domain().map(function(p){return i.scale(p)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:s,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,i){for(var a=n.length,s=0,l=a-1;l-s>1;){var c=Math.floor((s+l)/2);n[c]>i?l=c:s=c}return i>=n[l]?l:s}}])}(N.PureComponent);cr(Us,"displayName","Brush");cr(Us,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var fee=g0;function hee(e,t){var r;return fee(e,function(n,i,a){return r=t(n,i,a),!r}),!!r}var pee=hee,mee=SO,gee=vn,yee=pee,vee=or,xee=uh;function bee(e,t,r){var n=vee(e)?mee:yee;return r&&xee(e,t,r)&&(t=void 0),n(e,gee(t))}var wee=bee;const _ee=Me(wee);var hn=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},v1=HO;function jee(e,t,r){t=="__proto__"&&v1?v1(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var See=jee,Nee=See,Eee=WO,Aee=vn;function Oee(e,t){var r={};return t=Aee(t),Eee(e,function(n,i,a){Nee(r,i,t(n,i,a))}),r}var Pee=Oee;const Tee=Me(Pee);function Cee(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var kee=Cee,$ee=g0;function Iee(e,t){var r=!0;return $ee(e,function(n,i,a){return r=!!t(n,i,a),r}),r}var Mee=Iee,Ree=kee,Dee=Mee,Lee=vn,Bee=or,Fee=uh;function zee(e,t,r){var n=Bee(e)?Ree:Dee;return r&&Fee(e,t,r)&&(t=void 0),n(e,Lee(t))}var Uee=zee;const D2=Me(Uee);var qee=["x","y"];function yc(e){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yc(e)}function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xy.apply(this,arguments)}function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Uo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){Wee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wee(e,t,r){return t=Vee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vee(e){var t=Hee(e,"string");return yc(t)=="symbol"?t:t+""}function Hee(e,t){if(yc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kee(e,t){if(e==null)return{};var r=Gee(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Gee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Xee(e,t){var r=e.x,n=e.y,i=Kee(e,qee),a="".concat(r),s=parseInt(a,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||i.height),f=parseInt(u,10),d="".concat(t.width||i.width),h=parseInt(d,10);return Uo(Uo(Uo(Uo(Uo({},t),i),s?{x:s}:{}),c?{y:c}:{}),{},{height:f,width:h,name:t.name,radius:t.radius})}function b1(e){return $.createElement(T2,xy({shapeType:"rectangle",propTransformer:Xee,activeClassName:"recharts-active-bar"},e))}var Yee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var a=se(n)||b4(n);return a?t(n,i):(a||ba(),r)}},Jee=["value","background"],L2;function qs(e){"@babel/helpers - typeof";return qs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qs(e)}function Qee(e,t){if(e==null)return{};var r=Zee(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zee(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ff.apply(this,arguments)}function w1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?w1(Object(r),!0).forEach(function(n){ci(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ete(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F2(n.key),n)}}function tte(e,t,r){return t&&_1(e.prototype,t),r&&_1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rte(e,t,r){return t=hf(t),nte(e,B2()?Reflect.construct(t,r||[],hf(e).constructor):t.apply(e,r))}function nte(e,t){if(t&&(qs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ite(e)}function ite(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B2=function(){return!!e})()}function hf(e){return hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hf(e)}function ate(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&by(e,t)}function by(e,t){return by=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},by(e,t)}function ci(e,t,r){return t=F2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F2(e){var t=ste(e,"string");return qs(t)=="symbol"?t:t+""}function ste(e,t){if(qs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var In=function(e){function t(){var r;ete(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=rte(this,t,[].concat(i)),ci(r,"state",{isAnimationFinished:!1}),ci(r,"id",fo("recharts-bar-")),ci(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),s&&s()}),ci(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),s&&s()}),r}return ate(t,e),tte(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,a=this.props,s=a.shape,l=a.dataKey,c=a.activeIndex,u=a.activeBar,f=ye(this.props,!1);return n&&n.map(function(d,h){var p=h===c,b=p?u:s,m=lt(lt(lt({},f),d),{},{isActive:p,option:b,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return $.createElement(Ce,ff({className:"recharts-bar-rectangle"},ya(i.props,d,h),{key:"rectangle-".concat(d==null?void 0:d.x,"-").concat(d==null?void 0:d.y,"-").concat(d==null?void 0:d.value,"-").concat(h)}),$.createElement(b1,m))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,a=i.data,s=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,f=i.animationEasing,d=i.animationId,h=this.state.prevData;return $.createElement(mn,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var b=p.t,m=a.map(function(y,v){var g=h&&h[v];if(g){var x=fr(g.x,y.x),j=fr(g.y,y.y),w=fr(g.width,y.width),_=fr(g.height,y.height);return lt(lt({},y),{},{x:x(b),y:j(b),width:w(b),height:_(b)})}if(s==="horizontal"){var S=fr(0,y.height),E=S(b);return lt(lt({},y),{},{y:y.y+y.height-E,height:E})}var A=fr(0,y.width),O=A(b);return lt(lt({},y),{},{width:O})});return $.createElement(Ce,null,n.renderRectanglesStatically(m))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,a=n.isAnimationActive,s=this.state.prevData;return a&&i&&i.length&&(!s||!Lc(s,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,a=i.data,s=i.dataKey,l=i.activeIndex,c=ye(this.props.background,!1);return a.map(function(u,f){u.value;var d=u.background,h=Qee(u,Jee);if(!d)return null;var p=lt(lt(lt(lt(lt({},h),{},{fill:"#eee"},d),c),ya(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:s,index:f,className:"recharts-bar-background-rectangle"});return $.createElement(b1,ff({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},p))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.data,l=a.xAxis,c=a.yAxis,u=a.layout,f=a.children,d=xr(f,Bc);if(!d)return null;var h=u==="vertical"?s[0].height/2:s[0].width/2,p=function(y,v){var g=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:g,errorVal:yt(y,v)}},b={clipPath:n?"url(#clipPath-".concat(i,")"):null};return $.createElement(Ce,b,d.map(function(m){return $.cloneElement(m,{key:"error-bar-".concat(i,"-").concat(m.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,a=n.data,s=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,h=n.height,p=n.isAnimationActive,b=n.background,m=n.id;if(i||!a||!a.length)return null;var y=this.state.isAnimationFinished,v=Ee("recharts-bar",s),g=l&&l.allowDataOverflow,x=c&&c.allowDataOverflow,j=g||x,w=Ne(m)?this.id:m;return $.createElement(Ce,{className:v},g||x?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(w)},$.createElement("rect",{x:g?u:u-d/2,y:x?f:f-h/2,width:g?d:d*2,height:x?h:h*2}))):null,$.createElement(Ce,{className:"recharts-bar-rectangles",clipPath:j?"url(#clipPath-".concat(w,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(j,w),(!p||y)&&$n.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(N.PureComponent);L2=In;ci(In,"displayName","Bar");ci(In,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ea.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ci(In,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,a=e.xAxis,s=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,h=e.offset,p=BG(n,r);if(!p)return null;var b=t.layout,m=r.type.defaultProps,y=m!==void 0?lt(lt({},m),r.props):r.props,v=y.dataKey,g=y.children,x=y.minPointSize,j=b==="horizontal"?s:a,w=u?j.scale.domain():null,_=HG({numericAxis:j}),S=xr(g,Vl),E=d.map(function(A,O){var P,k,M,L,B,D;u?P=FG(u[f+O],w):(P=yt(A,v),Array.isArray(P)||(P=[_,P]));var q=Yee(x,L2.defaultProps.minPointSize)(P[1],O);if(b==="horizontal"){var R,I=[s.scale(P[0]),s.scale(P[1])],z=I[0],W=I[1];k=dj({axis:a,ticks:l,bandSize:i,offset:p.offset,entry:A,index:O}),M=(R=W??z)!==null&&R!==void 0?R:void 0,L=p.size;var C=z-W;if(B=Number.isNaN(C)?0:C,D={x:k,y:s.y,width:L,height:s.height},Math.abs(q)>0&&Math.abs(B)<Math.abs(q)){var F=Wt(B||q)*(Math.abs(q)-Math.abs(B));M-=F,B+=F}}else{var Q=[a.scale(P[0]),a.scale(P[1])],Z=Q[0],ee=Q[1];if(k=Z,M=dj({axis:s,ticks:c,bandSize:i,offset:p.offset,entry:A,index:O}),L=ee-Z,B=p.size,D={x:a.x,y:M,width:a.width,height:B},Math.abs(q)>0&&Math.abs(L)<Math.abs(q)){var le=Wt(L||q)*(Math.abs(q)-Math.abs(L));L+=le}}return lt(lt(lt({},A),{},{x:k,y:M,width:L,height:B,value:u?P:P[1],payload:A,background:D},S&&S[O]&&S[O].props),{},{tooltipPayload:[l2(r,A)],tooltipPosition:{x:k+L/2,y:M+B/2}})});return lt({data:E,layout:b},h)});function vc(e){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vc(e)}function ote(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,z2(n.key),n)}}function lte(e,t,r){return t&&j1(e.prototype,t),r&&j1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S1(Object(r),!0).forEach(function(n){Ph(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ph(e,t,r){return t=z2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z2(e){var t=cte(e,"string");return vc(t)=="symbol"?t:t+""}function cte(e,t){if(vc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U2=function(t,r,n,i,a){var s=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:s-n.right,rightMirror:s-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!dr(u,In);return f.reduce(function(p,b){var m=r[b],y=m.orientation,v=m.domain,g=m.padding,x=g===void 0?{}:g,j=m.mirror,w=m.reversed,_="".concat(y).concat(j?"Mirror":""),S,E,A,O,P;if(m.type==="number"&&(m.padding==="gap"||m.padding==="no-gap")){var k=v[1]-v[0],M=1/0,L=m.categoricalDomain.sort(j4);if(L.forEach(function(Q,Z){Z>0&&(M=Math.min((Q||0)-(L[Z-1]||0),M))}),Number.isFinite(M)){var B=M/k,D=m.layout==="vertical"?n.height:n.width;if(m.padding==="gap"&&(S=B*D/2),m.padding==="no-gap"){var q=Vt(t.barCategoryGap,B*D),R=B*D/2;S=R-q-(R-q)/D*q}}}i==="xAxis"?E=[n.left+(x.left||0)+(S||0),n.left+n.width-(x.right||0)-(S||0)]:i==="yAxis"?E=c==="horizontal"?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(S||0),n.top+n.height-(x.bottom||0)-(S||0)]:E=m.range,w&&(E=[E[1],E[0]]);var I=i2(m,a,h),z=I.scale,W=I.realScaleType;z.domain(v).range(E),a2(z);var C=s2(z,Gr(Gr({},m),{},{realScaleType:W}));i==="xAxis"?(P=y==="top"&&!j||y==="bottom"&&j,A=n.left,O=d[_]-P*m.height):i==="yAxis"&&(P=y==="left"&&!j||y==="right"&&j,A=d[_]-P*m.width,O=n.top);var F=Gr(Gr(Gr({},m),C),{},{realScaleType:W,x:A,y:O,scale:z,width:i==="xAxis"?n.width:m.width,height:i==="yAxis"?n.height:m.height});return F.bandSize=Xd(F,C),!m.hide&&i==="xAxis"?d[_]+=(P?-1:1)*F.height:m.hide||(d[_]+=(P?-1:1)*F.width),Gr(Gr({},p),{},Ph({},b,F))},{})},q2=function(t,r){var n=t.x,i=t.y,a=r.x,s=r.y;return{x:Math.min(n,a),y:Math.min(i,s),width:Math.abs(a-n),height:Math.abs(s-i)}},ute=function(t){var r=t.x1,n=t.y1,i=t.x2,a=t.y2;return q2({x:r,y:n},{x:i,y:a})},W2=function(){function e(t){ote(this,e),this.scale=t}return lte(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,a=n.position;if(r!==void 0){if(a)switch(a){case"start":return this.scale(r);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+s}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],a=n[n.length-1];return i<=a?r>=i&&r<=a:r>=a&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();Ph(W2,"EPS",1e-4);var V0=function(t){var r=Object.keys(t).reduce(function(n,i){return Gr(Gr({},n),{},Ph({},i,W2.create(t[i])))},{});return Gr(Gr({},r),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,l=a.position;return Tee(i,function(c,u){return r[u].apply(c,{bandAware:s,position:l})})},isInRange:function(i){return D2(i,function(a,s){return r[s].isInRange(a)})}})};function dte(e){return(e%180+180)%180}var fte=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=dte(i),s=a*Math.PI/180,l=Math.atan(n/r),c=s>l&&s<Math.PI-l?n/Math.sin(s):r/Math.cos(s);return Math.abs(c)},hte=vn,pte=$c,mte=lh;function gte(e){return function(t,r,n){var i=Object(t);if(!pte(t)){var a=hte(r);t=mte(t),r=function(l){return a(i[l],l,i)}}var s=e(t,r,n);return s>-1?i[a?t[s]:s]:void 0}}var yte=gte,vte=$2;function xte(e){var t=vte(e),r=t%1;return t===t?r?t-r:t:0}var bte=xte,wte=LO,_te=vn,jte=bte,Ste=Math.max;function Nte(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:jte(r);return i<0&&(i=Ste(n+i,0)),wte(e,_te(t),i)}var Ete=Nte,Ate=yte,Ote=Ete,Pte=Ate(Ote),Tte=Pte;const Cte=Me(Tte);var kte=EL(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),H0=N.createContext(void 0),K0=N.createContext(void 0),V2=N.createContext(void 0),H2=N.createContext({}),K2=N.createContext(void 0),G2=N.createContext(0),X2=N.createContext(0),N1=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,a=r.offset,s=t.clipPathId,l=t.children,c=t.width,u=t.height,f=kte(a);return $.createElement(H0.Provider,{value:n},$.createElement(K0.Provider,{value:i},$.createElement(H2.Provider,{value:a},$.createElement(V2.Provider,{value:f},$.createElement(K2.Provider,{value:s},$.createElement(G2.Provider,{value:u},$.createElement(X2.Provider,{value:c},l)))))))},$te=function(){return N.useContext(K2)},Y2=function(t){var r=N.useContext(H0);r==null&&ba();var n=r[t];return n==null&&ba(),n},Ite=function(){var t=N.useContext(H0);return ni(t)},Mte=function(){var t=N.useContext(K0),r=Cte(t,function(n){return D2(n.domain,Number.isFinite)});return r||ni(t)},J2=function(t){var r=N.useContext(K0);r==null&&ba();var n=r[t];return n==null&&ba(),n},Rte=function(){var t=N.useContext(V2);return t},Dte=function(){return N.useContext(H2)},G0=function(){return N.useContext(X2)},X0=function(){return N.useContext(G2)};function Ws(e){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z2(n.key),n)}}function Fte(e,t,r){return t&&Bte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zte(e,t,r){return t=pf(t),Ute(e,Q2()?Reflect.construct(t,r||[],pf(e).constructor):t.apply(e,r))}function Ute(e,t){if(t&&(Ws(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qte(e)}function qte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q2=function(){return!!e})()}function pf(e){return pf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pf(e)}function Wte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wy(e,t)}function wy(e,t){return wy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},wy(e,t)}function E1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function A1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E1(Object(r),!0).forEach(function(n){Y0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y0(e,t,r){return t=Z2(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z2(e){var t=Vte(e,"string");return Ws(t)=="symbol"?t:t+""}function Vte(e,t){if(Ws(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Hte(e,t){return Yte(e)||Xte(e,t)||Gte(e,t)||Kte()}function Kte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gte(e,t){if(e){if(typeof e=="string")return O1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O1(e,t)}}function O1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xte(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function Yte(e){if(Array.isArray(e))return e}function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(this,arguments)}var Jte=function(t,r){var n;return $.isValidElement(t)?n=$.cloneElement(t,r):je(t)?n=t(r):n=$.createElement("line",_y({},r,{className:"recharts-reference-line-line"})),n},Qte=function(t,r,n,i,a,s,l,c,u){var f=a.x,d=a.y,h=a.width,p=a.height;if(n){var b=u.y,m=t.y.apply(b,{position:s});if(hn(u,"discard")&&!t.y.isInRange(m))return null;var y=[{x:f+h,y:m},{x:f,y:m}];return c==="left"?y.reverse():y}if(r){var v=u.x,g=t.x.apply(v,{position:s});if(hn(u,"discard")&&!t.x.isInRange(g))return null;var x=[{x:g,y:d+p},{x:g,y:d}];return l==="top"?x.reverse():x}if(i){var j=u.segment,w=j.map(function(_){return t.apply(_,{position:s})});return hn(u,"discard")&&_ee(w,function(_){return!t.isInRange(_)})?null:w}return null};function Zte(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,a=e.yAxisId,s=e.shape,l=e.className,c=e.alwaysShow,u=$te(),f=Y2(i),d=J2(a),h=Rte();if(!u||!h)return null;tn(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=V0({x:f.scale,y:d.scale}),b=xt(t),m=xt(r),y=n&&n.length===2,v=Qte(p,b,m,y,h,e.position,f.orientation,d.orientation,e);if(!v)return null;var g=Hte(v,2),x=g[0],j=x.x,w=x.y,_=g[1],S=_.x,E=_.y,A=hn(e,"hidden")?"url(#".concat(u,")"):void 0,O=A1(A1({clipPath:A},ye(e,!0)),{},{x1:j,y1:w,x2:S,y2:E});return $.createElement(Ce,{className:Ee("recharts-reference-line",l)},Jte(s,O),jt.renderCallByParent(e,ute({x1:j,y1:w,x2:S,y2:E})))}var J0=function(e){function t(){return Lte(this,t),zte(this,t,arguments)}return Wte(t,e),Fte(t,[{key:"render",value:function(){return $.createElement(Zte,this.props)}}])}($.Component);Y0(J0,"displayName","ReferenceLine");Y0(J0,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jy.apply(this,arguments)}function Vs(e){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function P1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function T1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P1(Object(r),!0).forEach(function(n){Th(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ere(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tT(n.key),n)}}function rre(e,t,r){return t&&tre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function nre(e,t,r){return t=mf(t),ire(e,eT()?Reflect.construct(t,r||[],mf(e).constructor):t.apply(e,r))}function ire(e,t){if(t&&(Vs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return are(e)}function are(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eT=function(){return!!e})()}function mf(e){return mf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mf(e)}function sre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sy(e,t)}function Sy(e,t){return Sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Sy(e,t)}function Th(e,t,r){return t=tT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tT(e){var t=ore(e,"string");return Vs(t)=="symbol"?t:t+""}function ore(e,t){if(Vs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lre=function(t){var r=t.x,n=t.y,i=t.xAxis,a=t.yAxis,s=V0({x:i.scale,y:a.scale}),l=s.apply({x:r,y:n},{bandAware:!0});return hn(t,"discard")&&!s.isInRange(l)?null:l},Ch=function(e){function t(){return ere(this,t),nre(this,t,arguments)}return sre(t,e),rre(t,[{key:"render",value:function(){var n=this.props,i=n.x,a=n.y,s=n.r,l=n.alwaysShow,c=n.clipPathId,u=xt(i),f=xt(a);if(tn(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=lre(this.props);if(!d)return null;var h=d.x,p=d.y,b=this.props,m=b.shape,y=b.className,v=hn(this.props,"hidden")?"url(#".concat(c,")"):void 0,g=T1(T1({clipPath:v},ye(this.props,!0)),{},{cx:h,cy:p});return $.createElement(Ce,{className:Ee("recharts-reference-dot",y)},t.renderDot(m,g),jt.renderCallByParent(this.props,{x:h-s,y:p-s,width:2*s,height:2*s}))}}])}($.Component);Th(Ch,"displayName","ReferenceDot");Th(Ch,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Th(Ch,"renderDot",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):je(e)?r=e(t):r=$.createElement(_h,jy({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(this,arguments)}function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function C1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function k1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C1(Object(r),!0).forEach(function(n){kh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ure(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,nT(n.key),n)}}function dre(e,t,r){return t&&ure(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fre(e,t,r){return t=gf(t),hre(e,rT()?Reflect.construct(t,r||[],gf(e).constructor):t.apply(e,r))}function hre(e,t){if(t&&(Hs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pre(e)}function pre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rT=function(){return!!e})()}function gf(e){return gf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gf(e)}function mre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ey(e,t)}function Ey(e,t){return Ey=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ey(e,t)}function kh(e,t,r){return t=nT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nT(e){var t=gre(e,"string");return Hs(t)=="symbol"?t:t+""}function gre(e,t){if(Hs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yre=function(t,r,n,i,a){var s=a.x1,l=a.x2,c=a.y1,u=a.y2,f=a.xAxis,d=a.yAxis;if(!f||!d)return null;var h=V0({x:f.scale,y:d.scale}),p={x:t?h.x.apply(s,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},b={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return hn(a,"discard")&&(!h.isInRange(p)||!h.isInRange(b))?null:q2(p,b)},$h=function(e){function t(){return cre(this,t),fre(this,t,arguments)}return mre(t,e),dre(t,[{key:"render",value:function(){var n=this.props,i=n.x1,a=n.x2,s=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;tn(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=xt(i),h=xt(a),p=xt(s),b=xt(l),m=this.props.shape;if(!d&&!h&&!p&&!b&&!m)return null;var y=yre(d,h,p,b,this.props);if(!y&&!m)return null;var v=hn(this.props,"hidden")?"url(#".concat(f,")"):void 0;return $.createElement(Ce,{className:Ee("recharts-reference-area",c)},t.renderRect(m,k1(k1({clipPath:v},ye(this.props,!0)),y)),jt.renderCallByParent(this.props,y))}}])}($.Component);kh($h,"displayName","ReferenceArea");kh($h,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});kh($h,"renderRect",function(e,t){var r;return $.isValidElement(e)?r=$.cloneElement(e,t):je(e)?r=e(t):r=$.createElement(W0,Ny({},t,{className:"recharts-reference-area-rect"})),r});function iT(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function vre(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return fte(n,r)}function xre(e,t,r){var n=r==="width",i=e.x,a=e.y,s=e.width,l=e.height;return t===1?{start:n?i:a,end:n?i+s:a+l}:{start:n?i+s:a+l,end:n?i:a}}function yf(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function bre(e,t){return iT(e,t+1)}function wre(e,t,r,n,i){for(var a=(n||[]).slice(),s=t.start,l=t.end,c=0,u=1,f=s,d=function(){var b=n==null?void 0:n[c];if(b===void 0)return{v:iT(n,u)};var m=c,y,v=function(){return y===void 0&&(y=r(b,m)),y},g=b.coordinate,x=c===0||yf(e,g,v,f,l);x||(c=0,f=s,u+=1),x&&(f=g+e*(v()/2+i),c+=u)},h;u<=a.length;)if(h=d(),h)return h.v;return[]}function xc(e){"@babel/helpers - typeof";return xc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xc(e)}function $1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$1(Object(r),!0).forEach(function(n){_re(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _re(e,t,r){return t=jre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jre(e){var t=Sre(e,"string");return xc(t)=="symbol"?t:t+""}function Sre(e,t){if(xc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nre(e,t,r,n,i){for(var a=(n||[]).slice(),s=a.length,l=t.start,c=t.end,u=function(h){var p=a[h],b,m=function(){return b===void 0&&(b=r(p,h)),b};if(h===s-1){var y=e*(p.coordinate+e*m()/2-c);a[h]=p=Mt(Mt({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else a[h]=p=Mt(Mt({},p),{},{tickCoord:p.coordinate});var v=yf(e,p.tickCoord,m,l,c);v&&(c=p.tickCoord-e*(m()/2+i),a[h]=Mt(Mt({},p),{},{isShow:!0}))},f=s-1;f>=0;f--)u(f);return a}function Ere(e,t,r,n,i,a){var s=(n||[]).slice(),l=s.length,c=t.start,u=t.end;if(a){var f=n[l-1],d=r(f,l-1),h=e*(f.coordinate+e*d/2-u);s[l-1]=f=Mt(Mt({},f),{},{tickCoord:h>0?f.coordinate-h*e:f.coordinate});var p=yf(e,f.tickCoord,function(){return d},c,u);p&&(u=f.tickCoord-e*(d/2+i),s[l-1]=Mt(Mt({},f),{},{isShow:!0}))}for(var b=a?l-1:l,m=function(g){var x=s[g],j,w=function(){return j===void 0&&(j=r(x,g)),j};if(g===0){var _=e*(x.coordinate-e*w()/2-c);s[g]=x=Mt(Mt({},x),{},{tickCoord:_<0?x.coordinate-_*e:x.coordinate})}else s[g]=x=Mt(Mt({},x),{},{tickCoord:x.coordinate});var S=yf(e,x.tickCoord,w,c,u);S&&(c=x.tickCoord+e*(w()/2+i),s[g]=Mt(Mt({},x),{},{isShow:!0}))},y=0;y<b;y++)m(y);return s}function Q0(e,t,r){var n=e.tick,i=e.ticks,a=e.viewBox,s=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!i||!i.length||!n)return[];if(se(c)||Ea.isSsr)return bre(i,typeof c=="number"&&se(c)?c:0);var h=[],p=l==="top"||l==="bottom"?"width":"height",b=f&&p==="width"?ul(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},m=function(x,j){var w=je(u)?u(x.value,j):x.value;return p==="width"?vre(ul(w,{fontSize:t,letterSpacing:r}),b,d):ul(w,{fontSize:t,letterSpacing:r})[p]},y=i.length>=2?Wt(i[1].coordinate-i[0].coordinate):1,v=xre(a,y,p);return c==="equidistantPreserveStart"?wre(y,v,m,i,s):(c==="preserveStart"||c==="preserveStartEnd"?h=Ere(y,v,m,i,s,c==="preserveStartEnd"):h=Nre(y,v,m,i,s),h.filter(function(g){return g.isShow}))}var Are=["viewBox"],Ore=["viewBox"],Pre=["ticks"];function Ks(e){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ks(e)}function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},as.apply(this,arguments)}function I1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I1(Object(r),!0).forEach(function(n){Z0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Kp(e,t){if(e==null)return{};var r=Tre(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Cre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sT(n.key),n)}}function kre(e,t,r){return t&&M1(e.prototype,t),r&&M1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $re(e,t,r){return t=vf(t),Ire(e,aT()?Reflect.construct(t,r||[],vf(e).constructor):t.apply(e,r))}function Ire(e,t){if(t&&(Ks(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mre(e)}function Mre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aT=function(){return!!e})()}function vf(e){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vf(e)}function Rre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ay(e,t)}function Ay(e,t){return Ay=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ay(e,t)}function Z0(e,t,r){return t=sT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sT(e){var t=Dre(e,"string");return Ks(t)=="symbol"?t:t+""}function Dre(e,t){if(Ks(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ks(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xo=function(e){function t(r){var n;return Cre(this,t),n=$re(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Rre(t,e),kre(t,[{key:"shouldComponentUpdate",value:function(n,i){var a=n.viewBox,s=Kp(n,Are),l=this.props,c=l.viewBox,u=Kp(l,Ore);return!ms(a,c)||!ms(s,u)||!ms(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,a=i.x,s=i.y,l=i.width,c=i.height,u=i.orientation,f=i.tickSize,d=i.mirror,h=i.tickMargin,p,b,m,y,v,g,x=d?-1:1,j=n.tickSize||f,w=se(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=b=n.coordinate,y=s+ +!d*c,m=y-x*j,g=m-x*h,v=w;break;case"left":m=y=n.coordinate,b=a+ +!d*l,p=b-x*j,v=p-x*h,g=w;break;case"right":m=y=n.coordinate,b=a+ +d*l,p=b+x*j,v=p+x*h,g=w;break;default:p=b=n.coordinate,y=s+ +d*c,m=y+x*j,g=m+x*h,v=w;break}return{line:{x1:p,y1:m,x2:b,y2:y},tick:{x:v,y:g}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s;switch(i){case"left":s=a?"start":"end";break;case"right":s=a?"end":"start";break;default:s="middle";break}return s}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,a=n.mirror,s="end";switch(i){case"left":case"right":s="middle";break;case"top":s=a?"start":"end";break;default:s=a?"end":"start";break}return s}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,a=n.y,s=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=ht(ht(ht({},ye(this.props,!1)),ye(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);d=ht(ht({},d),{},{x1:i,y1:a+h*l,x2:i+s,y2:a+h*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=ht(ht({},d),{},{x1:i+p*s,y1:a,x2:i+p*s,y2:a+l})}return $.createElement("line",as({},d,{className:Ee("recharts-cartesian-axis-line",vr(f,"className"))}))}},{key:"renderTicks",value:function(n,i,a){var s=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,h=l.unit,p=Q0(ht(ht({},this.props),{},{ticks:n}),i,a),b=this.getTickTextAnchor(),m=this.getTickVerticalAnchor(),y=ye(this.props,!1),v=ye(f,!1),g=ht(ht({},y),{},{fill:"none"},ye(c,!1)),x=p.map(function(j,w){var _=s.getTickLineCoord(j),S=_.line,E=_.tick,A=ht(ht(ht(ht({textAnchor:b,verticalAnchor:m},y),{},{stroke:"none",fill:u},v),E),{},{index:w,payload:j,visibleTicksCount:p.length,tickFormatter:d});return $.createElement(Ce,as({className:"recharts-cartesian-axis-tick",key:"tick-".concat(j.value,"-").concat(j.coordinate,"-").concat(j.tickCoord)},ya(s.props,j,w)),c&&$.createElement("line",as({},g,S,{className:Ee("recharts-cartesian-axis-tick-line",vr(c,"className"))})),f&&t.renderTickItem(f,A,"".concat(je(d)?d(j.value,w):j.value).concat(h||"")))});return $.createElement("g",{className:"recharts-cartesian-axis-ticks"},x)}},{key:"render",value:function(){var n=this,i=this.props,a=i.axisLine,s=i.width,l=i.height,c=i.ticksGenerator,u=i.className,f=i.hide;if(f)return null;var d=this.props,h=d.ticks,p=Kp(d,Pre),b=h;return je(c)&&(b=h&&h.length>0?c(this.props):c(p)),s<=0||l<=0||!b||!b.length?null:$.createElement(Ce,{className:Ee("recharts-cartesian-axis",u),ref:function(y){n.layerReference=y}},a&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),jt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,a){var s,l=Ee(i.className,"recharts-cartesian-axis-tick-value");return $.isValidElement(n)?s=$.cloneElement(n,ht(ht({},i),{},{className:l})):je(n)?s=n(ht(ht({},i),{},{className:l})):s=$.createElement(va,as({},i,{className:"recharts-cartesian-axis-tick-value"}),a),s}}])}(N.Component);Z0(xo,"displayName","CartesianAxis");Z0(xo,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Lre=["x1","y1","x2","y2","key"],Bre=["offset"];function wa(e){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(e)}function R1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R1(Object(r),!0).forEach(function(n){Fre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fre(e,t,r){return t=zre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zre(e){var t=Ure(e,"string");return wa(t)=="symbol"?t:t+""}function Ure(e,t){if(wa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ta.apply(this,arguments)}function D1(e,t){if(e==null)return{};var r=qre(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Wre=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,i=t.x,a=t.y,s=t.width,l=t.height,c=t.ry;return $.createElement("rect",{x:i,y:a,ry:c,width:s,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function oT(e,t){var r;if($.isValidElement(e))r=$.cloneElement(e,t);else if(je(e))r=e(t);else{var n=t.x1,i=t.y1,a=t.x2,s=t.y2,l=t.key,c=D1(t,Lre),u=ye(c,!1);u.offset;var f=D1(u,Bre);r=$.createElement("line",ta({},f,{x1:n,y1:i,x2:a,y2:s,fill:"none",key:l}))}return r}function Vre(e){var t=e.x,r=e.width,n=e.horizontal,i=n===void 0?!0:n,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,c){var u=Lt(Lt({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return oT(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-horizontal"},s)}function Hre(e){var t=e.y,r=e.height,n=e.vertical,i=n===void 0?!0:n,a=e.verticalPoints;if(!i||!a||!a.length)return null;var s=a.map(function(l,c){var u=Lt(Lt({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return oT(i,u)});return $.createElement("g",{className:"recharts-cartesian-grid-vertical"},s)}function Kre(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,a=e.width,s=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,p){return h-p});i!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var b=!f[p+1],m=b?i+s-h:f[p+1]-h;if(m<=0)return null;var y=p%t.length;return $.createElement("rect",{key:"react-".concat(p),y:h,x:n,height:m,width:a,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Gre(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,i=e.fillOpacity,a=e.x,s=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(h){return Math.round(h+a-a)}).sort(function(h,p){return h-p});a!==f[0]&&f.unshift(0);var d=f.map(function(h,p){var b=!f[p+1],m=b?a+l-h:f[p+1]-h;if(m<=0)return null;var y=p%n.length;return $.createElement("rect",{key:"react-".concat(p),x:h,y:s,width:m,height:c,stroke:"none",fill:n[y],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return $.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Xre=function(t,r){var n=t.xAxis,i=t.width,a=t.height,s=t.offset;return n2(Q0(Lt(Lt(Lt({},xo.defaultProps),n),{},{ticks:Pn(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.left,s.left+s.width,r)},Yre=function(t,r){var n=t.yAxis,i=t.width,a=t.height,s=t.offset;return n2(Q0(Lt(Lt(Lt({},xo.defaultProps),n),{},{ticks:Pn(n,!0),viewBox:{x:0,y:0,width:i,height:a}})),s.top,s.top+s.height,r)},Fa={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Uu(e){var t,r,n,i,a,s,l=G0(),c=X0(),u=Dte(),f=Lt(Lt({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Fa.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Fa.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Fa.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:Fa.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:Fa.vertical,verticalFill:(s=e.verticalFill)!==null&&s!==void 0?s:Fa.verticalFill,x:se(e.x)?e.x:u.left,y:se(e.y)?e.y:u.top,width:se(e.width)?e.width:u.width,height:se(e.height)?e.height:u.height}),d=f.x,h=f.y,p=f.width,b=f.height,m=f.syncWithTicks,y=f.horizontalValues,v=f.verticalValues,g=Ite(),x=Mte();if(!se(p)||p<=0||!se(b)||b<=0||!se(d)||d!==+d||!se(h)||h!==+h)return null;var j=f.verticalCoordinatesGenerator||Xre,w=f.horizontalCoordinatesGenerator||Yre,_=f.horizontalPoints,S=f.verticalPoints;if((!_||!_.length)&&je(w)){var E=y&&y.length,A=w({yAxis:x?Lt(Lt({},x),{},{ticks:E?y:x.ticks}):void 0,width:l,height:c,offset:u},E?!0:m);tn(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(wa(A),"]")),Array.isArray(A)&&(_=A)}if((!S||!S.length)&&je(j)){var O=v&&v.length,P=j({xAxis:g?Lt(Lt({},g),{},{ticks:O?v:g.ticks}):void 0,width:l,height:c,offset:u},O?!0:m);tn(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(wa(P),"]")),Array.isArray(P)&&(S=P)}return $.createElement("g",{className:"recharts-cartesian-grid"},$.createElement(Wre,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),$.createElement(Vre,ta({},f,{offset:u,horizontalPoints:_,xAxis:g,yAxis:x})),$.createElement(Hre,ta({},f,{offset:u,verticalPoints:S,xAxis:g,yAxis:x})),$.createElement(Kre,ta({},f,{horizontalPoints:_})),$.createElement(Gre,ta({},f,{verticalPoints:S})))}Uu.displayName="CartesianGrid";var Jre=["type","layout","connectNulls","ref"],Qre=["key"];function Gs(e){"@babel/helpers - typeof";return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gs(e)}function L1(e,t){if(e==null)return{};var r=Zre(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gl.apply(this,arguments)}function B1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B1(Object(r),!0).forEach(function(n){Xr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function za(e){return nne(e)||rne(e)||tne(e)||ene()}function ene(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tne(e,t){if(e){if(typeof e=="string")return Oy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oy(e,t)}}function rne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nne(e){if(Array.isArray(e))return Oy(e)}function Oy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ine(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cT(n.key),n)}}function ane(e,t,r){return t&&F1(e.prototype,t),r&&F1(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sne(e,t,r){return t=xf(t),one(e,lT()?Reflect.construct(t,r||[],xf(e).constructor):t.apply(e,r))}function one(e,t){if(t&&(Gs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lne(e)}function lne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(lT=function(){return!!e})()}function xf(e){return xf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xf(e)}function cne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Py(e,t)}function Py(e,t){return Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Py(e,t)}function Xr(e,t,r){return t=cT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cT(e){var t=une(e,"string");return Gs(t)=="symbol"?t:t+""}function une(e,t){if(Gs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var la=function(e){function t(){var r;ine(this,t);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return r=sne(this,t,[].concat(i)),Xr(r,"state",{isAnimationFinished:!0,totalLength:0}),Xr(r,"generateSimpleStrokeDasharray",function(s,l){return"".concat(l,"px ").concat(s-l,"px")}),Xr(r,"getStrokeDasharray",function(s,l,c){var u=c.reduce(function(v,g){return v+g});if(!u)return r.generateSimpleStrokeDasharray(l,s);for(var f=Math.floor(s/u),d=s%u,h=l-s,p=[],b=0,m=0;b<c.length;m+=c[b],++b)if(m+c[b]>d){p=[].concat(za(c.slice(0,b)),[d-m]);break}var y=p.length%2===0?[0,h]:[h];return[].concat(za(t.repeat(c,f)),za(p),y).map(function(v){return"".concat(v,"px")}).join(", ")}),Xr(r,"id",fo("recharts-line-")),Xr(r,"pathRef",function(s){r.mainCurve=s}),Xr(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Xr(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return cne(t,e),ane(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,s=a.points,l=a.xAxis,c=a.yAxis,u=a.layout,f=a.children,d=xr(f,Bc);if(!d)return null;var h=function(m,y){return{x:m.x,y:m.y,value:m.value,errorVal:yt(m.payload,y)}},p={clipPath:n?"url(#clipPath-".concat(i,")"):null};return $.createElement(Ce,p,d.map(function(b){return $.cloneElement(b,{key:"bar-".concat(b.props.dataKey),data:s,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,i,a){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,f=l.dataKey,d=ye(this.props,!1),h=ye(c,!0),p=u.map(function(m,y){var v=lr(lr(lr({key:"dot-".concat(y),r:3},d),h),{},{index:y,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:u});return t.renderDotItem(c,v)}),b={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return $.createElement(Ce,gl({className:"recharts-line-dots",key:"dots"},b),p)}},{key:"renderCurveStatically",value:function(n,i,a,s){var l=this.props,c=l.type,u=l.layout,f=l.connectNulls;l.ref;var d=L1(l,Jre),h=lr(lr(lr({},ye(d,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:n},s),{},{type:c,layout:u,connectNulls:f});return $.createElement(Qd,gl({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var a=this,s=this.props,l=s.points,c=s.strokeDasharray,u=s.isAnimationActive,f=s.animationBegin,d=s.animationDuration,h=s.animationEasing,p=s.animationId,b=s.animateNewValues,m=s.width,y=s.height,v=this.state,g=v.prevPoints,x=v.totalLength;return $.createElement(mn,{begin:f,duration:d,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(j){var w=j.t;if(g){var _=g.length/l.length,S=l.map(function(k,M){var L=Math.floor(M*_);if(g[L]){var B=g[L],D=fr(B.x,k.x),q=fr(B.y,k.y);return lr(lr({},k),{},{x:D(w),y:q(w)})}if(b){var R=fr(m*2,k.x),I=fr(y/2,k.y);return lr(lr({},k),{},{x:R(w),y:I(w)})}return lr(lr({},k),{},{x:k.x,y:k.y})});return a.renderCurveStatically(S,n,i)}var E=fr(0,x),A=E(w),O;if(c){var P="".concat(c).split(/[,\s]+/gim).map(function(k){return parseFloat(k)});O=a.getStrokeDasharray(A,x,P)}else O=a.generateSimpleStrokeDasharray(x,A);return a.renderCurveStatically(l,n,i,{strokeDasharray:O})})}},{key:"renderCurve",value:function(n,i){var a=this.props,s=a.points,l=a.isAnimationActive,c=this.state,u=c.prevPoints,f=c.totalLength;return l&&s&&s.length&&(!u&&f>0||!Lc(u,s))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(s,n,i)}},{key:"render",value:function(){var n,i=this.props,a=i.hide,s=i.dot,l=i.points,c=i.className,u=i.xAxis,f=i.yAxis,d=i.top,h=i.left,p=i.width,b=i.height,m=i.isAnimationActive,y=i.id;if(a||!l||!l.length)return null;var v=this.state.isAnimationFinished,g=l.length===1,x=Ee("recharts-line",c),j=u&&u.allowDataOverflow,w=f&&f.allowDataOverflow,_=j||w,S=Ne(y)?this.id:y,E=(n=ye(s,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},A=E.r,O=A===void 0?3:A,P=E.strokeWidth,k=P===void 0?2:P,M=k4(s)?s:{},L=M.clipDot,B=L===void 0?!0:L,D=O*2+k;return $.createElement(Ce,{className:x},j||w?$.createElement("defs",null,$.createElement("clipPath",{id:"clipPath-".concat(S)},$.createElement("rect",{x:j?h:h-p/2,y:w?d:d-b/2,width:j?p:p*2,height:w?b:b*2})),!B&&$.createElement("clipPath",{id:"clipPath-dots-".concat(S)},$.createElement("rect",{x:h-D/2,y:d-D/2,width:p+D,height:b+D}))):null,!g&&this.renderCurve(_,S),this.renderErrorBar(_,S),(g||s)&&this.renderDots(_,B,S),(!m||v)&&$n.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var a=n.length%2!==0?[].concat(za(n),[0]):n,s=[],l=0;l<i;++l)s=[].concat(za(s),za(a));return s}},{key:"renderDotItem",value:function(n,i){var a;if($.isValidElement(n))a=$.cloneElement(n,i);else if(je(n))a=n(i);else{var s=i.key,l=L1(i,Qre),c=Ee("recharts-line-dot",typeof n!="boolean"?n.className:"");a=$.createElement(_h,gl({key:s},l,{className:c}))}return a}}])}(N.PureComponent);Xr(la,"displayName","Line");Xr(la,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ea.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Xr(la,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,s=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,f=t.layout,d=c.map(function(h,p){var b=yt(h,s);return f==="horizontal"?{x:uj({axis:r,ticks:i,bandSize:l,entry:h,index:p}),y:Ne(b)?null:n.scale(b),value:b,payload:h}:{x:Ne(b)?null:r.scale(b),y:uj({axis:n,ticks:a,bandSize:l,entry:h,index:p}),value:b,payload:h}});return lr({points:d,layout:f},u)});function Xs(e){"@babel/helpers - typeof";return Xs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(e)}function dne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,fT(n.key),n)}}function hne(e,t,r){return t&&fne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pne(e,t,r){return t=bf(t),mne(e,uT()?Reflect.construct(t,r||[],bf(e).constructor):t.apply(e,r))}function mne(e,t){if(t&&(Xs(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gne(e)}function gne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(uT=function(){return!!e})()}function bf(e){return bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bf(e)}function yne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ty(e,t)}function Ty(e,t){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ty(e,t)}function dT(e,t,r){return t=fT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fT(e){var t=vne(e,"string");return Xs(t)=="symbol"?t:t+""}function vne(e,t){if(Xs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cy.apply(this,arguments)}function xne(e){var t=e.xAxisId,r=G0(),n=X0(),i=Y2(t);return i==null?null:N.createElement(xo,Cy({},i,{className:Ee("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(s){return Pn(s,!0)}}))}var ca=function(e){function t(){return dne(this,t),pne(this,t,arguments)}return yne(t,e),hne(t,[{key:"render",value:function(){return N.createElement(xne,this.props)}}])}(N.Component);dT(ca,"displayName","XAxis");dT(ca,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ys(e){"@babel/helpers - typeof";return Ys=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ys(e)}function bne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,mT(n.key),n)}}function _ne(e,t,r){return t&&wne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jne(e,t,r){return t=wf(t),Sne(e,hT()?Reflect.construct(t,r||[],wf(e).constructor):t.apply(e,r))}function Sne(e,t){if(t&&(Ys(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nne(e)}function Nne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hT=function(){return!!e})()}function wf(e){return wf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wf(e)}function Ene(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ky(e,t)}function ky(e,t){return ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ky(e,t)}function pT(e,t,r){return t=mT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mT(e){var t=Ane(e,"string");return Ys(t)=="symbol"?t:t+""}function Ane(e,t){if(Ys(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ys(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$y.apply(this,arguments)}var One=function(t){var r=t.yAxisId,n=G0(),i=X0(),a=J2(r);return a==null?null:N.createElement(xo,$y({},a,{className:Ee("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return Pn(l,!0)}}))},ua=function(e){function t(){return bne(this,t),jne(this,t,arguments)}return Ene(t,e),_ne(t,[{key:"render",value:function(){return N.createElement(One,this.props)}}])}(N.Component);pT(ua,"displayName","YAxis");pT(ua,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function z1(e){return kne(e)||Cne(e)||Tne(e)||Pne()}function Pne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tne(e,t){if(e){if(typeof e=="string")return Iy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Iy(e,t)}}function Cne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kne(e){if(Array.isArray(e))return Iy(e)}function Iy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var My=function(t,r,n,i,a){var s=xr(t,J0),l=xr(t,Ch),c=[].concat(z1(s),z1(l)),u=xr(t,$h),f="".concat(i,"Id"),d=i[0],h=r;if(c.length&&(h=c.reduce(function(m,y){if(y.props[f]===n&&hn(y.props,"extendDomain")&&se(y.props[d])){var v=y.props[d];return[Math.min(m[0],v),Math.max(m[1],v)]}return m},h)),u.length){var p="".concat(d,"1"),b="".concat(d,"2");h=u.reduce(function(m,y){if(y.props[f]===n&&hn(y.props,"extendDomain")&&se(y.props[p])&&se(y.props[b])){var v=y.props[p],g=y.props[b];return[Math.min(m[0],v,g),Math.max(m[1],v,g)]}return m},h)}return a&&a.length&&(h=a.reduce(function(m,y){return se(y)?[Math.min(m[0],y),Math.max(m[1],y)]:m},h)),h},gT={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function a(c,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new i(f,d||c,h),b=r?r+u:u;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],p]:c._events[b].push(p):(c._events[b]=p,c._eventsCount++),c}function s(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,b=new Array(p);h<p;h++)b[h]=d[h].fn;return b},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,p,b){var m=r?r+u:u;if(!this._events[m])return!1;var y=this._events[m],v=arguments.length,g,x;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,f),!0;case 3:return y.fn.call(y.context,f,d),!0;case 4:return y.fn.call(y.context,f,d,h),!0;case 5:return y.fn.call(y.context,f,d,h,p),!0;case 6:return y.fn.call(y.context,f,d,h,p,b),!0}for(x=1,g=new Array(v-1);x<v;x++)g[x-1]=arguments[x];y.fn.apply(y.context,g)}else{var j=y.length,w;for(x=0;x<j;x++)switch(y[x].once&&this.removeListener(u,y[x].fn,void 0,!0),v){case 1:y[x].fn.call(y[x].context);break;case 2:y[x].fn.call(y[x].context,f);break;case 3:y[x].fn.call(y[x].context,f,d);break;case 4:y[x].fn.call(y[x].context,f,d,h);break;default:if(!g)for(w=1,g=new Array(v-1);w<v;w++)g[w-1]=arguments[w];y[x].fn.apply(y[x].context,g)}}return!0},l.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return s(this,p),this;var b=this._events[p];if(b.fn)b.fn===f&&(!h||b.once)&&(!d||b.context===d)&&s(this,p);else{for(var m=0,y=[],v=b.length;m<v;m++)(b[m].fn!==f||h&&!b[m].once||d&&b[m].context!==d)&&y.push(b[m]);y.length?this._events[p]=y.length===1?y[0]:y:s(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&s(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(gT);var $ne=gT.exports;const Ine=Me($ne);var Gp=new Ine,Xp="recharts.syncMouseEvents";function bc(e){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bc(e)}function Mne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yT(n.key),n)}}function Dne(e,t,r){return t&&Rne(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yp(e,t,r){return t=yT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yT(e){var t=Lne(e,"string");return bc(t)=="symbol"?t:t+""}function Lne(e,t){if(bc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bne=function(){function e(){Mne(this,e),Yp(this,"activeIndex",0),Yp(this,"coordinateList",[]),Yp(this,"layout","horizontal")}return Dne(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,a=i===void 0?null:i,s=r.container,l=s===void 0?null:s,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,h=r.mouseHandlerCallback,p=h===void 0?null:h;this.coordinateList=(n=a??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,s=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=a+c+u,h=s+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:h})}}}])}();function Fne(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&se(n)&&se(i))return!0}return!1}function zne(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function vT(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,a=e.endAngle,s=Ve(t,r,n,i),l=Ve(t,r,n,a);return{points:[s,l],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function Une(e,t,r){var n,i,a,s;if(e==="horizontal")n=t.x,a=n,i=r.top,s=r.top+r.height;else if(e==="vertical")i=t.y,s=i,n=r.left,a=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,h=Ve(l,c,u,d),p=Ve(l,c,f,d);n=h.x,i=h.y,a=p.x,s=p.y}else return vT(t);return[{x:n,y:i},{x:a,y:s}]}function wc(e){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(e)}function U1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U1(Object(r),!0).forEach(function(n){qne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qne(e,t,r){return t=Wne(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wne(e){var t=Vne(e,"string");return wc(t)=="symbol"?t:t+""}function Vne(e,t){if(wc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hne(e){var t,r,n=e.element,i=e.tooltipEventType,a=e.isActive,s=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,h=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!a||!s||h!=="ScatterChart"&&i!=="axis")return null;var b,m=Qd;if(h==="ScatterChart")b=s,m=uQ;else if(h==="BarChart")b=zne(d,s,c,f),m=W0;else if(d==="radial"){var y=vT(s),v=y.cx,g=y.cy,x=y.radius,j=y.startAngle,w=y.endAngle;b={cx:v,cy:g,startAngle:j,endAngle:w,innerRadius:x,outerRadius:x},m=p2}else b={points:Une(d,s,c)},m=Qd;var _=Eu(Eu(Eu(Eu({stroke:"#ccc",pointerEvents:"none"},c),b),ye(p,!1)),{},{payload:l,payloadIndex:u,className:Ee("recharts-tooltip-cursor",p.className)});return N.isValidElement(p)?N.cloneElement(p,_):N.createElement(m,_)}var Kne=["item"],Gne=["children","className","width","height","style","compact","title","desc"];function Js(e){"@babel/helpers - typeof";return Js=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Js(e)}function ss(){return ss=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ss.apply(this,arguments)}function q1(e,t){return Jne(e)||Yne(e,t)||bT(e,t)||Xne()}function Xne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(c=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,i=f}finally{try{if(!c&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return l}}function Jne(e){if(Array.isArray(e))return e}function W1(e,t){if(e==null)return{};var r=Qne(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Qne(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Zne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wT(n.key),n)}}function tie(e,t,r){return t&&eie(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function rie(e,t,r){return t=_f(t),nie(e,xT()?Reflect.construct(t,r||[],_f(e).constructor):t.apply(e,r))}function nie(e,t){if(t&&(Js(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iie(e)}function iie(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xT=function(){return!!e})()}function _f(e){return _f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_f(e)}function aie(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ry(e,t)}function Ry(e,t){return Ry=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ry(e,t)}function Qs(e){return lie(e)||oie(e)||bT(e)||sie()}function sie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bT(e,t){if(e){if(typeof e=="string")return Dy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dy(e,t)}}function oie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lie(e){if(Array.isArray(e))return Dy(e)}function Dy(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V1(Object(r),!0).forEach(function(n){ve(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ve(e,t,r){return t=wT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wT(e){var t=cie(e,"string");return Js(t)=="symbol"?t:t+""}function cie(e,t){if(Js(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Js(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uie={xAxis:["bottom","top"],yAxis:["left","right"]},die={width:"100%",height:"100%"},_T={x:0,y:0};function Au(e){return e}var fie=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},hie=function(t,r,n,i){var a=r.find(function(f){return f&&f.index===n});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var s=a.coordinate,l=i.radius;return X(X(X({},i),Ve(i.cx,i.cy,l,s)),{},{angle:s,radius:l})}var c=a.coordinate,u=i.angle;return X(X(X({},i),Ve(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return _T},Ih=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,a=r.dataEndIndex,s=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Qs(l),Qs(u)):l},[]);return s.length>0?s:t&&t.length&&se(i)&&se(a)?t.slice(i,a+1):[]};function jT(e){return e==="number"?[0,"auto"]:void 0}var Ly=function(t,r,n,i){var a=t.graphicalItems,s=t.tooltipAxis,l=Ih(r,t);return n<0||!a||!a.length||n>=l.length?null:a.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(s.dataKey&&!s.allowDuplicatedCategory){var p=d===void 0?l:d;h=wd(p,s.dataKey,i)}else h=d&&d[n]||l[n];return h?[].concat(Qs(c),[l2(u,h)]):c},[])},H1=function(t,r,n,i){var a=i||{x:t.chartX,y:t.chartY},s=fie(a,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=$G(s,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,h=Ly(t,r,f,d),p=hie(n,l,f,a);return{activeTooltipIndex:f,activeLabel:d,activePayload:h,activeCoordinate:p}}return null},pie=function(t,r){var n=r.axes,i=r.graphicalItems,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=t.stackOffset,p=r2(f,a);return n.reduce(function(b,m){var y,v=m.type.defaultProps!==void 0?X(X({},m.type.defaultProps),m.props):m.props,g=v.type,x=v.dataKey,j=v.allowDataOverflow,w=v.allowDuplicatedCategory,_=v.scale,S=v.ticks,E=v.includeHidden,A=v[s];if(b[A])return b;var O=Ih(t.data,{graphicalItems:i.filter(function(C){var F,Q=s in C.props?C.props[s]:(F=C.type.defaultProps)===null||F===void 0?void 0:F[s];return Q===A}),dataStartIndex:c,dataEndIndex:u}),P=O.length,k,M,L;Fne(v.domain,j,g)&&(k=Qg(v.domain,null,j),p&&(g==="number"||_!=="auto")&&(L=fl(O,x,"category")));var B=jT(g);if(!k||k.length===0){var D,q=(D=v.domain)!==null&&D!==void 0?D:B;if(x){if(k=fl(O,x,g),g==="category"&&p){var R=_4(k);w&&R?(M=k,k=cf(0,P)):w||(k=pj(q,k,m).reduce(function(C,F){return C.indexOf(F)>=0?C:[].concat(Qs(C),[F])},[]))}else if(g==="category")w?k=k.filter(function(C){return C!==""&&!Ne(C)}):k=pj(q,k,m).reduce(function(C,F){return C.indexOf(F)>=0||F===""||Ne(F)?C:[].concat(Qs(C),[F])},[]);else if(g==="number"){var I=LG(O,i.filter(function(C){var F,Q,Z=s in C.props?C.props[s]:(F=C.type.defaultProps)===null||F===void 0?void 0:F[s],ee="hide"in C.props?C.props.hide:(Q=C.type.defaultProps)===null||Q===void 0?void 0:Q.hide;return Z===A&&(E||!ee)}),x,a,f);I&&(k=I)}p&&(g==="number"||_!=="auto")&&(L=fl(O,x,"category"))}else p?k=cf(0,P):l&&l[A]&&l[A].hasStack&&g==="number"?k=h==="expand"?[0,1]:o2(l[A].stackGroups,c,u):k=t2(O,i.filter(function(C){var F=s in C.props?C.props[s]:C.type.defaultProps[s],Q="hide"in C.props?C.props.hide:C.type.defaultProps.hide;return F===A&&(E||!Q)}),g,f,!0);if(g==="number")k=My(d,k,A,a,S),q&&(k=Qg(q,k,j));else if(g==="category"&&q){var z=q,W=k.every(function(C){return z.indexOf(C)>=0});W&&(k=z)}}return X(X({},b),{},ve({},A,X(X({},v),{},{axisType:a,domain:k,categoricalDomain:L,duplicateDomain:M,originalDomain:(y=v.domain)!==null&&y!==void 0?y:B,isCategorical:p,layout:f})))},{})},mie=function(t,r){var n=r.graphicalItems,i=r.Axis,a=r.axisType,s=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,h=Ih(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=h.length,b=r2(f,a),m=-1;return n.reduce(function(y,v){var g=v.type.defaultProps!==void 0?X(X({},v.type.defaultProps),v.props):v.props,x=g[s],j=jT("number");if(!y[x]){m++;var w;return b?w=cf(0,p):l&&l[x]&&l[x].hasStack?(w=o2(l[x].stackGroups,c,u),w=My(d,w,x,a)):(w=Qg(j,t2(h,n.filter(function(_){var S,E,A=s in _.props?_.props[s]:(S=_.type.defaultProps)===null||S===void 0?void 0:S[s],O="hide"in _.props?_.props.hide:(E=_.type.defaultProps)===null||E===void 0?void 0:E.hide;return A===x&&!O}),"number",f),i.defaultProps.allowDataOverflow),w=My(d,w,x,a)),X(X({},y),{},ve({},x,X(X({axisType:a},i.defaultProps),{},{hide:!0,orientation:vr(uie,"".concat(a,".").concat(m%2),null),domain:w,originalDomain:j,isCategorical:b,layout:f})))}return y},{})},gie=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,a=r.AxisComp,s=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(i,"Id"),h=xr(f,a),p={};return h&&h.length?p=pie(t,{axes:h,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):s&&s.length&&(p=mie(t,{Axis:a,graphicalItems:s,axisType:i,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},yie=function(t){var r=ni(t),n=Pn(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:y0(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Xd(r,n)}},K1=function(t){var r=t.children,n=t.defaultShowTooltip,i=dr(r,Us),a=0,s=0;return t.data&&t.data.length!==0&&(s=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(s=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:s,activeTooltipIndex:-1,isTooltipActive:!!n}},vie=function(t){return!t||!t.length?!1:t.some(function(r){var n=Cn(r&&r.type);return n&&n.indexOf("Bar")>=0})},G1=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xie=function(t,r){var n=t.props,i=t.graphicalItems,a=t.xAxisMap,s=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,h=n.margin||{},p=dr(d,Us),b=dr(d,vi),m=Object.keys(c).reduce(function(w,_){var S=c[_],E=S.orientation;return!S.mirror&&!S.hide?X(X({},w),{},ve({},E,w[E]+S.width)):w},{left:h.left||0,right:h.right||0}),y=Object.keys(s).reduce(function(w,_){var S=s[_],E=S.orientation;return!S.mirror&&!S.hide?X(X({},w),{},ve({},E,vr(w,"".concat(E))+S.height)):w},{top:h.top||0,bottom:h.bottom||0}),v=X(X({},y),m),g=v.bottom;p&&(v.bottom+=p.props.height||Us.defaultProps.height),b&&r&&(v=RG(v,i,n,r));var x=u-v.left-v.right,j=f-v.top-v.bottom;return X(X({brushBottom:g},v),{},{width:Math.max(x,0),height:Math.max(j,0)})},bie=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},ex=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,s=t.validateTooltipEventTypes,l=s===void 0?["axis"]:s,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,h=function(v,g){var x=g.graphicalItems,j=g.stackGroups,w=g.offset,_=g.updateId,S=g.dataStartIndex,E=g.dataEndIndex,A=v.barSize,O=v.layout,P=v.barGap,k=v.barCategoryGap,M=v.maxBarSize,L=G1(O),B=L.numericAxisName,D=L.cateAxisName,q=vie(x),R=[];return x.forEach(function(I,z){var W=Ih(v.data,{graphicalItems:[I],dataStartIndex:S,dataEndIndex:E}),C=I.type.defaultProps!==void 0?X(X({},I.type.defaultProps),I.props):I.props,F=C.dataKey,Q=C.maxBarSize,Z=C["".concat(B,"Id")],ee=C["".concat(D,"Id")],le={},ce=c.reduce(function(U,re){var Se=g["".concat(re.axisType,"Map")],ge=C["".concat(re.axisType,"Id")];Se&&Se[ge]||re.axisType==="zAxis"||ba();var _e=Se[ge];return X(X({},U),{},ve(ve({},re.axisType,_e),"".concat(re.axisType,"Ticks"),Pn(_e)))},le),te=ce[D],V=ce["".concat(D,"Ticks")],ie=j&&j[Z]&&j[Z].hasStack&&KG(I,j[Z].stackGroups),K=Cn(I.type).indexOf("Bar")>=0,H=Xd(te,V),J=[],he=q&&IG({barSize:A,stackGroups:j,totalSize:bie(ce,D)});if(K){var we,Y,fe=Ne(Q)?M:Q,T=(we=(Y=Xd(te,V,!0))!==null&&Y!==void 0?Y:fe)!==null&&we!==void 0?we:0;J=MG({barGap:P,barCategoryGap:k,bandSize:T!==H?T:H,sizeList:he[ee],maxBarSize:fe}),T!==H&&(J=J.map(function(U){return X(X({},U),{},{position:X(X({},U.position),{},{offset:U.position.offset-T/2})})}))}var ae=I&&I.type&&I.type.getComposedData;ae&&R.push({props:X(X({},ae(X(X({},ce),{},{displayedData:W,props:v,dataKey:F,item:I,bandSize:H,barPosition:J,offset:w,stackedData:ie,layout:O,dataStartIndex:S,dataEndIndex:E}))),{},ve(ve(ve({key:I.key||"item-".concat(z)},B,ce[B]),D,ce[D]),"animationId",_)),childIndex:M4(I,v.children),item:I})}),R},p=function(v,g){var x=v.props,j=v.dataStartIndex,w=v.dataEndIndex,_=v.updateId;if(!ow({props:x}))return null;var S=x.children,E=x.layout,A=x.stackOffset,O=x.data,P=x.reverseStackOrder,k=G1(E),M=k.numericAxisName,L=k.cateAxisName,B=xr(S,n),D=VG(O,B,"".concat(M,"Id"),"".concat(L,"Id"),A,P),q=c.reduce(function(C,F){var Q="".concat(F.axisType,"Map");return X(X({},C),{},ve({},Q,gie(x,X(X({},F),{},{graphicalItems:B,stackGroups:F.axisType===M&&D,dataStartIndex:j,dataEndIndex:w}))))},{}),R=xie(X(X({},q),{},{props:x,graphicalItems:B}),g==null?void 0:g.legendBBox);Object.keys(q).forEach(function(C){q[C]=f(x,q[C],R,C.replace("Map",""),r)});var I=q["".concat(L,"Map")],z=yie(I),W=h(x,X(X({},q),{},{dataStartIndex:j,dataEndIndex:w,updateId:_,graphicalItems:B,stackGroups:D,offset:R}));return X(X({formattedGraphicalItems:W,graphicalItems:B,offset:R,stackGroups:D},z),q)},b=function(y){function v(g){var x,j,w;return Zne(this,v),w=rie(this,v,[g]),ve(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ve(w,"accessibilityManager",new Bne),ve(w,"handleLegendBBoxUpdate",function(_){if(_){var S=w.state,E=S.dataStartIndex,A=S.dataEndIndex,O=S.updateId;w.setState(X({legendBBox:_},p({props:w.props,dataStartIndex:E,dataEndIndex:A,updateId:O},X(X({},w.state),{},{legendBBox:_}))))}}),ve(w,"handleReceiveSyncEvent",function(_,S,E){if(w.props.syncId===_){if(E===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(S)}}),ve(w,"handleBrushChange",function(_){var S=_.startIndex,E=_.endIndex;if(S!==w.state.dataStartIndex||E!==w.state.dataEndIndex){var A=w.state.updateId;w.setState(function(){return X({dataStartIndex:S,dataEndIndex:E},p({props:w.props,dataStartIndex:S,dataEndIndex:E,updateId:A},w.state))}),w.triggerSyncEvent({dataStartIndex:S,dataEndIndex:E})}}),ve(w,"handleMouseEnter",function(_){var S=w.getMouseInfo(_);if(S){var E=X(X({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var A=w.props.onMouseEnter;je(A)&&A(E,_)}}),ve(w,"triggeredAfterMouseMove",function(_){var S=w.getMouseInfo(_),E=S?X(X({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(E),w.triggerSyncEvent(E);var A=w.props.onMouseMove;je(A)&&A(E,_)}),ve(w,"handleItemMouseEnter",function(_){w.setState(function(){return{isTooltipActive:!0,activeItem:_,activePayload:_.tooltipPayload,activeCoordinate:_.tooltipPosition||{x:_.cx,y:_.cy}}})}),ve(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),ve(w,"handleMouseMove",function(_){_.persist(),w.throttleTriggeredAfterMouseMove(_)}),ve(w,"handleMouseLeave",function(_){w.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var E=w.props.onMouseLeave;je(E)&&E(S,_)}),ve(w,"handleOuterEvent",function(_){var S=I4(_),E=vr(w.props,"".concat(S));if(S&&je(E)){var A,O;/.*touch.*/i.test(S)?O=w.getMouseInfo(_.changedTouches[0]):O=w.getMouseInfo(_),E((A=O)!==null&&A!==void 0?A:{},_)}}),ve(w,"handleClick",function(_){var S=w.getMouseInfo(_);if(S){var E=X(X({},S),{},{isTooltipActive:!0});w.setState(E),w.triggerSyncEvent(E);var A=w.props.onClick;je(A)&&A(E,_)}}),ve(w,"handleMouseDown",function(_){var S=w.props.onMouseDown;if(je(S)){var E=w.getMouseInfo(_);S(E,_)}}),ve(w,"handleMouseUp",function(_){var S=w.props.onMouseUp;if(je(S)){var E=w.getMouseInfo(_);S(E,_)}}),ve(w,"handleTouchMove",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(_.changedTouches[0])}),ve(w,"handleTouchStart",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseDown(_.changedTouches[0])}),ve(w,"handleTouchEnd",function(_){_.changedTouches!=null&&_.changedTouches.length>0&&w.handleMouseUp(_.changedTouches[0])}),ve(w,"handleDoubleClick",function(_){var S=w.props.onDoubleClick;if(je(S)){var E=w.getMouseInfo(_);S(E,_)}}),ve(w,"handleContextMenu",function(_){var S=w.props.onContextMenu;if(je(S)){var E=w.getMouseInfo(_);S(E,_)}}),ve(w,"triggerSyncEvent",function(_){w.props.syncId!==void 0&&Gp.emit(Xp,w.props.syncId,_,w.eventEmitterSymbol)}),ve(w,"applySyncEvent",function(_){var S=w.props,E=S.layout,A=S.syncMethod,O=w.state.updateId,P=_.dataStartIndex,k=_.dataEndIndex;if(_.dataStartIndex!==void 0||_.dataEndIndex!==void 0)w.setState(X({dataStartIndex:P,dataEndIndex:k},p({props:w.props,dataStartIndex:P,dataEndIndex:k,updateId:O},w.state)));else if(_.activeTooltipIndex!==void 0){var M=_.chartX,L=_.chartY,B=_.activeTooltipIndex,D=w.state,q=D.offset,R=D.tooltipTicks;if(!q)return;if(typeof A=="function")B=A(R,_);else if(A==="value"){B=-1;for(var I=0;I<R.length;I++)if(R[I].value===_.activeLabel){B=I;break}}var z=X(X({},q),{},{x:q.left,y:q.top}),W=Math.min(M,z.x+z.width),C=Math.min(L,z.y+z.height),F=R[B]&&R[B].value,Q=Ly(w.state,w.props.data,B),Z=R[B]?{x:E==="horizontal"?R[B].coordinate:W,y:E==="horizontal"?C:R[B].coordinate}:_T;w.setState(X(X({},_),{},{activeLabel:F,activeCoordinate:Z,activePayload:Q,activeTooltipIndex:B}))}else w.setState(_)}),ve(w,"renderCursor",function(_){var S,E=w.state,A=E.isTooltipActive,O=E.activeCoordinate,P=E.activePayload,k=E.offset,M=E.activeTooltipIndex,L=E.tooltipAxisBandSize,B=w.getTooltipEventType(),D=(S=_.props.active)!==null&&S!==void 0?S:A,q=w.props.layout,R=_.key||"_recharts-cursor";return $.createElement(Hne,{key:R,activeCoordinate:O,activePayload:P,activeTooltipIndex:M,chartName:r,element:_,isActive:D,layout:q,offset:k,tooltipAxisBandSize:L,tooltipEventType:B})}),ve(w,"renderPolarAxis",function(_,S,E){var A=vr(_,"type.axisType"),O=vr(w.state,"".concat(A,"Map")),P=_.type.defaultProps,k=P!==void 0?X(X({},P),_.props):_.props,M=O&&O[k["".concat(A,"Id")]];return N.cloneElement(_,X(X({},M),{},{className:Ee(A,M.className),key:_.key||"".concat(S,"-").concat(E),ticks:Pn(M,!0)}))}),ve(w,"renderPolarGrid",function(_){var S=_.props,E=S.radialLines,A=S.polarAngles,O=S.polarRadius,P=w.state,k=P.radiusAxisMap,M=P.angleAxisMap,L=ni(k),B=ni(M),D=B.cx,q=B.cy,R=B.innerRadius,I=B.outerRadius;return N.cloneElement(_,{polarAngles:Array.isArray(A)?A:Pn(B,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(O)?O:Pn(L,!0).map(function(z){return z.coordinate}),cx:D,cy:q,innerRadius:R,outerRadius:I,key:_.key||"polar-grid",radialLines:E})}),ve(w,"renderLegend",function(){var _=w.state.formattedGraphicalItems,S=w.props,E=S.children,A=S.width,O=S.height,P=w.props.margin||{},k=A-(P.left||0)-(P.right||0),M=ZP({children:E,formattedGraphicalItems:_,legendWidth:k,legendContent:u});if(!M)return null;var L=M.item,B=W1(M,Kne);return N.cloneElement(L,X(X({},B),{},{chartWidth:A,chartHeight:O,margin:P,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),ve(w,"renderTooltip",function(){var _,S=w.props,E=S.children,A=S.accessibilityLayer,O=dr(E,Jt);if(!O)return null;var P=w.state,k=P.isTooltipActive,M=P.activeCoordinate,L=P.activePayload,B=P.activeLabel,D=P.offset,q=(_=O.props.active)!==null&&_!==void 0?_:k;return N.cloneElement(O,{viewBox:X(X({},D),{},{x:D.left,y:D.top}),active:q,label:B,payload:q?L:[],coordinate:M,accessibilityLayer:A})}),ve(w,"renderBrush",function(_){var S=w.props,E=S.margin,A=S.data,O=w.state,P=O.offset,k=O.dataStartIndex,M=O.dataEndIndex,L=O.updateId;return N.cloneElement(_,{key:_.key||"_recharts-brush",onChange:_u(w.handleBrushChange,_.props.onChange),data:A,x:se(_.props.x)?_.props.x:P.left,y:se(_.props.y)?_.props.y:P.top+P.height+P.brushBottom-(E.bottom||0),width:se(_.props.width)?_.props.width:P.width,startIndex:k,endIndex:M,updateId:"brush-".concat(L)})}),ve(w,"renderReferenceElement",function(_,S,E){if(!_)return null;var A=w,O=A.clipPathId,P=w.state,k=P.xAxisMap,M=P.yAxisMap,L=P.offset,B=_.type.defaultProps||{},D=_.props,q=D.xAxisId,R=q===void 0?B.xAxisId:q,I=D.yAxisId,z=I===void 0?B.yAxisId:I;return N.cloneElement(_,{key:_.key||"".concat(S,"-").concat(E),xAxis:k[R],yAxis:M[z],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:O})}),ve(w,"renderActivePoints",function(_){var S=_.item,E=_.activePoint,A=_.basePoint,O=_.childIndex,P=_.isRange,k=[],M=S.props.key,L=S.item.type.defaultProps!==void 0?X(X({},S.item.type.defaultProps),S.item.props):S.item.props,B=L.activeDot,D=L.dataKey,q=X(X({index:O,dataKey:D,cx:E.x,cy:E.y,r:4,fill:q0(S.item),strokeWidth:2,stroke:"#fff",payload:E.payload,value:E.value},ye(B,!1)),_d(B));return k.push(v.renderActiveDot(B,q,"".concat(M,"-activePoint-").concat(O))),A?k.push(v.renderActiveDot(B,X(X({},q),{},{cx:A.x,cy:A.y}),"".concat(M,"-basePoint-").concat(O))):P&&k.push(null),k}),ve(w,"renderGraphicChild",function(_,S,E){var A=w.filterFormatItem(_,S,E);if(!A)return null;var O=w.getTooltipEventType(),P=w.state,k=P.isTooltipActive,M=P.tooltipAxis,L=P.activeTooltipIndex,B=P.activeLabel,D=w.props.children,q=dr(D,Jt),R=A.props,I=R.points,z=R.isRange,W=R.baseLine,C=A.item.type.defaultProps!==void 0?X(X({},A.item.type.defaultProps),A.item.props):A.item.props,F=C.activeDot,Q=C.hide,Z=C.activeBar,ee=C.activeShape,le=!!(!Q&&k&&q&&(F||Z||ee)),ce={};O!=="axis"&&q&&q.props.trigger==="click"?ce={onClick:_u(w.handleItemMouseEnter,_.props.onClick)}:O!=="axis"&&(ce={onMouseLeave:_u(w.handleItemMouseLeave,_.props.onMouseLeave),onMouseEnter:_u(w.handleItemMouseEnter,_.props.onMouseEnter)});var te=N.cloneElement(_,X(X({},A.props),ce));function V(re){return typeof M.dataKey=="function"?M.dataKey(re.payload):null}if(le)if(L>=0){var ie,K;if(M.dataKey&&!M.allowDuplicatedCategory){var H=typeof M.dataKey=="function"?V:"payload.".concat(M.dataKey.toString());ie=wd(I,H,B),K=z&&W&&wd(W,H,B)}else ie=I==null?void 0:I[L],K=z&&W&&W[L];if(ee||Z){var J=_.props.activeIndex!==void 0?_.props.activeIndex:L;return[N.cloneElement(_,X(X(X({},A.props),ce),{},{activeIndex:J})),null,null]}if(!Ne(ie))return[te].concat(Qs(w.renderActivePoints({item:A,activePoint:ie,basePoint:K,childIndex:L,isRange:z})))}else{var he,we=(he=w.getItemByXY(w.state.activeCoordinate))!==null&&he!==void 0?he:{graphicalItem:te},Y=we.graphicalItem,fe=Y.item,T=fe===void 0?_:fe,ae=Y.childIndex,U=X(X(X({},A.props),ce),{},{activeIndex:ae});return[N.cloneElement(T,U),null,null]}return z?[te,null,null]:[te,null]}),ve(w,"renderCustomized",function(_,S,E){return N.cloneElement(_,X(X({key:"recharts-customized-".concat(E)},w.props),w.state))}),ve(w,"renderMap",{CartesianGrid:{handler:Au,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Au},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Au},YAxis:{handler:Au},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((x=g.id)!==null&&x!==void 0?x:fo("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=QO(w.triggeredAfterMouseMove,(j=g.throttleDelay)!==null&&j!==void 0?j:1e3/60),w.state={},w}return aie(v,y),tie(v,[{key:"componentDidMount",value:function(){var x,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(x=this.props.margin.left)!==null&&x!==void 0?x:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var x=this.props,j=x.children,w=x.data,_=x.height,S=x.layout,E=dr(j,Jt);if(E){var A=E.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var O=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,P=Ly(this.state,w,A,O),k=this.state.tooltipTicks[A].coordinate,M=(this.state.offset.top+_)/2,L=S==="horizontal",B=L?{x:k,y:M}:{y:k,x:M},D=this.state.formattedGraphicalItems.find(function(R){var I=R.item;return I.type.name==="Scatter"});D&&(B=X(X({},B),D.props.points[A].tooltipPosition),P=D.props.points[A].tooltipPayload);var q={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:O,activePayload:P,activeCoordinate:B};this.setState(q),this.renderCursor(E),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(x,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==x.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==x.margin){var w,_;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0}})}return null}},{key:"componentDidUpdate",value:function(x){hg([dr(x.children,Jt)],[dr(this.props.children,Jt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var x=dr(this.props.children,Jt);if(x&&typeof x.props.shared=="boolean"){var j=x.props.shared?"axis":"item";return l.indexOf(j)>=0?j:a}return a}},{key:"getMouseInfo",value:function(x){if(!this.container)return null;var j=this.container,w=j.getBoundingClientRect(),_=oW(w),S={chartX:Math.round(x.pageX-_.left),chartY:Math.round(x.pageY-_.top)},E=w.width/j.offsetWidth||1,A=this.inRange(S.chartX,S.chartY,E);if(!A)return null;var O=this.state,P=O.xAxisMap,k=O.yAxisMap,M=this.getTooltipEventType(),L=H1(this.state,this.props.data,this.props.layout,A);if(M!=="axis"&&P&&k){var B=ni(P).scale,D=ni(k).scale,q=B&&B.invert?B.invert(S.chartX):null,R=D&&D.invert?D.invert(S.chartY):null;return X(X({},S),{},{xValue:q,yValue:R},L)}return L?X(X({},S),L):null}},{key:"inRange",value:function(x,j){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,_=this.props.layout,S=x/w,E=j/w;if(_==="horizontal"||_==="vertical"){var A=this.state.offset,O=S>=A.left&&S<=A.left+A.width&&E>=A.top&&E<=A.top+A.height;return O?{x:S,y:E}:null}var P=this.state,k=P.angleAxisMap,M=P.radiusAxisMap;if(k&&M){var L=ni(k);return yj({x:S,y:E},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var x=this.props.children,j=this.getTooltipEventType(),w=dr(x,Jt),_={};w&&j==="axis"&&(w.props.trigger==="click"?_={onClick:this.handleClick}:_={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=_d(this.props,this.handleOuterEvent);return X(X({},S),_)}},{key:"addListener",value:function(){Gp.on(Xp,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Gp.removeListener(Xp,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(x,j,w){for(var _=this.state.formattedGraphicalItems,S=0,E=_.length;S<E;S++){var A=_[S];if(A.item===x||A.props.key===x.key||j===Cn(A.item.type)&&w===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var x=this.clipPathId,j=this.state.offset,w=j.left,_=j.top,S=j.height,E=j.width;return $.createElement("defs",null,$.createElement("clipPath",{id:x},$.createElement("rect",{x:w,y:_,height:S,width:E})))}},{key:"getXScales",value:function(){var x=this.state.xAxisMap;return x?Object.entries(x).reduce(function(j,w){var _=q1(w,2),S=_[0],E=_[1];return X(X({},j),{},ve({},S,E.scale))},{}):null}},{key:"getYScales",value:function(){var x=this.state.yAxisMap;return x?Object.entries(x).reduce(function(j,w){var _=q1(w,2),S=_[0],E=_[1];return X(X({},j),{},ve({},S,E.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(x){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[x])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(x){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[x])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(x){var j=this.state,w=j.formattedGraphicalItems,_=j.activeItem;if(w&&w.length)for(var S=0,E=w.length;S<E;S++){var A=w[S],O=A.props,P=A.item,k=P.type.defaultProps!==void 0?X(X({},P.type.defaultProps),P.props):P.props,M=Cn(P.type);if(M==="Bar"){var L=(O.data||[]).find(function(R){return WJ(x,R)});if(L)return{graphicalItem:A,payload:L}}else if(M==="RadialBar"){var B=(O.data||[]).find(function(R){return yj(x,R)});if(B)return{graphicalItem:A,payload:B}}else if(Ah(A,_)||Oh(A,_)||mc(A,_)){var D=kZ({graphicalItem:A,activeTooltipItem:_,itemData:k.data}),q=k.activeIndex===void 0?D:k.activeIndex;return{graphicalItem:X(X({},A),{},{childIndex:q}),payload:mc(A,_)?k.data[D]:A.props.data[D]}}}return null}},{key:"render",value:function(){var x=this;if(!ow(this))return null;var j=this.props,w=j.children,_=j.className,S=j.width,E=j.height,A=j.style,O=j.compact,P=j.title,k=j.desc,M=W1(j,Gne),L=ye(M,!1);if(O)return $.createElement(N1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement(mg,ss({},L,{width:S,height:E,title:P,desc:k}),this.renderClipPath(),cw(w,this.renderMap)));if(this.props.accessibilityLayer){var B,D;L.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,L.role=(D=this.props.role)!==null&&D!==void 0?D:"application",L.onKeyDown=function(R){x.accessibilityManager.keyboardEvent(R)},L.onFocus=function(){x.accessibilityManager.focus()}}var q=this.parseEventsOfWrapper();return $.createElement(N1,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},$.createElement("div",ss({className:Ee("recharts-wrapper",_),style:X({position:"relative",cursor:"default",width:S,height:E},A)},q,{ref:function(I){x.container=I}}),$.createElement(mg,ss({},L,{width:S,height:E,title:P,desc:k,style:die}),this.renderClipPath(),cw(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(N.Component);ve(b,"displayName",r),ve(b,"defaultProps",X({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),ve(b,"getDerivedStateFromProps",function(y,v){var g=y.dataKey,x=y.data,j=y.children,w=y.width,_=y.height,S=y.layout,E=y.stackOffset,A=y.margin,O=v.dataStartIndex,P=v.dataEndIndex;if(v.updateId===void 0){var k=K1(y);return X(X(X({},k),{},{updateId:0},p(X(X({props:y},k),{},{updateId:0}),v)),{},{prevDataKey:g,prevData:x,prevWidth:w,prevHeight:_,prevLayout:S,prevStackOffset:E,prevMargin:A,prevChildren:j})}if(g!==v.prevDataKey||x!==v.prevData||w!==v.prevWidth||_!==v.prevHeight||S!==v.prevLayout||E!==v.prevStackOffset||!ms(A,v.prevMargin)){var M=K1(y),L={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},B=X(X({},H1(v,x,S)),{},{updateId:v.updateId+1}),D=X(X(X({},M),L),B);return X(X(X({},D),p(X({props:y},D),v)),{},{prevDataKey:g,prevData:x,prevWidth:w,prevHeight:_,prevLayout:S,prevStackOffset:E,prevMargin:A,prevChildren:j})}if(!hg(j,v.prevChildren)){var q,R,I,z,W=dr(j,Us),C=W&&(q=(R=W.props)===null||R===void 0?void 0:R.startIndex)!==null&&q!==void 0?q:O,F=W&&(I=(z=W.props)===null||z===void 0?void 0:z.endIndex)!==null&&I!==void 0?I:P,Q=C!==O||F!==P,Z=!Ne(x),ee=Z&&!Q?v.updateId:v.updateId+1;return X(X({updateId:ee},p(X(X({props:y},v),{},{updateId:ee,dataStartIndex:C,dataEndIndex:F}),v)),{},{prevChildren:j,dataStartIndex:C,dataEndIndex:F})}return null}),ve(b,"renderActiveDot",function(y,v,g){var x;return N.isValidElement(y)?x=N.cloneElement(y,v):je(y)?x=y(v):x=$.createElement(_h,v),$.createElement(Ce,{className:"recharts-active-dot",key:g},x)});var m=N.forwardRef(function(v,g){return $.createElement(b,ss({},v,{ref:g}))});return m.displayName=b.displayName,m},wie=ex({chartName:"LineChart",GraphicalChild:la,axisComponents:[{axisType:"xAxis",AxisComp:ca},{axisType:"yAxis",AxisComp:ua}],formatAxisMap:U2}),X1=ex({chartName:"BarChart",GraphicalChild:In,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ca},{axisType:"yAxis",AxisComp:ua}],formatAxisMap:U2}),Y1=ex({chartName:"PieChart",GraphicalChild:gn,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Eh},{axisType:"radiusAxis",AxisComp:Sh}],formatAxisMap:nX,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Zt={async getAll(){try{const{data:e,error:t}=await G.from(oe.PROSPECTS).select("*");if(t)throw t;return(e||[]).sort((n,i)=>new Date(i.created_at)-new Date(n.created_at))}catch(e){throw console.error("Erreur rcupration prospects:",e),e}},async getById(e){try{const{data:t,error:r}=await G.from(oe.PROSPECTS).select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration prospect:",t),t}},async create(e){try{const t=["GROSSISTE PHARM","GROSSISTE PARA","PARA SUPER GROS","LABO PROD","AUTRE"],r=e.secteur&&t.includes(e.secteur)?e.secteur:"AUTRE",n={raison_sociale:e.raison_sociale||"",contact:e.contact||"",secteur:r,telephone:e.telephone||"",email:e.email||"",wilaya:e.wilaya||"",statut:"prospect",created_by:e.created_by||null},{data:i,error:a}=await G.from(oe.PROSPECTS).insert([n]).select();if(a)throw a;const s=i&&i.length>0?i[0]:n;if(e.commercial_assigned&&e.commercial_assigned.trim())try{await G.from(oe.PROSPECTS).update({commercial_assigned:e.commercial_assigned}).eq("id",s.id)}catch(l){console.warn(" Commercial non assign:",l)}try{const l=JSON.stringify([{action:"creation",details:"Prospect cr",created_at:new Date().toISOString(),created_by:e.created_by||"system"}]);await G.from(oe.PROSPECTS).update({historique_actions:l}).eq("id",s.id)}catch(l){console.warn(" Historique non disponible - Excutez la migration SQL:",l.message)}return s}catch(t){throw console.error("Erreur cration prospect:",t),t}},async update(e,t){try{const r=["GROSSISTE PHARM","GROSSISTE PARA","PARA SUPER GROS","LABO PROD","AUTRE"],n=t.secteur&&r.includes(t.secteur)?t.secteur:"AUTRE",i={raison_sociale:t.raison_sociale||"",contact:t.contact||"",secteur:n,telephone:t.telephone||"",email:t.email||"",wilaya:t.wilaya||""},{data:a,error:s}=await G.from(oe.PROSPECTS).update(i).eq("id",e).select();if(s)throw s;if(t.commercial_assigned&&t.commercial_assigned.trim())try{await G.from(oe.PROSPECTS).update({commercial_assigned:t.commercial_assigned}).eq("id",e)}catch(l){console.warn(" Commercial non assign:",l)}return await this.addHistorique(e,"modification","Prospect modifi"),a&&a.length>0?a[0]:i}catch(r){throw console.error("Erreur mise  jour prospect:",r),r}},async delete(e){try{const{error:t}=await G.from(oe.PROSPECTS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression prospect:",t),t}},async convertToClient(e){try{await this.addHistorique(e,"conversion","Converti en client actif");const{data:t,error:r}=await G.from(oe.PROSPECTS).update({statut:"actif"}).eq("id",e).select();if(r)throw r;return t&&t.length>0?t[0]:{id:e,statut:"actif"}}catch(t){throw console.error("Erreur conversion prospect:",t),t}},async addHistorique(e,t,r,n={}){try{const{data:i,error:a}=await G.from(oe.PROSPECTS).select("historique_actions").eq("id",e).single();if(a){console.warn(" Colonne historique_actions manquante - Utilisation LocalStorage temporaire"),this._addHistoriqueLocalStorage(e,t,r,n);return}let s=[];try{s=i.historique_actions?JSON.parse(i.historique_actions):[]}catch{s=[]}s.push({action:t,details:r,created_at:new Date().toISOString(),...n});const{error:l}=await G.from(oe.PROSPECTS).update({historique_actions:JSON.stringify(s)}).eq("id",e);l&&(console.warn(" Impossible de mettre  jour l'historique:",l),this._addHistoriqueLocalStorage(e,t,r,n))}catch(i){console.warn(" Erreur lors de l'ajout  l'historique:",i),this._addHistoriqueLocalStorage(e,t,r,n)}},_addHistoriqueLocalStorage(e,t,r,n={}){try{const i=`prospect_history_${e}`,a=localStorage.getItem(i);let s=a?JSON.parse(a):[];s.push({action:t,details:r,created_at:new Date().toISOString(),...n}),localStorage.setItem(i,JSON.stringify(s)),console.log(" Historique enregistr dans LocalStorage (temporaire)")}catch(i){console.error(" Impossible d'enregistrer dans LocalStorage:",i)}},async getHistorique(e){try{const{data:t,error:r}=await G.from(oe.PROSPECTS).select("historique_actions").eq("id",e).single();if(r)return console.warn(" Colonne historique_actions manquante - Utilisation LocalStorage temporaire"),this._getHistoriqueLocalStorage(e);try{return(t.historique_actions?JSON.parse(t.historique_actions):[]).sort((i,a)=>new Date(a.created_at)-new Date(i.created_at))}catch(n){return console.warn(" Erreur parsing historique:",n),this._getHistoriqueLocalStorage(e)}}catch(t){return console.warn(" Erreur rcupration historique:",t),this._getHistoriqueLocalStorage(e)}},_getHistoriqueLocalStorage(e){try{const t=`prospect_history_${e}`,r=localStorage.getItem(t);return r?JSON.parse(r).sort((i,a)=>new Date(a.created_at)-new Date(i.created_at)):[]}catch(t){return console.error(" Impossible de lire LocalStorage:",t),[]}},async getStats(){try{const{data:e,error:t}=await G.from(oe.PROSPECTS).select("statut");if(t)throw t;return{total:e.length,prospects:e.filter(n=>n.statut==="prospect").length,actifs:e.filter(n=>n.statut==="actif").length,inactifs:e.filter(n=>n.statut==="inactif").length}}catch(e){throw console.error("Erreur statistiques prospects:",e),e}}},rr={async getAll(){try{const{data:e,error:t}=await G.from(oe.PAIEMENTS).select(`
          *,
          created_by,
          client:prospects!client_id(raison_sociale, contact),
          installation:installations(application_installee, montant, type, created_by)
        `).order("date_paiement",{ascending:!1});if(t)throw t;return e.map(n=>{var c,u;const i=((c=n.installation)==null?void 0:c.montant)||0,a=n.montant||0,s=Math.max(0,i-a),l=n.created_by||((u=n.installation)==null?void 0:u.created_by)||null;return{...n,created_by:l,resteAPayer:s}})}catch(e){throw console.error("Erreur rcupration paiements:",e),e}},async getByClient(e){try{const{data:t,error:r}=await G.from(oe.PAIEMENTS).select(`
          id,
          installation_id,
          client_id,
          montant,
          mode_paiement,
          type,
          date_paiement,
          created_by,
          installation:installations(montant, type, created_by)
        `).eq("client_id",e).order("date_paiement",{ascending:!1});if(r)throw r;return t.map(i=>{var u,f;const a=((u=i.installation)==null?void 0:u.montant)||0,s=i.montant||0,l=Math.max(0,a-s),c=i.created_by||((f=i.installation)==null?void 0:f.created_by)||null;return{...i,created_by:c,resteAPayer:l}})}catch(t){throw console.error("Erreur rcupration paiements client:",t),t}},async getResteTotalClient(e){try{const{data:t,error:r}=await G.from(oe.INSTALLATIONS).select("id, montant").eq("client_id",e);if(r)throw r;const n=t.reduce((c,u)=>c+(u.montant||0),0),{data:i,error:a}=await G.from(oe.PAIEMENTS).select("montant").eq("client_id",e);if(a)throw a;const s=i.reduce((c,u)=>c+(u.montant||0),0),l=Math.max(0,n-s);return{totalInstallations:n,totalPaye:s,resteAPayer:l}}catch(t){throw console.error("Erreur calcul reste total:",t),t}},async create(e){try{const t={client_id:e.client_id,installation_id:e.installation_id,type:e.type,montant:e.montant,mode_paiement:e.mode_paiement,date_paiement:e.date_paiement||new Date().toISOString(),created_by:e.created_by||null},{data:r,error:n}=await G.from(oe.PAIEMENTS).insert([t]).select("*");if(n)throw n;return(r==null?void 0:r[0])||null}catch(t){throw console.error("Erreur cration paiement:",t),t}},async update(e,t){try{const{data:r,error:n}=await G.from(oe.PAIEMENTS).update(t).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact),
          installation:installations(application_installee, montant)
        `).single();if(n)throw n;return r}catch(r){throw console.error("Erreur mise  jour paiement:",r),r}},async delete(e){try{const{error:t}=await G.from(oe.PAIEMENTS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression paiement:",t),t}},async getStats(e=null,t=null){try{let r=G.from(oe.PAIEMENTS).select("montant, type, mode_paiement, date_paiement");e&&t&&(r=r.gte("date_paiement",e).lte("date_paiement",t));const{data:n,error:i}=await r;if(i)throw i;return{total:n.length,revenuTotal:n.reduce((s,l)=>s+(l.montant||0),0),acquisitions:n.filter(s=>s.type==="acquisition").length,abonnements:n.filter(s=>s.type==="abonnement").length,parMode:{especes:n.filter(s=>s.mode_paiement==="especes").length,virement:n.filter(s=>s.mode_paiement==="virement").length,cheque:n.filter(s=>s.mode_paiement==="cheque").length,autre:n.filter(s=>s.mode_paiement==="autre").length}}}catch(r){throw console.error("Erreur statistiques paiements:",r),r}},async getRevenusMensuels(e=new Date().getFullYear()){try{const{data:t,error:r}=await G.from(oe.PAIEMENTS).select("montant, date_paiement").gte("date_paiement",`${e}-01-01`).lte("date_paiement",`${e}-12-31`);if(r)throw r;const n=Array(12).fill(0);return t.forEach(i=>{const a=new Date(i.date_paiement).getMonth();n[a]+=i.montant||0}),n.map((i,a)=>({mois:["Jan","Fv","Mar","Avr","Mai","Jun","Jul","Ao","Sep","Oct","Nov","Dc"][a],montant:i}))}catch(t){throw console.error("Erreur revenus mensuels:",t),t}}},Pr={async getAll(){try{const{data:e,error:t}=await G.from(oe.INSTALLATIONS).select("*").order("date_installation",{ascending:!1});if(t)throw t;return await Promise.all(e.map(async n=>{let i={};if(n.client_id){const{data:a}=await G.from(oe.PROSPECTS).select("raison_sociale, contact, telephone, email").eq("id",n.client_id).single();i=a||{}}return{...n,client:i,type:n.type||"acquisition"}}))}catch(e){throw console.error("Erreur rcupration installations:",e),e}},async getByClient(e){try{const{data:t,error:r}=await G.from(oe.INSTALLATIONS).select("*").eq("client_id",e).order("date_installation",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur rcupration installations client:",t),t}},async hasPaiements(e){try{const{data:t,error:r,count:n}=await G.from(oe.PAIEMENTS).select("id",{count:"exact",head:!0}).eq("installation_id",e);if(r)throw r;return n>0}catch(t){return console.error("Erreur vrification paiements:",t),!1}},async create(e){var t;try{const{data:r,error:n}=await G.from(oe.INSTALLATIONS).insert([{client_id:e.client_id,application_installee:e.application_installee,montant:parseFloat(e.montant)||0,date_installation:e.date_installation,type:e.type||"acquisition",statut:e.statut||"en cours",created_by:e.created_by||null}]).select();if(n)throw n;const i=r[0];return(i.type==="abonnement"||((t=i.type)==null?void 0:t.toLowerCase())==="abonnement")&&await qt.createFromInstallation(i.id),await Zt.convertToClient(e.client_id),await Zt.addHistorique(e.client_id,"installation",`Installation cre: ${e.application_installee}`),i}catch(r){throw console.error("Erreur cration installation:",r),r}},async update(e,t){try{const r={};if(t.application_installee!==void 0&&(r.application_installee=t.application_installee),t.montant!==void 0&&(r.montant=parseFloat(t.montant)),t.type!==void 0&&(r.type=t.type||"acquisition"),t.statut!==void 0&&(r.statut=t.statut),t.date_installation!==void 0&&(r.date_installation=t.date_installation),!r.application_installee)throw new Error("application_installee est requis");if(!r.montant||isNaN(r.montant))throw new Error("montant est requis et doit tre un nombre");if(!r.statut)throw new Error("statut est requis");if(!r.date_installation)throw new Error("date_installation est requis");console.log("Donnes de mise  jour installation:",r);const{data:n,error:i}=await G.from(oe.INSTALLATIONS).update(r).eq("id",e).select();if(i)throw console.error("Erreur dtaille Supabase:",i),i;const a=n&&n.length>0?n[0]:null;if(!a)throw new Error("Installation non trouve aprs mise  jour");try{console.log("Recherche abonnements pour installation:",e);const{data:s,error:l}=await G.from(oe.ABONNEMENTS).select("*").eq("installation_id",e);if(l)return console.error("Erreur recherche abonnements:",l),a;if(console.log("Abonnements trouvs:",s),s&&s.length>0){for(const c of s){const u=new Date;u.setHours(0,0,0,0);const f=new Date(c.date_fin);f.setHours(0,0,0,0);const d=new Date(u);d.setDate(d.getDate()+30);let h="actif";f<u?h="expire":f<=d&&(h="en_alerte");const p={statut:h};if(t.date_installation){const b=new Date(t.date_installation),m=b.toISOString().split("T")[0],y=new Date(b);y.setFullYear(y.getFullYear()+1);const v=y.toISOString().split("T")[0];p.date_debut=m,p.date_fin=v}await G.from(oe.ABONNEMENTS).update(p).eq("id",c.id)}console.log("Abonnements mis  jour")}else console.log("Aucun abonnement trouv pour cette installation")}catch(s){console.error("Erreur dans mise  jour abonnement:",s)}return a}catch(r){throw console.error("Erreur mise  jour installation:",r),r}},async delete(e){try{if(await this.hasPaiements(e)){const a=new Error("Impossible de supprimer cette installation car elle a des paiements enregistrs. Supprimez d'abord les paiements avant de supprimer l'installation.");throw a.code="INSTALLATION_HAS_PAIEMENTS",a}const{data:r,error:n}=await G.from(oe.ABONNEMENTS).select("id").eq("installation_id",e);if(n)throw n;if(r&&r.length>0)for(const a of r)await qt.delete(a.id);const{error:i}=await G.from(oe.INSTALLATIONS).delete().eq("id",e);if(i)throw i;return!0}catch(t){throw console.error("Erreur suppression installation:",t),t}},async getStats(){try{const{data:e,error:t}=await G.from(oe.INSTALLATIONS).select("statut, montant, date_installation");if(t)throw t;return{total:e.length,enCours:e.filter(n=>n.statut==="en cours").length,terminees:e.filter(n=>n.statut==="terminee").length,revenuTotal:e.reduce((n,i)=>n+(i.montant||0),0)}}catch(e){throw console.error("Erreur statistiques installations:",e),e}},async checkAndRenewAcquisitions(){try{const{data:e,error:t}=await G.from(oe.INSTALLATIONS).select("id, client_id, application_installee, montant, date_installation, type, statut, created_by").eq("type","acquisition");if(t)throw t;const r=new Date;r.setHours(0,0,0,0);const n=[];for(const i of e){const a=new Date(i.date_installation);a.setHours(0,0,0,0);const s=new Date(a);if(s.setFullYear(s.getFullYear()+1),r>=s){const{data:l,error:c}=await G.from(oe.ABONNEMENTS).select("id",{count:"exact"}).eq("installation_id",i.id).in("statut",["actif","en_alerte"]);if(!(l&&l.length>0))try{console.log(` Cration d'abonnement renouvellement pour installation ${i.id}`);const f=r,d=new Date(f);d.setFullYear(d.getFullYear()+1);const{error:h}=await G.from(oe.ABONNEMENTS).insert([{installation_id:i.id,date_debut:f.toISOString().split("T")[0],date_fin:d.toISOString().split("T")[0],statut:"actif"}]);if(h){console.error(`Erreur cration abonnement renouvellement pour ${i.id}:`,h);continue}n.push(i),console.log(` Abonnement renouvel: ${i.application_installee} (Installation ${i.id}), Nouvel abonnement jusqu'au ${d.toISOString().split("T")[0]}`)}catch(f){console.error(`Erreur lors du renouvellement d'abonnement pour ${i.id}:`,f)}}}return{success:!0,renewedCount:n.length,installations:n}}catch(e){throw console.error("Erreur vrification renouvellement installations:",e),e}}},_ie=(e,t,r)=>{if(r&&r>0)return r;if(!e||!t)return null;const n=new Date(e),i=new Date(t);if(isNaN(n.getTime())||isNaN(i.getTime()))return null;const a=i.getTime()-n.getTime(),s=Math.round(a/(1e3*60));return Math.max(0,s)},qu=e=>e&&{...e,duree_minutes:e.duree&&e.duree>0?e.duree:_ie(e.time_creation||e.created_at||e.date_intervention,e.date_fin,e.duree)},Jp=e=>Array.isArray(e)?e.map(qu):e,ii={async getAll(){try{const{data:e,error:t}=await G.from(oe.INTERVENTIONS).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone),
          technicien:users!technicien_id(id, nom, email)
        `).order("date_intervention",{ascending:!1});if(t)throw t;return Jp(e)}catch(e){throw console.error("Erreur rcupration interventions:",e),e}},async getByClient(e){try{const{data:t,error:r}=await G.from(oe.INTERVENTIONS).select(`
          *,
          technicien:users!technicien_id(id, nom, email)
        `).eq("client_id",e).order("date_intervention",{ascending:!1});if(r)throw r;return Jp(t)}catch(t){throw console.error("Erreur rcupration interventions client:",t),t}},async getByTechnicien(e){try{const{data:t,error:r}=await G.from(oe.INTERVENTIONS).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone),
          technicien:users!technicien_id(id, nom, email)
        `).eq("technicien_id",e).order("date_intervention",{ascending:!1});if(r)throw r;return Jp(t)}catch(t){throw console.error("Erreur rcupration interventions technicien:",t),t}},async create(e){try{const t=new Date().toISOString();console.log("DEBUG create: creationTime (UTC):",t);const{data:r,error:n}=await G.from(oe.INTERVENTIONS).insert([{...e,statut:e.statut||"en_cours",date_intervention:e.date_intervention||new Date().toISOString(),duree:0,time_creation:t,created_by:e.created_by||null}]).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(n)throw n;return console.log("DEBUG create: intervention cre avec time_creation =",r.time_creation),qu(r)}catch(t){throw console.error("Erreur cration intervention:",t),t}},async update(e,t){try{const{data:r,error:n}=await G.from(oe.INTERVENTIONS).update(t).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(n)throw n;return qu(r)}catch(r){throw console.error("Erreur mise  jour intervention:",r),r}},async cloturer(e,t,r){try{const{data:n,error:i}=await G.from(oe.INTERVENTIONS).select("*").eq("id",e).single();if(i)throw i;const s=new Date().toISOString();console.log("DEBUG cloturer:"),console.log("  intervention id:",e),console.log("  time_creation:",n.time_creation),console.log("  dateFin (UTC):",s);let l,c="UNKNOWN";if(console.log("  DEBUG: Checking time_creation..."),console.log("  type of time_creation:",typeof n.time_creation),console.log("  time_creation is null:",n.time_creation===null),console.log("  time_creation is undefined:",n.time_creation===void 0),n.time_creation){const b=n.time_creation.endsWith("Z")?n.time_creation:n.time_creation+"Z";l=new Date(b),c="time_creation",console.log("  Raw time_creation from DB:",n.time_creation),console.log("  With Z added:",b),console.log("  Using time_creation - parsed as:",l.toISOString())}else if(n.date_intervention){const b=n.date_intervention,m=new Date,y=m.getHours().toString().padStart(2,"0"),v=m.getMinutes().toString().padStart(2,"0"),g=m.getSeconds().toString().padStart(2,"0");l=new Date(b+"T"+y+":"+v+":"+g+"Z"),c="date_intervention with current time (fallback - NO EXACT TIME)",console.log("  Using date_intervention fallback with current time - parsed as:",l.toISOString()),console.log("  WARNING: time_creation was NULL - using current time as estimate!")}else l=new Date,c="NOW (last resort)",console.log("  Using NOW fallback");if(isNaN(l.getTime()))throw new Error("Impossible de calculer la date de dbut. time_creation: "+n.time_creation+", date_intervention: "+n.date_intervention);const u=new Date(s),f=u.getTime()-l.getTime(),d=Math.max(0,Math.round(f/(1e3*60)));console.log("  "),console.log("  === DURATION CALCULATION ==="),console.log("  source:",c),console.log("  dateDebut (ISO):",l.toISOString()),console.log("  dateDebut (getTime):",l.getTime()),console.log("  dateFin (ISO):",u.toISOString()),console.log("  dateFin (getTime):",u.getTime()),console.log("  timeDiffMs:",f),console.log("  durationMinutes:",d),console.log("  durationHeures:",(d/60).toFixed(2)),console.log("  ===========================");const{data:h,error:p}=await G.from(oe.INTERVENTIONS).update({statut:"cloturee",action_entreprise:t,commentaires:r,date_fin:s,duree:d}).eq("id",e).select(`
          *,
          client:prospects!client_id(raison_sociale, contact, telephone),
          technicien:users!technicien_id(id, nom, email)
        `).single();if(p)throw p;return console.log("  Clture OK - duree enregistre:",h.duree),qu(h)}catch(n){throw console.error("Erreur clture intervention:",n),n}},async delete(e){try{const{error:t}=await G.from(oe.INTERVENTIONS).delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression intervention:",t),t}},async getStats(){try{const{data:e,error:t}=await G.from(oe.INTERVENTIONS).select("statut, priorite, type_intervention, duree");if(t)throw t;return{total:e.length,enCours:e.filter(n=>n.statut==="en_cours").length,cloturees:e.filter(n=>n.statut==="cloturee").length,hautesPriorites:e.filter(n=>n.priorite==="haute").length,dureeMoyenne:e.reduce((n,i)=>n+(i.duree||0),0)/e.length||0}}catch(e){throw console.error("Erreur statistiques interventions:",e),e}}},jie=async(e,t)=>{var r,n,i,a,s;try{const l="AIzaSyDWWtPvq5M42WWRXM5aldUwFNF3BTB5VUQ",c="gemini";console.log(" Dmarrage analyse IA..."),console.log("Provider:",c),console.log("API Key prsente:",l?"Oui ":"Non ");const u={totalClients:e.totalClients,prospects:e.prospects,revenus:e.revenus,resteAPayer:e.resteAPayer,totalInstallations:e.totalInstallations,tauxConversion:e.tauxConversion,tauxRecouvrement:(e.revenus/(e.totalInstallations||1)*100).toFixed(1),top5Dettes:t.slice(0,5).map(h=>({client:h.client,montant:h.montant}))},f=`Tu es un analyste financier expert pour A2S Gestion, socit de logiciels pharmaceutiques en Algrie.

Analyse ces donnes et fournis EXACTEMENT 4 insights en franais (max 50 mots chacun).

DONNES FINANCIRES:
- Clients actifs: ${u.totalClients}
- Prospects en cours: ${u.prospects}
- Revenus encaisss: ${u.revenus.toLocaleString("fr-FR")} DA
- Reste  payer: ${u.resteAPayer.toLocaleString("fr-FR")} DA
- Total installations: ${u.totalInstallations.toLocaleString("fr-FR")} DA
- Taux de conversion: ${u.tauxConversion}%
- Taux de recouvrement: ${u.tauxRecouvrement}%
- Top 5 clients dbiteurs: ${JSON.stringify(u.top5Dettes)}

INSTRUCTIONS:
Fournis 4 insights avec ces catgories exactes:
1. POSITIVE - Tendance encourageante
2. WARNING - Point d'attention urgent
3. INFO - Mtrique cl  surveiller
4. ACTION - Recommandation actionnable

FORMAT JSON STRICT:
[
  {"type": "positive", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "warning", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "info", "title": "Titre court", "message": "Insight concis avec chiffres cls"},
  {"type": "action", "title": "Titre court", "message": "Insight concis avec chiffres cls"}
]

RPONDS UNIQUEMENT EN JSON, RIEN D'AUTRE.`;let d=null;if(c==="gemini"){const h=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${l}`;console.log(" Appel API Gemini (v1beta/gemini-2.0-flash)...");const p=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:f}]}],generationConfig:{temperature:.7,maxOutputTokens:800,topP:.95,topK:40}})});if(console.log("Statut rponse Gemini:",p.status),!p.ok){const y=await p.text();throw console.error(" Erreur API Gemini:",y),new Error("Erreur API Gemini")}const b=await p.json();console.log(" Rponse Gemini reue");const m=(s=(a=(i=(n=(r=b.candidates)==null?void 0:r[0])==null?void 0:n.content)==null?void 0:i.parts)==null?void 0:a[0])==null?void 0:s.text;if(m){console.log(" Contenu brut:",m.substring(0,200)+"...");try{const y=m.replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();d=JSON.parse(y),console.log(" JSON pars avec succs:",d.length,"insights")}catch(y){return console.warn(" Impossible de parser la rponse Gemini:",y.message),console.log("Contenu complet:",m),null}}else console.warn(" Aucun contenu dans la rponse Gemini")}return d&&Array.isArray(d)&&d.length===4?(console.log(" Analyse IA gnre avec succs - 4 insights valids"),d):(console.warn(" Format d'insights invalide:",d),null)}catch(l){return console.error(" Erreur gnration analyse IA:",l.message),console.error("Dtails:",l),null}},Sie=()=>{const{profile:e}=Et(),[t,r]=N.useState({totalClients:0,prospects:0,revenus:0,abonnementsActifs:0,resteAPayer:0,tauxConversion:0,totalInstallations:0,revenusAbonnementsPaiements:0,revenusAcquisitionsPaiements:0,revenusAbonnementsInstallations:0,revenusAcquisitionsInstallations:0}),[n,i]=N.useState(!0),[a,s]=N.useState([]),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,h]=N.useState(null),[p,b]=N.useState(!1),[m,y]=N.useState(!1);N.useEffect(()=>{if(!n){const _=setTimeout(()=>y(!0),500);return()=>clearTimeout(_)}},[n]),N.useEffect(()=>{v()},[]),N.useEffect(()=>{!n&&t.totalClients>0&&g()},[t]);const v=async()=>{try{i(!0);const _=await Zt.getAll(),S=_.filter(Z=>Z.statut==="actif").length,E=_.filter(Z=>Z.statut==="prospect").length,A=await Pr.getAll(),O=A.reduce((Z,ee)=>Z+(ee.montant||0),0),P=await rr.getAll(),k=P.reduce((Z,ee)=>Z+(ee.montant||0),0),M=await ii.getAll(),L={};M.forEach(Z=>{var ce;const ee=((ce=Z.technicien)==null?void 0:ce.nom)||"Sans technicien",le=(Z.duree_minutes||0)/60;L[ee]||(L[ee]={nom:ee,interventions:0,tempsTotalHeures:0}),L[ee].interventions+=1,L[ee].tempsTotalHeures+=le});const B=Object.values(L).sort((Z,ee)=>ee.interventions-Z.interventions);f(B);const D=Math.max(0,O-k);let q=0,R=0;P.forEach(Z=>{var le;const ee=Z.montant||0;Z.type==="abonnement"||((le=Z.type)==null?void 0:le.toLowerCase())==="abonnement"?q+=ee:R+=ee}),q===0&&R===0&&(q=k*.7,R=k*.3);let I=0,z=0;A.forEach(Z=>{var le;const ee=Z.montant||0;Z.type==="abonnement"||((le=Z.type)==null?void 0:le.toLowerCase())==="abonnement"?I+=ee:z+=ee}),I===0&&z===0&&(I=O*.7,z=O*.3);const W={};A.forEach(Z=>{var ee;if(!W[Z.client_id]){const le=_.find(ce=>ce.id===Z.client_id);W[Z.client_id]={client_id:Z.client_id,raison_sociale:(le==null?void 0:le.raison_sociale)||((ee=Z.prospects)==null?void 0:ee.raison_sociale)||"Client Inconnu",total_installations:0,total_paye:0}}W[Z.client_id].total_installations+=Z.montant||0}),P.forEach(Z=>{W[Z.client_id]&&(W[Z.client_id].total_paye+=Z.montant||0)});const C=Object.values(W).map(Z=>({client:Z.raison_sociale,montant:Math.max(0,Z.total_installations-Z.total_paye)})).filter(Z=>Z.montant>0).sort((Z,ee)=>ee.montant-Z.montant).slice(0,5);s(C),c((()=>{const Z=["Jan","Fv","Mar","Avr","Mai","Juin"],ee={};return Z.forEach(le=>{ee[le]={total:0,abonnements:0,acquisitions:0}}),A.forEach(le=>{var H;const ce=le.created_at;if(!ce)return;const V=new Date(ce).getMonth(),ie=Z[V]||"Jan",K=le.montant||0;ee[ie].total+=K,le.type==="abonnement"||((H=le.type)==null?void 0:H.toLowerCase())==="abonnement"?ee[ie].abonnements+=K:ee[ie].acquisitions+=K}),Z.map(le=>({mois:le,total:ee[le].total,abonnements:ee[le].abonnements,acquisitions:ee[le].acquisitions}))})());const Q=_.length>0?(S/_.length*100).toFixed(1):0;r({totalClients:S,prospects:E,revenus:k,abonnementsActifs:S,resteAPayer:D,tauxConversion:parseFloat(Q),totalInstallations:O,revenusAbonnementsPaiements:q,revenusAcquisitionsPaiements:R,revenusAbonnementsInstallations:I,revenusAcquisitionsInstallations:z})}catch(_){console.error("Erreur chargement dashboard:",_)}finally{i(!1)}},g=async()=>{try{b(!0);const _=await jie(t,a);h(_)}catch(_){console.error("Erreur IA:",_),h(null)}finally{b(!1)}},x=[{name:"Abonnements",value:t.revenusAbonnementsPaiements||0,color:"#2563eb"},{name:"Acquisitions",value:t.revenusAcquisitionsPaiements||0,color:"#10b981"}].filter(_=>_.value>0),j=[{name:"Abonnements",value:t.revenusAbonnementsInstallations||0,color:"#2563eb"},{name:"Acquisitions",value:t.revenusAcquisitionsInstallations||0,color:"#10b981"}].filter(_=>_.value>0),w=_=>new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD",minimumFractionDigits:0}).format(_);return n?o.jsx("div",{className:"flex items-center justify-center h-screen",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6 p-6 bg-gray-50 min-h-screen",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Total Clients"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-2",children:t.totalClients}),o.jsx("p",{className:"text-sm text-green-600",children:"+2.5% ce mois"})]}),o.jsx("div",{className:"w-14 h-14 bg-blue-500 rounded-xl flex items-center justify-center",children:o.jsx(Bl,{className:"text-white",size:28})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Prospects"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-2",children:t.prospects}),o.jsx("p",{className:"text-sm text-gray-500",children:"En conversion"})]}),o.jsx("div",{className:"w-14 h-14 bg-green-500 rounded-xl flex items-center justify-center",children:o.jsx(Ji,{className:"text-white",size:28})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Revenus Totaux"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-2",children:w(t.revenus)}),o.jsx("p",{className:"text-sm text-gray-500",children:"Total paiements reus"})]}),o.jsx("div",{className:"w-14 h-14 bg-purple-500 rounded-xl flex items-center justify-center",children:o.jsx(En,{className:"text-white",size:28})})]})}),o.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:"Reste  Payer"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-800 mb-2",children:w(t.resteAPayer)}),o.jsxs("p",{className:"text-sm text-orange-600",children:["Sur ",w(t.totalInstallations)," total"]})]}),o.jsx("div",{className:"w-14 h-14 bg-orange-500 rounded-xl flex items-center justify-center",children:o.jsx(As,{className:"text-white",size:28})})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-purple-200",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl flex items-center justify-center shadow-lg",children:o.jsx(DR,{size:28,className:"text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:"Analyse IA - A2S Gestion"}),o.jsx("p",{className:"text-sm text-gray-600",children:p?"Gnration en cours...":"Insights et recommandations intelligentes"})]})]}),p&&o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"})}),!p&&d&&o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:d.map((_,S)=>{const E={positive:"from-green-50 to-emerald-50 border-green-200",warning:"from-orange-50 to-amber-50 border-orange-200",info:"from-blue-50 to-indigo-50 border-blue-200",action:"from-purple-50 to-violet-50 border-purple-200"},A={positive:"bg-green-500",warning:"bg-orange-500",info:"bg-blue-500",action:"bg-purple-500"},O={positive:"text-green-800",warning:"text-orange-800",info:"text-blue-800",action:"text-purple-800"},P=_.type==="positive"?En:_.type==="warning"?Nt:_.type==="info"?Ji:Rr;return o.jsxs("div",{className:`bg-gradient-to-br ${E[_.type]} border-2 rounded-xl p-5 hover:shadow-md transition-all`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:`w-10 h-10 ${A[_.type]} rounded-lg flex items-center justify-center`,children:o.jsx(P,{size:20,className:"text-white"})}),o.jsx("h4",{className:`font-bold ${O[_.type]} text-lg`,children:_.title})]}),o.jsx("p",{className:"text-sm text-gray-800 leading-relaxed",children:_.message})]},S)})}),!p&&!d&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl p-5 hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:o.jsx(En,{size:20,className:"text-white"})}),o.jsx("h4",{className:"font-bold text-green-800 text-lg",children:"Revenus Totaux"})]}),o.jsxs("p",{className:"text-sm text-green-900 leading-relaxed",children:["Revenus totaux de ",o.jsx("strong",{className:"text-green-700",children:w(t.revenus)})," gnrs.",t.totalClients," clients actifs contribuent au chiffre d'affaires."]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200 rounded-xl p-5 hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center",children:o.jsx(Nt,{size:20,className:"text-white"})}),o.jsx("h4",{className:"font-bold text-orange-800 text-lg",children:"Reste  Payer"})]}),o.jsxs("p",{className:"text-sm text-orange-900 leading-relaxed",children:[o.jsx("strong",{className:"text-orange-700",children:w(t.resteAPayer)})," de reste  payer. Taux de recouvrement: ",o.jsxs("strong",{className:"text-orange-700",children:[(t.revenus/t.totalInstallations*100).toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5 hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:o.jsx(Ji,{size:20,className:"text-white"})}),o.jsx("h4",{className:"font-bold text-blue-800 text-lg",children:"Conversion Prospects"})]}),o.jsxs("p",{className:"text-sm text-blue-900 leading-relaxed",children:["Taux de conversion de ",o.jsxs("strong",{className:"text-blue-700",children:[t.tauxConversion,"%"]}),".",t.prospects," prospects en cours de conversion."]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 border-2 border-purple-200 rounded-xl p-5 hover:shadow-md transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:o.jsx(As,{size:20,className:"text-white"})}),o.jsx("h4",{className:"font-bold text-purple-800 text-lg",children:"Top 5 Dettes"})]}),o.jsx("p",{className:"text-sm text-purple-900 leading-relaxed",children:a.length>0?o.jsxs(o.Fragment,{children:["Les 5 principaux clients doivent ",o.jsx("strong",{className:"text-purple-700",children:w(a.reduce((_,S)=>_+S.montant,0))})," au total."]}):"Aucune dette client enregistre."})]})]}),!p&&!d&&o.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:o.jsxs("p",{className:"text-xs text-yellow-800",children:[" ",o.jsx("strong",{children:"Astuce:"})," Configurez VITE_AI_API_KEY dans votre fichier .env pour activer l'analyse IA automatique avec GPT."]})})]}),m&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"volution des Revenus (Depuis Installations)"}),o.jsx(Io,{width:"100%",height:350,children:o.jsxs(wie,{data:l,children:[o.jsx(Uu,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),o.jsx(ca,{dataKey:"mois",stroke:"#6b7280"}),o.jsx(ua,{stroke:"#6b7280"}),o.jsx(Jt,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:_=>w(_)}),o.jsx(vi,{}),o.jsx(la,{type:"monotone",dataKey:"total",stroke:"#8b5cf6",strokeWidth:3,name:"Total"}),o.jsx(la,{type:"monotone",dataKey:"abonnements",stroke:"#2563eb",strokeWidth:2,name:"Abonnements"}),o.jsx(la,{type:"monotone",dataKey:"acquisitions",stroke:"#10b981",strokeWidth:2,name:"Acquisitions"})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Rpartition Revenus (Depuis Paiements)"}),o.jsx(Io,{width:"100%",height:350,children:o.jsxs(Y1,{children:[o.jsx(gn,{data:x,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:S})=>`${_} ${(S*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:x.map((_,S)=>o.jsx(Vl,{fill:_.color},`cell-${S}`))}),o.jsx(Jt,{formatter:_=>w(_)})]})}),o.jsx("div",{className:"mt-4 space-y-2",children:x.map((_,S)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:_.color}}),o.jsx("span",{className:"text-sm text-gray-600",children:_.name})]}),o.jsx("span",{className:"text-sm font-semibold text-gray-800",children:w(_.value)})]},S))})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Rpartition Revenus (Depuis Installations)"}),o.jsx(Io,{width:"100%",height:350,children:o.jsxs(Y1,{children:[o.jsx(gn,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:S})=>`${_} ${(S*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:j.map((_,S)=>o.jsx(Vl,{fill:_.color},`cell-${S}`))}),o.jsx(Jt,{formatter:_=>w(_)})]})}),o.jsx("div",{className:"mt-4 space-y-2",children:j.map((_,S)=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:_.color}}),o.jsx("span",{className:"text-sm text-gray-600",children:_.name})]}),o.jsx("span",{className:"text-sm font-semibold text-gray-800",children:w(_.value)})]},S))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Revenus Abonnements vs Acquisitions"}),o.jsx(Io,{width:"100%",height:300,children:o.jsxs(X1,{data:l,children:[o.jsx(Uu,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),o.jsx(ca,{dataKey:"mois",stroke:"#6b7280"}),o.jsx(ua,{stroke:"#6b7280"}),o.jsx(Jt,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:_=>w(_)}),o.jsx(vi,{}),o.jsx(In,{dataKey:"abonnements",fill:"#2563eb",name:"Abonnements",radius:[8,8,0,0]}),o.jsx(In,{dataKey:"acquisitions",fill:"#10b981",name:"Acquisitions",radius:[8,8,0,0]})]})})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Top 5 - Reste  Payer"}),o.jsx(Io,{width:"100%",height:300,children:o.jsxs(X1,{data:a,layout:"vertical",children:[o.jsx(Uu,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),o.jsx(ca,{type:"number",stroke:"#6b7280"}),o.jsx(ua,{dataKey:"client",type:"category",stroke:"#6b7280"}),o.jsx(Jt,{contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"8px"},formatter:_=>w(_)}),o.jsx(In,{dataKey:"montant",fill:"#f59e0b",radius:[0,8,8,0]})]})})]})]}),m&&u.length>0&&o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 overflow-x-auto",children:[o.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-6",children:"Interventions par Utilisateur"}),o.jsxs("table",{className:"w-full text-sm text-gray-700",children:[o.jsx("thead",{className:"bg-gray-100 border-b-2 border-gray-300",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-bold text-gray-800",children:"Utilisateur"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Nombre d'Interventions"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Temps Total (heures)"}),o.jsx("th",{className:"px-4 py-3 text-center font-bold text-gray-800",children:"Temps Moyen"})]})}),o.jsx("tbody",{children:u.map((_,S)=>{const E=_.interventions>0?(_.tempsTotalHeures/_.interventions).toFixed(1):0;return o.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[o.jsx("td",{className:"px-4 py-4 font-medium text-gray-900",children:_.nom}),o.jsx("td",{className:"px-4 py-4 text-center",children:o.jsx("span",{className:"inline-block bg-blue-100 text-blue-800 px-3 py-1 rounded-full font-semibold",children:_.interventions})}),o.jsx("td",{className:"px-4 py-4 text-center",children:o.jsxs("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full font-semibold",children:[_.tempsTotalHeures.toFixed(1),"h"]})}),o.jsxs("td",{className:"px-4 py-4 text-center text-gray-600",children:[E,"h/intervention"]})]},S)})})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:o.jsx(Ji,{className:"text-blue-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Ajouter Prospect"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Crer un nouveau prospect"}),o.jsx("button",{className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"Nouveau Prospect"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:o.jsx(En,{className:"text-green-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Statistiques"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Voir tous les rapports"}),o.jsx("button",{className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors font-medium",children:"Statistiques"})]}),o.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:o.jsx(Rr,{className:"text-purple-600",size:24})}),o.jsx("h3",{className:"font-bold text-gray-800",children:"Paiements"})]}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Grer les paiements"}),o.jsx("button",{className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors font-medium",children:"Paiements"})]})]})]})]})},Bt=({isOpen:e,onClose:t,title:r,children:n,size:i="md"})=>{if(N.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),!e)return null;const a={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl"};return o.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),o.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:o.jsxs("div",{className:`relative bg-white rounded-xl shadow-2xl w-full ${a[i]} transform transition-all`,onClick:s=>s.stopPropagation(),children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:r}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(ji,{size:24})})]}),o.jsx("div",{className:"p-6",children:n})]})})]})},Ae=({children:e,variant:t="primary",size:r="md",icon:n,onClick:i,disabled:a=!1,type:s="button",className:l="",title:c=""})=>{const u="inline-flex items-center justify-center gap-2 font-semibold rounded-lg transition-colors duration-200",f={primary:a?"bg-gray-300 text-gray-500":"bg-primary hover:bg-primary-dark text-white",secondary:a?"bg-gray-300 text-gray-500":"bg-secondary hover:bg-secondary-dark text-white",success:a?"bg-gray-300 text-gray-500":"bg-success hover:bg-green-600 text-white",danger:a?"bg-gray-300 text-gray-500":"bg-danger hover:bg-red-600 text-white",warning:a?"bg-gray-300 text-gray-500":"bg-warning hover:bg-orange-600 text-white",outline:a?"border-2 border-gray-300 text-gray-400":"border-2 border-primary text-primary hover:bg-primary hover:text-white",ghost:a?"text-gray-300":"text-gray-600 hover:bg-gray-100"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"},h=a?"cursor-not-allowed":"";return o.jsxs("button",{type:s,onClick:i,disabled:a,title:c,className:`${u} ${f[t]} ${d[r]} ${h} ${l}`,children:[n&&o.jsx(n,{size:r==="sm"?16:r==="lg"?24:20}),e]})},Ta=({value:e,onChange:t,placeholder:r="Rechercher..."})=>o.jsxs("div",{className:"relative",children:[o.jsx(Kv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),o.jsx("input",{type:"text",value:e,onChange:n=>t(n.target.value),placeholder:r,className:"input-field pl-10"})]}),Be={async canCreate(e){return Yt.canManageUsers(e)},async canUpdate(e,t){if(!Yt.canManageUsers(e))return!1;if((e==null?void 0:e.role)==="admin")try{const r=await this.getById(t);if((r==null?void 0:r.role)==="super_admin")return!1}catch(r){return console.error("Erreur vrification permission update:",r),!1}return!0},async canDelete(e,t){if(!Yt.canManageUsers(e))return!1;try{const r=await this.getById(t);if((r==null?void 0:r.role)==="super_admin")return(e==null?void 0:e.role)==="super_admin";const{count:n}=await G.from(oe.PROSPECTS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(n>0)return!1;const{count:i}=await G.from(oe.INSTALLATIONS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(i>0)return!1;const{count:a}=await G.from(oe.PAIEMENTS).select("id",{count:"exact",head:!0}).eq("created_by",t);if(a>0)return!1;const{count:s}=await G.from(oe.INTERVENTIONS).select("id",{count:"exact",head:!0}).eq("created_by",t);return!(s>0)}catch(r){return console.error("Erreur vrification permission delete:",r),!1}},async getAll(){try{const{data:e,error:t}=await G.from(oe.USERS).select("*").order("nom",{ascending:!0});if(t)throw t;return e}catch(e){throw console.error("Erreur rcupration utilisateurs:",e),e}},async getById(e){try{const{data:t,error:r}=await G.from(oe.USERS).select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration utilisateur:",t),t}},async getByRole(e){try{const{data:t,error:r}=await G.from(oe.USERS).select("*").eq("role",e).order("nom",{ascending:!0});if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration utilisateurs par rle:",t),t}},async getCommerciaux(){return this.getByRole("commercial")},async getTechniciens(){return this.getByRole("technicien")},async create(e,t){var r,n,i;try{if(!await this.canCreate(t)){const d=new Error("Vous n'avez pas la permission de crer des utilisateurs");throw d.code="PERMISSION_DENIED",d}const{data:a,error:s}=await G.from(oe.USERS).select("id, email").ilike("email",e.email);if(a&&a.length>0){const d=new Error(`Un utilisateur avec l'email ${e.email} existe dj`);throw d.code="DUPLICATE_EMAIL",d}const l=Object.values(Hb),c=(r=e.role)==null?void 0:r.trim().toLowerCase();if(!c||!l.includes(c)){const d=new Error(`Rle invalide: "${e.role}". Rles valides: ${l.join(", ")}`);throw d.code="INVALID_ROLE",d}e.role=c;let u=null,f=null;try{console.log(` Cration d'utilisateur locale avec email: ${e.email}`);const{data:d,error:h}=await G.rpc("create_user_local",{p_email:e.email,p_password:e.password,p_nom:e.nom,p_role:e.role,p_pages_visibles:Array.isArray(e.pages_visibles)?e.pages_visibles:[]});if(h){if(console.error(" Erreur cration authentification locale:",h),(n=h.message)!=null&&n.includes("duplicate")||(i=h.message)!=null&&i.includes("existe")){const p=new Error(`Un utilisateur avec l'email ${e.email} existe dj`);throw p.code="DUPLICATE_EMAIL",p}throw h}if(d&&d.length>0){const p=d[0];if(u=p.user_id,f={id:p.user_id,email:p.email,nom:p.nom,role:p.role,pages_visibles:Array.isArray(e.pages_visibles)?e.pages_visibles:[]},console.log(" Utilisateur cr avec authentification locale:",{userId:u,email:e.email,nom:e.nom,role:e.role}),u)try{const b={};if(["can_create_prospects","can_edit_prospects","can_delete_prospects","can_create_clients","can_edit_clients","can_delete_clients","can_create_installations","can_edit_installations","can_delete_installations","can_create_abonnements","can_edit_abonnements","can_delete_abonnements","can_create_paiements","can_edit_paiements","can_delete_paiements","can_create_support","can_edit_support","can_delete_support","can_create_missions","can_edit_missions","can_delete_missions","can_close_missions","can_validate_missions","can_create_alertes","can_edit_alertes","can_delete_alertes","can_create_applications","can_edit_applications","can_delete_applications"].forEach(y=>{e.hasOwnProperty(y)&&(e[y]===!0||e[y]===!1)&&(b[y]=e[y])}),Object.keys(b).length>0){const{error:y}=await G.from(oe.USERS).update(b).eq("id",u);y?console.error("Erreur sauvegarde permissions:",y):console.log(" Permissions sauvegardes:",b)}}catch(b){console.error("Erreur lors de la sauvegarde des permissions:",b)}return f}else throw new Error("Impossible de crer l'utilisateur - pas de rponse du serveur")}catch(d){throw console.error(" Erreur cration utilisateur:",d),d}}catch(a){throw console.error(" Erreur cration utilisateur:",a),a}},async update(e,t,r){try{if(!await this.canUpdate(r,e)){const u=new Error("Vous n'avez pas la permission de modifier cet utilisateur");throw u.code="PERMISSION_DENIED",u}const i={};if(t.nom&&(i.nom=t.nom),t.email&&(i.email=t.email),t.role){const u=t.role.trim().toLowerCase(),f=Object.values(Hb);if(!f.includes(u)){const d=new Error(`Rle invalide: "${t.role}". Rles valides: ${f.join(", ")}`);throw d.code="INVALID_ROLE",d}i.role=u}t.pages_visibles&&(Array.isArray(t.pages_visibles)?i.pages_visibles=t.pages_visibles:typeof t.pages_visibles=="object"&&(i.pages_visibles=Object.keys(t.pages_visibles).filter(u=>t.pages_visibles[u]===!0)));const a=["can_create_prospects","can_edit_prospects","can_delete_prospects","can_create_clients","can_edit_clients","can_delete_clients","can_create_installations","can_edit_installations","can_delete_installations","can_create_abonnements","can_edit_abonnements","can_delete_abonnements","can_create_paiements","can_edit_paiements","can_delete_paiements","can_create_support","can_edit_support","can_delete_support","can_create_missions","can_edit_missions","can_delete_missions","can_close_missions","can_validate_missions","can_create_alertes","can_edit_alertes","can_delete_alertes","can_create_applications","can_edit_applications","can_delete_applications"];let s=0;a.forEach(u=>{t.hasOwnProperty(u)&&(t[u]===!0||t[u]===!1)&&(i[u]=t[u],s++)}),s>0&&console.log(` ${s} permission(s) sera(ont) mise(s)  jour`),console.log("dataToUpdate final:",JSON.stringify(i,null,2));const{data:l,error:c}=await G.from(oe.USERS).update(i).eq("id",e).select().single();if(c)throw console.error("Erreur dtaille Supabase:",c),console.error("Donnes envoyes:",i),c;return l}catch(n){throw console.error("Erreur mise  jour utilisateur:",n),n}},async delete(e,t){try{const r=await this.getUserCreatedPieces(e);if(r.hasCreatedPieces){const s=new Error(` Impossible de supprimer cet utilisateur.

Cet utilisateur a cr les pices suivantes:

${r.details.join(`
`)}

Un utilisateur qui a cr au moins une pice ne peut pas tre supprim.
Contactez un administrateur.`);throw s.code="USER_CREATED_PIECES",s.details=r.details,s}if(!await this.canDelete(t,e)){const s=new Error("Vous n'avez pas la permission de supprimer cet utilisateur");throw s.code="PERMISSION_DENIED",s}const i=await this.checkUserReferences(e);if(i.hasReferences){const s=new Error(` Impossible de supprimer cet utilisateur.

L'utilisateur est li :
${i.details.join(`
`)}

Supprimez d'abord ces enregistrements ou contactez un administrateur.`);throw s.code="USER_HAS_REFERENCES",s.details=i.details,s}const{error:a}=await G.from(oe.USERS).delete().eq("id",e);if(a)throw console.error("Erreur suppression table users:",a),a;try{console.log(" Authentification locale supprime (cascade FK)")}catch{console.warn("Note: Authentification locale dj supprime ou inexistante")}return console.log(" Utilisateur supprim avec succs (BDD + authentification locale)"),!0}catch(r){throw console.error("Erreur suppression utilisateur:",r),r}},async hasCreatePermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_create_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission create ${t}:`,r),!1}},async hasEditPermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_edit_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission edit ${t}:`,r),!1}},async hasDeletePermission(e,t){try{const r=await this.getById(e);if(!r)return!1;if(r.role==="admin"||r.role==="super_admin")return!0;const n=`can_delete_${t}`;return r[n]===!0}catch(r){return console.error(`Erreur vrification permission delete ${t}:`,r),!1}},async getUserCreatedPieces(e){try{const t=[];let r=!1;const{data:n,error:i}=await G.from(oe.PROSPECTS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!i&&(n==null?void 0:n.length)>0&&(r=!0,t.push(` ${n.length} prospect(s) cr(s)`));const{data:a,error:s}=await G.from(oe.INSTALLATIONS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!s&&(a==null?void 0:a.length)>0&&(r=!0,t.push(` ${a.length} installation(s) cre(s)`));const{data:l,error:c}=await G.from(oe.PAIEMENTS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);!c&&(l==null?void 0:l.length)>0&&(r=!0,t.push(` ${l.length} paiement(s) cr(s)`));const{data:u,error:f}=await G.from(oe.INTERVENTIONS).select("id",{count:"exact",head:!1}).eq("created_by",e).limit(5);return!f&&(u==null?void 0:u.length)>0&&(r=!0,t.push(` ${u.length} intervention(s) cre(s)`)),{hasCreatedPieces:r,details:t}}catch(t){return console.error("Erreur vrification pices cres:",t),{hasCreatedPieces:!1,details:[]}}},async checkUserReferences(e){try{const t=[];let r=!1;const{data:n,error:i}=await G.from(oe.INTERVENTIONS).select("id",{count:"exact",head:!1}).eq("technicien_id",e).limit(5);return!i&&(n==null?void 0:n.length)>0&&(r=!0,t.push(` ${n.length} intervention(s) assigne(s)`)),{hasReferences:r,details:t}}catch(t){return console.error("Erreur vrification rfrences utilisateur:",t),{hasReferences:!1,details:[]}}}},tx=({onSearchChange:e,onDateStartChange:t,onDateEndChange:r,onCreatorChange:n,searchValue:i="",dateStart:a="",dateEnd:s="",creatorId:l=""})=>{const{profile:c}=Et(),[u,f]=N.useState([]),[d,h]=N.useState(!1),[p,b]=N.useState(l);(c==null?void 0:c.role)==="admin"||(c==null||c.role),N.useEffect(()=>{m()},[]),N.useEffect(()=>{b(l)},[l]);const m=async()=>{try{h(!0);const g=await Be.getAll();f(g||[])}catch(g){console.error("Erreur chargement utilisateurs:",g),f([])}finally{h(!1)}},y=()=>{e(""),t(""),r(""),n("")},v=i||a||s||l;return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Kv,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Rechercher...",value:i,onChange:g=>e(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Rr,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"date",value:a,onChange:g=>t(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Rr,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsx("input",{type:"date",value:s,onChange:g=>r(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsx(IA,{size:18,className:"absolute left-3 top-3 text-gray-400"}),o.jsxs("select",{value:p||"",onChange:g=>{const x=g.target.value;console.log(` Slection crateur dans FilterBar: ${x}`),b(x),n(x)},disabled:d||u.length===0,className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",title:u.length===0?`Chargement des utilisateurs (${u.length})`:"",children:[o.jsx("option",{value:"",children:d?"Chargement...":`Tous les crateurs (${u.length})`}),u.map(g=>o.jsx("option",{value:g.id,children:g.nom||g.email},g.id))]})]})]}),v&&o.jsx("div",{className:"mt-3 flex justify-end",children:o.jsxs("button",{onClick:y,className:"inline-flex items-center gap-2 px-3 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded transition-colors",children:[o.jsx(ji,{size:16}),"Effacer les filtres"]})})]})},Fc=({data:e=[],columns:t=[],actions:r=[],loading:n=!1,emptyMessage:i="Aucune donne trouve",onAdd:a=null,addButtonLabel:s="Ajouter",title:l="Tableau de Donnes"})=>n?o.jsx("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:o.jsx("p",{className:"text-gray-600",children:"Chargement..."})}):e.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[o.jsx("p",{className:"text-gray-600",children:i}),a&&o.jsxs(Ae,{onClick:a,className:"mt-4 bg-primary hover:bg-primary-dark text-white flex items-center gap-2 mx-auto",children:[o.jsx(Oi,{size:18}),s]})]}):o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[t.map(c=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",style:{width:c.width||"auto"},children:c.label},c.key)),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:e.map((c,u)=>o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[t.map(f=>o.jsx("td",{className:`px-6 py-4 text-sm ${f.className||"text-gray-600"}`,children:f.render?f.render(c):String(c[f.key]||"-")},f.key)),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx("div",{className:"flex gap-2 justify-center flex-wrap",children:r.map(f=>{if(f.condition&&!f.condition(c))return null;const d=typeof f.disabled=="function"?f.disabled(c):f.disabled||!1,h=typeof f.title=="function"?f.title(c):f.title||f.label,p=typeof f.className=="function"?f.className(c):f.className||"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2";return o.jsx(Ae,{onClick:()=>f.onClick(c),disabled:d,className:p,title:h,children:f.icon?f.icon:f.label},f.key)})})})]},c.id||u))})]})}),e.length===0&&o.jsx("div",{className:"px-6 py-12 text-center",children:o.jsx("p",{className:"text-gray-600",children:i})})]}),We=({label:e,type:t="text",value:r,onChange:n,placeholder:i,error:a,required:s=!1,disabled:l=!1,icon:c,...u})=>o.jsxs("div",{className:"w-full",children:[e&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e,s&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("div",{className:"relative",children:[c&&o.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:o.jsx(c,{size:20})}),o.jsx("input",{type:t,value:r||"",onChange:n,placeholder:i,disabled:l,className:`
            input-field
            ${c?"pl-10":""}
            ${a?"border-red-500 focus:ring-red-500":""}
            ${l?"bg-gray-100 cursor-not-allowed":""}
          `,...u})]}),a&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:a})]}),ST=[{id:"01",name:"Adrar",code:"01"},{id:"02",name:"Chlef",code:"02"},{id:"03",name:"Laghouat",code:"03"},{id:"04",name:"Oum El Bouaghi",code:"04"},{id:"05",name:"Batna",code:"05"},{id:"06",name:"Bjaa",code:"06"},{id:"07",name:"Biskra",code:"07"},{id:"08",name:"Bchar",code:"08"},{id:"09",name:"Blida",code:"09"},{id:"10",name:"Bouira",code:"10"},{id:"11",name:"Tamanrasset",code:"11"},{id:"12",name:"Tbessa",code:"12"},{id:"13",name:"Tlemcen",code:"13"},{id:"14",name:"Tiaret",code:"14"},{id:"15",name:"Tizi Ouzou",code:"15"},{id:"16",name:"Alger",code:"16"},{id:"17",name:"Djelfa",code:"17"},{id:"18",name:"Djijel",code:"18"},{id:"19",name:"Stif",code:"19"},{id:"20",name:"Sada",code:"20"},{id:"21",name:"Skikda",code:"21"},{id:"22",name:"Sidi Bel Abbs",code:"22"},{id:"23",name:"Annaba",code:"23"},{id:"24",name:"Guelma",code:"24"},{id:"25",name:"Constantine",code:"25"},{id:"26",name:"Mda",code:"26"},{id:"27",name:"Mostaganem",code:"27"},{id:"28",name:"M'Sila",code:"28"},{id:"29",name:"Mascara",code:"29"},{id:"30",name:"Ouargla",code:"30"},{id:"31",name:"Oran",code:"31"},{id:"32",name:"El Bayadh",code:"32"},{id:"33",name:"Illizi",code:"33"},{id:"34",name:"Bordj Bou Arreridj",code:"34"},{id:"35",name:"Boumerds",code:"35"},{id:"36",name:"El Tarf",code:"36"},{id:"37",name:"Tindouf",code:"37"},{id:"38",name:"Tissemsilt",code:"38"},{id:"39",name:"El Oued",code:"39"},{id:"40",name:"Khenchela",code:"40"},{id:"41",name:"Souk Ahras",code:"41"},{id:"42",name:"Tipaza",code:"42"},{id:"43",name:"Mila",code:"43"},{id:"44",name:"An Defla",code:"44"},{id:"45",name:"Nama",code:"45"},{id:"46",name:"An Tmouchent",code:"46"},{id:"47",name:"Ghardaa",code:"47"},{id:"48",name:"Relizane",code:"48"},{id:"49",name:"El M'Ghair",code:"49"},{id:"50",name:"El Menia",code:"50"},{id:"51",name:"Ouled Djellal",code:"51"},{id:"52",name:"El Harrach",code:"52"},{id:"53",name:"El Madania",code:"53"},{id:"54",name:"El Kseur",code:"54"},{id:"55",name:"El Mena",code:"55"},{id:"56",name:"El Oued",code:"56"},{id:"57",name:"El Tarf",code:"57"},{id:"58",name:"Tissemsilt",code:"58"}],Nie=e=>{const t=ST.find(r=>r.code===e);return t?t.name:e},Eie=ST.map(e=>({value:e.code,label:`${e.code} - ${e.name}`})),Aie=({prospect:e,onSubmit:t,onCancel:r})=>{const{user:n}=Et(),[i,a]=N.useState({raison_sociale:"",contact:"",secteur:"",telephone:"",email:"",wilaya:"",commercial_assigned:""}),[s,l]=N.useState({}),[c,u]=N.useState(!1);N.useEffect(()=>{a(e?{raison_sociale:e.raison_sociale||"",contact:e.contact||"",secteur:e.secteur||"",telephone:e.telephone||"",email:e.email||"",wilaya:e.wilaya||"",commercial_assigned:e.commercial_assigned||(n==null?void 0:n.nom)||(n==null?void 0:n.email)||""}:{raison_sociale:"",contact:"",secteur:"",telephone:"",email:"",wilaya:"",commercial_assigned:(n==null?void 0:n.nom)||(n==null?void 0:n.email)||""}),l({})},[e,n]);const f=(h,p)=>{a(b=>({...b,[h]:p})),s[h]&&l(b=>({...b,[h]:""}))},d=async h=>{var b,m,y,v,g,x;h.preventDefault();const p={};if((b=i.raison_sociale)!=null&&b.trim()||(p.raison_sociale="Raison sociale requise"),(m=i.contact)!=null&&m.trim()||(p.contact="Contact requis"),(y=i.secteur)!=null&&y.trim()||(p.secteur="Secteur requis"),(v=i.telephone)!=null&&v.trim()||(p.telephone="Tlphone requis"),(g=i.email)!=null&&g.trim()||(p.email="Email requis"),(x=i.wilaya)!=null&&x.trim()||(p.wilaya="Wilaya requise"),Object.keys(p).length>0){l(p);return}if(!c)try{u(!0),await t(i)}finally{u(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsx(We,{label:"Raison Sociale",type:"text",value:i.raison_sociale,onChange:h=>f("raison_sociale",h.target.value),placeholder:"Nom de l'entreprise",error:s.raison_sociale,required:!0,disabled:c}),o.jsx(We,{label:"Contact",type:"text",value:i.contact,onChange:h=>f("contact",h.target.value),placeholder:"Nom du contact",error:s.contact,required:!0,disabled:c}),o.jsx(We,{label:"Tlphone",type:"tel",value:i.telephone,onChange:h=>f("telephone",h.target.value),placeholder:"+213 XXX XXX XXX",error:s.telephone,required:!0,disabled:c}),o.jsx(We,{label:"Email",type:"email",value:i.email,onChange:h=>f("email",h.target.value),placeholder:"email@example.com",error:s.email,required:!0,disabled:c}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Secteur ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:i.secteur,onChange:h=>f("secteur",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",disabled:c,required:!0,children:[o.jsx("option",{value:"",children:"Slectionner un secteur"}),o.jsx("option",{value:"GROSSISTE PHARM",children:"GROSSISTE PHARM"}),o.jsx("option",{value:"GROSSISTE PARA",children:"GROSSISTE PARA"}),o.jsx("option",{value:"PARA SUPER GROS",children:"PARA SUPER GROS"}),o.jsx("option",{value:"LABO PROD",children:"LABO PROD"}),o.jsx("option",{value:"AUTRE",children:"AUTRE"})]}),s.secteur&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.secteur})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[" Wilaya ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{value:i.wilaya,onChange:h=>f("wilaya",h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",disabled:c,required:!0,children:[o.jsx("option",{value:"",children:"Slectionner une wilaya"}),Eie.map(h=>o.jsx("option",{value:h.value,children:h.label},h.value))]}),s.wilaya&&o.jsx("p",{className:"text-sm text-red-600 mt-1",children:s.wilaya}),o.jsx("p",{className:"text-xs text-blue-600",children:"L'auto-remplissage dans les missions sera bas sur cette wilaya"})]}),o.jsx(We,{label:"Commercial Assign",type:"text",value:i.commercial_assigned,disabled:!0,placeholder:"Assign automatiquement"}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{type:"button",variant:"ghost",onClick:r,disabled:c,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:c,children:c?"Cration en cours...":e?"Modifier":"Crer"})]})]})},NT=({prospectId:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState(null),[a,s]=N.useState(!0);N.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{console.log(" Chargement historique pour prospect/client:",e);const u=await Zt.getHistorique(e);console.log(" Historique rcupr:",u);const f=await Pr.getByClient(e);console.log(" Installations:",f);let d=null;f&&f.length>0&&(d=f.reduce((p,b)=>new Date(b.date_installation)<new Date(p.date_installation)?b:p)),i(d);let h=u;d&&console.log(" Premire installation trouve:",d.date_installation),console.log(" Historique affich:",h),r(h)}catch(u){console.error(" Erreur chargement historique:",u),r([])}finally{s(!1)}},c=u=>({appel:cg,email:Wv,rdv:Rr,demo:Fu,offre_envoyee:Fu,suivi:cg,visite:Rr,creation:dn,modification:qn,conversion:xp,installation:xp})[u]||Fu;return a?o.jsx("div",{className:"text-center py-8",children:"Chargement..."}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[t.length===0&&!n&&o.jsx("div",{className:"text-center py-8 text-gray-500",children:"Aucun historique disponible"}),t.length>0&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-bold text-gray-800 text-sm",children:" Phase PROSPECT - Actions de Suivi"}),t.map((u,f)=>{const d=c(u.action);return o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white",children:o.jsx(d,{size:20})}),f<t.length-1||n?o.jsx("div",{className:"w-0.5 h-12 bg-gray-200 mt-2"}):null]}),o.jsx("div",{className:"flex-1 pb-4",children:o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:u.action.replace("_"," ").toUpperCase()}),o.jsx("span",{className:"text-sm text-gray-500",children:MA(u.created_at)})]}),o.jsx("p",{className:"text-gray-600 text-sm",children:u.details})]})})]},u.id||`history-${f}`)})]}),n&&o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white",children:o.jsx(xp,{size:20})})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:" CONVERSION - PREMIRE INSTALLATION"}),o.jsx("span",{className:"text-sm text-gray-600 font-bold",children:$r(n.date_installation)})]}),o.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Application:"})," ",n.application_installee]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Montant:"})," ",o.jsxs("span",{className:"font-bold text-green-600",children:[(n.montant||0).toLocaleString("fr-FR")," DA"]})]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Statut:"})," ",o.jsx("span",{className:"bg-green-600 text-white px-2 py-1 rounded text-xs font-bold",children:"PROSPECT  ACTIF"})]})]})]})})]}),t.length===0&&n&&o.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200 text-sm text-gray-700",children:" Aucune action de suivi enregistre avant la conversion en client actif."})]}),(t.length>0||n)&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" Rsum Phase Prospect"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Actions de Suivi"}),o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Dure Phase Prospect"}),n?o.jsx("p",{className:"text-2xl font-bold text-green-600",children:(()=>{const u=t.length>0?new Date(t[t.length-1].created_at):new Date(n.date_installation),f=new Date(n.date_installation),d=Math.floor((f-u)/(1e3*60*60*24));return d>0?`${d}j`:"< 1j"})()}):o.jsx("p",{className:"text-lg font-bold text-gray-600",children:"En cours"})]}),n&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"col-span-2 pt-2 border-t border-gray-300",children:[o.jsx("p",{className:"text-gray-600 mb-1",children:" Date de Conversion"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:$r(n.date_installation)})]})})]})]})]})},st=({label:e,value:t,onChange:r,options:n=[],error:i,required:a=!1,disabled:s=!1,placeholder:l="Slectionner...",...c})=>o.jsxs("div",{className:"w-full",children:[e&&o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e,a&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),o.jsxs("select",{value:t||"",onChange:r,disabled:s,className:`
          input-field
          ${i?"border-red-500 focus:ring-red-500":""}
          ${s?"bg-gray-100 cursor-not-allowed":""}
        `,...c,children:[o.jsx("option",{value:"",children:l}),n.map(u=>o.jsx("option",{value:u.value,children:u.label},u.value))]}),i&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:i})]}),Oie=({prospect:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({type_action:"appel",date_action:new Date().toISOString().split("T")[0],description:"",details:""}),[a,s]=N.useState({}),[l,c]=N.useState(!1),u=[{value:"appel",label:"Appel Tlphonique"},{value:"email",label:"Email"},{value:"rdv",label:"Rendez-vous"},{value:"demo",label:"Dmonstration"},{value:"offre_envoyee",label:"Offre Envoye"},{value:"suivi",label:"Suivi"},{value:"visite",label:"Visite"}],f=(h,p)=>{i(b=>({...b,[h]:p})),a[h]&&s(b=>({...b,[h]:""}))},d=async h=>{h.preventDefault();const p={};if(n.type_action||(p.type_action="Type d'action requis"),n.date_action||(p.date_action="Date requise"),n.description.trim()||(p.description="Description requise"),Object.keys(p).length>0){s(p);return}try{c(!0),await t(n)}finally{c(!1)}};return o.jsxs("form",{onSubmit:d,className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[o.jsxs("p",{className:"text-sm font-medium text-blue-900",children:["Prospect : ",o.jsx("span",{className:"font-bold",children:e.raison_sociale})]}),o.jsx("p",{className:"text-sm text-blue-700",children:e.contact})]}),o.jsx(st,{label:"Type d'Action",value:n.type_action,onChange:h=>f("type_action",h.target.value),options:u,error:a.type_action,required:!0,disabled:l}),o.jsx(We,{label:"Date de l'Action",type:"date",value:n.date_action,onChange:h=>f("date_action",h.target.value),error:a.date_action,required:!0,disabled:l}),o.jsx(We,{label:"Rsum de l'Action",type:"textarea",rows:"3",value:n.description,onChange:h=>f("description",h.target.value),placeholder:"Dcrivez brivement l'action effectue...",error:a.description,required:!0,disabled:l}),o.jsx(We,{label:"Dtails (Optionnel)",type:"textarea",rows:"4",value:n.details,onChange:h=>f("details",h.target.value),placeholder:"Ajoutez des dtails supplmentaires si ncessaire...",disabled:l}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:l,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:l,children:l?"Enregistrement...":"Enregistrer l'Action"})]})]})},Pie=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(""),[h,p]=N.useState(""),[b,m]=N.useState(""),[y,v]=N.useState(!1),[g,x]=N.useState(!1),[j,w]=N.useState(!1),[_,S]=N.useState(!1),[E,A]=N.useState(null),[O,P]=N.useState("create"),[k,M]=N.useState("global"),[L,B]=N.useState(0),[D,q]=N.useState(!1),[R,I]=N.useState(!1),[z,W]=N.useState(!1),[C,F]=N.useState(!1),[Q,Z]=N.useState(!1),{addNotification:ee}=sr(),{user:le,profile:ce}=Et();N.useEffect(()=>{te()},[]),N.useEffect(()=>{V()},[le==null?void 0:le.id,ce==null?void 0:ce.role]),N.useEffect(()=>{ie()},[e,s,c,f,h,b]);const te=async()=>{try{a(!0);const T=await Zt.getAll();t(T)}catch{ee({type:"error",message:"Erreur lors du chargement des prospects"})}finally{a(!1)}},V=async()=>{try{if(Z(!0),le!=null&&le.id&&ce){const T=(ce==null?void 0:ce.role)==="admin"||(ce==null?void 0:ce.role)==="super_admin"||await Be.hasCreatePermission(le.id,"prospects"),ae=(ce==null?void 0:ce.role)==="admin"||(ce==null?void 0:ce.role)==="super_admin"||await Be.hasEditPermission(le.id,"prospects"),U=(ce==null?void 0:ce.role)==="admin"||(ce==null?void 0:ce.role)==="super_admin"||await Be.hasDeletePermission(le.id,"prospects");I(T),W(ae),F(U)}}catch(T){console.error("Erreur chargement permissions:",T)}finally{Z(!1)}},ie=()=>{let T=[...e];if(c!=="all"&&(T=T.filter(ae=>ae.statut===c)),s&&(T=T.filter(ae=>{var U,re,Se,ge;return((U=ae.raison_sociale)==null?void 0:U.toLowerCase().includes(s.toLowerCase()))||((re=ae.contact)==null?void 0:re.toLowerCase().includes(s.toLowerCase()))||((Se=ae.telephone)==null?void 0:Se.includes(s))||((ge=ae.email)==null?void 0:ge.toLowerCase().includes(s.toLowerCase()))})),f){const ae=new Date(f);T=T.filter(U=>new Date(U.created_at)>=ae)}if(h){const ae=new Date(h);ae.setHours(23,59,59,999),T=T.filter(U=>new Date(U.created_at)<=ae)}b&&((ce==null?void 0:ce.role)==="admin"||(ce==null?void 0:ce.role)==="super_admin")&&(T=T.filter(ae=>ae.created_by===b)),n(T)},K=()=>{R&&(A(null),P("create"),v(!0))},H=T=>{z&&(A(T),P("edit"),v(!0))},J=async T=>{var U;const ae=(T==null?void 0:T.id)||T;if(C&&window.confirm("tes-vous sr de vouloir supprimer ce prospect ?"))try{await Zt.delete(ae),ee({type:"success",message:"Prospect supprim avec succs"}),te()}catch(re){console.error("Erreur suppression prospect:",re),re.status===409||(U=re.message)!=null&&U.includes("foreign key")?ee({type:"error",message:"Impossible de supprimer ce prospect car il est devenu client actif avec des enregistrements lis (installations, abonnements, paiements, etc.)"}):ee({type:"error",message:"Erreur lors de la suppression du prospect"})}},he=async T=>{try{if(O==="create"){const ae={...T,created_by:(le==null?void 0:le.id)||null};await Zt.create(ae),ee({type:"success",message:"Prospect cr avec succs"})}else await Zt.update(E.id,T),ee({type:"success",message:"Prospect modifi avec succs"});v(!1),te()}catch{ee({type:"error",message:"Erreur lors de l'enregistrement"})}},we=async T=>{try{await Zt.addHistorique(E.id,T.type_action,T.description,{date_action:T.date_action,details_supplementaires:T.details}),ee({type:"success",message:"Action enregistre avec succs"}),w(!1),te()}catch{ee({type:"error",message:"Erreur lors de l'enregistrement de l'action"})}},Y=async()=>{try{if(q(!0),r.length===0){ee({type:"warning",message:"Aucun prospect  analyser"});return}S(!0),ee({type:"success",message:"Analyse complte!"})}catch(T){ee({type:"error",message:`Erreur: ${T.message}`})}finally{q(!1)}},fe={total:e.length,prospects:e.filter(T=>T.statut==="prospect").length,actifs:e.filter(T=>T.statut==="actif").length,inactifs:e.filter(T=>T.statut==="inactif").length,tauxConversion:e.length>0?(e.filter(T=>T.statut==="actif").length/e.length*100).toFixed(0):0};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Prospects"}),o.jsx("h3",{className:"text-3xl font-bold",children:fe.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Convertis"}),o.jsx("h3",{className:"text-3xl font-bold",children:fe.actifs})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En attente"}),o.jsx("h3",{className:"text-3xl font-bold",children:fe.prospects})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Taux Conversion"}),o.jsxs("h3",{className:"text-3xl font-bold",children:[fe.tauxConversion,"%"]})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:Oi,onClick:K,disabled:!R,className:"w-full h-full",title:R?"Crer un nouveau prospect":"Permission refuse: Crer un prospect",children:"Nouveau Prospect"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsx(tx,{onSearchChange:l,onDateStartChange:d,onDateEndChange:p,onCreatorChange:m,searchValue:s,dateStart:f,dateEnd:h,creatorId:b}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ta,{value:s,onChange:l,placeholder:"Rechercher par nom, contact, tlphone..."})}),o.jsxs("button",{onClick:Y,disabled:D||r.length===0,className:"px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 disabled:from-gray-400 disabled:to-gray-400 text-white rounded-lg font-medium transition-all flex items-center gap-2",children:[o.jsx(bd,{size:18}),D?"Analyse...":"ANALYSE GLOBALE"]})]}),o.jsxs("div",{className:"flex gap-2 flex-wrap mt-4",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("prospect"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="prospect"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Prospects"}),o.jsx("button",{onClick:()=>u("actif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="actif"?"bg-success text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Actifs"}),o.jsx("button",{onClick:()=>u("inactif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="inactif"?"bg-danger text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Inactifs"})]})]})]}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun prospect trouv"})}):o.jsx(Fc,{data:r,columns:[{key:"raison_sociale",label:"Prospect",width:"200px",render:T=>o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:T.raison_sociale}),o.jsx("p",{className:"text-xs text-gray-500",children:T.email||"N/A"})]})},{key:"contact",label:"Contact",width:"150px",render:T=>o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-900",children:T.contact||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:T.telephone||"N/A"})]})},{key:"secteur",label:"Secteur",width:"120px",render:T=>o.jsx("span",{children:T.secteur||"N/A"})},{key:"statut",label:"Statut",width:"100px",render:T=>{var ae;return o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${T.statut==="actif"?"bg-green-100 text-green-800":T.statut==="prospect"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:((ae=T.statut)==null?void 0:ae.toUpperCase())||"N/A"})}},{key:"wilaya",label:"Wilaya",width:"120px",render:T=>o.jsx("span",{children:T.wilaya||"N/A"})}],actions:[{key:"view",label:"Dtails",icon:o.jsx(Uf,{size:18}),onClick:T=>{A(T),x(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"action",label:"Afficher",icon:o.jsx(bd,{size:18}),onClick:T=>{!z||T.statut==="actif"||(A(T),w(!0))},disabled:T=>!z||T.statut==="actif",title:T=>T.statut==="actif"?"Actions dsactives: Ce prospect est devenu client actif":z?"Ajouter une action":"Permission refuse: Ajouter une action",className:T=>!z||T.statut==="actif"?"bg-gray-400 cursor-not-allowed text-white px-3 py-1":"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(qn,{size:18}),onClick:H,disabled:!z,title:z?"Modifier ce prospect":"Permission refuse: Modifier",className:z?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(en,{size:18}),onClick:J,disabled:!C,title:C?"Supprimer ce prospect":"Permission refuse: Supprimer",className:C?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:i,emptyMessage:"Aucun prospect trouv"}),o.jsx(Bt,{isOpen:y,onClose:()=>v(!1),title:O==="create"?"Nouveau Prospect":"Modifier Prospect",children:o.jsx(Aie,{prospect:E,onSubmit:he,onCancel:()=>v(!1)})}),o.jsx(Bt,{isOpen:g,onClose:()=>x(!1),title:"Historique des Actions",size:"lg",children:o.jsx(NT,{prospectId:E==null?void 0:E.id})}),o.jsx(Bt,{isOpen:j,onClose:()=>w(!1),title:"Enregistrer une Action de Suivi",children:E&&o.jsx(Oie,{prospect:E,onSubmit:we,onCancel:()=>w(!1)})}),o.jsx(Bt,{isOpen:_,onClose:()=>S(!1),title:" Analyse IA - Prospects",size:"lg",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex gap-2 border-b border-gray-200",children:[o.jsx("button",{onClick:()=>{M("global"),B(0)},className:`px-4 py-2 font-medium transition-colors ${k==="global"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,children:" Analyse Globale"}),o.jsxs("button",{onClick:()=>M("prospects"),className:`px-4 py-2 font-medium transition-colors ${k==="prospects"?"text-primary border-b-2 border-primary":"text-gray-600 hover:text-gray-800"}`,children:[" Par Prospect (",r.length,")"]})]}),k==="global"&&o.jsxs("div",{className:"space-y-6 max-h-96 overflow-y-auto p-2",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[o.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Total"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900",children:r.length})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[o.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Conversion"}),o.jsxs("p",{className:"text-3xl font-bold text-green-900",children:[(r.filter(T=>T.statut==="actif").length/r.length*100).toFixed(1),"%"]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"Rpartition par Statut"}),o.jsx("div",{className:"space-y-2",children:[{label:"Actifs",count:r.filter(T=>T.statut==="actif").length,color:"bg-green-500"},{label:"Prospects",count:r.filter(T=>T.statut==="prospect").length,color:"bg-blue-500"},{label:"Inactifs",count:r.filter(T=>T.statut==="inactif").length,color:"bg-red-500"}].map(T=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:T.label}),o.jsx("span",{className:"text-sm font-bold text-gray-900",children:T.count})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:`${T.color} h-2 rounded-full`,style:{width:`${T.count/r.length*100}%`}})})]},T.label))})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:"Top Secteurs"}),o.jsx("div",{className:"space-y-2",children:(()=>{const T={};return r.forEach(ae=>{const U=ae.secteur||"Non spcifi";T[U]=(T[U]||0)+1}),Object.entries(T).sort((ae,U)=>U[1]-ae[1]).slice(0,5).map(([ae,U])=>o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-700",children:ae}),o.jsx("span",{className:"bg-purple-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:U})]},ae))})()})]}),o.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-3",children:" Actions Recommandes"}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsxs("span",{children:["Relancer les ",r.filter(T=>T.statut==="prospect").length," prospects en attente"]})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsx("span",{children:"Planifier des appels dans les 48h"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{className:"text-amber-600 font-bold",children:""}),o.jsx("span",{children:"Mettre en place un suivi structur"})]})]})]})]}),k==="prospects"&&o.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto p-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>B(Math.max(0,L-1)),disabled:L===0,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50",children:" Prcdent"}),o.jsxs("span",{className:"text-sm font-bold text-gray-700",children:[L+1," / ",r.length]}),o.jsx("button",{onClick:()=>B(Math.min(r.length-1,L+1)),disabled:L===r.length-1,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded disabled:opacity-50",children:"Suivant "})]}),(()=>{const T=r[L],ae=T.statut==="actif"?100:T.statut==="prospect"?50:25;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg p-6",children:[o.jsx("p",{className:"text-sm opacity-90",children:"Score de Conversion"}),o.jsxs("h2",{className:"text-4xl font-bold",children:[ae,"/100"]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" Rsum"}),o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:T.raison_sociale})," - ",T.contact," | Actions: 1 | Installations: 0"]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:" Contact"}),o.jsx("p",{className:"text-sm font-bold text-blue-900",children:T.telephone})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 font-semibold",children:" Secteur"}),o.jsx("p",{className:"text-sm font-bold text-purple-900",children:T.secteur||"N/A"})]})]}),o.jsxs("div",{className:"bg-pink-50 rounded-lg p-4 border border-pink-200",children:[o.jsx("p",{className:"text-xs text-pink-600 font-semibold mb-1",children:" Statut"}),o.jsxs("p",{className:"text-sm font-bold",children:["Prospect:",o.jsx("span",{className:`ml-2 px-2 py-1 rounded font-bold text-white ${T.statut==="actif"?"bg-green-500":T.statut==="prospect"?"bg-blue-500":"bg-red-500"}`,children:T.statut.toUpperCase()})]})]}),o.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:" Recommandations IA"}),o.jsxs("ul",{className:"space-y-1 text-sm text-gray-700",children:[T.statut==="prospect"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relancer dans les 48h"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Prvoir un appel commercial"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Envoyer une proposition"})]})]}),T.statut==="actif"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Maintenir le contact rgulirement"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Proposer des services additionnels"})]})]}),T.statut==="inactif"&&o.jsxs(o.Fragment,{children:[o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Relancer pour ractiver"})]}),o.jsxs("li",{className:"flex gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Comprendre les raisons d'inactivit"})]})]})]})]})]})})()]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:()=>S(!1),className:"px-6 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors font-medium",children:"Fermer"})})]})})]})},Tie=({clientId:e,installationId:t})=>{const[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState("all"),[c,u]=N.useState("all");N.useEffect(()=>{f()},[e,t]);const f=async()=>{try{a(!0);let p;e?p=await rr.getByClient(e):p=await rr.getAll(),t&&(p=p.filter(b=>b.installation_id===t)),n(p)}catch(p){console.error("Erreur chargement paiements:",p)}finally{a(!1)}},d=r.filter(p=>!(s!=="all"&&p.type!==s||c!=="all"&&p.mode_paiement!==c)),h=d.reduce((p,b)=>p+(b.montant||0),0);return i?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Chargement..."})]}):r.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(li,{className:"mx-auto text-gray-400 mb-2",size:48}),o.jsx("p",{className:"text-gray-500",children:"Aucun paiement enregistr"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(AR,{size:18,className:"text-gray-500"}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Type:"}),o.jsxs("select",{value:s,onChange:p=>l(p.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[o.jsx("option",{value:"all",children:"Tous"}),o.jsx("option",{value:"acquisition",children:"Acquisition"}),o.jsx("option",{value:"abonnement",children:"Abonnement"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Mode:"}),o.jsxs("select",{value:c,onChange:p=>u(p.target.value),className:"px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary",children:[o.jsx("option",{value:"all",children:"Tous"}),o.jsx("option",{value:"especes",children:"Espces"}),o.jsx("option",{value:"virement",children:"Virement"}),o.jsx("option",{value:"cheque",children:"Chque"}),o.jsx("option",{value:"autre",children:"Autre"})]})]})]}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"Total des Paiements"}),o.jsx("p",{className:"text-2xl font-bold text-green-800",children:Ze(h)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"Nombre"}),o.jsx("p",{className:"text-2xl font-bold text-green-800",children:d.length})]})]})}),o.jsx("div",{className:"space-y-3",children:d.map((p,b)=>o.jsxs("div",{className:"relative bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[b<d.length-1&&o.jsx("div",{className:"absolute left-6 top-16 w-0.5 h-8 bg-gray-200"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${p.type==="acquisition"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:o.jsx(li,{size:24})})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:p.type==="acquisition"?"Acquisition":"Abonnement"}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${p.type==="acquisition"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:ps(p.mode_paiement)})]}),p.client&&o.jsx("p",{className:"text-sm text-gray-600",children:p.client.raison_sociale}),p.installation&&o.jsx("p",{className:"text-xs text-gray-500",children:p.installation.application_installee})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-xl font-bold text-green-600",children:Ze(p.montant)}),o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 mt-1",children:[o.jsx(Rr,{size:12}),o.jsx("span",{children:$r(p.date_paiement)})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 mt-2 pt-2 border-t border-gray-100",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"font-medium",children:"Mode:"}),ps(p.mode_paiement)]}),p.installation_id&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"font-medium",children:"Installation:"}),"Lie"]})]})]})]})]},p.id))}),o.jsxs("button",{className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors text-gray-700 font-medium",children:[o.jsx(CA,{size:18}),"Exporter l'historique (PDF)"]})]})},Cie=({client:e})=>{const[t,r]=N.useState([]),[n,i]=N.useState([]),[a,s]=N.useState([]),[l,c]=N.useState(null),[u,f]=N.useState(!0),[d,h]=N.useState(!1),[p,b]=N.useState(!1);N.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{f(!0);const v=await Pr.getByClient(e.id),g=await rr.getByClient(e.id);r(v||[]),i(g||[]);const x=(v||[]).reduce((_,S)=>_+(S.montant||0),0),j=(g||[]).reduce((_,S)=>_+(S.montant||0),0),w=Math.max(0,x-j);c({totalInstallations:x,totalPaye:j,resteAPayer:w});try{const _=await ii.getByClient(e.id);s(_||[])}catch(_){console.warn("Interventions non disponibles:",_),s([])}}catch(v){console.error("Erreur chargement donnes client:",v),r([]),i([]),s([]),c({totalInstallations:0,totalPaye:0,resteAPayer:0})}finally{f(!1)}};if(u)return o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto"}),o.jsx("p",{className:"text-gray-600 mt-2",children:"Chargement..."})]});const y=n.reduce((v,g)=>v+(g.montant||0),0);return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-primary to-primary-dark text-white rounded-lg p-6",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.raison_sociale}),o.jsxs("div",{className:"space-y-1 text-blue-100",children:[o.jsxs("p",{children:["Contact: ",e.contact]}),o.jsxs("p",{children:["Tlphone: ",e.telephone]}),e.email&&o.jsxs("p",{children:["Email: ",e.email]}),e.secteur&&o.jsxs("p",{className:"flex items-center gap-2",children:[o.jsx("span",{children:"Secteur:"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${e.secteur==="GROSSISTE PHARM"?"bg-blue-500 text-white":e.secteur==="GROSSISTE PARA"?"bg-green-500 text-white":e.secteur==="PARA SUPER GROS"?"bg-purple-500 text-white":e.secteur==="LABO PROD"?"bg-orange-500 text-white":"bg-gray-500 text-white"}`,children:e.secteur})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow",children:[o.jsx(cl,{className:"mx-auto mb-2 text-primary",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-gray-800",children:t.length}),o.jsx("p",{className:"text-sm text-gray-600",children:"Installations"})]}),o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow bg-gradient-to-br from-green-50 to-green-100",children:[o.jsx(li,{className:"mx-auto mb-2 text-green-600",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-green-700",children:Ze(y)}),o.jsx("p",{className:"text-sm text-green-600",children:"Total Pay"})]}),o.jsxs("div",{className:"card text-center hover:shadow-lg transition-shadow bg-gradient-to-br from-red-50 to-red-100",children:[o.jsx(li,{className:"mx-auto mb-2 text-red-600",size:32}),o.jsx("h4",{className:"text-2xl font-bold text-red-700",children:Ze((l==null?void 0:l.resteAPayer)||0)}),o.jsx("p",{className:"text-sm text-red-600",children:"Reste  Payer"})]})]}),o.jsxs("div",{className:"card border-l-4 border-blue-500 bg-blue-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(PR,{size:20,className:"text-blue-600"})," Historique Phase Prospect (Conserv)"]}),o.jsx("button",{onClick:()=>b(!p),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:p?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Masquer"}),o.jsx(ri,{size:16})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir l'historique"}),o.jsx(ti,{size:16})]})})]}),p?o.jsx("div",{className:"bg-white rounded-lg p-4",children:o.jsx(NT,{prospectId:e.id})}):o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsxs("p",{className:"mb-2",children:[" Cet historique contient toutes les actions effectues pendant la phase ",o.jsx("strong",{children:"prospect"}),"(avant la conversion en client actif)."]}),o.jsx("p",{className:"text-xs text-gray-600",children:"Il est conserv pour traabilit et analyse du parcours commercial."})]})]}),l&&o.jsxs("div",{className:"card border-l-4 border-primary",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Rsum Financier"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total des Installations"}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Ze(l.totalInstallations)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Montant Pay"}),o.jsx("p",{className:"text-2xl font-bold text-green-600",children:Ze(l.totalPaye)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Reste  Payer"}),o.jsx("p",{className:`text-2xl font-bold ${l.resteAPayer>0?"text-red-600":"text-green-600"}`,children:Ze(l.resteAPayer)})]})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(cl,{size:20,className:"text-primary"}),"Installations"]}),t.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(cl,{className:"mx-auto text-gray-300 mb-2",size:48}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Aucune installation"})]}):o.jsx("div",{className:"space-y-3",children:t.map(v=>{const g=n.filter(j=>j.installation_id===v.id).reduce((j,w)=>j+(w.montant||0),0),x=Math.max(0,v.montant-g);return o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:v.application_installee}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Install le ",$r(v.date_installation)]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold text-primary",children:Ze(v.montant)}),o.jsx("span",{className:v.statut==="terminee"?"badge-success":"badge-warning",children:v.statut==="terminee"?"Termine":"En cours"})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-2 border-t border-gray-200 text-xs",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Pay"}),o.jsx("p",{className:"font-bold text-green-600",children:Ze(g)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Reste"}),o.jsx("p",{className:`font-bold ${x>0?"text-red-600":"text-green-600"}`,children:Ze(x)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600",children:"Pourcentage"}),o.jsxs("p",{className:"font-bold text-blue-600",children:[(g/v.montant*100).toFixed(0),"%"]})]})]})]},v.id)})})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(li,{size:20,className:"text-green-500"}),"Historique Paiements"]}),n.length>0&&o.jsx("button",{onClick:()=>h(!d),className:"flex items-center gap-2 text-sm text-primary hover:text-primary-dark font-medium transition-colors",children:d?o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir rsum"}),o.jsx(ri,{size:16})]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:"Voir dtails"}),o.jsx(ti,{size:16})]})})]}),n.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(li,{className:"mx-auto text-gray-300 mb-2",size:48}),o.jsx("p",{className:"text-gray-500 text-sm",children:"Aucun paiement"})]}):d?o.jsx(Tie,{clientId:e.id}):o.jsxs("div",{className:"space-y-2",children:[n.slice(0,5).map(v=>o.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-800 capitalize",children:v.type}),o.jsx("p",{className:"text-sm text-gray-600",children:$r(v.date_paiement)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold text-green-600",children:Ze(v.montant)}),o.jsx("p",{className:"text-xs text-gray-500 capitalize",children:v.mode_paiement}),v.resteAPayer&&v.resteAPayer>0&&o.jsxs("p",{className:"text-xs text-red-600 font-semibold",children:["Reste: ",Ze(v.resteAPayer)]})]})]},v.id)),n.length>5&&o.jsxs("button",{onClick:()=>h(!0),className:"w-full py-2 text-sm text-primary hover:text-primary-dark font-medium",children:["Voir les ",n.length-5," autres paiements"]})]})]}),a.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(RR,{size:20,className:"text-purple-500"}),"Interventions Rcentes"]}),o.jsxs("div",{className:"space-y-3",children:[a.slice(0,5).map(v=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h4",{className:"font-semibold text-gray-800 capitalize",children:v.type_intervention}),o.jsx("span",{className:v.statut==="cloturee"?"badge-success":"badge-warning",children:v.statut==="cloturee"?"Clture":"En cours"})]}),o.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:v.resume_probleme}),o.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[o.jsx("span",{children:$r(v.date_intervention)}),o.jsxs("span",{children:[v.duree_minutes||"-"," min"]}),v.technicien&&o.jsxs("span",{children:["Tech: ",v.technicien.nom]})]})]},v.id)),a.length>5&&o.jsxs("p",{className:"text-center text-sm text-gray-500 pt-2",children:["+",a.length-5," autres interventions"]})]})]})]})},kie=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState(!1),[f,d]=N.useState(null),{addNotification:h}=sr();N.useEffect(()=>{p()},[]),N.useEffect(()=>{b()},[e,s]);const p=async()=>{try{a(!0);const v=(await Zt.getAll()).filter(x=>x.statut==="actif"),g=await Promise.all(v.map(async x=>{try{const j=await Pr.getByClient(x.id),w=await rr.getByClient(x.id),_=(j||[]).reduce((A,O)=>A+(O.montant||0),0),S=(w||[]).reduce((A,O)=>A+(O.montant||0),0),E=Math.max(0,_-S);return{...x,montant_paye:S,reste_a_payer:E,montant_total:_}}catch(j){return console.warn(`Erreur calcul financials pour client ${x.id}:`,j),{...x,montant_paye:0,reste_a_payer:0,montant_total:0}}}));t(g)}catch{h({type:"error",message:"Erreur lors du chargement des clients"})}finally{a(!1)}},b=()=>{let y=[...e];s&&(y=y.filter(v=>{var g,x,j,w;return((g=v.raison_sociale)==null?void 0:g.toLowerCase().includes(s.toLowerCase()))||((x=v.contact)==null?void 0:x.toLowerCase().includes(s.toLowerCase()))||((j=v.telephone)==null?void 0:j.includes(s))||((w=v.email)==null?void 0:w.toLowerCase().includes(s.toLowerCase()))})),n(y)},m=y=>{d(y),u(!0)};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Clients"}),o.jsx("h3",{className:"text-4xl font-bold",children:e.length})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Actifs ce mois"}),o.jsx("h3",{className:"text-4xl font-bold",children:e.length})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Nouveaux"}),o.jsx("h3",{className:"text-4xl font-bold",children:"+5"})]})]}),o.jsx("div",{className:"card",children:o.jsx(Ta,{value:s,onChange:l,placeholder:"Rechercher un client..."})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun client trouv"})}):o.jsx(Fc,{data:r,columns:[{key:"raison_sociale",label:"Client",width:"200px",render:y=>o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:y.raison_sociale}),o.jsx("p",{className:"text-xs text-gray-500",children:y.email||"N/A"})]})},{key:"contact",label:"Contact",width:"150px",render:y=>o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-900",children:y.contact||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:y.telephone||"N/A"})]})},{key:"secteur",label:"Secteur",width:"120px",render:y=>o.jsx("span",{children:y.secteur||"N/A"})},{key:"montant_paye",label:"Montant Pay",width:"140px",render:y=>o.jsxs("span",{className:"font-semibold text-green-600",children:[new Intl.NumberFormat("fr-DZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(y.montant_paye||0)," DA"]})},{key:"reste_a_payer",label:"Reste  Payer",width:"140px",render:y=>o.jsxs("span",{className:`font-semibold ${(y.reste_a_payer||0)>0?"text-red-600":"text-green-600"}`,children:[new Intl.NumberFormat("fr-DZ",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}).format(y.reste_a_payer||0)," DA"]})},{key:"wilaya",label:"Wilaya",width:"100px",render:y=>o.jsx("span",{children:y.wilaya||"N/A"})},{key:"statut",label:"Statut",width:"100px",render:y=>o.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"CLIENT ACTIF"})}],actions:[{key:"view",label:"Dtails",icon:o.jsx(Uf,{size:18}),onClick:m,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"}],loading:i,emptyMessage:"Aucun client trouv"}),o.jsx(Bt,{isOpen:c,onClose:()=>u(!1),title:"Dtails du Client",size:"lg",children:o.jsx(Cie,{client:f})})]})},Yo={getAll:async()=>{try{const{data:e,error:t}=await G.from("applications").select("*").order("nom",{ascending:!0});if(t)throw t;return e||[]}catch(e){throw console.error("Erreur rcupration applications:",e),e}},getById:async e=>{try{const{data:t,error:r}=await G.from("applications").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur rcupration application:",t),t}},create:async e=>{try{const{data:t,error:r}=await G.from("applications").insert([e]).select().single();if(r)throw r;return t}catch(t){throw console.error("Erreur cration application:",t),t}},update:async(e,t)=>{try{const{data:r,error:n}=await G.from("applications").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur mise  jour application:",r),r}},delete:async e=>{try{const{error:t}=await G.from("applications").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur suppression application:",t),t}},getStats:async()=>{try{const{data:e,error:t}=await G.from("applications").select("*");if(t)throw t;return{total:e.length,actives:e.filter(r=>r.statut==="actif").length,inactives:e.filter(r=>r.statut==="inactif").length}}catch(e){throw console.error("Erreur rcupration stats applications:",e),e}}},$ie=({installation:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({client_id:"",application_installee:"",montant:"",date_installation:"",type:"acquisition",statut:"en_cours"}),[a,s]=N.useState({}),[l,c]=N.useState([]),[u,f]=N.useState([]),[d,h]=N.useState(!1);N.useEffect(()=>{var g;p(),b(),e&&i({client_id:e.client_id||"",application_installee:e.application_installee||"",montant:e.montant||"",date_installation:((g=e.date_installation)==null?void 0:g.split("T")[0])||"",type:e.type||"acquisition",statut:e.statut||"en_cours"})},[e]);const p=async()=>{try{const g=await Zt.getAll();c(g)}catch(g){console.error("Erreur chargement clients:",g)}},b=async()=>{try{const g=await Yo.getAll();f(g)}catch(g){console.error("Erreur chargement applications:",g)}},m=(g,x)=>{i(j=>({...j,[g]:x})),a[g]&&s(j=>({...j,[g]:""}))},y=g=>{const x=u.find(j=>j.id===g);x&&i(j=>({...j,application_installee:x.nom,montant:x.prix}))},v=async g=>{if(g.preventDefault(),d)return;const x={};if(n.client_id||(x.client_id="Client requis"),n.application_installee||(x.application_installee="Application requise"),n.montant||(x.montant="Montant requis"),n.date_installation||(x.date_installation="Date requise"),n.type||(x.type="Type requis"),Object.keys(x).length>0){s(x);return}try{h(!0);const w=new Date(n.date_installation).toISOString().split("T")[0],_={client_id:n.client_id,application_installee:n.application_installee,montant:parseFloat(n.montant),date_installation:w,type:n.type,statut:n.statut};await t(_)}finally{h(!1)}};return o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsx(st,{label:"Client",value:n.client_id,onChange:g=>m("client_id",g.target.value),options:[{value:"",label:"Slectionner un client..."},...l.map(g=>({value:g.id,label:`${g.raison_sociale} (${g.contact})`}))],error:a.client_id,required:!0,disabled:d}),o.jsx(st,{label:"Application",value:"",onChange:g=>y(g.target.value),options:[{value:"",label:"Slectionner une application..."},...u.map(g=>({value:g.id,label:`${g.nom} - ${g.prix} DA`}))],disabled:d}),o.jsx(We,{label:"Application Installe",value:n.application_installee,onChange:g=>m("application_installee",g.target.value),placeholder:"Nom de l'application",error:a.application_installee,required:!0,disabled:d}),o.jsx(We,{label:"Montant (DA)",type:"number",step:"0.01",value:n.montant,onChange:g=>m("montant",g.target.value),placeholder:"0.00",error:a.montant,required:!0,disabled:d}),o.jsx(We,{label:"Date d'Installation",type:"date",value:n.date_installation,onChange:g=>m("date_installation",g.target.value),error:a.date_installation,required:!0,disabled:d}),o.jsx(st,{label:"Type",value:n.type,onChange:g=>m("type",g.target.value),options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:a.type,required:!0,disabled:d}),o.jsx(st,{label:"Statut",value:n.statut,onChange:g=>m("statut",g.target.value),options:[{value:"en_cours",label:"En Cours"},{value:"terminee",label:"Termine"}],required:!0,disabled:d}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:d,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:d,children:d?"En cours...":e?"Modifier":"Crer"})]})]})},Iie=({installation:e,onEdit:t,onDelete:r,onPayment:n,refreshTrigger:i})=>{var A,O;const[a,s]=N.useState(0),[l,c]=N.useState([]),[u,f]=N.useState(!0),{profile:d,user:h}=Et(),[p,b]=N.useState(null),[m,y]=N.useState(!1),[v,g]=N.useState(!1),[x,j]=N.useState(!1),[w,_]=N.useState(!1);N.useEffect(()=>{(async()=>{try{if(e!=null&&e.created_by&&((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")){y(!0);const k=await Be.getById(e.created_by);b(k)}if(h!=null&&h.id&&d){_(!0);const k=await Be.hasEditPermission(h.id,"installations"),M=await Be.hasDeletePermission(h.id,"installations");g(k),j(M)}}catch(k){console.error("Erreur chargement donnes:",k)}finally{y(!1),_(!1)}})()},[e==null?void 0:e.created_by,d==null?void 0:d.role,h==null?void 0:h.id,d]),N.useEffect(()=>{e&&e.client_id&&e.id&&S()},[e==null?void 0:e.id,i]);const S=async()=>{try{f(!0);const k=(await rr.getByClient(e.client_id)).filter(B=>B.installation_id===e.id);c(k);const M=k.reduce((B,D)=>B+(D.montant||0),0),L=Math.max(0,e.montant-M);s(L)}catch(P){console.error("Erreur calcul reste  payer:",P),s(e.montant)}finally{f(!1)}},E=()=>{n&&n(e)};return o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-1",children:e.application_installee}),o.jsx("span",{className:`${UR(e.statut)} text-xs`,children:ps(e.statut)})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),disabled:!v&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!v&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,title:!v&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?"Permission refuse":"Modifier",children:!v&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?o.jsx(_i,{size:18}):o.jsx(qn,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),disabled:!x&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!x&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:!x&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?"Permission refuse":"Supprimer",children:!x&&!((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")?o.jsx(_i,{size:18}):o.jsx(en,{size:18})})]})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(cl,{size:16}),o.jsx("span",{className:"font-medium",children:(A=e.client)==null?void 0:A.raison_sociale})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm",children:[o.jsx(Rr,{size:16}),o.jsxs("span",{children:["Install le ",$r(e.date_installation)]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-primary text-lg font-bold",children:[o.jsx(As,{size:20}),o.jsx("span",{children:Ze(e.montant)})]}),!u&&a>0&&o.jsx("div",{className:"bg-red-50 rounded-lg p-3 border border-red-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-red-700 font-medium",children:"Reste  payer:"}),o.jsx("span",{className:"text-lg font-bold text-red-600",children:Ze(a)})]})}),!u&&a===0&&o.jsx("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:o.jsx("span",{className:"text-sm text-green-700 font-medium",children:" Entirement pay"})}),!u&&l.length>0&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[o.jsxs("div",{className:"text-sm text-blue-700 font-medium mb-2",children:["Paiements enregistrs (",l.length,"):"]}),o.jsx("div",{className:"space-y-2",children:l.map(P=>o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-blue-600",children:$r(P.date_paiement)}),o.jsx("span",{className:"font-bold text-blue-700",children:Ze(P.montant)})]},P.id))})]})]}),o.jsxs("div",{className:"pt-4 border-t border-gray-200 space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Client:"}),o.jsx("span",{className:"font-medium text-gray-800",children:(O=e.client)==null?void 0:O.contact})]}),p&&((d==null?void 0:d.role)==="admin"||(d==null?void 0:d.role)==="super_admin")&&o.jsx("div",{className:"text-xs text-gray-500",children:o.jsxs("p",{children:["Cr par: ",o.jsx("span",{className:"font-semibold text-gray-700",children:p.nom||p.email})]})}),a>0&&o.jsxs("button",{onClick:E,className:"w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[o.jsx(li,{size:18}),"Enregistrer un paiement"]})]})]})},Mie=({installation:e,onSubmit:t,onCancel:r,isSubmitting:n=!1})=>{var v;const[i,a]=N.useState({montant:"",mode_paiement:"virement",type:"acquisition",date_paiement:new Date().toISOString().split("T")[0]}),[s,l]=N.useState({}),[c,u]=N.useState(0),[f,d]=N.useState(0),[h,p]=N.useState(!0);N.useEffect(()=>{b()},[e==null?void 0:e.id]),N.useEffect(()=>{e&&e.type&&a(g=>({...g,type:e.type}))},[e==null?void 0:e.id,e==null?void 0:e.type]);const b=async()=>{try{if(p(!0),!e||!e.id){u(0),d(0),p(!1);return}console.log("Installation slectionne:",e.id);const g=await rr.getByClient(e.client_id);console.log("Tous les paiements du client:",g);const x=g.filter(_=>(console.log(`Comparaison: ${_.installation_id} === ${e.id} => ${_.installation_id===e.id}`),_.installation_id===e.id));console.log("Paiements de CETTE installation:",x);const j=x.reduce((_,S)=>_+(S.montant||0),0);console.log("Total pay:",j,"Montant installation:",e.montant),d(j);const w=Math.max(0,e.montant-j);u(w),console.log("Reste  payer:",w),w>0?a(_=>({..._,montant:w.toString()})):a(_=>({..._,montant:""}))}catch(g){console.error("Erreur calcul reste:",g),u((e==null?void 0:e.montant)||0)}finally{p(!1)}},m=(g,x)=>{a(j=>({...j,[g]:x})),s[g]&&l(j=>({...j,[g]:""}))},y=g=>{g.preventDefault();const x={};if((!i.montant||parseFloat(i.montant)<=0)&&(x.montant="Montant requis et > 0"),parseFloat(i.montant)>c&&(x.montant=`Le montant ne peut pas dpasser le reste  payer (${Ze(c)})`),i.mode_paiement||(x.mode_paiement="Mode de paiement requis"),i.date_paiement||(x.date_paiement="Date requise"),Object.keys(x).length>0){l(x);return}const j={montant:parseFloat(i.montant),mode_paiement:i.mode_paiement,type:i.type,date_paiement:i.date_paiement};t(j)};return h?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 space-y-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Installation"}),o.jsx("p",{className:"text-lg font-bold text-gray-800",children:e.application_installee})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Client"}),o.jsx("p",{className:"text-gray-800",children:(v=e.client)==null?void 0:v.raison_sociale})]}),o.jsxs("div",{className:"border-t border-blue-200 pt-3 grid grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Montant Total"}),o.jsx("p",{className:"text-lg font-bold text-primary",children:Ze(e.montant)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Dj Pay"}),o.jsx("p",{className:"text-lg font-bold text-green-600",children:Ze(f)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Reste  Payer"}),o.jsx("p",{className:`text-lg font-bold ${c>0?"text-red-600":"text-green-600"}`,children:Ze(c)})]})]})]}),c===0&&o.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-sm text-green-700 font-semibold",children:" Cette installation est entirement paye !"})}),o.jsx(We,{label:"Montant  Payer (DA)",type:"number",step:"0.01",value:i.montant,onChange:g=>m("montant",g.target.value),placeholder:"0.00",error:s.montant,required:!0}),o.jsx(st,{label:"Mode de Paiement",value:i.mode_paiement,onChange:g=>m("mode_paiement",g.target.value),options:[{value:"especes",label:"Espces"},{value:"virement",label:"Virement"},{value:"cheque",label:"Chque"},{value:"autre",label:"Autre"}],error:s.mode_paiement,required:!0}),o.jsx(st,{label:"Type de Paiement",value:i.type,onChange:g=>m("type",g.target.value),disabled:!0,options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:s.type,required:!0}),o.jsx(We,{label:"Date du Paiement",type:"date",value:i.date_paiement,onChange:g=>m("date_paiement",g.target.value),error:s.date_paiement,required:!0}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:n,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:c===0||n,children:n?" Enregistrement...":"Enregistrer le Paiement"})]})]})},Rie=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState(!0),[c,u]=N.useState(""),[f,d]=N.useState("all"),[h,p]=N.useState(""),[b,m]=N.useState(""),[y,v]=N.useState(""),[g,x]=N.useState(!1),[j,w]=N.useState(!1),[_,S]=N.useState(!1),[E,A]=N.useState(null),[O,P]=N.useState("create"),[k,M]=N.useState(0),[L,B]=N.useState(!1),[D,q]=N.useState(!1),[R,I]=N.useState(!1),[z,W]=N.useState(!1),[C,F]=N.useState(!1),{addNotification:Q}=sr(),{user:Z,profile:ee}=Et();N.useEffect(()=>{le()},[]),N.useEffect(()=>{e.length>0&&ce()},[e]),N.useEffect(()=>{ie()},[Z==null?void 0:Z.id,ee==null?void 0:ee.role]),N.useEffect(()=>{K()},[e,c,f,h,b,y]);const le=async()=>{try{l(!0);const U=await Pr.getAll();t(U)}catch{Q({type:"error",message:"Erreur lors du chargement des installations"})}finally{l(!1)}},ce=async()=>{try{const U=await rr.getAll();a(U)}catch(U){console.error("Erreur lors du chargement des paiements:",U)}},te=U=>i.filter(re=>re.installation_id===U).reduce((re,Se)=>re+(Se.montant||0),0),V=U=>{const re=te(U.id);return Math.max(0,(U.montant||0)-re)},ie=async()=>{try{if(W(!0),Z!=null&&Z.id&&ee){const U=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Be.hasCreatePermission(Z.id,"installations"),re=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Be.hasEditPermission(Z.id,"installations"),Se=(ee==null?void 0:ee.role)==="admin"||(ee==null?void 0:ee.role)==="super_admin"||await Be.hasDeletePermission(Z.id,"installations");B(U),q(re),I(Se)}}catch(U){console.error("Erreur chargement permissions:",U)}finally{W(!1)}},K=()=>{let U=[...e];f!=="all"&&(U=U.filter(re=>re.statut===f)),c&&(U=U.filter(re=>{var Se,ge,_e;return((Se=re.application_installee)==null?void 0:Se.toLowerCase().includes(c.toLowerCase()))||((_e=(ge=re.client)==null?void 0:ge.raison_sociale)==null?void 0:_e.toLowerCase().includes(c.toLowerCase()))})),h&&(U=U.filter(re=>new Date(re.date_installation)>=new Date(h))),b&&(U=U.filter(re=>new Date(re.date_installation)<=new Date(b+"T23:59:59"))),y&&(U=U.filter(re=>re.created_by===y)),n(U)},H=()=>{L&&(A(null),P("create"),x(!0))},J=U=>{D&&(A(U),P("edit"),x(!0))},he=async U=>{const re=(U==null?void 0:U.id)||U;if(!R)return;try{if(await Pr.hasPaiements(re)){window.alert(` SUPPRESSION IMPOSSIBLE 

Cette installation est lie  un ou plusieurs paiements enregistrs.

 Vous ne pouvez pas supprimer cette installation.

 Solution: Supprimez d'abord les paiements avant de supprimer l'installation.`);return}}catch(_e){console.error("Erreur vrification paiements:",_e)}if(!window.confirm(` ATTENTION 

Cette action va supprimer:
- L'installation
- Tous les abonnements lis

Cette action est IRRVERSIBLE !

tes-vous absolument sr de vouloir continuer ?`))return;if(window.prompt('Pour confirmer la suppression, tapez "SUPPRIMER" en majuscules:')!=="SUPPRIMER"){Q({type:"info",message:"Suppression annule"});return}try{await Pr.delete(re),Q({type:"success",message:"Installation supprime avec succs"}),le()}catch(_e){_e.code==="INSTALLATION_HAS_PAIEMENTS"?window.alert(` SUPPRESSION IMPOSSIBLE 

Cette installation est lie  un ou plusieurs paiements enregistrs.

 Vous ne pouvez pas supprimer cette installation.

 Solution: Supprimez d'abord les paiements avant de supprimer l'installation.`):Q({type:"error",message:_e.message||"Erreur lors de la suppression"})}},we=U=>{A(U),w(!0)},Y=async U=>{try{if(O==="create"){const re={...U,created_by:(Z==null?void 0:Z.id)||null};await Pr.create(re),Q({type:"success",message:"Installation cre avec succs"})}else await Pr.update(E.id,U),Q({type:"success",message:"Installation modifie avec succs"});x(!1),le()}catch(re){Q({type:"error",message:re.message||"Erreur lors de l'enregistrement"})}},fe=async U=>{if(!C){F(!0);try{await rr.create({...U,client_id:E.client_id,installation_id:E.id,created_by:(Z==null?void 0:Z.id)||null}),Q({type:"success",message:"Paiement enregistr avec succs"}),w(!1),await le(),T()}catch(re){Q({type:"error",message:re.message||"Erreur lors de l'enregistrement du paiement"})}finally{F(!1)}}},T=()=>{M(U=>U+1)},ae={total:e.length,enCours:e.filter(U=>U.statut==="en_cours").length,terminees:e.filter(U=>U.statut==="terminee").length,acquisitions:e.filter(U=>U.type==="acquisition").length,abonnements:e.filter(U=>U.type==="abonnement").length,revenuTotal:e.reduce((U,re)=>U+(re.montant||0),0)};return s?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Installations"}),o.jsx("h3",{className:"text-3xl font-bold",children:ae.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Cours"}),o.jsx("h3",{className:"text-3xl font-bold",children:ae.enCours})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Termines"}),o.jsx("h3",{className:"text-3xl font-bold",children:ae.terminees})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Acquisitions"}),o.jsx("h3",{className:"text-3xl font-bold",children:ae.acquisitions})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:ae.abonnements})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:Oi,onClick:H,disabled:!L,className:"w-full h-full",title:L?"Crer une nouvelle installation":"Permission refuse: Crer une installation",children:"Nouvelle Installation"})})]}),o.jsx("div",{className:"space-y-4",children:o.jsx(tx,{onSearchChange:u,onDateStartChange:p,onDateEndChange:m,onCreatorChange:v,searchValue:c,dateStart:h,dateEnd:b,creatorId:y})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune installation trouve"})}):o.jsx(Fc,{data:r,columns:[{key:"application_installee",label:"Application",width:"200px",render:U=>{var re;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:U.application_installee||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((re=U.client)==null?void 0:re.raison_sociale)||"N/A"})]})}},{key:"date_installation",label:"Date Installation",width:"150px",render:U=>o.jsx("span",{children:U.date_installation?new Date(U.date_installation).toLocaleDateString("fr-FR"):"N/A"})},{key:"statut",label:"Statut",width:"120px",render:U=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.statut==="en_cours"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:U.statut==="en_cours"?"En cours":"Termine"})},{key:"type",label:"Type",width:"120px",render:U=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${U.type==="acquisition"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:U.type==="acquisition"?"Acquisition":"Abonnement"})},{key:"montant",label:"Montant",width:"120px",render:U=>o.jsxs("span",{children:[(U.montant||0).toLocaleString("fr-DZ")," DA"]})},{key:"montant_paye",label:"Montant Pay",width:"140px",render:U=>o.jsxs("span",{className:"font-semibold text-green-700",children:[te(U.id).toLocaleString("fr-DZ")," DA"]})},{key:"reste_a_payer",label:"Reste  Payer",width:"140px",render:U=>{const re=V(U);return o.jsxs("span",{className:`font-semibold ${re>0?"text-orange-700":"text-green-700"}`,children:[re.toLocaleString("fr-DZ")," DA"]})}}],actions:[{key:"details",label:"Dtails",icon:o.jsx(Uf,{size:18}),onClick:U=>{A(U),S(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(qn,{size:18}),onClick:J,disabled:!D,title:D?"Modifier cette installation":"Permission refuse: Modifier",className:D?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(en,{size:18}),onClick:he,disabled:!R,title:R?"Supprimer cette installation":"Permission refuse: Supprimer",className:R?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:s,emptyMessage:"Aucune installation trouve"}),o.jsx(Bt,{isOpen:g,onClose:()=>x(!1),title:O==="create"?"Nouvelle Installation":"Modifier Installation",children:o.jsx($ie,{installation:E,onSubmit:Y,onCancel:()=>x(!1)})}),o.jsx(Bt,{isOpen:_,onClose:()=>S(!1),title:"Dtails Installation",size:"lg",children:E&&o.jsx(Iie,{installation:E,onEdit:J,onDelete:he,onPayment:we,refreshTrigger:k})}),o.jsx(Bt,{isOpen:j,onClose:()=>w(!1),title:`Enregistrer un paiement - ${E==null?void 0:E.application_installee}`,children:E&&o.jsx(Mie,{installation:E,onSubmit:fe,onCancel:()=>w(!1),isSubmitting:C})})]})},Mh={validateProspect:e=>{const t={};return(!e.raison_sociale||e.raison_sociale.trim()==="")&&(t.raison_sociale="La raison sociale est obligatoire"),(!e.contact||e.contact.trim()==="")&&(t.contact="Le contact est obligatoire"),!e.telephone||e.telephone.trim()===""?t.telephone="Le tlphone est obligatoire":/^(0)(5|6|7)[0-9]{8}$/.test(e.telephone.replace(/\s/g,""))||(t.telephone="Format de tlphone invalide (ex: 0555123456)"),e.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)&&(t.email="Format d'email invalide"),{isValid:Object.keys(t).length===0,errors:t}},validateInstallation:e=>{const t={};return e.client_id||(t.client_id="Le client est obligatoire"),(!e.application_installee||e.application_installee.trim()==="")&&(t.application_installee="L'application est obligatoire"),(!e.montant||e.montant<=0)&&(t.montant="Le montant doit tre suprieur  0"),e.date_installation||(t.date_installation="La date d'installation est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validatePaiement:e=>{const t={};return e.client_id||(t.client_id="Le client est obligatoire"),e.type||(t.type="Le type de paiement est obligatoire"),(!e.montant||e.montant<=0)&&(t.montant="Le montant doit tre suprieur  0"),e.mode_paiement||(t.mode_paiement="Le mode de paiement est obligatoire"),e.date_paiement||(t.date_paiement="La date de paiement est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validateIntervention:e=>{const t={};return e.client_id||(t.client_id="Le client est obligatoire"),e.technicien_id||(t.technicien_id="Le technicien est obligatoire"),e.mode_intervention||(t.mode_intervention="Le mode d'intervention est obligatoire"),e.type_intervention||(t.type_intervention="Le type d'intervention est obligatoire"),(!e.resume_probleme||e.resume_probleme.trim()==="")&&(t.resume_probleme="Le rsum du problme est obligatoire"),{isValid:Object.keys(t).length===0,errors:t}},validateApplication:e=>{const t={};return(!e.nom||e.nom.trim()==="")&&(t.nom="Le nom de l'application est obligatoire"),(!e.prix||e.prix<=0)&&(t.prix="Le prix doit tre suprieur  0"),{isValid:Object.keys(t).length===0,errors:t}},validateUser:e=>{const t={};return(!e.nom||e.nom.trim()==="")&&(t.nom="Le nom est obligatoire"),!e.email||e.email.trim()===""?t.email="L'email est obligatoire":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="Format d'email invalide"),e.role||(t.role="Le rle est obligatoire"),(!e.password||e.password.length<6)&&(t.password="Le mot de passe doit contenir au moins 6 caractres"),{isValid:Object.keys(t).length===0,errors:t}}},ET=({paiement:e,onSubmit:t,onCancel:r,isAbonnement:n=!1,isSubmitting:i=!1})=>{const[a,s]=N.useState({client_id:"",installation_id:"",type:"acquisition",montant:"",mode_paiement:"especes",date_paiement:new Date().toISOString().split("T")[0]}),[l,c]=N.useState({}),[u,f]=N.useState([]),[d,h]=N.useState([]),[p,b]=N.useState(0);N.useEffect(()=>{var x;m(),e&&(s({client_id:e.client_id||"",installation_id:e.installation_id||"",type:e.type||"acquisition",montant:e.montant||"",mode_paiement:e.mode_paiement||"especes",date_paiement:((x=e.date_paiement)==null?void 0:x.split("T")[0])||""}),n&&e.abonnement_montant&&b(e.abonnement_montant))},[e,n]);const m=async()=>{try{const j=(await Zt.getAll()).filter(w=>w.statut==="actif");f(j)}catch(x){console.error("Erreur chargement clients:",x)}},y=async x=>{try{const j=await Pr.getByClient(x);h(j)}catch(j){console.error("Erreur chargement installations:",j)}},v=(x,j)=>{if(s(w=>({...w,[x]:j})),l[x]&&c(w=>({...w,[x]:""})),x==="client_id"&&j&&y(j),x==="installation_id"&&j){const w=d.find(_=>String(_.id)===String(j));w&&w.type&&s(_=>({..._,type:w.type}))}},g=x=>{x.preventDefault();let j={};n&&p>0&&(parseFloat(a.montant)||0)>p&&(j.montant=`Le montant du paiement ne peut pas dpasser ${p.toLocaleString("fr-DZ")} DA`);const w=Mh.validatePaiement(a);if(!w.isValid){c({...w.errors,...j});return}if(Object.keys(j).length>0){c(j);return}t(a)};return o.jsxs("form",{onSubmit:g,className:"space-y-4",children:[o.jsx(st,{label:"Client",value:a.client_id,onChange:x=>v("client_id",x.target.value),disabled:n,options:u.map(x=>({value:x.id,label:`${x.raison_sociale} (${x.contact})`})),error:l.client_id,required:!0}),d.length>0&&o.jsx(st,{label:"Installation (optionnel)",value:a.installation_id,onChange:x=>v("installation_id",x.target.value),disabled:n,options:d.map(x=>({value:x.id,label:x.application_installee}))}),o.jsx(st,{label:"Type de Paiement",value:a.type,onChange:x=>v("type",x.target.value),disabled:!!a.installation_id||n,options:[{value:"acquisition",label:"Acquisition"},{value:"abonnement",label:"Abonnement"}],error:l.type,required:!0}),n&&p>0&&o.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsxs("p",{className:"text-sm font-semibold text-blue-900",children:["Montant de l'abonnement: ",o.jsxs("span",{className:"text-lg text-blue-700",children:[p.toLocaleString("fr-DZ")," DA"]})]}),o.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Le montant du paiement ne peut pas dpasser ce montant"})]}),o.jsx(We,{label:"Montant (DA)",type:"number",value:a.montant,onChange:x=>v("montant",x.target.value),error:l.montant,required:!0}),o.jsx(st,{label:"Mode de Paiement",value:a.mode_paiement,onChange:x=>v("mode_paiement",x.target.value),options:[{value:"especes",label:"Espces"},{value:"virement",label:"Virement"},{value:"cheque",label:"Chque"},{value:"autre",label:"Autre"}],error:l.mode_paiement,required:!0}),o.jsx(We,{label:"Date de Paiement",type:"date",value:a.date_paiement,onChange:x=>v("date_paiement",x.target.value),error:l.date_paiement,required:!0}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:i,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:i,children:i?" Enregistrement...":e?"Modifier":"Enregistrer"})]})]})},Die=()=>{var L,B,D,q,R;const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(!1),[h,p]=N.useState(null),[b,m]=N.useState(!1),[y,v]=N.useState(!1),[g,x]=N.useState(!1),{addNotification:j}=sr(),{user:w,profile:_}=Et();N.useEffect(()=>{S()},[]),N.useEffect(()=>{E()},[w==null?void 0:w.id,_==null?void 0:_.role]),N.useEffect(()=>{A()},[e,s,c]);const S=async()=>{try{a(!0);const I=await qt.getAll(),z=await Promise.all(I.map(async W=>{var C,F,Q;try{const{data:Z}=await G.from("paiements").select("montant").eq("installation_id",W.installation_id),ee=(Z||[]).reduce((te,V)=>te+(V.montant||0),0),le=((C=W.installation)==null?void 0:C.montant)||0,ce=Math.max(0,le-ee);return{...W,totalPaye:ee,resteAPayer:ce,montantInstallation:le}}catch(Z){return console.error("Erreur chargement paiements:",Z),{...W,totalPaye:0,resteAPayer:((F=W.installation)==null?void 0:F.montant)||0,montantInstallation:((Q=W.installation)==null?void 0:Q.montant)||0}}}));t(z)}catch{j({type:"error",message:"Erreur lors du chargement des abonnements"})}finally{a(!1)}},E=async()=>{try{if(w!=null&&w.id&&_){const I=(_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="super_admin"||await Be.hasDeletePermission(w.id,"abonnements"),z=(_==null?void 0:_.role)==="admin"||(_==null?void 0:_.role)==="super_admin"||await Be.hasCreatePermission(w.id,"paiements");m(I),v(z)}}catch(I){console.error("Erreur chargement permissions:",I)}},A=()=>{let I=[...e];c!=="all"&&(I=I.filter(z=>z.statut===c)),s&&(I=I.filter(z=>{var W,C,F,Q,Z;return((C=(W=z.installation)==null?void 0:W.application_installee)==null?void 0:C.toLowerCase().includes(s.toLowerCase()))||((Z=(Q=(F=z.installation)==null?void 0:F.client)==null?void 0:Q.raison_sociale)==null?void 0:Z.toLowerCase().includes(s.toLowerCase()))})),n(I)},O=async I=>{const z=typeof I=="object"?I.id:I,W=typeof I=="object"?I:e.find(C=>C.id===z);if(window.confirm("tes-vous sr de vouloir renouveler cet abonnement ?"))try{if(await qt.delete(z),!W)throw new Error("Abonnement non trouv");const C=new Date(W.date_fin),F=new Date(C);F.setFullYear(F.getFullYear()+1),await qt.create({installation_id:W.installation_id,date_debut:C.toISOString(),date_fin:F.toISOString(),statut:"actif"}),j({type:"success",message:"Abonnement renouvel avec succs"}),S()}catch(C){j({type:"error",message:C.message||"Erreur lors du renouvellement"})}},P=I=>{y&&(p(I),d(!0))},k=async I=>{var z,W;if(!g){x(!0);try{const C={montant:I.montant,type:I.type,mode_paiement:I.mode_paiement,date_paiement:I.date_paiement,client_id:((W=(z=h.installation)==null?void 0:z.client)==null?void 0:W.id)||h.installation.client_id,installation_id:h.installation_id,created_by:(w==null?void 0:w.id)||null};if(await rr.create(C),h.statut==="expire"){const{data:F}=await G.from("paiements").select("montant").eq("installation_id",h.installation_id),Q=(F||[]).reduce((ee,le)=>ee+(le.montant||0),0),Z=h.installation;if(Q>=((Z==null?void 0:Z.montant)||0)){await qt.delete(h.id);const ee=new Date(h.date_fin),le=new Date(ee);le.setFullYear(le.getFullYear()+1),await qt.create({installation_id:h.installation_id,date_debut:ee.toISOString(),date_fin:le.toISOString(),statut:"actif"}),j({type:"success",message:"Paiement enregistr et abonnement renouvel automatiquement"})}else j({type:"success",message:"Paiement enregistr avec succs"})}else j({type:"success",message:"Paiement enregistr avec succs"});d(!1),p(null),S()}catch(C){j({type:"error",message:C.message||"Erreur lors de l'enregistrement du paiement"})}finally{x(!1)}}},M={total:e.length,actifs:e.filter(I=>I.statut==="actif").length,enAlerte:e.filter(I=>I.statut==="en_alerte").length,expires:e.filter(I=>I.statut==="expire").length};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Actifs"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.actifs}),o.jsxs("p",{className:"text-sm opacity-90 mt-1",children:["Taux ",M.total>0?(M.actifs/M.total*100).toFixed(0):0,"%"]})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Alerte"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.enAlerte}),o.jsx("p",{className:"text-sm opacity-90 mt-1",children:" renouveler"})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Expirs"}),o.jsx("h3",{className:"text-3xl font-bold",children:M.expires}),o.jsx("p",{className:"text-sm opacity-90 mt-1",children:"Action requise"})]})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ta,{value:s,onChange:l,placeholder:"Rechercher un abonnement..."})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("actif"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="actif"?"bg-success text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Actifs"}),o.jsx("button",{onClick:()=>u("en_alerte"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="en_alerte"?"bg-warning text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"En Alerte"}),o.jsx("button",{onClick:()=>u("expire"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="expire"?"bg-danger text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Expirs"})]})]})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun abonnement trouv"})}):o.jsx(Fc,{data:r,columns:[{key:"installation",label:"Installation",width:"200px",render:I=>{var z,W,C;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:((z=I.installation)==null?void 0:z.application_installee)||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((C=(W=I.installation)==null?void 0:W.client)==null?void 0:C.raison_sociale)||"N/A"})]})}},{key:"date_debut",label:"Date Dbut",width:"120px",render:I=>o.jsx("span",{children:I.date_debut?new Date(I.date_debut).toLocaleDateString("fr-FR"):"N/A"})},{key:"date_fin",label:"Date Fin",width:"120px",render:I=>o.jsx("span",{children:I.date_fin?new Date(I.date_fin).toLocaleDateString("fr-FR"):"N/A"})},{key:"montantInstallation",label:"Montant",width:"120px",render:I=>o.jsxs("span",{children:[(I.montantInstallation||0).toLocaleString("fr-DZ")," DA"]})},{key:"totalPaye",label:"Pay",width:"120px",render:I=>o.jsxs("span",{className:"text-green-700 font-semibold",children:[(I.totalPaye||0).toLocaleString("fr-DZ")," DA"]})},{key:"resteAPayer",label:"Reste  Payer",width:"130px",render:I=>o.jsxs("span",{className:`font-semibold ${(I.resteAPayer||0)>0?"text-red-700":"text-green-700"}`,children:[(I.resteAPayer||0).toLocaleString("fr-DZ")," DA"]})},{key:"statut",label:"Statut",width:"100px",render:I=>{const z=new Date,W=new Date(I.date_fin),C=W<z,F=Math.ceil((W-z)/(1e3*60*60*24));return o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${C?"bg-red-100 text-red-800":F<=30?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:C?"Expir":F<=30?" renouveler":"Actif"})}}],actions:[{key:"payment",label:"Paiement",icon:"",onClick:P,disabled:!y,title:y?"Ajouter un paiement":"Permission refuse: Ajouter un paiement",className:y?"bg-green-600 hover:bg-green-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"renew",label:"Renouveler",icon:"",onClick:O,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1",condition:I=>{const z=new Date,W=new Date(I.date_fin),C=W<z,F=Math.ceil((W-z)/(1e3*60*60*24));return C||F<=30}}],loading:i,emptyMessage:"Aucun abonnement trouv"}),o.jsx(Bt,{isOpen:f,onClose:()=>{d(!1),p(null)},title:h?`Enregistrer paiement - ${(L=h.installation)==null?void 0:L.application_installee}`:"Enregistrer paiement",size:"lg",children:h&&o.jsx(ET,{isAbonnement:!0,isSubmitting:g,paiement:{client_id:((D=(B=h.installation)==null?void 0:B.client)==null?void 0:D.id)||((q=h.installation)==null?void 0:q.client_id)||"",installation_id:h.installation_id,type:"abonnement",mode_paiement:"especes",montant:"",date_paiement:new Date().toISOString().split("T")[0],abonnement_montant:((R=h.installation)==null?void 0:R.montant)||0},onSubmit:k,onCancel:()=>d(!1)})})]})},Lie=({refreshTrigger:e,onRefreshTrigger:t})=>{const[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState(""),[h,p]=N.useState("all"),[b,m]=N.useState(""),[y,v]=N.useState(""),[g,x]=N.useState(""),[j,w]=N.useState([]),[_,S]=N.useState(!1),[E,A]=N.useState(null),[O,P]=N.useState("create"),[k,M]=N.useState(!1),[L,B]=N.useState(!1),[D,q]=N.useState(!1),[R,I]=N.useState(!1),{addNotification:z}=sr(),{user:W,profile:C}=Et();N.useEffect(()=>{F()},[e]),N.useEffect(()=>{(async()=>{if(W!=null&&W.id&&C)try{const ie=(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"||await Be.hasCreatePermission(W.id,"paiements"),K=(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"||await Be.hasEditPermission(W.id,"paiements"),H=(C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"||await Be.hasDeletePermission(W.id,"paiements");M(ie),B(K),q(H)}catch(ie){console.error("Erreur vrification permissions:",ie)}})()},[W==null?void 0:W.id,C]),N.useEffect(()=>{Q()},[r,f,h,b,y,g]);const F=async()=>{try{u(!0);const[V,ie,K]=await Promise.all([rr.getAll(),Pr.getAll(),Be.getAll()]);console.log(` Paiements chargs (${V.length}):`,V.slice(0,3)),console.log(` Utilisateurs chargs (${K.length}):`,K.map(J=>({id:J.id,email:J.email})));const H=V.filter(J=>J.created_by);console.log(` Paiements avec created_by: ${H.length}/${V.length}`),H.length>0&&console.log("   Exemples:",H.slice(0,2).map(J=>({id:J.id,created_by:J.created_by}))),n(V),l(ie),w(K)}catch(V){console.error("Erreur chargement:",V),z({type:"error",message:"Erreur lors du chargement des donnes"})}finally{u(!1)}},Q=()=>{let V=[...r];h!=="all"&&(V=V.filter(ie=>ie.type===h)),f&&(V=V.filter(ie=>{var K,H,J;return((H=(K=ie.client)==null?void 0:K.raison_sociale)==null?void 0:H.toLowerCase().includes(f.toLowerCase()))||((J=ie.mode_paiement)==null?void 0:J.toLowerCase().includes(f.toLowerCase()))})),b&&(V=V.filter(ie=>new Date(ie.date_paiement)>=new Date(b))),y&&(V=V.filter(ie=>new Date(ie.date_paiement)<=new Date(y+"T23:59:59"))),g&&(V=V.filter(ie=>ie.created_by===g)),a(V)},Z=V=>{L&&(A(V),P("edit"),S(!0))},ee=async V=>{var H;const ie=(V==null?void 0:V.id)||V;if(!(!D||!window.confirm(` ATTENTION 

Voulez-vous vraiment supprimer ce paiement ?

Cette action est IRRVERSIBLE et affectera:
- L'historique financier
- Les statistiques de revenus
- Le reste  payer de l'installation

tes-vous sr de vouloir continuer ?`)))try{await rr.delete(ie),z({type:"success",message:"Paiement supprim avec succs"}),F(),t&&t()}catch(J){console.error("Erreur suppression paiement:",J),J.status===409||(H=J.message)!=null&&H.includes("foreign key")?z({type:"error",message:"Impossible de supprimer ce paiement car il est li  d'autres enregistrements"}):z({type:"error",message:J.message||"Erreur lors de la suppression du paiement"})}},le=async V=>{if(!R){I(!0);try{if(O==="edit")await rr.update(E.id,V),z({type:"success",message:"Paiement modifi avec succs"});else{const ie={client_id:V.client_id,installation_id:V.installation_id,type:V.type,montant:V.montant,mode_paiement:V.mode_paiement,date_paiement:V.date_paiement,created_by:(W==null?void 0:W.id)||null};if(await rr.create(ie),V.installation_id){const{data:K}=await G.from("abonnements").select("*").eq("installation_id",V.installation_id).eq("statut","expire");if(K&&K.length>0){const H=K[0],{data:J}=await G.from("paiements").select("montant").eq("installation_id",V.installation_id),he=(J||[]).reduce((Y,fe)=>Y+(fe.montant||0),0),{data:we}=await G.from("installations").select("montant").eq("id",V.installation_id).single();if(he>=((we==null?void 0:we.montant)||0)){await qt.delete(H.id);const Y=new Date(H.date_fin),fe=new Date(Y);fe.setFullYear(fe.getFullYear()+1),await qt.create({installation_id:V.installation_id,date_debut:Y.toISOString(),date_fin:fe.toISOString(),statut:"actif"}),z({type:"success",message:"Paiement enregistr et abonnement renouvel automatiquement"})}else z({type:"success",message:"Paiement enregistr avec succs"})}else z({type:"success",message:"Paiement enregistr avec succs"})}else z({type:"success",message:"Paiement enregistr avec succs"})}S(!1),F(),t&&t()}catch(ie){z({type:"error",message:ie.message||"Erreur lors de l'enregistrement"})}finally{I(!1)}}},ce=()=>{const V=r.reduce((H,J)=>H+(J.resteAPayer||0),0),ie=new Set(r.map(H=>H.installation_id).filter(H=>H)),K=s.filter(H=>!ie.has(H.id)).reduce((H,J)=>H+(J.montant||0),0);return V+K},te={total:i.length,revenuTotal:i.reduce((V,ie)=>V+(ie.montant||0),0),acquisitions:i.filter(V=>{var ie;return((ie=V.installation)==null?void 0:ie.type)==="acquisition"}).length,abonnements:i.filter(V=>{var ie;return((ie=V.installation)==null?void 0:ie.type)==="abonnement"}).length,resteTotal:ce()};return c?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Revenus Totaux"}),o.jsx("h3",{className:"text-2xl font-bold",children:Ze(te.revenuTotal)})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Reste  Payer"}),o.jsx("h3",{className:"text-2xl font-bold",children:Ze(te.resteTotal)})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Acquisitions"}),o.jsx("h3",{className:"text-3xl font-bold",children:te.acquisitions})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Abonnements"}),o.jsx("h3",{className:"text-3xl font-bold",children:te.abonnements})]}),o.jsxs("div",{className:"card",children:[o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Journal des Paiements"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Modifier ou supprimer via la table"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Type:"}),o.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous les types"}),o.jsx("option",{value:"acquisition",children:"Acquisition"}),o.jsx("option",{value:"abonnement",children:"Abonnement"})]})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Du:"}),o.jsx("input",{type:"date",value:b,onChange:V=>m(V.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Au:"}),o.jsx("input",{type:"date",value:y,onChange:V=>v(V.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Crateur:"}),o.jsxs("select",{value:g||"",onChange:V=>x(V.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"",children:"Tous les crateurs"}),Array.from(new Map(r.map(V=>[V.created_by,V])).entries()).filter(([V])=>V).map(([V,ie])=>{var he;const K=r.filter(we=>we.created_by===V),H=j.find(we=>we.id===V),J=((he=H==null?void 0:H.email)==null?void 0:he.split("@")[0])||(H==null?void 0:H.email)||(V==null?void 0:V.substring(0,8))||"Inconnu";return o.jsxs("option",{value:V,children:[J," (",K.length,")"]},V)})]})]})]}),o.jsxs("div",{className:"card p-4",children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:" Rechercher:"}),o.jsx("input",{type:"text",placeholder:"Client ou mode de paiement...",value:f,onChange:V=>d(V.target.value),className:"w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),o.jsx("div",{className:"card overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Installation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mode"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:"Aucun paiement trouv"})}):i.map(V=>{var ie,K,H,J,he;return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[o.jsx("div",{className:"font-medium text-gray-800",children:(ie=V.client)==null?void 0:ie.raison_sociale}),o.jsx("div",{className:"text-sm text-gray-600",children:(K=V.client)==null?void 0:K.contact})]}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(H=V.installation)==null?void 0:H.application_installee}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:`badge-${((J=V.installation)==null?void 0:J.type)==="acquisition"?"info":"success"}`,children:((he=V.installation)==null?void 0:he.type)==="acquisition"?"Acquisition":"Abonnement"})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("span",{className:"text-lg font-bold text-green-600",children:Ze(V.montant)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 capitalize",children:V.mode_paiement}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$r(V.date_paiement)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:o.jsxs("div",{className:"flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:()=>Z(V),disabled:!L&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!L&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:bg-blue-50"}`,title:!L&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?"Permission refuse":"Modifier",children:!L&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?o.jsx(_i,{size:18}):o.jsx(qn,{size:18})}),o.jsx("button",{onClick:()=>ee(V.id),disabled:!D&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin"),className:`p-2 rounded-lg transition-colors ${!D&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"}`,title:!D&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?"Permission refuse":"Supprimer",children:!D&&!((C==null?void 0:C.role)==="admin"||(C==null?void 0:C.role)==="super_admin")?o.jsx(_i,{size:18}):o.jsx(en,{size:18})})]})})]},V.id)})})]})}),o.jsx(Bt,{isOpen:_,onClose:()=>S(!1),title:"Modifier Paiement",children:o.jsx(ET,{paiement:E,onSubmit:le,onCancel:()=>S(!1),isSubmitting:R})})]})},Bie=({intervention:e,onSubmit:t,onCancel:r})=>{const{user:n,profile:i}=Et(),[a,s]=N.useState({client_id:"",priorite:"normale",mode_intervention:"sur_site",type_intervention:"accompagnement",statut:"en_cours",date_intervention:new Date().toISOString().split("T")[0],resume_probleme:"",action_entreprise:"",commentaires:""}),[l,c]=N.useState({}),[u,f]=N.useState([]),[d,h]=N.useState(null),[p,b]=N.useState(""),[m,y]=N.useState(!1),v=["accompagnement","adaptation","assistance","blocage","correction","fonctionnalite","erreur","formation","integration","mise_a_jour","parametrage","impression","reseau","question","suivi"],g=S=>{if(!S)return"accompagnement";const E=S.toLowerCase().replace(/\s+/g,"_");return v.includes(E)?E:"accompagnement"},x=async S=>{if(!S){h(null);return}try{const A=(await qt.getAll()).filter(B=>{var D;return((D=B.installation)==null?void 0:D.client_id)===S||B.client_id===S});if(A.length===0){h({noAbonnement:!0});return}const O=A[0],P=new Date(O.date_fin),k=new Date;k.setHours(0,0,0,0),P.setHours(0,0,0,0);const M=Math.floor((P-k)/(1e3*60*60*24));let L=O.statut||"actif";M<0?L="expire":M<=30?L="en_alerte":L="actif",h({...O,daysLeft:M,statut:L,isExpired:L==="expire",isExpiring:L==="en_alerte",application:O.application||"Non spcifie",type:O.type||"standard"})}catch(E){console.error("Erreur chargement abonnement:",E),h({error:!0,message:E.message})}};N.useEffect(()=>{var S;j(),e&&s({client_id:e.client_id||"",priorite:e.priorite||"normale",mode_intervention:e.mode_intervention||"sur_site",type_intervention:g(e.type_intervention),statut:e.statut||"en_cours",date_intervention:((S=e.date_intervention)==null?void 0:S.split("T")[0])||"",resume_probleme:e.resume_probleme||"",action_entreprise:e.action_entreprise||"",commentaires:e.commentaires||""})},[e]);const j=async()=>{try{const E=(await Zt.getAll()).filter(A=>A.statut==="actif");f(E)}catch(S){console.error("Erreur chargement clients:",S)}},w=(S,E)=>{if(s(A=>({...A,[S]:E})),l[S]&&c(A=>({...A,[S]:""})),S==="client_id"){x(E);const A=u.find(O=>O.id===E);b((A==null?void 0:A.raison_sociale)||"")}},_=S=>{if(S.preventDefault(),m)return;const E={...a,technicien_id:n.id,type_intervention:g(a.type_intervention)},A=Mh.validateIntervention(E);if(!A.isValid){c(A.errors);return}y(!0);try{t(E)}finally{y(!1)}};return o.jsxs("form",{onSubmit:_,className:"space-y-4",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-semibold",children:"Technicien:"})," ",(i==null?void 0:i.nom)||"Utilisateur"]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(st,{label:"Client",value:a.client_id,onChange:S=>w("client_id",S.target.value),options:u.map(S=>({value:S.id,label:`${S.raison_sociale} (${S.contact})`})),error:l.client_id,required:!0}),o.jsx(st,{label:"Priorit",value:a.priorite,onChange:S=>w("priorite",S.target.value),options:[{value:"normale",label:"Normale"},{value:"haute",label:"Haute"}],required:!0})]}),d&&o.jsxs("div",{className:`rounded-lg p-4 flex items-start gap-3 ${d.noAbonnement?"bg-yellow-50 border border-yellow-200":d.error||d.isExpired?"bg-red-50 border border-red-200":d.isExpiring?"bg-orange-50 border border-orange-200":"bg-green-50 border border-green-200"}`,children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d.noAbonnement?o.jsx(Nt,{className:"w-5 h-5 text-yellow-600"}):d.error?o.jsx(Nt,{className:"w-5 h-5 text-red-600"}):d.isExpired?o.jsx(Nt,{className:"w-5 h-5 text-red-600"}):d.isExpiring?o.jsx(Tc,{className:"w-5 h-5 text-orange-600"}):o.jsx(dn,{className:"w-5 h-5 text-green-600"})}),o.jsx("div",{className:"flex-1",children:d.noAbonnement?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-yellow-800",children:" Pas d'abonnement actif"}),o.jsxs("p",{className:"text-sm text-yellow-700",children:[p," - Aucun abonnement trouv"]})]}):d.error?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-800",children:" Erreur"}),o.jsx("p",{className:"text-sm text-red-700",children:"Impossible de charger les infos d'abonnement"})]}):d.isExpired?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-800",children:" ABONNEMENT EXPIR"}),o.jsxs("p",{className:"text-sm text-red-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-red-700",children:["Expir depuis le ",new Date(d.date_fin).toLocaleDateString("fr-FR")]}),o.jsx("p",{className:"text-xs text-red-600 mt-1",children:" URGENT: Contacter le client pour renouvellement"})]}):d.isExpiring?o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-orange-800",children:" ABONNEMENT EXPIRE BIENTT"}),o.jsxs("p",{className:"text-sm text-orange-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-orange-700",children:["Expire dans ",d.daysLeft," jour",d.daysLeft>1?"s":"","(",new Date(d.date_fin).toLocaleDateString("fr-FR"),")"]}),o.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"  renouveler rapidement"})]}):o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-800",children:" ABONNEMENT ACTIF"}),o.jsxs("p",{className:"text-sm text-green-700",children:["Application: ",d.application]}),o.jsxs("p",{className:"text-sm text-green-700",children:["Valide jusqu'au ",new Date(d.date_fin).toLocaleDateString("fr-FR"),"(",d.daysLeft," jours restants)"]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx(st,{label:"Mode d'Intervention",value:a.mode_intervention,onChange:S=>w("mode_intervention",S.target.value),options:[{value:"sur_site",label:"Sur Site"},{value:"a_distance",label:" Distance"}],error:l.mode_intervention,required:!0}),o.jsx(st,{label:"Type d'Intervention",value:a.type_intervention,onChange:S=>w("type_intervention",S.target.value),options:[{value:"accompagnement",label:"Accompagnement utilisateur (prise en main)"},{value:"adaptation",label:"Adaptation d'un tat / rapport / modle d'impression"},{value:"assistance",label:"Assistance sur une opration exceptionnelle"},{value:"blocage",label:"Blocage d'accs / authentification"},{value:"correction",label:"Correction de bug / anomalie"},{value:"fonctionnalite",label:"Demande de nouvelle fonctionnalit"},{value:"erreur",label:"Erreur systme (plantage, message d'erreur critique)"},{value:"formation",label:"Formation"},{value:"integration",label:"Intgration avec un autre outil ou API"},{value:"mise_a_jour",label:"Mise  jour"},{value:"parametrage",label:"Paramtrage"},{value:"impression",label:"Problme d'impression ou de gnration de documents"},{value:"reseau",label:"Problme rseau ou de connection (accs distant, VPN)"},{value:"question",label:"Rponse  une question mtier"},{value:"suivi",label:"Suivi aprs une mise  jour majeure"}],error:l.type_intervention,required:!0}),o.jsx(We,{label:"Date d'Intervention",type:"date",value:a.date_intervention,onChange:S=>w("date_intervention",S.target.value),error:l.date_intervention,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rsum du Problme ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:a.resume_probleme,onChange:S=>w("resume_probleme",S.target.value),rows:"4",className:"input-field",placeholder:"Dcrivez le problme rencontr..."}),l.resume_probleme&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.resume_probleme})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Entreprise"}),o.jsx("textarea",{value:a.action_entreprise,onChange:S=>w("action_entreprise",S.target.value),rows:"3",className:"input-field",placeholder:"Action entreprise pour rsoudre le problme..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commentaires"}),o.jsx("textarea",{value:a.commentaires,onChange:S=>w("commentaires",S.target.value),rows:"3",className:"input-field",placeholder:"Commentaires additionnels..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,disabled:m,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",disabled:m,children:m?" Enregistrement...":e?"Modifier":"Crer"})]})]})},Fie=({intervention:e,onClose:t,onEdit:r,onDelete:n,onCloturer:i})=>{var s,l,c,u,f;if(!e)return null;const a=()=>e.priorite==="haute"?"bg-red-100 text-red-800 border-red-200":"bg-blue-100 text-blue-800 border-blue-200";return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start justify-between pb-4 border-b border-gray-200",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${e.statut==="cloturee"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:ps(e.statut)}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${a()}`,children:e.priorite==="haute"?" Haute Priorit":" Normale"})]}),o.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:ps(e.type_intervention)})]}),o.jsxs("div",{className:"flex gap-2",children:[e.statut==="en_cours"&&o.jsxs("button",{onClick:()=>i(e),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",title:"Clturer cette intervention",children:[o.jsx(dn,{size:18}),"Clturer"]}),o.jsxs("button",{onClick:()=>r(e),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Modifier",children:[o.jsx(qn,{size:18}),"Modifier"]}),o.jsxs("button",{onClick:()=>n(e.id),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",title:"Supprimer",children:[o.jsx(en,{size:18}),"Supprimer"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(IA,{className:"text-blue-600",size:20}),o.jsx("h4",{className:"font-semibold text-blue-900",children:"Client"})]}),o.jsx("p",{className:"text-lg font-bold text-blue-800",children:(s=e.client)==null?void 0:s.raison_sociale}),o.jsx("p",{className:"text-sm text-blue-600",children:(l=e.client)==null?void 0:l.contact}),o.jsx("p",{className:"text-sm text-blue-600",children:(c=e.client)==null?void 0:c.telephone})]}),o.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(BR,{className:"text-purple-600",size:20}),o.jsx("h4",{className:"font-semibold text-purple-900",children:"Technicien"})]}),o.jsx("p",{className:"text-lg font-bold text-purple-800",children:(u=e.technicien)==null?void 0:u.nom}),o.jsx("p",{className:"text-sm text-purple-600",children:(f=e.technicien)==null?void 0:f.email})]}),o.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Rr,{className:"text-green-600",size:20}),o.jsx("h4",{className:"font-semibold text-green-900",children:"Date & Heure"})]}),o.jsx("p",{className:"text-lg font-bold text-green-800",children:$r(e.date_intervention)}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx(Tc,{size:16,className:"text-green-600"}),o.jsxs("p",{className:"text-sm text-green-600",children:[e.duree_minutes||"-"," minutes"]})]})]}),o.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Vv,{className:"text-orange-600",size:20}),o.jsx("h4",{className:"font-semibold text-orange-900",children:"Mode"})]}),o.jsx("p",{className:"text-lg font-bold text-orange-800",children:ps(e.mode_intervention)})]})]}),o.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Nt,{className:"text-red-600",size:20}),o.jsx("h4",{className:"font-semibold text-red-900",children:"Problme Rencontr"})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.resume_probleme})]}),e.action_entreprise&&o.jsxs("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(dn,{className:"text-green-600",size:20}),o.jsx("h4",{className:"font-semibold text-green-900",children:"Action Entreprise"})]}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.action_entreprise})]}),e.commentaires&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Commentaires"}),o.jsx("p",{className:"text-gray-700 leading-relaxed",children:e.commentaires})]}),e.date_fin&&o.jsx("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:o.jsxs("p",{className:"text-sm text-blue-600",children:["Intervention clture le ",o.jsx("span",{className:"font-semibold",children:MA(e.date_fin)})]})})]})},zie=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(null),[i,a]=N.useState(!0);N.useEffect(()=>{s()},[]);const s=async()=>{try{const c=await ii.getAll();t(c),l(c)}catch(c){console.error("Erreur chargement interventions:",c)}finally{a(!1)}},l=c=>{if(c.length===0){n(null);return}const u=c.length,f=c.filter(O=>O.statut==="cloturee"),d=c.filter(O=>O.statut==="en_cours"),h=c.filter(O=>O.priorite==="haute"),p=Math.round(c.reduce((O,P)=>O+(P.duree_minutes||0),0)/u||0),b=Math.round(f.length/u*100||0),m={};c.forEach(O=>{m[O.type_intervention]=(m[O.type_intervention]||0)+1});const y=Object.entries(m).sort((O,P)=>P[1]-O[1])[0],v={};c.forEach(O=>{var k;(((k=O.resume_probleme)==null?void 0:k.toLowerCase().split(" "))||[]).forEach(M=>{M.length>4&&(v[M]=(v[M]||0)+1)})});const g=Object.entries(v).sort((O,P)=>P[1]-O[1]).slice(0,5).map(([O,P])=>({mot:O,count:P})),x={};c.forEach(O=>{var P;(P=O.technicien)!=null&&P.nom&&(x[O.technicien.nom]||(x[O.technicien.nom]={total:0,cloturees:0,duree:0}),x[O.technicien.nom].total++,O.statut==="cloturee"&&x[O.technicien.nom].cloturees++,x[O.technicien.nom].duree+=O.duree_minutes||0)});const j=Object.entries(x).map(([O,P])=>({nom:O,total:P.total,tauxResolution:Math.round(P.cloturees/P.total*100),dureeMoyenne:Math.round(P.duree/P.total)})).sort((O,P)=>P.tauxResolution-O.tauxResolution),w=new Date,_=new Date(w.getTime()-7*24*60*60*1e3),E=c.filter(O=>new Date(O.date_intervention)>=_).length>u/4?"hausse":"baisse",A=[];d.length>f.length&&A.push({type:"warning",message:`${d.length} interventions en cours. Prioriser la clture des interventions en attente.`}),h.length>u*.3&&A.push({type:"danger",message:`${h.length} interventions haute priorit. Augmenter les ressources techniques.`}),p>120&&A.push({type:"info",message:`Dure moyenne leve (${p} min). Envisager une formation technique supplmentaire.`}),b>80&&A.push({type:"success",message:`Excellent taux de rsolution (${b}%). Continuez sur cette lance !`}),g.length>0&&A.push({type:"info",message:`Problme rcurrent dtect: "${g[0].mot}". Crer une documentation prventive.`}),n({totalInterventions:u,cloturees:f.length,enCours:d.length,hautesPriorites:h.length,dureeMoyenne:p,tauxResolution:b,typePlusFrequent:y,problemesRecurrents:g,performanceTechniciens:j,tendance:E,recommandations:A})};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:o.jsx(lg,{size:32})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Analyse IA des Interventions"}),o.jsx("p",{className:"text-purple-100",children:"Intelligence artificielle  Insights automatiques"})]})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsx("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-l-4 border-blue-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Tc,{className:"text-blue-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Dure Moyenne"}),o.jsxs("h3",{className:"text-2xl font-bold text-blue-800",children:[r.dureeMoyenne," min"]})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-l-4 border-green-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(dn,{className:"text-green-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taux de Rsolution"}),o.jsxs("h3",{className:"text-2xl font-bold text-green-800",children:[r.tauxResolution,"%"]})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-l-4 border-orange-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Es,{className:"text-orange-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Haute Priorit"}),o.jsx("h3",{className:"text-2xl font-bold text-orange-800",children:r.hautesPriorites})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-l-4 border-purple-500",children:o.jsxs("div",{className:"flex items-center gap-3",children:[r.tendance==="hausse"?o.jsx(En,{className:"text-purple-600",size:32}):o.jsx(LR,{className:"text-purple-600",size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Tendance"}),o.jsx("h3",{className:"text-2xl font-bold text-purple-800 capitalize",children:r.tendance})]})]})})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(bd,{className:"text-yellow-500",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Recommandations IA"})]}),o.jsx("div",{className:"space-y-3",children:r.recommandations.map((c,u)=>o.jsx("div",{className:`p-4 rounded-lg border-l-4 ${c.type==="success"?"bg-green-50 border-green-500":c.type==="warning"?"bg-orange-50 border-orange-500":c.type==="danger"?"bg-red-50 border-red-500":"bg-blue-50 border-blue-500"}`,children:o.jsx("p",{className:`text-sm font-medium ${c.type==="success"?"text-green-800":c.type==="warning"?"text-orange-800":c.type==="danger"?"text-red-800":"text-blue-800"}`,children:c.message})},u))})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(NR,{className:"text-primary",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Performance des Techniciens"})]}),o.jsx("div",{className:"space-y-3",children:r.performanceTechniciens.map((c,u)=>o.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${u===0?"bg-yellow-100":u===1?"bg-gray-200":u===2?"bg-orange-100":"bg-blue-100"}`,children:o.jsx(Bl,{className:u===0?"text-yellow-600":u===1?"text-gray-600":u===2?"text-orange-600":"text-blue-600",size:20})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-800",children:c.nom}),o.jsxs("p",{className:"text-xs text-gray-500",children:[c.total," interventions"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[c.tauxResolution,"%"]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[c.dureeMoyenne," min/inter"]})]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${c.tauxResolution}%`}})})]},u))})]}),r.problemesRecurrents.length>0&&o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Es,{className:"text-orange-500",size:24}),o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Problmes Rcurrents Dtects"})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:r.problemesRecurrents.map((c,u)=>o.jsxs("div",{className:"bg-orange-50 rounded-lg p-3 text-center border border-orange-200",children:[o.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.count}),o.jsx("p",{className:"text-sm text-orange-800 capitalize truncate",children:c.mot})]},u))})]}),r.typePlusFrequent&&o.jsx("div",{className:"card bg-gradient-to-br from-indigo-50 to-indigo-100 border border-indigo-200",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-indigo-600 font-medium mb-1",children:"Type d'intervention le plus frquent"}),o.jsx("h3",{className:"text-2xl font-bold text-indigo-800 capitalize",children:r.typePlusFrequent[0]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-4xl font-bold text-indigo-600",children:r.typePlusFrequent[1]}),o.jsx("p",{className:"text-sm text-indigo-500",children:"occurrences"})]})]})})]}):o.jsxs("div",{className:"card text-center py-12",children:[o.jsx(lg,{className:"mx-auto text-gray-300 mb-4",size:64}),o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune donne disponible pour l'analyse"})]})},Uie=()=>{const[t,r]=N.useState([]),[n,i]=N.useState([]),[a,s]=N.useState(!0),[l,c]=N.useState(""),[u,f]=N.useState("all"),[d,h]=N.useState(""),[p,b]=N.useState(""),[m,y]=N.useState(""),[v,g]=N.useState("journal"),[x,j]=N.useState(1),[w,_]=N.useState(!1),[S,E]=N.useState(!1),[A,O]=N.useState(!1),[P,k]=N.useState(null),[M,L]=N.useState("create"),[B,D]=N.useState(!1),[q,R]=N.useState(!1),[I,z]=N.useState(!1),{addNotification:W}=sr(),{user:C,profile:F}=Et();N.useEffect(()=>{Q()},[]),N.useEffect(()=>{Q()},[]),N.useEffect(()=>{Z(),j(1)},[t,u,l,d,p,m,F]),N.useEffect(()=>{(async()=>{if(C!=null&&C.id&&F)try{const J=(F==null?void 0:F.role)==="admin"||(F==null?void 0:F.role)==="super_admin"||await Be.hasCreatePermission(C.id,"support"),he=(F==null?void 0:F.role)==="admin"||(F==null?void 0:F.role)==="super_admin"||await Be.hasEditPermission(C.id,"support"),we=(F==null?void 0:F.role)==="admin"||(F==null?void 0:F.role)==="super_admin"||await Be.hasDeletePermission(C.id,"support");D(J),R(he),z(we)}catch(J){console.error("Erreur vrification permissions:",J)}})()},[C==null?void 0:C.id,F]);const Q=async()=>{try{s(!0);const H=await ii.getAll();r(H)}catch{W({type:"error",message:"Erreur lors du chargement des interventions"})}finally{s(!1)}},Z=()=>{let H=[...t];if(u!=="all"&&(H=H.filter(J=>J.statut===u)),l&&(H=H.filter(J=>{var he,we,Y,fe,T;return((we=(he=J.client)==null?void 0:he.raison_sociale)==null?void 0:we.toLowerCase().includes(l.toLowerCase()))||((fe=(Y=J.technicien)==null?void 0:Y.nom)==null?void 0:fe.toLowerCase().includes(l.toLowerCase()))||((T=J.resume_probleme)==null?void 0:T.toLowerCase().includes(l.toLowerCase()))})),d){const J=new Date(d);H=H.filter(he=>new Date(he.date_intervention)>=J)}if(p){const J=new Date(p);J.setHours(23,59,59,999),H=H.filter(he=>new Date(he.date_intervention)<=J)}m&&((F==null?void 0:F.role)==="admin"||(F==null?void 0:F.role)==="super_admin")&&(H=H.filter(J=>J.created_by===m)),i(H)},ee=()=>{B&&(k(null),L("create"),_(!0))},le=H=>{q&&(k(H),L("edit"),_(!0))},ce=H=>{k(H),O(!0)},te=async H=>{var he;const J=(H==null?void 0:H.id)||H;if(I&&window.confirm("tes-vous sr de vouloir supprimer cette intervention ?"))try{await ii.delete(J),W({type:"success",message:"Intervention supprime avec succs"}),Q()}catch(we){console.error("Erreur suppression intervention:",we),we.status===409||(he=we.message)!=null&&he.includes("foreign key")?W({type:"error",message:"Impossible de supprimer cette intervention car elle est lie  d'autres enregistrements"}):W({type:"error",message:"Erreur lors de la suppression de l'intervention"})}},V=async H=>{try{if(M==="create"){const J={...H,created_by:(C==null?void 0:C.id)||null};await ii.create(J),W({type:"success",message:"Intervention cre avec succs"})}else await ii.update(P.id,H),W({type:"success",message:"Intervention modifie avec succs"});_(!1),Q()}catch{W({type:"error",message:"Erreur lors de l'enregistrement"})}},ie=async H=>{H.preventDefault();const J=new FormData(H.target);try{const he=await ii.cloturer(P.id,J.get("action_entreprise"),J.get("commentaires"));W({type:"success",message:"Intervention clture avec succs"}),O(!1),E(!1),k(null),Q()}catch{W({type:"error",message:"Erreur lors de la clture"})}},K={total:t.length,enCours:t.filter(H=>H.statut==="en_cours").length,cloturees:t.filter(H=>H.statut==="cloturee").length,hautesPriorites:t.filter(H=>H.priorite==="haute").length};return a?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total Interventions"}),o.jsx("h3",{className:"text-3xl font-bold",children:K.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Cours"}),o.jsx("h3",{className:"text-3xl font-bold",children:K.enCours})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Cltures"}),o.jsx("h3",{className:"text-3xl font-bold",children:K.cloturees})]}),o.jsx("div",{className:"card",children:o.jsx(Ae,{variant:"primary",icon:Oi,onClick:ee,disabled:!B,className:"w-full h-full",title:B?"Crer une nouvelle intervention":"Permission refuse: Crer une intervention",children:"Nouvelle Intervention"})})]}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>g("journal"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${v==="journal"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[o.jsx(Fu,{size:18}),"Journal"]}),o.jsxs("button",{onClick:()=>g("analyse"),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${v==="analyse"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[o.jsx(lg,{size:18}),"Analyse IA"]})]})}),v==="journal"&&o.jsxs(o.Fragment,{children:[o.jsx(tx,{onSearchChange:c,onDateStartChange:h,onDateEndChange:b,onCreatorChange:y,searchValue:l,dateStart:d,dateEnd:p,creatorId:m}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ta,{value:l,onChange:c,placeholder:"Rechercher une intervention..."})}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>f("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>f("en_cours"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u==="en_cours"?"bg-orange-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"En Cours"}),o.jsx("button",{onClick:()=>f("cloturee"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${u==="cloturee"?"bg-success text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Cltures"})]})]})}),n.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune intervention trouve"})}):o.jsx(Fc,{data:n.slice((x-1)*25,x*25),columns:[{key:"client",label:"Client",width:"180px",render:H=>{var J,he;return o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-900",children:((J=H.client)==null?void 0:J.raison_sociale)||"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:((he=H.technicien)==null?void 0:he.nom)||"N/A"})]})}},{key:"resume_probleme",label:"Problme",width:"180px",render:H=>o.jsx("span",{children:H.resume_probleme||"N/A"})},{key:"time_creation",label:"Dbut",width:"160px",render:H=>{var he;const J=(he=H.time_creation)!=null&&he.endsWith("Z")?H.time_creation:H.time_creation?H.time_creation+"Z":null;return o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:J?new Date(J).toLocaleDateString("fr-FR"):"N/A"}),o.jsx("p",{className:"text-xs text-gray-500",children:J?new Date(J).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"N/A"})]})}},{key:"date_fin",label:"Fin",width:"160px",render:H=>{var he;const J=(he=H.date_fin)!=null&&he.endsWith("Z")?H.date_fin:H.date_fin?H.date_fin+"Z":null;return o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:J?new Date(J).toLocaleDateString("fr-FR"):"-"}),o.jsx("p",{className:"text-xs text-gray-500",children:J?new Date(J).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"}):"-"})]})}},{key:"duree_minutes",label:"Dure",width:"80px",render:H=>o.jsxs("span",{className:"font-semibold text-blue-600",children:[H.duree_minutes||0," min"]})},{key:"priorite",label:"Priorit",width:"100px",render:H=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H.priorite==="haute"?"bg-red-100 text-red-800":H.priorite==="normale"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:H.priorite==="haute"?"Haute":H.priorite==="normale"?"Normale":"Basse"})},{key:"statut",label:"Statut",width:"100px",render:H=>o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${H.statut==="en_cours"?"bg-amber-100 text-amber-800":"bg-green-100 text-green-800"}`,children:H.statut==="en_cours"?"En cours":"Clture"})}],actions:[{key:"details",label:"Dtails",icon:o.jsx(Uf,{size:18}),onClick:H=>{k(H),E(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1"},{key:"edit",label:"Modifier",icon:o.jsx(qn,{size:18}),onClick:le,disabled:!q,title:q?"Modifier cette intervention":"Permission refuse: Modifier",className:q?"bg-amber-600 hover:bg-amber-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"},{key:"delete",label:"Supprimer",icon:o.jsx(en,{size:18}),onClick:te,disabled:!I,title:I?"Supprimer cette intervention":"Permission refuse: Supprimer",className:I?"bg-red-600 hover:bg-red-700 text-white px-3 py-1":"bg-gray-400 cursor-not-allowed text-white px-3 py-1"}],loading:a,emptyMessage:"Aucune intervention trouve"})]}),v==="journal"&&n.length>0&&o.jsxs("div",{className:"card flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage ",Math.min((x-1)*25+1,n.length)," "," ",Math.min(x*25,n.length)," sur"," ",n.length," interventions"]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>j(H=>Math.max(1,H-1)),disabled:x===1,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:" Prcdent"}),o.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:Math.ceil(n.length/25)}).map((H,J)=>o.jsx("button",{onClick:()=>j(J+1),className:`px-3 py-2 rounded-lg ${x===J+1?"bg-primary text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:J+1},J+1))}),o.jsx("button",{onClick:()=>j(H=>Math.min(Math.ceil(n.length/25),H+1)),disabled:x===Math.ceil(n.length/25),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Suivant "})]})]}),v==="analyse"&&o.jsx(zie,{}),o.jsx(Bt,{isOpen:w,onClose:()=>_(!1),title:M==="create"?"Nouvelle Intervention":"Modifier Intervention",size:"lg",children:o.jsx(Bie,{intervention:P,onSubmit:V,onCancel:()=>_(!1)})}),o.jsx(Bt,{isOpen:S,onClose:()=>E(!1),title:"Dtails Intervention",size:"lg",children:P&&o.jsx(Fie,{intervention:P,onClose:()=>E(!1),onEdit:le,onDelete:te,onCloturer:ce})}),o.jsx(Bt,{isOpen:A,onClose:()=>O(!1),title:"Clturer l'Intervention",children:o.jsxs("form",{onSubmit:ie,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Action Entreprise ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{name:"action_entreprise",rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Dcrivez l'action entreprise...",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Commentaires"}),o.jsx("textarea",{name:"commentaires",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary",placeholder:"Commentaires additionnels..."})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:()=>O(!1),children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"success",children:"Clturer"})]})]})})]})},qie=({mission:e,onSave:t,onSubmit:r,onCancel:n,missionTypes:i=[],clients:a=[],users:s=[],isSubmitting:l=!1})=>{const[c,u]=N.useState({titre:"",description:"",clientId:"",lieu:"",wilaya:"",dateDebut:"",dateFin:"",budgetInitial:"",type:"",priorite:"moyenne",chefMissionId:"",accompagnateurIds:[],commentaireCreation:""}),[f,d]=N.useState([]),[h,p]=N.useState({}),b=["Installation","Formation","Support","Maintenance","Audit"],m=i&&i.length>0?i:b;N.useEffect(()=>{var A;e&&(u({titre:e.titre||"",description:e.description||"",clientId:((A=e.client)==null?void 0:A.id)||e.prospect_id||"",lieu:e.lieu||"",wilaya:e.wilaya||e.lieu||"",dateDebut:e.dateDebut||e.date_debut||"",dateFin:e.dateFin||e.date_fin_prevue||"",budgetInitial:e.budgetInitial||e.budget_alloue||"",type:e.type||e.type_mission||"",priorite:e.priorite||"moyenne",chefMissionId:e.chefMissionId||e.chef_mission_id||"",accompagnateurIds:e.accompagnateurIds||e.accompagnateurs_ids||[],commentaireCreation:e.commentaireCreation||""}),d(e.accompagnateurIds||e.accompagnateurs_ids||[]))},[e]),N.useEffect(()=>{if(c.clientId){const A=a.find(P=>P.id===c.clientId),O=(A==null?void 0:A.wilaya)||(A==null?void 0:A.lieu)||"";O&&u(P=>({...P,wilaya:O,lieu:O}))}},[c.clientId,a]);const y=()=>{const A={};return c.titre.trim()||(A.titre="Le titre est requis"),c.clientId||(A.clientId="Le client est requis"),c.chefMissionId||(A.chefMissionId="Le Chef de Mission est requis"),c.dateDebut||(A.dateDebut="La date de dbut est requise"),c.dateFin||(A.dateFin="La date de fin est requise"),new Date(c.dateDebut)>new Date(c.dateFin)&&(A.dateFin="La date de fin doit tre aprs la date de dbut"),(!c.budgetInitial||c.budgetInitial<=0)&&(A.budgetInitial="Le budget doit tre suprieur  0"),c.type||(A.type="Le type de mission est requis"),p(A),Object.keys(A).length===0},v=A=>{const{name:O,value:P}=A.target;u(k=>({...k,[O]:P})),h[O]&&p(k=>({...k,[O]:""}))},g=A=>{f.includes(A)||(d([...f,A]),u(O=>({...O,accompagnateurIds:[...O.accompagnateurIds,A]})))},x=A=>{const O=f.filter(P=>P!==A);d(O),u(P=>({...P,accompagnateurIds:O}))},j=A=>{if(A.preventDefault(),y()){const O=r||t;O&&O(c)}},w=a.map(A=>({value:A.id,label:A.raison_sociale||"Sans nom"})),_=s.map(A=>({value:A.id,label:A.full_name||A.email})),S=s.filter(A=>A.id!==c.chefMissionId&&!f.includes(A.id)).map(A=>({value:A.id,label:A.full_name||A.email})),E=s.filter(A=>f.includes(A.id));return o.jsxs("form",{onSubmit:j,className:"space-y-5",children:[!e&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[o.jsx("p",{className:"text-sm text-blue-800 font-medium",children:" Cration de mission rserve aux administrateurs"}),o.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Slectionnez le Chef de Mission qui sera responsable de cette mission"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de la Mission *"}),o.jsx(We,{type:"text",name:"titre",value:c.titre,onChange:v,placeholder:"Exemple: Installation ERP ABC",error:h.titre})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{name:"description",value:c.description,onChange:v,placeholder:"Dcrivez la mission en dtail...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client *"}),o.jsx(st,{name:"clientId",value:c.clientId,onChange:v,options:[{value:"",label:"Slectionner un client..."},...w.map(A=>{const O=a.find(k=>k.id===A.value),P=(O==null?void 0:O.wilaya)||(O==null?void 0:O.lieu)||"";return{value:A.value,label:P?`${A.label} ( ${P})`:A.label}})],error:h.clientId})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Mission *"}),o.jsx(st,{name:"type",value:c.type,onChange:v,options:m.map(A=>({value:A,label:A})),error:h.type})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Wilaya / Lieu"}),c.wilaya?o.jsxs("div",{className:"w-full px-3 py-2 border border-green-300 rounded-lg bg-green-50 flex items-center gap-2",children:[o.jsx(Vv,{className:"text-green-600",size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:Nie(c.wilaya)||c.wilaya}),o.jsx("p",{className:"text-xs text-green-700",children:"Auto-rempli depuis la fiche client"})]})]}):o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500",children:"(Slectionner un client d'abord)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priorit"}),o.jsx(st,{name:"priorite",value:c.priorite,onChange:v,options:[{value:"faible",label:" Faible"},{value:"moyenne",label:" Moyenne"},{value:"haute",label:" Haute"},{value:"critique",label:" Critique"}]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Dbut *"}),o.jsx(We,{type:"date",name:"dateDebut",value:c.dateDebut,onChange:v,error:h.dateDebut})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de Fin *"}),o.jsx(We,{type:"date",name:"dateFin",value:c.dateFin,onChange:v,error:h.dateFin})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget Initial () *"}),o.jsx(We,{type:"number",name:"budgetInitial",value:c.budgetInitial,onChange:v,placeholder:"0.00",min:"0",step:"0.01",error:h.budgetInitial})]}),o.jsxs("div",{className:`border-l-4 p-4 rounded ${e?"bg-gray-100 border-gray-400":"bg-blue-50 border-blue-500"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:`font-semibold ${e?"text-gray-700":"text-blue-900"}`,children:" Chef de Mission *"}),e&&o.jsx("span",{className:"text-xs px-2 py-1 bg-gray-400 text-white rounded",children:" Fig  la cration"})]}),e?o.jsx("div",{className:"bg-white p-3 rounded border border-gray-300",children:c.chefMissionId?(()=>{const A=s.find(M=>M.id===c.chefMissionId),O=(A==null?void 0:A.full_name)||"Chef inconnu",P=A==null?void 0:A.email,k=((A==null?void 0:A.full_name)||P||"?").charAt(0).toUpperCase();return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-200 flex items-center justify-center text-sm font-semibold text-blue-800",children:k}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:O}),P&&o.jsx("p",{className:"text-xs text-gray-500",children:P})]})]})})():o.jsx("p",{className:"text-gray-500 text-sm",children:" Aucun Chef de Mission assign"})}):o.jsx(st,{name:"chefMissionId",value:c.chefMissionId,onChange:v,options:[{value:"",label:"Slectionner le Chef de Mission..."},..._],error:h.chefMissionId}),o.jsx("p",{className:`text-xs mt-2 ${e?"text-gray-600":"text-blue-700"}`,children:e?" Le Chef de Mission ne peut pas tre modifi aprs la cration":"Le Chef de Mission sera responsable de la clture de la mission"})]}),o.jsxs("div",{className:`border-l-4 p-4 rounded ${e?"bg-gray-100 border-gray-400":"bg-green-50 border-green-500"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("h3",{className:`font-semibold ${e?"text-gray-700":"text-green-900"}`,children:" Accompagnateurs"}),e&&o.jsx("span",{className:"text-xs px-2 py-1 bg-gray-400 text-white rounded",children:" Fig  la cration"})]}),!e&&S.length>0&&o.jsx("div",{className:"mb-3",children:o.jsx(st,{options:[{value:"",label:"+ Ajouter un accompagnateur..."},...S],value:"",onChange:A=>{A.target.value&&g(A.target.value)}})}),o.jsx("div",{className:"space-y-2",children:E.map(A=>{var O,P;return o.jsxs("div",{className:`flex items-center justify-between p-2 rounded border ${e?"bg-gray-50 border-gray-300":"bg-white border-green-200"}`,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ${e?"bg-gray-300 text-gray-700":"bg-green-200 text-green-800"}`,children:((O=A.full_name)==null?void 0:O.charAt(0))||((P=A.email)==null?void 0:P.charAt(0))}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.full_name||A.email})]}),!e&&o.jsx("button",{type:"button",onClick:()=>x(A.id),className:"text-red-500 hover:text-red-700",children:o.jsx(ji,{size:18})})]},A.id)})}),E.length===0&&o.jsx("p",{className:"text-xs font-medium text-gray-500",children:e?" Aucun accompagnateur assign":" Aucun accompagnateur slectionn"}),e&&o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:" Les accompagnateurs ne peuvent pas tre modifis aprs la cration"})]}),!e&&o.jsxs("div",{className:"p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Statut Initial  la Cration"}),o.jsxs("p",{className:"text-sm text-blue-800",children:["La mission sera cre avec le statut ",o.jsx("strong",{children:'"Planifie"'})," (mission future, avant dmarrage)."]}),o.jsx("p",{className:"text-xs text-blue-700 mt-2",children:' Cliquez sur " Dmarrer la Mission" pour passer au statut "En cours"'})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commentaire Initial (Admin)"}),o.jsx("textarea",{name:"commentaireCreation",value:c.commentaireCreation,onChange:v,placeholder:"Contexte ou remarques  la cration de la mission...",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary"})]}),o.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[o.jsx(Ae,{type:"button",onClick:n,disabled:l,className:`flex-1 ${l?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:"Annuler"}),o.jsx(Ae,{type:"submit",disabled:l,className:`flex-1 ${l?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-primary text-white hover:bg-primary-dark"}`,children:l?" Sauvegarde...":e?"Mettre  jour":"Crer la Mission"})]})]})},Rt={async testTableAccess(){try{console.log("Testing missions table access...");const{data:e,error:t,status:r}=await G.from("missions").select("id").limit(1);return t?(console.error("Table access error:",t),{accessible:!1,error:t}):(console.log("Table access successful:",{dataCount:e==null?void 0:e.length,status:r}),{accessible:!0})}catch(e){return console.error("Table access test error:",e),{accessible:!1,error:e}}},async getAll(){try{const{data:e,error:t}=await G.from("missions").select("*").order("created_at",{ascending:!1});if(t)throw console.error("Error loading missions:",{code:t.code,message:t.message,details:t.details,hint:t.hint}),t;return console.log("Missions loaded successfully:",e==null?void 0:e.length,"missions"),e||[]}catch(e){throw console.error("Erreur lors du chargement des missions:",e),e}},async getById(e){try{const{data:t,error:r}=await G.from("missions").select("*").eq("id",e).single();if(r)throw r;return t}catch(t){throw console.error("Erreur lors du chargement de la mission:",t),t}},async create(e){try{const t={titre:e.titre||"Sans titre",statut:"creee"};console.log("Form data received:",e),console.log("Initial insert data:",t),e.description&&e.description.trim()&&(t.description=e.description),e.clientId&&(console.log("Adding prospect_id:",e.clientId),t.prospect_id=e.clientId),e.lieu&&e.lieu.trim()&&(t.lieu=e.lieu),e.dateDebut&&(t.date_debut=e.dateDebut),e.dateFin&&(t.date_fin_prevue=e.dateFin),e.type&&(t.type_mission=e.type),e.priorite&&(t.priorite=e.priorite),e.budgetInitial&&(t.budget_alloue=parseFloat(e.budgetInitial)),e.chefMissionId&&(t.chef_mission_id=e.chefMissionId),e.accompagnateurIds&&e.accompagnateurIds.length>0&&(t.accompagnateurs_ids=e.accompagnateurIds),console.log("Final insert data:",t);const{data:r,error:n,status:i,statusText:a}=await G.from("missions").insert([t]).select();if(console.log("Insert response:",{data:r,error:n,status:i,statusText:a}),n)throw console.error("Supabase error details:",n),console.error("Error properties:",Object.keys(n)),console.error("Error stringified:",JSON.stringify(n,null,2)),n;return r&&r.length>0?r[0]:{...t,created_at:new Date().toISOString()}}catch(t){throw console.error("Erreur lors de la cration de la mission:",t),t}},async update(e,t){try{const r={};t.titre!==void 0&&(r.titre=t.titre),t.description!==void 0&&(r.description=t.description),t.clientId!==void 0&&(r.prospect_id=t.clientId),t.lieu!==void 0&&(r.lieu=t.lieu),t.dateDebut!==void 0&&(r.date_debut=t.dateDebut),t.dateFin!==void 0&&(r.date_fin_prevue=t.dateFin),t.type!==void 0&&(r.type_mission=t.type),t.priorite!==void 0&&(r.priorite=t.priorite),t.budgetInitial!==void 0&&(r.budget_alloue=parseFloat(t.budgetInitial)),t.chefMissionId!==void 0&&(r.chef_mission_id=t.chefMissionId),t.accompagnateurIds!==void 0&&(r.accompagnateurs_ids=t.accompagnateurIds),r.updated_at=new Date().toISOString();const{data:n,error:i}=await G.from("missions").update(r).eq("id",e);if(i)throw console.error("Supabase update error:",{code:i.code,message:i.message,details:i.details,hint:i.hint}),i;const{data:a,error:s}=await G.from("missions").select("*").eq("id",e).single();if(s)throw console.error("Error fetching updated mission:",s),s;return a}catch(r){throw console.error("Erreur lors de la mise  jour de la mission:",r),r}},async delete(e){try{const{error:t}=await G.from("missions").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw console.error("Erreur lors de la suppression de la mission:",t),t}},async startMission(e){var t;try{const r=typeof e=="string"?parseInt(e,10):e;console.log(" Dmarrage de la mission:",r);const n=G.from("missions").update({statut:"en_cours",updated_at:new Date().toISOString()}).eq("id",r).select(),i=new Promise(s=>setTimeout(()=>s({data:[{id:r,statut:"en_cours"}],error:null}),5e3)),a=await Promise.race([n,i]);return a.error?(console.warn(" Erreur Supabase (mise  jour locale):",a.error),{id:r,statut:"en_cours",local:!0}):(console.log(" Mission dmarre"),((t=a.data)==null?void 0:t[0])||{id:r,statut:"en_cours"})}catch(r){return console.error("Erreur startMission:",r),{statut:"en_cours",local:!0}}},async updateStatus(e,t){try{const{data:r,error:n}=await G.from("missions").update({statut:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de la mise  jour du statut:",r),r}},async addParticipant(e,t,r){try{const{data:n,error:i}=await G.from("missions_participants").insert([{mission_id:e,user_id:t,role:r}]).select().single();if(i)throw i;return n}catch(n){throw console.error("Erreur lors de l'ajout du participant:",n),n}},async addExpense(e,t){try{const{data:r,error:n}=await G.from("missions_expenses").insert([{mission_id:e,type_depense:t.type,montant:t.montant,description:t.description,justificatif_url:t.justificatifUrl}]).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de l'ajout de la dpense:",r),r}},async getExpenses(e){try{const{data:t,error:r}=await G.from("missions_expenses").select("*").eq("mission_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des dpenses:",t),t}},async getByClient(e){try{const{data:t,error:r}=await G.from("missions").select("*").eq("prospect_id",e).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des missions du client:",t),t}},async getByParticipant(e){var t;try{const{data:r,error:n}=await G.from("missions").select("*").in("id",((t=(await G.from("missions_participants").select("mission_id").eq("user_id",e)).data)==null?void 0:t.map(i=>i.mission_id))||[]).order("created_at",{ascending:!1});if(n)throw n;return r||[]}catch(r){throw console.error("Erreur lors du chargement des missions:",r),r}},async getStatistics(e={}){try{let t=G.from("missions").select("*");e.statut&&(t=t.eq("statut",e.statut)),e.type&&(t=t.eq("type_mission",e.type));const{data:r,error:n}=await t;if(n)throw n;const i={total:r.length,byStatus:{},byType:{},totalBudget:0,totalExpenses:0};return r.forEach(a=>{i.byStatus[a.statut]=(i.byStatus[a.statut]||0)+1,i.byType[a.type_mission]=(i.byType[a.type_mission]||0)+1,i.totalBudget+=0}),i}catch(t){throw console.error("Erreur lors du calcul des statistiques:",t),t}},async updateTechnicalDetails(e,t){try{const{data:r,error:n}=await G.from("missions").update({rapport_technique:t.rapportTechnique,actions_realisees:t.actionsRealisees,logiciels_materiels:t.logicielsMateriels,problemes_resolutions:t.problemesResolutions,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw console.error("Erreur lors de la mise  jour des dtails techniques:",r),r}},async closeMissionByChef(e,t){try{const r={cloturee_par_chef:!0,date_clot_chef:new Date().toISOString(),commentaire_clot_chef:t.commentaireChef,date_cloture_reelle:new Date().toISOString(),statut:"cloturee",updated_at:new Date().toISOString()};t.totalExpenses!==void 0&&t.totalExpenses!==null&&(r.budget_depense=parseFloat(t.totalExpenses)),console.log(" Envoi de closeMissionByChef avec:",r);const{data:n,error:i}=await G.from("missions").update(r).eq("id",e).select();if(i){if(console.error(" Erreur Supabase:",JSON.stringify(i,null,2)),i.code==="PGRST204")return{local:!0,id:e,...r};throw i}return console.log(" Mission ferme par chef"),n&&n.length>0?n[0]:{id:e,...r}}catch(r){return console.error("Erreur lors de la clture par le chef:",r),{local:!0,id:e,cloturee_par_chef:!0}}},async validateClosureByAdmin(e,t){try{const r={cloturee_definitive:t.clotureeDefinitive,date_clot_definitive:new Date().toISOString(),commentaire_clot_admin:t.commentaireAdmin,statut:"validee",updated_at:new Date().toISOString()};t.totalExpenses!==void 0&&t.totalExpenses!==null&&(r.budget_depense=parseFloat(t.totalExpenses));const{data:n,error:i}=await G.from("missions").update(r).eq("id",e).select();if(i){if(i.code==="PGRST204")return{local:!0,id:e,...r};throw i}return n&&n.length>0?n[0]:{id:e,...r}}catch(r){return console.error("Erreur lors de la validation dfinitive:",r),{local:!0,id:e,cloturee_definitive:!0}}},async uploadJustificatif(e,t,r){try{const n=`${e}/${t}/${Date.now()}_${r.name}`,{data:i,error:a}=await G.storage.from("mission-justificatifs").upload(n,r);if(a)throw a;const{data:{publicUrl:s}}=G.storage.from("mission-justificatifs").getPublicUrl(n),{error:l}=await G.from("missions_expenses").update({justificatif_url:s}).eq("id",t);if(l)throw l;return{url:s,fileName:n}}catch(n){throw console.error("Erreur lors de l'upload du justificatif:",n),n}},async getJustificatifs(e){try{const{data:t,error:r}=await G.from("missions_expenses").select("*").eq("mission_id",e).not("justificatif_url","is",null).order("created_at",{ascending:!1});if(r)throw r;return t||[]}catch(t){throw console.error("Erreur lors du chargement des justificatifs:",t),t}},async deleteJustificatif(e,t){try{const r=t.split("/").pop(),{error:n}=await G.storage.from("mission-justificatifs").remove([r]);if(n)throw n;const{error:i}=await G.from("missions_expenses").update({justificatif_url:null}).eq("id",e);if(i)throw i;return!0}catch(r){throw console.error("Erreur lors de la suppression du justificatif:",r),r}},async getDelayedMissions(){try{const e=new Date().toISOString().split("T")[0],{data:t,error:r}=await G.from("missions").select("*").lt("date_fin_prevue",e).in("statut",["creee","planifiee","en_cours"]);if(r)throw r;return t||[]}catch(e){throw console.error("Erreur lors du chargement des missions en retard:",e),e}},async getMissionsWithBudgetWarning(){try{const{data:e,error:t}=await G.from("missions").select("*");if(t)throw t;const r=[];for(const n of e){const{data:i,error:a}=await G.from("missions_expenses").select("montant").eq("mission_id",n.id);if(!a){const s=i.reduce((c,u)=>c+(u.montant||0),0);0>80}}return r}catch(e){throw console.error("Erreur lors du chargement des missions avec alerte budget:",e),e}},async saveCommentairesTechniques(e,t){try{const{data:r,error:n}=await G.from("missions").update({commentaires_techniques:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne commentaires_techniques n'existe pas encore. Excutez la migration SQL."),console.log("Commentaires stocks localement (seront perdus aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Commentaires techniques sauvegards en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des commentaires techniques:",r),r}},async saveCommentairesFinanciers(e,t){try{const{data:r,error:n}=await G.from("missions").update({commentaires_financiers:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne commentaires_financiers n'existe pas encore. Excutez la migration SQL."),console.log("Commentaires stocks localement (seront perdus aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Commentaires financiers sauvegards en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des commentaires financiers:",r),r}},async saveDpenses(e,t){try{const{data:r,error:n}=await G.from("missions").update({depenses_details:t,budget_depense:t.reduce((i,a)=>i+(parseFloat(a.montant)||0),0),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n){if(n.code==="PGRST204")return console.warn(" Colonne depenses_details n'existe pas encore. Excutez la migration SQL."),console.log("Dpenses stockes localement (seront perdues aprs fermeture)"),{local:!0,data:t};throw n}return console.log(" Dpenses sauvegardes en base"),r}catch(r){throw console.error("Erreur lors de la sauvegarde des dpenses:",r),r}}},Wie=({mission:e,tab:t="general",onClose:r,onClosureAdmin:n,currentUser:i,userProfile:a})=>{var K,H,J,he,we;const{addNotification:s}=sr(),[l,c]=N.useState(t),[u,f]=N.useState(""),[d,h]=N.useState(""),[p,b]=N.useState([]),[m,y]=N.useState([]),[v,g]=N.useState([]),[x,j]=N.useState({type:"transport",montant:"",description:""}),[w,_]=N.useState({general:!0,technique:t==="technique",financier:t==="financier",cloture:t==="cloture"});N.useEffect(()=>{if(e){try{const Y=e.commentaires_techniques;Array.isArray(Y)?b(Y):typeof Y=="string"&&b(JSON.parse(Y)||[])}catch{b([])}try{const Y=e.commentaires_financiers;Array.isArray(Y)?y(Y):typeof Y=="string"&&y(JSON.parse(Y)||[])}catch{y([])}try{const Y=e.depenses_details||e.expenses||e.depenses||[];Array.isArray(Y)?g(Y):typeof Y=="string"&&g(JSON.parse(Y)||[])}catch{g([])}}},[e==null?void 0:e.id]);const S=[{value:"transport",label:" Transport / Fuel"},{value:"hotel",label:" Htel"},{value:"repas",label:" Repas"},{value:"divers",label:" Divers"}],E=Y=>{_(fe=>({...fe,[Y]:!fe[Y]}))},A=async()=>{if(u.trim()){const Y={id:Date.now(),texte:u,auteur:(i==null?void 0:i.email)||"Utilisateur",date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},fe=[...p,Y];b(fe),f("");try{const T=await Rt.saveCommentairesTechniques(e.id,fe);T!=null&&T.local?alert(` Commentaire stock localement

Les colonnes commentaires ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Commentaire technique sauvegard en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert(` Commentaire stock localement

Excutez la migration SQL pour la persistance.`)}}},O=async()=>{if(d.trim()){const Y={id:Date.now(),texte:d,auteur:(i==null?void 0:i.email)||"Utilisateur",date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},fe=[...m,Y];y(fe),h("");try{const T=await Rt.saveCommentairesFinanciers(e.id,fe);T!=null&&T.local?alert(` Commentaire stock localement

Les colonnes commentaires ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Commentaire financier sauvegard en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert(` Commentaire stock localement

Excutez la migration SQL pour la persistance.`)}}},P=async()=>{if(x.montant&&x.montant>0){const Y={id:Date.now(),...x,montant:parseFloat(x.montant),date_creation:new Date().toISOString(),date_affichage:new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),auteur:(i==null?void 0:i.email)||"Utilisateur"},fe=[...v,Y];g(fe),j({type:"transport",montant:"",description:""});try{const T=await Rt.saveDpenses(e.id,fe);T!=null&&T.local?alert(` Dpense stocke localement

Les colonnes dpenses ne sont pas encore cres en base.
Veuillez excuter la migration SQL pour la persistance.`):console.log(" Dpense sauvegarde en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert(` Dpense stocke localement

Excutez la migration SQL pour la persistance.`)}}},k=async Y=>{const fe=v.filter(T=>T.id!==Y);g(fe);try{await Rt.saveDpenses(e.id,fe),console.log(" Dpense supprime et sauvegarde en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert("Erreur lors de la suppression de la dpense")}},M=async Y=>{const fe=p.filter(T=>T.id!==Y);b(fe);try{await Rt.saveCommentairesTechniques(e.id,fe),console.log(" Commentaire technique supprim et sauvegard en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert("Erreur lors de la suppression du commentaire")}},L=async Y=>{const fe=m.filter(T=>T.id!==Y);y(fe);try{await Rt.saveCommentairesFinanciers(e.id,fe),console.log(" Commentaire financier supprim et sauvegard en base")}catch(T){console.error(" Erreur sauvegarde:",T),alert("Erreur lors de la suppression du commentaire")}},B=async()=>{if(window.confirm(` tes-vous certain de vouloir dmarrer cette mission?
Le statut passera  "En cours".`))try{if(await Rt.startMission(e.id)){s({type:"success",message:" Mission dmarre avec succs"});const fe={...e,statut:"en_cours"};setTimeout(()=>{r()},800)}}catch(Y){console.error("Erreur handleStartMission:",Y),s({type:"success",message:" Mission dmarre"}),setTimeout(()=>{r()},800)}},D=(a==null?void 0:a.role)==="admin"||(a==null?void 0:a.role)==="super_admin",q=(e==null?void 0:e.chefMissionId)===(i==null?void 0:i.id)||(e==null?void 0:e.chef_mission_id)===(i==null?void 0:i.id),R=(K=e==null?void 0:e.accompagnateurs_ids)==null?void 0:K.includes(i==null?void 0:i.id),I=q&&D,z=q||R||D,W=(e==null?void 0:e.cloturee_par_chef)||(e==null?void 0:e.cloturee_definitive),C=W?D||I:q,F=q||D,Q=D,Z=q&&((e==null?void 0:e.statut)==="creee"||(e==null?void 0:e.statut)==="planifiee")&&!W,ee=v.reduce((Y,fe)=>Y+(parseFloat(fe.montant)||0),0),le=parseFloat((e==null?void 0:e.budgetInitial)||(e==null?void 0:e.budget_alloue))||0,ce=le>0?Math.round(ee/le*100):0,te=le-ee,V=Y=>({creee:"Planifie",planifiee:"Planifie",en_cours:"En cours",cloturee:"Clture",validee:"Valide"})[Y]||Y,ie=({section:Y,label:fe})=>o.jsxs("button",{onClick:()=>E(Y),className:"w-full flex items-center justify-between bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary p-4 rounded-lg font-semibold text-white transition-colors",children:[o.jsx("span",{children:fe}),w[Y]?o.jsx(ri,{size:20}):o.jsx(ti,{size:20})]});return o.jsxs("div",{className:"space-y-4",children:[!z&&o.jsxs("div",{className:"p-6 bg-red-50 border-2 border-red-300 rounded-lg text-center",children:[o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx(ug,{size:40,className:"text-red-600"})}),o.jsx("p",{className:"font-bold text-red-900 text-lg",children:" Accs Refus"}),o.jsx("p",{className:"text-red-800 mt-2",children:"Vous n'avez pas accs  cette mission. Seul le Chef de Mission, les Accompagnateurs et les Administrateurs peuvent la consulter."}),o.jsx("button",{onClick:r,className:"mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium",children:"Fermer"})]}),z&&o.jsxs(o.Fragment,{children:[W&&o.jsx("div",{className:`p-4 rounded-lg border-l-4 ${I?"bg-blue-50 border-blue-400 text-blue-800":D?"bg-yellow-50 border-yellow-400 text-yellow-800":"bg-red-50 border-red-400 text-red-800"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_i,{size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:" Mission Clture"}),o.jsx("p",{className:"text-sm",children:I?" Vous tes Chef de Mission avec rle Admin - dition complte autorise":D?" Seul un administrateur peut modifier cette mission.":"Cette mission est clture et ne peut plus tre modifie."})]})]})}),o.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-dark text-white rounded-lg p-6 shadow-lg",children:[o.jsx("h3",{className:"text-2xl font-bold mb-2",children:e.titre}),o.jsx("p",{className:"text-primary-light mb-4 text-sm",children:e.description}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 pt-4 border-t border-white border-opacity-30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Bl,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Client"}),o.jsx("p",{className:"font-semibold",children:((H=e.client)==null?void 0:H.raison_sociale)||"N/A"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Vv,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Wilaya"}),o.jsx("p",{className:"font-semibold",children:e.wilaya||e.lieu||"N/A"})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dn,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Statut"}),o.jsx("p",{className:"font-semibold",children:V(e.statut)})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 bg-white bg-opacity-30 rounded flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Type"}),o.jsx("p",{className:"font-semibold",children:e.type})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(As,{size:18}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Budget"}),o.jsxs("p",{className:"font-semibold",children:[(e.budgetInitial||e.budget_alloue||0).toLocaleString("fr-DZ")," DA"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-5 h-5 bg-white bg-opacity-30 rounded flex items-center justify-center text-xs",children:""}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs opacity-80",children:"Avancement"}),o.jsxs("p",{className:"font-semibold",children:[e.avancement||0,"%"]})]})]})]})]}),o.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[o.jsx("button",{onClick:()=>{c("general"),_(Y=>({...Y,general:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${l==="general"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Gnral"}),o.jsx("button",{onClick:()=>{c("technique"),_(Y=>({...Y,technique:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${l==="technique"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Technique"}),o.jsx("button",{onClick:()=>{c("financier"),_(Y=>({...Y,financier:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${l==="financier"?"bg-white text-primary shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Financier"}),o.jsx("button",{onClick:()=>{c("cloture"),_(Y=>({...Y,cloture:!0}))},className:`flex-1 py-2 px-4 rounded font-medium transition-colors whitespace-nowrap ${l==="cloture"?"bg-white text-red-600 shadow-sm":"text-gray-700 hover:text-gray-900"}`,children:" Clture"})]}),l==="general"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ie,{section:"general",label:" Informations Gnrales"}),w.general&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4 border-l-4 border-primary",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Client"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1 font-medium",children:((J=e.client)==null?void 0:J.raison_sociale)||"N/A"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Dates Prvues"}),o.jsxs("p",{className:"text-sm text-gray-900 mt-1",children:[new Date(e.dateDebut||e.date_debut).toLocaleDateString("fr-FR"),"  ",new Date(e.dateFin||e.date_fin_prevue).toLocaleDateString("fr-FR")]})]}),e.date_demarrage&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-green-600 uppercase font-semibold",children:" Dmarre le"}),o.jsx("p",{className:"text-sm text-green-900 mt-1 font-semibold",children:new Date(e.date_demarrage).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),e.date_cloture_reelle&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-red-600 uppercase font-semibold",children:" Clture le"}),o.jsx("p",{className:"text-sm text-red-900 mt-1 font-semibold",children:new Date(e.date_cloture_reelle).toLocaleDateString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Priorit"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1",children:((he=e.priorite)==null?void 0:he.charAt(0).toUpperCase())+((we=e.priorite)==null?void 0:we.slice(1))})]})}),e.commentaireCreation&&o.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold mb-1",children:"Notes  la cration"}),o.jsx("p",{className:"text-sm text-blue-900",children:e.commentaireCreation})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold",children:"Chef de Mission"}),o.jsx("p",{className:"text-sm text-gray-900 mt-1",children:e.chef_name||"Non assign"})]}),Z&&o.jsxs("div",{className:"pt-2",children:[o.jsx(Ae,{onClick:B,className:"w-full bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2 py-3 font-semibold",children:" Dmarrer la Mission"}),o.jsx("p",{className:"text-xs text-gray-600 mt-2",children:'Le statut passera  "En cours"'})]}),!Z&&((e==null?void 0:e.statut)==="creee"||(e==null?void 0:e.statut)==="planifiee")&&o.jsx("div",{className:"p-3 bg-amber-50 rounded border border-amber-200 text-sm text-amber-900",children:o.jsxs("p",{children:[o.jsx("strong",{children:" Info:"})," Seul le Chef de Mission peut dmarrer cette mission."]})})]})]}),l==="technique"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ie,{section:"technique",label:" Volet Technique"}),w.technique&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg space-y-4 border-l-4 border-primary",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold mb-2",children:"Rapport Technique"}),o.jsx("p",{className:"text-sm text-gray-900 bg-white p-3 rounded",children:e.rapportTechnique||"Pas encore document"})]}),e.actionsRealisees&&e.actionsRealisees.length>0&&o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-600 uppercase font-semibold mb-2",children:"Actions Ralises"}),o.jsx("ul",{className:"space-y-2",children:e.actionsRealisees.map((Y,fe)=>o.jsxs("li",{className:"text-sm bg-white p-2 rounded border-l-2 border-green-500",children:[" ",Y]},fe))})]}),o.jsxs("div",{className:`bg-white p-4 rounded-lg border ${C?"border-gray-200":"border-red-300 bg-red-50 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter un Commentaire Technique"}),!C&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{value:u,onChange:Y=>f(Y.target.value),placeholder:"Observations techniques, remarques sur l'excution, problmes rencontrs...",rows:"3",disabled:!C,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"}),o.jsx(Ae,{onClick:A,disabled:!C,className:`w-full flex items-center justify-center gap-2 ${C?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:" Enregistrer le Commentaire"})]})]}),p.length>0&&o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:" Historique des Commentaires Techniques"}),o.jsx("div",{className:"space-y-3",children:p.map(Y=>o.jsx("div",{className:"bg-white p-3 rounded border-l-4 border-blue-500",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-900",children:Y.texte}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[o.jsxs("span",{children:[" ",Y.auteur]}),o.jsxs("span",{children:[" ",Y.date_affichage]})]})]}),o.jsx("button",{onClick:()=>M(Y.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(en,{size:16})})]})},Y.id))})]})]})]}),l==="financier"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx(ie,{section:"financier",label:" Volet Financier"}),w.financier&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"p-3 bg-blue-50 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 uppercase font-semibold",children:"Budget Initial"}),o.jsxs("p",{className:"text-xl font-bold text-blue-900 mt-1",children:[le.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${ce>80?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${ce>80?"text-red-600":"text-orange-600"}`,children:"Dpenses"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${ce>80?"text-red-900":"text-orange-900"}`,children:[ee.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${te<0?"bg-red-50 border-red-200":"bg-green-50 border-green-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${te<0?"text-red-600":"text-green-600"}`,children:"Restant"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${te<0?"text-red-900":"text-green-900"}`,children:[te.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:`p-3 rounded border ${ce>80?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"}`,children:[o.jsx("p",{className:`text-xs uppercase font-semibold ${ce>80?"text-red-600":"text-yellow-600"}`,children:"Utilisation"}),o.jsxs("p",{className:`text-xl font-bold mt-1 ${ce>80?"text-red-900":"text-yellow-900"}`,children:[ce,"%"]})]})]}),ce>80&&o.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded flex gap-3",children:[o.jsx(Nt,{className:"text-red-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-900",children:" Dpassement Budgtaire!"}),o.jsxs("p",{className:"text-sm text-red-800 mt-1",children:["Budget utilis  ",ce,"%. Attention  ne pas dpasser la limite."]})]})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${C?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter une Dpense"}),!C&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type de Dpense"}),o.jsx("select",{value:x.type,onChange:Y=>j({...x,type:Y.target.value}),disabled:!C,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed",children:S.map(Y=>o.jsx("option",{value:Y.value,children:Y.label},Y.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant (DA)"}),o.jsx(We,{type:"number",value:x.montant,onChange:Y=>j({...x,montant:Y.target.value}),placeholder:"0.00",disabled:!C})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),o.jsx("textarea",{value:x.description,onChange:Y=>j({...x,description:Y.target.value}),placeholder:"Dtails de la dpense...",rows:"2",disabled:!C,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),o.jsxs(Ae,{onClick:P,disabled:!C,className:`w-full flex items-center justify-center gap-2 ${C?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:[o.jsx(Oi,{size:18}),"Ajouter la Dpense"]})]})]}),v.length>0&&o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[o.jsxs("h4",{className:"font-semibold text-gray-900 mb-3",children:[" Dpenses Enregistres (",v.length,")"]}),o.jsx("div",{className:"space-y-2",children:v.map(Y=>{var fe;return o.jsxs("div",{className:"flex items-start justify-between bg-white p-3 rounded border border-gray-200",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium text-gray-900",children:(fe=S.find(T=>T.value===Y.type))==null?void 0:fe.label}),o.jsx("p",{className:"text-sm text-gray-600",children:Y.description}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",Y.auteur||"Utilisateur"]}),o.jsxs("span",{children:[" ",Y.date_affichage||new Date(Y.date_creation).toLocaleDateString("fr-FR")]})]})]}),o.jsx("div",{className:"text-right mr-3 min-w-fit",children:o.jsxs("p",{className:"font-semibold text-gray-900",children:[Y.montant.toLocaleString("fr-DZ")," DA"]})}),o.jsx("button",{onClick:()=>k(Y.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(en,{size:18})})]},Y.id)})})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${C?"bg-gray-50 border-gray-200":"bg-red-50 border-red-300 opacity-60"}`,children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:" Ajouter un Commentaire Financier"}),!C&&o.jsx("p",{className:"text-red-600 text-sm mb-3",children:" Mission clture - dition non autorise"}),o.jsx("textarea",{value:d,onChange:Y=>h(Y.target.value),placeholder:"Vos observations ou commentaires financiers...",rows:"3",disabled:!C,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary disabled:bg-gray-100 disabled:cursor-not-allowed"}),o.jsx(Ae,{onClick:O,disabled:!C,className:`mt-2 w-full ${C?"bg-primary hover:bg-primary-dark text-white":"bg-gray-400 cursor-not-allowed"}`,children:" Enregistrer le Commentaire"})]}),m.length>0&&o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[o.jsx("h4",{className:"font-semibold text-green-900 mb-3",children:" Historique des Commentaires Financiers"}),o.jsx("div",{className:"space-y-3",children:m.map(Y=>o.jsx("div",{className:"bg-white p-3 rounded border-l-4 border-green-500",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"text-sm text-gray-900",children:Y.texte}),o.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[o.jsxs("span",{children:[" ",Y.auteur]}),o.jsxs("span",{children:[" ",Y.date_affichage]})]})]}),o.jsx("button",{onClick:()=>L(Y.id),className:"text-red-500 hover:text-red-700 ml-2",children:o.jsx(en,{size:16})})]})},Y.id))})]})]})]}),l==="cloture"&&o.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto pr-2",children:[o.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:o.jsxs("p",{className:"text-sm text-yellow-900",children:[o.jsx("strong",{children:" Statut actuel:"})," ",V(e.statut)]})}),W&&o.jsxs("div",{className:"p-4 bg-green-50 border border-green-300 rounded-lg flex gap-3",children:[o.jsx(dn,{className:"text-green-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:" Mission Clture"}),o.jsxs("p",{className:"text-sm text-green-800 mt-1",children:["Cette mission a t clture ",e.date_cloture_reelle?`le ${new Date(e.date_cloture_reelle).toLocaleDateString("fr-FR")}`:"",".",!D&&" Seul un administrateur peut la modifier."]})]})]}),!F&&e.statut!=="cloturee"&&e.statut!=="validee"&&o.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg flex gap-3",children:[o.jsx(ug,{className:"text-red-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-red-900",children:" Accs Restreint"}),o.jsx("p",{className:"text-sm text-red-800 mt-1",children:"Vous n'avez pas les permissions ncessaires pour clturer cette mission. Seul le Chef de Mission ou un Admin peut clturer."})]})]}),F&&e.statut!=="cloturee"&&e.statut!=="validee"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h4",{className:"font-semibold text-gray-900",children:"Actions de Clture Disponibles:"}),e.statut==="en_cours"&&q&&o.jsx(Ae,{onClick:()=>{n&&n({type:"chef",totalExpenses:v.reduce((Y,fe)=>Y+(fe.montant||0),0)})},className:"w-full bg-amber-500 hover:bg-amber-600 text-white flex items-center justify-center gap-2",children:" Clturer par Chef de Mission"}),Q&&o.jsxs(Ae,{onClick:()=>n({type:"admin",totalExpenses:v.reduce((Y,fe)=>Y+(fe.montant||0),0)}),className:"w-full bg-red-600 hover:bg-red-700 text-white flex items-center justify-center gap-2",children:[o.jsx(_i,{size:18})," Clture Dfinitive (Admin)"]}),!Q&&q&&o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded text-sm text-blue-900",children:o.jsxs("p",{children:[o.jsx("strong",{children:" Info:"}),` Le bouton "Clture Dfinitive (Admin)" n'est accessible qu'aux administrateurs.`]})})]}),(e.statut==="cloturee"||e.statut==="validee")&&o.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex gap-3",children:[o.jsx(dn,{className:"text-green-600 flex-shrink-0",size:20}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-green-900",children:" Mission Clture"}),o.jsx("p",{className:"text-sm text-green-800 mt-1",children:"Cette mission a t clture et valide."})]})]})]})]})]})},Vie=({analysisData:e,loading:t})=>{const[r,n]=N.useState({risks:!0,anomalies:!0,metrics:!0,trends:!0,recommendations:!0}),i=h=>{n(p=>({...p,[h]:!p[h]}))};if(!e)return o.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200 text-center",children:o.jsx("p",{className:"text-gray-500",children:`Aucune analyse disponible. Cliquez sur "Analyser avec l'IA" pour gnrer une analyse.`})});const{missionMetrics:a,riskLevels:s,anomalies:l,performanceMetrics:c,trends:u,recommendations:f,summary:d}=e;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[o.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Total Missions"}),o.jsx("p",{className:"text-2xl font-bold text-blue-900",children:d.totalMissions})]}),o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[o.jsx("p",{className:"text-sm text-red-600 font-semibold",children:"Critique"}),o.jsx("p",{className:"text-2xl font-bold text-red-900",children:d.criticalMissions})]}),o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("p",{className:"text-sm text-yellow-600 font-semibold",children:"Avertissement"}),o.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:d.warningMissions})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[o.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Compltion"}),o.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[d.completionRate,"%"]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("risks"),className:"bg-gradient-to-r from-red-500 to-red-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Nt,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Risques Identifis (",d.criticalMissions+d.warningMissions," missions)"]})]}),r.risks?o.jsx(ri,{size:20,className:"text-white"}):o.jsx(ti,{size:20,className:"text-white"})]}),r.risks&&o.jsxs("div",{className:"p-4 space-y-3",children:[s.critique.length>0&&o.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[o.jsx("h4",{className:"font-semibold text-red-900 mb-2",children:" Missions Critiques"}),o.jsx("div",{className:"space-y-2",children:s.critique.map(h=>o.jsxs("div",{className:"text-sm text-red-800 p-2 bg-white rounded border-l-4 border-red-500",children:[o.jsx("p",{className:"font-semibold",children:h.titre}),o.jsxs("p",{className:"text-xs mt-1",children:["Score risque: ",o.jsxs("span",{className:"font-bold",children:[h.riskScore,"/100"]})," |",h.daysLeft," jour(s) restant(s) | Budget: ",h.budgetPercent,"%"]})]},h.id))})]}),s.avertissement.length>0&&o.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[o.jsx("h4",{className:"font-semibold text-yellow-900 mb-2",children:" Missions  Surveiller"}),o.jsxs("div",{className:"space-y-2",children:[s.avertissement.slice(0,3).map(h=>o.jsxs("div",{className:"text-sm text-yellow-800 p-2 bg-white rounded border-l-4 border-yellow-500",children:[o.jsx("p",{className:"font-semibold",children:h.titre}),o.jsxs("p",{className:"text-xs mt-1",children:["Score risque: ",o.jsxs("span",{className:"font-bold",children:[h.riskScore,"/100"]})]})]},h.id)),s.avertissement.length>3&&o.jsxs("p",{className:"text-xs text-yellow-600 italic",children:["+",s.avertissement.length-3," autre(s)..."]})]})]}),s.critique.length===0&&s.avertissement.length===0&&o.jsx("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-green-800 font-semibold",children:" Aucune mission critique - Bonne sant du portefeuille"})})]})]}),l.length>0&&o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("anomalies"),className:"bg-gradient-to-r from-orange-500 to-orange-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Nt,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Anomalies Dtectes (",l.length,")"]})]}),r.anomalies?o.jsx(ri,{size:20,className:"text-white"}):o.jsx(ti,{size:20,className:"text-white"})]}),r.anomalies&&o.jsx("div",{className:"p-4 space-y-3",children:l.map((h,p)=>o.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${h.severity==="critique"?"bg-red-50 border-red-500":h.severity==="haute"?"bg-orange-50 border-orange-500":"bg-yellow-50 border-yellow-500"}`,children:[o.jsx("h4",{className:`font-semibold mb-1 ${h.severity==="critique"?"text-red-900":h.severity==="haute"?"text-orange-900":"text-yellow-900"}`,children:h.title}),o.jsx("p",{className:"text-sm text-gray-700 mb-2",children:h.description}),o.jsxs("p",{className:"text-xs font-semibold text-gray-800 bg-white bg-opacity-50 p-2 rounded",children:[" Action: ",h.action]})]},p))})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("metrics"),className:"bg-gradient-to-r from-blue-500 to-blue-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Ji,{size:20,className:"text-white"}),o.jsx("span",{className:"text-white font-semibold",children:" Mtriques de Performance"})]}),r.metrics?o.jsx(ri,{size:20,className:"text-white"}):o.jsx(ti,{size:20,className:"text-white"})]}),r.metrics&&o.jsxs("div",{className:"p-4 grid grid-cols-2 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[o.jsx("p",{className:"text-xs text-blue-600 font-semibold",children:"Taux Compltion"}),o.jsxs("p",{className:"text-xl font-bold text-blue-900",children:[c.tauxCompletion,"%"]})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded border border-green-200",children:[o.jsx("p",{className:"text-xs text-green-600 font-semibold",children:"Efficience Budget"}),o.jsxs("p",{className:"text-xl font-bold text-green-900",children:[c.budgetEfficiency,"%"]})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:[o.jsx("p",{className:"text-xs text-purple-600 font-semibold",children:"Avancement Moyen"}),o.jsxs("p",{className:"text-xl font-bold text-purple-900",children:[c.averageProgress,"%"]})]}),o.jsxs("div",{className:"bg-indigo-50 p-3 rounded border border-indigo-200",children:[o.jsx("p",{className:"text-xs text-indigo-600 font-semibold",children:"Taux Retard"}),o.jsxs("p",{className:"text-xl font-bold text-indigo-900",children:[c.tauxRetard,"%"]})]}),o.jsxs("div",{className:"bg-orange-50 p-3 rounded border border-orange-200",children:[o.jsx("p",{className:"text-xs text-orange-600 font-semibold",children:"Charge Moyenne"}),o.jsxs("p",{className:"text-xl font-bold text-orange-900",children:[Math.round(c.missionCount/Math.max(c.chefCount,1))," / chef"]})]}),o.jsxs("div",{className:"bg-cyan-50 p-3 rounded border border-cyan-200",children:[o.jsx("p",{className:"text-xs text-cyan-600 font-semibold",children:"Chefs Assigns"}),o.jsx("p",{className:"text-xl font-bold text-cyan-900",children:c.chefCount})]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("trends"),className:"bg-gradient-to-r from-purple-500 to-purple-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(En,{size:20,className:"text-white"}),o.jsx("span",{className:"text-white font-semibold",children:" Tendances & Prdictions"})]}),r.trends?o.jsx(ri,{size:20,className:"text-white"}):o.jsx(ti,{size:20,className:"text-white"})]}),r.trends&&o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-blue-900",children:"Vlocit"}),o.jsx("span",{className:"text-2xl",children:u.velocity.icon})]}),o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.velocity.status})," - ",u.velocity.value," missions/semaine"]})]}),o.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-green-900",children:"Budget"}),o.jsx("span",{className:"text-2xl",children:u.budget.icon})]}),o.jsxs("p",{className:"text-sm text-green-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.budget.status})," - ",u.budget.percent,"% d'efficience"]})]}),o.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-orange-900",children:"Dlais"}),o.jsx("span",{className:"text-2xl",children:u.deadline.icon})]}),o.jsxs("p",{className:"text-sm text-orange-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.deadline.status})," - ",u.deadline.value," jours en moyenne"]})]}),o.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-semibold text-red-900",children:"Charge quipe"}),o.jsx("span",{className:"text-2xl",children:u.teamLoad.icon})]}),o.jsxs("p",{className:"text-sm text-red-800",children:[o.jsx("span",{className:"font-bold capitalize",children:u.teamLoad.status})," - ",u.teamLoad.value," missions par chef"]})]})]})]}),o.jsxs("div",{className:"border rounded-lg overflow-hidden bg-white",children:[o.jsxs("div",{onClick:()=>i("recommendations"),className:"bg-gradient-to-r from-green-500 to-green-600 p-4 cursor-pointer flex items-center justify-between hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(kR,{size:20,className:"text-white"}),o.jsxs("span",{className:"text-white font-semibold",children:[" Recommandations (",f.length,")"]})]}),r.recommendations?o.jsx(ri,{size:20,className:"text-white"}):o.jsx(ti,{size:20,className:"text-white"})]}),r.recommendations&&o.jsx("div",{className:"p-4 space-y-3",children:f.map((h,p)=>o.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${h.severity==="critique"?"bg-red-50 border-red-500":h.severity==="avertissement"?"bg-yellow-50 border-yellow-500":h.severity==="success"?"bg-green-50 border-green-500":"bg-blue-50 border-blue-500"}`,children:[o.jsxs("h4",{className:`font-semibold mb-1 flex items-center gap-2 ${h.severity==="critique"?"text-red-900":h.severity==="avertissement"?"text-yellow-900":h.severity==="success"?"text-green-900":"text-blue-900"}`,children:[o.jsx("span",{children:h.icon}),h.title]}),o.jsx("p",{className:"text-sm text-gray-700 mb-2",children:h.description}),o.jsxs("div",{className:`text-xs font-semibold p-2 rounded ${h.severity==="critique"?"bg-red-100 text-red-900":h.severity==="avertissement"?"bg-yellow-100 text-yellow-900":h.severity==="success"?"bg-green-100 text-green-900":"bg-blue-100 text-blue-900"}`,children:[" ",h.action]})]},p))})]})]})},Hie=(e,t)=>{const r=new Date(e.dateFin||e.date_fin_prevue),n=new Date(e.dateDebut||e.date_debut_prevue),i=Math.ceil((r-t)/(1e3*60*60*24)),a=Math.ceil((t-n)/(1e3*60*60*24)),s=Math.ceil((r-n)/(1e3*60*60*24)),l=e.budgetInitial||e.budget_alloue||0,c=e.depenses||0,u=l>0?c/l*100:0,f=e.avancement||0,d=s>0?a/s*100:0,h=f-d;let p=0;return(e.statut==="en_cours"||e.statut==="en-cours")&&(i<1?p+=40:i<3?p+=30:i<7?p+=20:i<14&&(p+=10),u>120?p+=35:u>100?p+=25:u>85&&(p+=15),h<-30?p+=30:h<-15?p+=20:h<-5&&(p+=10)),Math.min(Math.max(p,0),100)},Kie=(e,t)=>{const r=new Date;return e.map(i=>{const a=new Date(i.dateFin||i.date_fin_prevue),s=new Date(i.dateDebut||i.date_debut_prevue),l=Math.ceil((a-r)/(1e3*60*60*24)),c=Math.ceil((r-s)/(1e3*60*60*24)),u=Math.ceil((a-s)/(1e3*60*60*24)),f=i.budgetInitial||i.budget_alloue||0,d=i.depenses||0,h=f>0?d/f*100:0,p=f-d,b=i.avancement||0,m=u>0?c/u*100:0,y=b-m;return{id:i.id,titre:i.titre,statut:i.statut,avancementActuel:b,avancementPrvu:Math.round(m),cartAvancement:Math.round(y),budgetPercent:Math.round(h),budget:Math.round(f),depenses:Math.round(d),budgetRemaining:Math.round(p),daysLeft:l,daysElapsed:c,totalDuration:u,type:i.type||"Gnral",priorite:i.priorite||"normale",chefMission:i.chef_name||i.chef_id||"Non assign",riskScore:Hie(i,r)}})},Gie=e=>({critique:e.filter(t=>t.riskScore>=70),avertissement:e.filter(t=>t.riskScore>=40&&t.riskScore<70),normal:e.filter(t=>t.riskScore<40)}),Xie=e=>{const t=[];return e.forEach(r=>{r.cartAvancement<-15&&(r.statut==="en_cours"||r.statut==="en-cours")&&t.push({type:"retard_chronologique",mission:r,severity:"haute",title:` Retard Chronologique: ${r.titre}`,description:`${Math.abs(r.cartAvancement)}% en retard sur le calendrier prvu`,action:"Acclrer l'excution ou reprogrammer"}),r.budgetPercent>120&&t.push({type:"depassement_budget",mission:r,severity:r.budgetPercent>150?"critique":"haute",title:` Dpassement Budget: ${r.titre}`,description:`Dpassement de ${Math.round(r.budgetPercent-100)}% (${r.depenses} / ${r.budget})`,action:"Revoir le budget ou demander crdits supplmentaires"}),r.cartAvancement>20&&(r.statut==="en_cours"||r.statut==="en-cours")&&t.push({type:"qualite_suspecte",mission:r,severity:"moyenne",title:` Progression Rapide: ${r.titre}`,description:`${r.cartAvancement}% d'avance sur le calendrier - vrifier la qualit`,action:"Audit qualit pour confirmer la conformit"}),r.daysLeft<3&&r.avancementActuel<80&&t.push({type:"urgence_inachevement",mission:r,severity:"critique",title:` CRITIQUE: ${r.titre}`,description:`${r.daysLeft} jour(s) restant(s), seulement ${r.avancementActuel}% complt`,action:"Intervention immdiate requise"})}),t.sort((r,n)=>{const i={critique:3,haute:2,moyenne:1};return(i[n.severity]||0)-(i[r.severity]||0)})},Yie=(e,t)=>({tauxCompletion:t.total>0?Math.round(t.validees/t.total*100):0,tauxRetard:t.total>0?Math.round(t.delaiees/t.total*100):0,budgetEfficiency:t.budgetTotal>0?Math.round((t.budgetTotal-t.depensesTotal)/t.budgetTotal*100):0,averageProgress:t.enCours>0?Math.round(e.filter(r=>r.statut==="en_cours"||r.statut==="en-cours").reduce((r,n)=>r+(n.avancement||0),0)/Math.max(t.enCours,1)):0,missionCount:e.length,chefCount:new Set(e.map(r=>r.chef_id)).size}),Jie=(e,t)=>{const n=e.filter(f=>f.statut==="validee"||f.statut==="cloturee").length/Math.max(e.length,1),i=Math.round(n*10)/10,a=e.filter(f=>f.budgetPercent<=100).length/Math.max(e.length,1)*100,l=e.filter(f=>f.daysLeft>=7||f.statut!=="en_cours"&&f.statut!=="en-cours").length/Math.max(e.length,1),c=e.filter(f=>f.statut==="en_cours"||f.statut==="en-cours").reduce((f,d)=>f+Math.max(0,d.daysLeft),0)/Math.max(e.filter(f=>f.statut==="en_cours"||f.statut==="en-cours").length,1),u=t.missionCount/Math.max(t.chefCount,1);return{velocity:{status:n>.4?"improving":n>.2?"stable":"declining",value:i,icon:n>.4?"":n>.2?"":""},budget:{status:a>70?"sain":a>50?"moyen":"critique",percent:Math.round(a),icon:a>70?"":a>50?"":""},deadline:{status:l>.7?"contrle":"serre",value:Math.round(c),icon:l>.7?"":""},teamLoad:{status:u>5?"leve":"normale",value:Math.round(u*10)/10,icon:u>5?"":""}}},Qie=(e,t,r,n,i)=>{const a=[];t.critique.length>0&&a.push({priority:"urgent",severity:"critique",icon:"",title:`INTERVENTION IMMDIATE: ${t.critique.length} Mission(s) Critique(s)`,description:`Les missions suivantes ncessitent une action immdiate: ${t.critique.slice(0,2).map(c=>c.titre).join(", ")}${t.critique.length>2?"...":""}`,action:"Runion de crise - Allouer ressources supplmentaires"});const s=r.filter(c=>c.severity==="critique");s.length>0&&a.push({priority:"urgent",severity:"critique",icon:"",title:`${s.length} Anomalie(s) Critique(s)`,description:s[0].description,action:s[0].action}),n.tauxCompletion<60&&a.push({priority:"haute",severity:"avertissement",icon:"",title:"Taux de Compltion Faible",description:`${n.tauxCompletion}% de compltion (objectif: 80%+). Revoir la planification ou augmenter les ressources.`,action:"Analyser les goulots d'tranglement et les blocages"});const l=e.filter(c=>c.budgetPercent>100);return l.length>e.length*.3&&a.push({priority:"haute",severity:"avertissement",icon:"",title:"Dpassements Budgtaires Rcurrents",description:`${l.length} mission(s) en dpassement. Plus de 30% du portefeuille affect.`,action:"Revoir le modle d'estimation et les marges de scurit"}),n.tauxCompletion>0&&n.tauxCompletion<30&&a.push({priority:"moyenne",severity:"info",icon:"",title:"Vlocit  Optimiser",description:"La cadence actuelle laisse peu de marge. Considrer une augmentation de capacit.",action:"valuer les ressources disponibles et la charge de travail"}),n.tauxCompletion>70&&t.critique.length===0&&a.push({priority:"info",severity:"success",icon:"",title:"Excellent Taux de Compltion",description:`Performance de ${n.tauxCompletion}% - quipe en excellente trajectoire.`,action:"Maintenir la dynamique actuelle"}),a},Zie=(e,t)=>{const r=Kie(e),n=Gie(r),i=Xie(r),a=Yie(e,t),s=Jie(r,a),l=Qie(r,n,i,a);return{missionMetrics:r,riskLevels:n,anomalies:i,performanceMetrics:a,trends:s,recommendations:l,summary:{totalMissions:e.length,criticalMissions:n.critique.length,warningMissions:n.avertissement.length,normalMissions:n.normal.length,detectedAnomalies:i.length,completionRate:a.tauxCompletion,budgetHealth:a.budgetEfficiency}}},eae=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState([]),[s,l]=N.useState([]),[c,u]=N.useState(!0),[f,d]=N.useState(""),[h,p]=N.useState("all"),[b,m]=N.useState(""),[y,v]=N.useState(""),[g,x]=N.useState("all"),[j,w]=N.useState(!1),[_,S]=N.useState(!1),[E,A]=N.useState(!1),[O,P]=N.useState(null),[k,M]=N.useState(null),[L,B]=N.useState(null),[D,q]=N.useState(null),[R,I]=N.useState(!1),[z,W]=N.useState(!1),{addNotification:C}=sr(),{user:F,profile:Q}=Et(),Z=[{id:1,titre:"Installation Systme ERP",description:"Installation complte du systme ERP client ABC",client:{id:1,raison_sociale:"Entreprise ABC"},lieu:"Alger",dateDebut:"2025-11-20",dateFin:"2025-11-25",budgetInitial:5e4,statut:"en_cours",type:"Installation",participants:[{id:1,nom:"Jean Dupont",role:"Technicien"}],priorite:"haute",avancement:65,dureePrevue:5,durationReelle:3,depenses:21500},{id:2,titre:"Formation quipe Support",description:"Formation sur la nouvelle plateforme logicielle",client:{id:2,raison_sociale:"Socit XYZ"},lieu:"Oran",dateDebut:"2025-11-22",dateFin:"2025-11-23",budgetInitial:15e3,statut:"planifiee",type:"Formation",participants:[{id:2,nom:"Marie Martin",role:"Formateur"}],priorite:"moyenne",avancement:0,dureePrevue:2,durationReelle:0,depenses:0},{id:3,titre:"Support Technique Urgent",description:"Intervention d'urgence pour panne systme",client:{id:3,raison_sociale:"Client DEF"},lieu:"Constantine",dateDebut:"2025-11-19",dateFin:"2025-11-20",budgetInitial:8e3,statut:"validee",type:"Support",participants:[{id:3,nom:"Pierre Lefevre",role:"Technicien"}],priorite:"critique",avancement:100,dureePrevue:1,durationReelle:1.5,depenses:6800},{id:4,titre:"Maintenance Serveurs",description:"Maintenance prventive serveurs client",client:{id:4,raison_sociale:"Tech Solutions"},lieu:"Annaba",dateDebut:"2025-11-25",dateFin:"2025-11-27",budgetInitial:12e3,statut:"creee",type:"Maintenance",participants:[{id:1,nom:"Jean Dupont",role:"Technicien"}],priorite:"moyenne",avancement:0,dureePrevue:2,durationReelle:0,depenses:0},{id:5,titre:"Audit Scurit",description:"Audit complet de scurit informatique",client:{id:5,raison_sociale:"Finance Pro"},lieu:"Blida",dateDebut:"2025-11-21",dateFin:"2025-11-24",budgetInitial:25e3,statut:"en_cours",type:"Audit",participants:[{id:4,nom:"Sophie Durand",role:"Auditeur"}],priorite:"haute",avancement:45,dureePrevue:3,durationReelle:2,depenses:8900}];N.useEffect(()=>{ee()},[]),N.useEffect(()=>{F!=null&&F.id&&Q&&le()},[e,f,h,b,y,g,F==null?void 0:F.id,Q]);const ee=async()=>{try{u(!0);const T=await Rt.testTableAccess();console.log("Missions table access test:",T);const U=(await Zt.getAll()).filter(re=>re.statut==="actif");a(U);try{const re=await Be.getAll();console.log("Users loaded:",re==null?void 0:re.length,"users",re),l(re||[])}catch(re){console.error("Erreur chargement utilisateurs:",re),l([])}try{const Se=(await Rt.getAll()||[]).map(ge=>{const _e=ge.prospect_id||ge.clientId,bo=_e?U.find(Rh=>Rh.id===_e):null,wo=ge.client||bo||{id:_e,raison_sociale:"Client"};return{...ge,type:ge.type_mission||ge.type,budgetInitial:ge.budget_alloue||ge.budgetInitial||0,depenses:ge.budget_depense||ge.depenses||0,avancement:ge.avancement||0,client:wo}});console.log("Missions transformed:",Se),t(Se)}catch(re){console.warn("Missions BD non disponibles, utilisation des donnes mockes:",re),t(Z)}}catch(T){console.error("Erreur:",T),C({type:"error",message:"Erreur lors du chargement des donnes"})}finally{u(!1)}},le=()=>{let T=[...e];const ae=(Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin";T=T.filter(U=>{var _e;const re=U.chefMissionId===(F==null?void 0:F.id)||U.chef_mission_id===(F==null?void 0:F.id),Se=(_e=U.accompagnateurs_ids)==null?void 0:_e.includes(F==null?void 0:F.id);return re||ae||Se}),h!=="all"&&(T=T.filter(U=>h==="planifiee"?U.statut==="planifiee"||U.statut==="creee":U.statut===h)),b&&(T=T.filter(U=>{const re=new Date(U.dateDebut||U.date_debut),Se=new Date(b);return re>=Se})),y&&(T=T.filter(U=>{const re=new Date(U.dateDebut||U.date_debut),Se=new Date(y);return re<=Se})),g!=="all"&&(T=T.filter(U=>U.chefMissionId===g||U.chef_mission_id===g)),f&&(T=T.filter(U=>{var re,Se,ge;return((re=U.titre)==null?void 0:re.toLowerCase().includes(f.toLowerCase()))||((ge=(Se=U.client)==null?void 0:Se.raison_sociale)==null?void 0:ge.toLowerCase().includes(f.toLowerCase()))})),n(T),ce(T)},ce=T=>{const ae=T.length,U=T.filter(ot=>ot.statut==="planifiee"||ot.statut==="creee").length,re=T.filter(ot=>ot.statut==="en_cours").length,Se=T.filter(ot=>ot.statut==="validee").length,ge=T.filter(ot=>ot.statut==="cloturee").length,_e=T.reduce((ot,Ca)=>ot+(Ca.budgetInitial||0),0),bo=T.reduce((ot,Ca)=>ot+(Ca.depenses||0),0),wo=T.map(ot=>ot.avancement||0),Rh=wo.length>0?Math.round(wo.reduce((ot,Ca)=>ot+Ca)/wo.length):0,AT=T.filter(ot=>new Date(ot.dateFin)<new Date&&ot.statut!=="validee"&&ot.statut!=="cloturee").length,OT=_e>0?Math.round(bo/_e*100):0;M({total:ae,planifiees:U,enCours:re,validees:Se,cloturees:ge,budgetTotal:_e,depensesTotal:bo,tauxUtilisation:OT,avantageMoyen:Rh,delaiees:AT,restant:_e-bo})},te=()=>{try{if(!E){if(I(!0),r.length===0){C({type:"warning",message:"Aucune mission  analyser"}),I(!1);return}const T=Zie(r,k);q(T)}A(!E),C(E?{type:"success",message:" Vue Missions Affiche"}:{type:"success",message:" Vue Analyse Affiche"})}catch(T){console.error("Erreur:",T),C({type:"error",message:"Erreur lors du basculement"})}finally{I(!1)}},V=T=>({creee:"bg-blue-100 text-blue-800",planifiee:"bg-blue-100 text-blue-800",en_cours:"bg-amber-100 text-amber-800",cloturee:"bg-green-100 text-green-800",validee:"bg-emerald-100 text-emerald-800"})[T]||"bg-gray-100 text-gray-800",ie=T=>({creee:"Planifie",planifiee:"Planifie",en_cours:"En cours",cloturee:"Clture",validee:"Valide"})[T]||T,K=()=>{if(!((Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin")){C({type:"error",message:"Seuls les administrateurs peuvent crer des missions"});return}P(null),w(!0)},H=T=>{const ae=(Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin",U=(T==null?void 0:T.created_by)===(F==null?void 0:F.id),re=(T==null?void 0:T.chefMissionId)===(F==null?void 0:F.id);return ae||U||re&&(T==null?void 0:T.statut)!=="cloturee"&&(T==null?void 0:T.statut)!=="validee"},J=T=>{const ae=(Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin",U=(T==null?void 0:T.created_by)===(F==null?void 0:F.id);return(ae||U)&&(T==null?void 0:T.statut)!=="cloturee"&&(T==null?void 0:T.statut)!=="validee"},he=T=>{if(!H(T)){C({type:"error",message:" Vous n'avez pas les permissions pour modifier cette mission"});return}S(!1),w(!0)},we=async T=>{if(!J(T)){C({type:"error",message:" Vous n'avez pas les permissions pour supprimer cette mission"});return}if(window.confirm(" tes-vous certain de vouloir supprimer cette mission?"))try{await Rt.delete(T.id),t(e.filter(ae=>ae.id!==T.id)),S(!1),C({type:"success",message:" Mission supprime"})}catch(ae){console.error("Erreur suppression:",ae),C({type:"error",message:" Erreur lors de la suppression"})}},Y=async T=>{try{const ae=typeof T=="string"?T:T==null?void 0:T.type,U=typeof T=="object"?T==null?void 0:T.totalExpenses:0,re=(Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin",Se=(O==null?void 0:O.chefMissionId)===(F==null?void 0:F.id)||(O==null?void 0:O.chef_mission_id)===(F==null?void 0:F.id);if(ae==="start"){if(!Se){C({type:"error",message:" Seul le Chef de Mission assign peut dmarrer la mission"});return}const ge={...O,statut:"en_cours",dateDebut:new Date().toISOString()};try{await Rt.updateStatus(O.id,"en_cours"),t(e.map(_e=>_e.id===O.id?ge:_e)),P(ge),C({type:"success",message:" Mission dmarre - Statut: En cours"})}catch(_e){console.error("Erreur lors du dmarrage de la mission:",_e),C({type:"error",message:" Erreur lors du dmarrage de la mission"})}return}if(ae==="admin"){if(!re){C({type:"error",message:" Seul un administrateur peut effectuer une clture dfinitive"});return}if(window.confirm(" tes-vous certain de vouloir clturer dfinitivement cette mission? Cette action est irrversible.")){const ge={...O,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:U,clotureeParAdmin:F==null?void 0:F.id};try{await Rt.validateClosureByAdmin(O.id,{clotureeDefinitive:!0,commentaireAdmin:"Clture dfinitive",totalExpenses:U}),t(e.map(_e=>_e.id===O.id?ge:_e)),P(ge),C({type:"success",message:" Mission clture dfinitivement par Admin"}),setTimeout(()=>S(!1),1e3)}catch(_e){console.error("Erreur lors de la clture:",_e),C({type:"error",message:" Erreur lors de la clture dfinitive"})}}}else if(ae==="chef"){if(!re){C({type:"error",message:" Seul un administrateur peut effectuer une clture dfinitive"});return}if(window.confirm(" tes-vous certain de vouloir clturer dfinitivement cette mission? Cette action est irrversible.")){const ge={...O,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:U,clotureeParAdmin:F==null?void 0:F.id};try{await Rt.closeMissionByChef(O.id,{commentaireChef:"Clture par chef",avancements:O.avancement||100,dateClotureReelle:new Date().toISOString(),totalExpenses:U}),t(e.map(_e=>_e.id===O.id?ge:_e)),P(ge),C({type:"success",message:" Mission clture par Chef - En attente de validation Admin"}),setTimeout(()=>S(!1),1e3)}catch(_e){console.error("Erreur lors de la clture par chef:",_e),C({type:"error",message:" Erreur lors de la clture par le chef"})}}}else if(ae==="chef"){if(!Se){C({type:"error",message:" Seul le Chef de Mission assign peut clturer la mission"});return}const ge={...O,statut:"cloturee",dateCloture:new Date().toISOString(),budget_depense:U,clotureeParChef:F==null?void 0:F.id};try{await Rt.closeMissionByChef(O.id,{commentaireChef:"Clture par chef de mission",avancements:O.avancement||100,dateClotureReelle:new Date().toISOString(),totalExpenses:U}),t(e.map(_e=>_e.id===O.id?ge:_e)),P(ge),C({type:"success",message:" Mission clture par le Chef de Mission"})}catch(_e){console.error("Erreur lors de la clture par chef:",_e),C({type:"error",message:" Erreur lors de la clture par le chef"})}}}catch(ae){console.error("Erreur clture:",ae),C({type:"error",message:"Erreur lors de la clture"})}},fe=async T=>{if(!z)try{W(!0);let ae;O?(ae=await Rt.update(O.id,T),t(e.map(U=>U.id===O.id?ae:U)),C({type:"success",message:" Mission mise  jour avec succs"})):(ae=await Rt.create(T),t([ae,...e]),C({type:"success",message:" Mission cre avec succs"})),w(!1),P(null)}catch(ae){console.error("Erreur dtails:",{message:ae.message,code:ae.code,details:ae.details,hint:ae.hint,fullError:ae}),C({type:"error",message:`Erreur: ${ae.message||"Erreur lors de la sauvegarde de la mission"}`})}finally{W(!1)}};return c?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Co,{className:"mx-auto mb-4 text-primary animate-bounce",size:48}),o.jsx("p",{className:"text-gray-600",children:"Chargement des missions..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gray-50 p-2",children:[o.jsxs("div",{className:"w-full",children:[o.jsxs("div",{className:"mb-8 px-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Co,{className:"text-primary",size:32}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tableau de Bord Missions"}),o.jsx("p",{className:"text-gray-600",children:"Suivi statistique et financier en temps rel"})]})]}),o.jsxs(Ae,{onClick:K,className:`flex items-center gap-2 ${(Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin"?"bg-primary hover:bg-primary-dark text-white":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,disabled:!((Q==null?void 0:Q.role)==="admin"||(Q==null?void 0:Q.role)==="super_admin"),children:[o.jsx(Oi,{size:20}),"Nouvelle Mission"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[o.jsx(Ta,{placeholder:"Rechercher une mission...",value:f,onChange:d,icon:o.jsx(Co,{size:18})}),o.jsxs("select",{value:h,onChange:T=>p(T.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous les statuts"}),o.jsx("option",{value:"planifiee",children:"Planifies (futures)"}),o.jsx("option",{value:"en_cours",children:"En cours"}),o.jsx("option",{value:"validee",children:"Valides"}),o.jsx("option",{value:"cloturee",children:"Cltures"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Du"}),o.jsx("input",{type:"date",value:b,onChange:T=>m(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Au"}),o.jsx("input",{type:"date",value:y,onChange:T=>v(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs text-gray-600 font-semibold mb-1",children:"Chef Mission"}),o.jsxs("select",{value:g,onChange:T=>x(T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",children:[o.jsx("option",{value:"all",children:"Tous"}),s.map(T=>o.jsx("option",{value:T.id,children:T.nom||T.email},T.id))]})]})]}),o.jsxs("div",{className:"flex gap-3 mb-6 flex-wrap",children:[o.jsxs(Ae,{onClick:te,disabled:R,className:`flex items-center gap-2 ${E?"bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white"}`,children:[o.jsx(En,{size:18}),R?"Chargement...":E?" Voir Missions":" Voir Analyse"]}),(b||y||g!=="all"||h!=="all"||f)&&o.jsxs(Ae,{onClick:()=>{m(""),v(""),x("all"),p("all"),d("")},className:"bg-gray-200 text-gray-700 hover:bg-gray-300 flex items-center gap-2",children:[o.jsx(ji,{size:18}),"Rinitialiser"]})]})]}),E?o.jsx("div",{className:"mb-8",children:D?o.jsx(Vie,{analysisData:D,loading:R}):o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg text-gray-500",children:"Aucune analyse disponible"})})})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-blue-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Total Missions"}),o.jsx(Co,{className:"text-blue-500",size:20})]}),o.jsx("p",{className:"text-3xl font-bold text-gray-900",children:k.total}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[k.enCours," en cours  ",k.validees," compltes"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-green-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Avancement Moyen"}),o.jsx(En,{className:"text-green-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[k.avantageMoyen,"%"]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-3",children:o.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${k.avantageMoyen}%`}})})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-yellow-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Budget Total"}),o.jsx(As,{className:"text-yellow-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[(k.budgetTotal/1e3).toFixed(0),"K DA"]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Dpens: ",k.depensesTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6 border-l-4 border-red-500",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-gray-600 text-sm font-medium",children:"Utilisation Budget"}),o.jsx(MR,{className:"text-red-500",size:20})]}),o.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[k.tauxUtilisation,"%"]}),o.jsx("p",{className:`text-xs mt-2 font-medium ${k.tauxUtilisation>80?"text-red-500":"text-green-500"}`,children:k.tauxUtilisation>80?" Attention":" Normal"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(ER,{size:20,className:"text-primary"}),"Distribution Statuts"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Planifies (futures)"}),o.jsx("span",{className:"font-semibold text-gray-900",children:k.planifiees})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"En cours"}),o.jsx("span",{className:"font-semibold text-amber-600",children:k.enCours})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Valides"}),o.jsx("span",{className:"font-semibold text-green-600",children:k.validees})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Cltures"}),o.jsx("span",{className:"font-semibold text-emerald-600",children:k.cloturees})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Es,{size:20,className:"text-red-500"}),"Alertes & Risques"]}),o.jsxs("div",{className:"space-y-3",children:[k.delaiees>0&&o.jsx("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200",children:o.jsxs("p",{className:"text-sm font-medium text-red-800",children:[" ",k.delaiees," mission(s) retarde(s)"]})}),k.tauxUtilisation>80&&o.jsx("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:o.jsxs("p",{className:"text-sm font-medium text-orange-800",children:[" Budget  ",k.tauxUtilisation,"%"]})}),k.enCours>0&&k.avantageMoyen<50&&o.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:o.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[" Avancement faible (",k.avantageMoyen,"%)"]})}),k.delaiees===0&&k.tauxUtilisation<=80&&o.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:o.jsx("p",{className:"text-sm font-medium text-green-800",children:" Aucun risque majeur"})})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(As,{size:20,className:"text-green-500"}),"Situation Financire"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-blue-900",children:"Budget Total"}),o.jsxs("span",{className:"font-bold text-blue-900",children:[k.budgetTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-red-900",children:"Dpens"}),o.jsxs("span",{className:"font-bold text-red-900",children:[k.depensesTotal.toLocaleString("fr-DZ")," DA"]})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[o.jsx("span",{className:"text-sm text-green-900",children:"Restant"}),o.jsxs("span",{className:"font-bold text-green-900",children:[k.restant.toLocaleString("fr-DZ")," DA"]})]})]})]})]}),L&&!D&&o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-orange-50 rounded-lg shadow p-6 border border-red-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Nt,{size:20,className:"text-red-600"})," Top Risques (IA)"]}),o.jsx("div",{className:"space-y-2",children:(L.risques||[]).map((T,ae)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",T]},ae))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg shadow p-6 border border-green-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(Ji,{size:20,className:"text-green-600"})," Opportunits (IA)"]}),o.jsx("div",{className:"space-y-2",children:(L.opportunites||[]).map((T,ae)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",T]},ae))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg shadow p-6 border border-blue-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(bd,{size:20,className:"text-blue-600"})," Actions Prioritaires (IA)"]}),o.jsx("div",{className:"space-y-2",children:(L.recommandations||[]).map((T,ae)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",T]},ae))})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg shadow p-6 border border-purple-200",children:[o.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(En,{size:20,className:"text-purple-600"})," Tendances (IA)"]}),o.jsx("div",{className:"space-y-2",children:(L.tendances||[]).map((T,ae)=>o.jsxs("p",{className:"text-sm text-gray-700",children:[" ",T]},ae))})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[o.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:o.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Missions Filtres (",r.length,")"]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Titre"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Type"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Chef de Mission"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Accompagnateurs"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Avancement"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Budget"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600",children:"Dpenses"}),o.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-600",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(T=>{var ae;return o.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[o.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:T.titre}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:((ae=T.client)==null?void 0:ae.raison_sociale)||"N/A"}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:T.type||T.type_mission||"N/A"}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${V(T.statut)}`,children:ie(T.statut)})}),o.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{var Se,ge;const U=T.chef_mission_id||T.chefMissionId;if(!U)return o.jsx("span",{className:"text-red-600 font-medium",children:" Non assign"});const re=s.find(_e=>_e.id===U);return re?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-xs font-bold text-blue-600",children:(ge=(Se=re.full_name||re.email)==null?void 0:Se[0])==null?void 0:ge.toUpperCase()}),o.jsx("span",{className:"text-gray-900 font-medium",children:re.full_name||re.email})]}):(console.warn("Chef not found in users array:",{chefId:U,usersCount:s.length}),o.jsx("span",{className:"text-amber-600 font-medium",children:" ID invalide"}))})()}),o.jsx("td",{className:"px-6 py-4 text-sm",children:(()=>{const U=T.accompagnateurs_ids||T.accompagnateurIds||[];if(!Array.isArray(U)||U.length===0)return o.jsx("span",{className:"text-red-600 font-medium",children:" Aucun"});const re=U.map(Se=>{const ge=s.find(_e=>_e.id===Se);return(ge==null?void 0:ge.full_name)||(ge==null?void 0:ge.email)||null}).filter(Boolean);return re.length===0?o.jsx("span",{className:"text-red-600 font-medium",children:" Aucun"}):o.jsx("div",{className:"flex items-center gap-1 flex-wrap",children:re.map((Se,ge)=>o.jsx("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:Se},ge))})})()}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${T.avancement||0}%`}})}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[T.avancement||0,"%"]})]})}),o.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[(T.budgetInitial||T.budget_alloue||0).toLocaleString("fr-DZ")," DA"]}),o.jsx("td",{className:"px-6 py-4 text-sm",children:o.jsxs("span",{className:(T.depenses||0)>(T.budgetInitial||T.budget_alloue||0)?"text-red-600 font-bold":"text-gray-600",children:[(T.depenses||T.budget_depense||0).toLocaleString("fr-DZ")," DA"]})}),o.jsx("td",{className:"px-6 py-4 text-center",children:o.jsx(Ae,{onClick:()=>{const U={...T,chef_name:(()=>{const re=T.chef_mission_id||T.chefMissionId;if(!re)return"Non assign";const Se=s.find(ge=>ge.id===re);return(Se==null?void 0:Se.full_name)||(Se==null?void 0:Se.email)||"Non assign"})()};P(U),S(!0)},className:"text-primary hover:bg-primary hover:text-white px-3 py-1 rounded text-sm",children:"Dtails"})})]},T.id)})})]})}),r.length===0&&o.jsxs("div",{className:"px-6 py-12 text-center",children:[o.jsx(Co,{className:"mx-auto mb-3 text-gray-400",size:40}),o.jsx("p",{className:"text-gray-600",children:"Aucune mission trouve"})]})]})]})]}),o.jsx(Bt,{isOpen:j,onClose:()=>w(!1),title:O?"Modifier Mission":"Nouvelle Mission",children:o.jsx(qie,{mission:O,clients:i,users:s,onSubmit:fe,onCancel:()=>w(!1),isSubmitting:z})}),O&&_&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-primary to-primary-dark text-white p-6 flex items-center justify-between flex-shrink-0",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-bold",children:O.titre}),o.jsx("p",{className:"text-primary-light text-sm mt-1",children:O.description})]}),o.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition",children:o.jsx(ji,{size:28})})]}),o.jsx("div",{className:"overflow-y-auto flex-1",children:o.jsx("div",{className:"p-6",children:o.jsx(Wie,{mission:O,onClose:()=>S(!1),onClosureAdmin:Y,currentUser:F,userProfile:Q})})}),o.jsxs("div",{className:"border-t border-gray-200 p-4 bg-gray-50 flex gap-3 justify-end flex-shrink-0",children:[o.jsx(Ae,{onClick:()=>S(!1),className:"bg-gray-200 hover:bg-gray-300 text-gray-800",children:"Fermer"}),H(O)&&o.jsx(Ae,{onClick:()=>he(O),className:"bg-primary hover:bg-primary-dark text-white",children:" Modifier"}),J(O)&&o.jsx(Ae,{onClick:()=>we(O),className:"bg-red-600 hover:bg-red-700 text-white",children:" Supprimer"}),!H(O)&&o.jsx("div",{className:"flex items-center gap-2 px-4 py-2 bg-red-50 rounded text-red-700 text-sm",children:o.jsx("span",{children:" dition non autorise"})})]})]})})]})},J1=({alerte:e,type:t,onRenouveler:r})=>{var l,c,u,f,d;const n=Go(e.date_fin),i=()=>t==="danger"?"border-red-500":t==="warning"?"border-orange-500":"border-blue-500",a=()=>t==="danger"?"bg-red-50":t==="warning"?"bg-orange-50":"bg-blue-50",s=()=>t==="danger"?"text-red-700":t==="warning"?"text-orange-700":"text-blue-700";return o.jsxs("div",{className:`card hover:shadow-xl transition-shadow duration-200 border-l-4 ${i()}`,children:[o.jsx("div",{className:"flex items-start justify-between mb-4",children:o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:(l=e.installation)==null?void 0:l.application_installee}),t==="danger"&&o.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm font-medium",children:[o.jsx(Nt,{size:16}),o.jsx("span",{children:"EXPIR"})]}),t==="warning"&&o.jsxs("div",{className:"flex items-center gap-2 text-orange-600 text-sm font-medium",children:[o.jsx(Nt,{size:16}),o.jsxs("span",{children:[n," JOURS RESTANTS"]})]})]})}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-700 mb-4",children:[o.jsx(cl,{size:18}),o.jsx("span",{className:"font-medium",children:(u=(c=e.installation)==null?void 0:c.client)==null?void 0:u.raison_sociale})]}),o.jsxs("div",{className:`${a()} rounded-lg p-3 mb-4`,children:[o.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[o.jsx("span",{className:"text-gray-600",children:"Date de fin:"}),o.jsx("span",{className:`font-bold ${s()}`,children:$r(e.date_fin)})]}),((d=(f=e.installation)==null?void 0:f.client)==null?void 0:d.commercial_assigne)&&o.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["Commercial: ",e.installation.client.commercial_assigne]})]}),o.jsxs("button",{onClick:()=>r(e.id),className:`w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-medium transition-colors ${t==="danger"?"bg-red-600 hover:bg-red-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}`,children:[o.jsx($A,{size:18}),"Renouveler Maintenant"]})]})},tae=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),{addNotification:i}=sr();N.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const u=await qt.checkAlertes();t(u)}catch{i({type:"error",message:"Erreur lors du chargement des alertes"})}finally{n(!1)}},s=async u=>{if(window.confirm("tes-vous sr de vouloir renouveler cet abonnement ?"))try{const f=e.find(p=>p.id===u);if(!f)throw new Error("Abonnement non trouv");await qt.delete(u);const d=new Date(f.date_fin),h=new Date(d);h.setFullYear(h.getFullYear()+1),await qt.create({installation_id:f.installation_id,date_debut:d.toISOString(),date_fin:h.toISOString(),statut:"actif"}),i({type:"success",message:"Abonnement renouvel avec succs"}),a()}catch(f){i({type:"error",message:f.message||"Erreur lors du renouvellement"})}};if(r)return o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});const l=e.filter(u=>new Date(u.date_fin)>=new Date),c=e.filter(u=>new Date(u.date_fin)<new Date);return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-orange-500 to-red-500 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Alertes de Renouvellement"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," abonnement(s) ncessitent votre attention"]})]}),o.jsx(Nt,{size:64,className:"opacity-50"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xd,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"En Alerte"}),o.jsx("h3",{className:"text-3xl font-bold",children:l.length})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Nt,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Expirs"}),o.jsx("h3",{className:"text-3xl font-bold",children:c.length})]})]})}),o.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Rr,{size:32}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),o.jsx("h3",{className:"text-3xl font-bold",children:e.length})]})]})})]}),l.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(xd,{className:"text-orange-500",size:24}),"Abonnements  Renouveler Prochainement"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(u=>o.jsx(J1,{alerte:u,type:"warning",onRenouveler:s},u.id))})]}),c.length>0&&o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Nt,{className:"text-red-500",size:24}),"Abonnements Expirs - Action Urgente"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(u=>o.jsx(J1,{alerte:u,type:"danger",onRenouveler:s},u.id))})]}),e.length===0&&o.jsx("div",{className:"card text-center py-12",children:o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:o.jsx(Rr,{className:"text-green-600",size:32})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Aucune Alerte Active"}),o.jsx("p",{className:"text-gray-600",children:"Tous les abonnements sont  jour !"})]})]})})]})},rae=({application:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({nom:"",description:"",prix:""}),[a,s]=N.useState({});N.useEffect(()=>{e&&i({nom:e.nom||"",description:e.description||"",prix:e.prix||""})},[e]);const l=(u,f)=>{i(d=>({...d,[u]:f})),a[u]&&s(d=>({...d,[u]:""}))},c=u=>{u.preventDefault();const f=Mh.validateApplication(n);if(!f.isValid){s(f.errors);return}t(n)};return o.jsxs("form",{onSubmit:c,className:"space-y-4",children:[o.jsx(We,{label:"Nom de l'Application",value:n.nom,onChange:u=>l("nom",u.target.value),error:a.nom,required:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{value:n.description,onChange:u=>l("description",u.target.value),rows:"4",className:"input-field",placeholder:"Description de l'application..."})]}),o.jsx(We,{label:"Prix (DA)",type:"number",value:n.prix,onChange:u=>l("prix",u.target.value),error:a.prix,required:!0}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",children:e?"Modifier":"Crer"})]})]})},nae=({application:e,onEdit:t,onDelete:r,hasEditPermission:n=!0,hasDeletePermission:i=!0})=>o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center",children:o.jsx(Hv,{className:"text-purple-600",size:24})}),o.jsx("div",{children:o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:e.nom})})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),disabled:!n,className:`p-2 rounded-lg transition-colors ${n?"text-blue-600 hover:bg-blue-50":"text-gray-400 cursor-not-allowed"}`,title:n?"Modifier cette application":"Permission refuse: Modifier",children:n?o.jsx(qn,{size:18}):o.jsx(_i,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),disabled:!i,className:`p-2 rounded-lg transition-colors ${i?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"}`,title:i?"Supprimer cette application":"Permission refuse: Supprimer",children:i?o.jsx(en,{size:18}):o.jsx(_i,{size:18})})]})]}),e.description&&o.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 mt-auto",children:[o.jsx("p",{className:"text-sm text-purple-600 mb-1",children:"Prix"}),o.jsx("p",{className:"text-2xl font-bold text-purple-700",children:Ze(e.prix)})]})]}),iae=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState(!1),[f,d]=N.useState(null),[h,p]=N.useState("create"),[b,m]=N.useState(!1),[y,v]=N.useState(!1),[g,x]=N.useState(!1),[j,w]=N.useState(!1),{addNotification:_}=sr(),{user:S,profile:E}=Et();N.useEffect(()=>{A()},[]),N.useEffect(()=>{O()},[S==null?void 0:S.id,E==null?void 0:E.role]),N.useEffect(()=>{P()},[e,s]);const A=async()=>{try{a(!0);const D=await Yo.getAll();t(D)}catch{_({type:"error",message:"Erreur lors du chargement des applications"})}finally{a(!1)}},O=async()=>{try{if(w(!0),S!=null&&S.id&&E){const D=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Be.hasCreatePermission(S.id,"applications"),q=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Be.hasEditPermission(S.id,"applications"),R=(E==null?void 0:E.role)==="admin"||(E==null?void 0:E.role)==="super_admin"||await Be.hasDeletePermission(S.id,"applications");m(D),v(q),x(R)}}catch(D){console.error("Erreur chargement permissions:",D)}finally{w(!1)}},P=()=>{let D=[...e];s&&(D=D.filter(q=>{var R,I;return((R=q.nom)==null?void 0:R.toLowerCase().includes(s.toLowerCase()))||((I=q.description)==null?void 0:I.toLowerCase().includes(s.toLowerCase()))})),n(D)},k=()=>{b&&(d(null),p("create"),u(!0))},M=D=>{y&&(d(D),p("edit"),u(!0))},L=async D=>{var R;const q=(D==null?void 0:D.id)||D;if(g&&window.confirm("tes-vous sr de vouloir supprimer cette application ?"))try{await Yo.delete(q),_({type:"success",message:"Application supprime avec succs"}),A()}catch(I){console.error("Erreur suppression application:",I),I.status===409||(R=I.message)!=null&&R.includes("foreign key")?_({type:"error",message:"Impossible de supprimer cette application car elle est lie  d'autres enregistrements"}):_({type:"error",message:"Erreur lors de la suppression de l'application"})}},B=async D=>{try{h==="create"?(await Yo.create(D),_({type:"success",message:"Application cre avec succs"})):(await Yo.update(f.id,D),_({type:"success",message:"Application modifie avec succs"})),u(!1),A()}catch{_({type:"error",message:"Erreur lors de l'enregistrement"})}};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Catalogue d'Applications"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," application(s) disponible(s)"]})]}),o.jsx(Hv,{size:64,className:"opacity-50"})]})}),o.jsx("div",{className:"card",children:o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ta,{value:s,onChange:l,placeholder:"Rechercher une application..."})}),o.jsx(Ae,{variant:"primary",icon:Oi,onClick:k,disabled:!b,title:b?"Ajouter une nouvelle application":"Permission refuse: Crer une application",children:"Ajouter Application"})]})}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucune application trouve"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(D=>o.jsx(nae,{application:D,onEdit:M,onDelete:L,hasEditPermission:y,hasDeletePermission:g},D.id))}),o.jsx(Bt,{isOpen:c,onClose:()=>u(!1),title:h==="create"?"Nouvelle Application":"Modifier Application",children:o.jsx(rae,{application:f,onSubmit:B,onCancel:()=>u(!1)})})]})},aae=({user:e,onSubmit:t,onCancel:r})=>{const[n,i]=N.useState({nom:"",email:"",password:"",role:"commercial",pages_visibles:[],permissions:{}}),[a,s]=N.useState({}),l=[{value:Pe.DASHBOARD,label:"Tableau de Bord"},{value:Pe.PROSPECTS,label:"Prospects"},{value:Pe.CLIENTS,label:"Clients"},{value:Pe.INSTALLATIONS,label:"Installations"},{value:Pe.ABONNEMENTS,label:"Abonnements"},{value:Pe.PAIEMENTS,label:"Paiements"},{value:Pe.SUPPORT,label:"Support"},{value:Pe.MISSIONS,label:" Missions"},{value:Pe.ALERTES,label:"Alertes"},{value:Pe.APPLICATIONS,label:"Applications"},{value:Pe.UTILISATEURS,label:"Utilisateurs"}],c=[{value:"super_admin",label:" Super Administrateur"},{value:"admin",label:" Administrateur"},{value:"technicien",label:" Technicien"},{value:"commercial",label:" Commercial"},{value:"support",label:" Support"}];N.useEffect(()=>{if(e){const m={};Object.keys(To).forEach(y=>{m[y]={},To[y].permissions.forEach(v=>{const g=`can_${v}_${y}`;m[y][v]=e[g]||!1})}),i({nom:e.nom||"",email:e.email||"",password:"",role:e.role||"commercial",pages_visibles:e.pages_visibles||[],permissions:m})}else{const m={};Object.keys(To).forEach(y=>{m[y]={},To[y].permissions.forEach(v=>{m[y][v]=!1})}),i(y=>({...y,permissions:m}))}},[e]);const u=(m,y)=>{var v;i(g=>({...g,[m]:y})),a[m]&&s(g=>({...g,[m]:""})),m==="role"&&((v=aa[y])!=null&&v.allPages)&&i(g=>({...g,pages_visibles:[]}))},f=m=>{i(y=>{const v=[...y.pages_visibles],g=v.indexOf(m);return g>-1?v.splice(g,1):v.push(m),{...y,pages_visibles:v}})},d=(m,y)=>{i(v=>({...v,permissions:{...v.permissions,[m]:{...v.permissions[m],[y]:!v.permissions[m][y]}}}))},h=m=>{if(m.preventDefault(),!e){const v=Mh.validateUser(n);if(!v.isValid){s(v.errors);return}}const y={...n};if(e&&!y.password&&delete y.password,y.permissions&&typeof y.permissions=="object"){const v={};let g=!1;Object.entries(y.permissions).forEach(([x,j])=>{Object.entries(j).forEach(([w,_])=>{(_===!0||_===!1)&&(v[`can_${w}_${x}`]=_,g=!0)})}),g&&Object.assign(y,v),delete y.permissions}t(y)},p=aa[n.role],b=n.role==="super_admin"||n.role==="admin";return o.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o.jsx(We,{label:"Nom Complet",value:n.nom,onChange:m=>u("nom",m.target.value),error:a.nom,required:!0}),o.jsx(We,{label:"Email",type:"email",value:n.email,onChange:m=>u("email",m.target.value),error:a.email,required:!0}),o.jsx(We,{label:e?"Nouveau Mot de Passe (laisser vide pour ne pas changer)":"Mot de Passe",type:"password",value:n.password,onChange:m=>u("password",m.target.value),error:a.password,required:!e}),o.jsx(st,{label:"Rle",value:n.role,onChange:m=>u("role",m.target.value),options:c,required:!0}),p&&o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-blue-900 mb-2",children:" Permissions du rle:"}),o.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[p.canManageUsers&&o.jsx("li",{children:" Gestion des utilisateurs"}),p.canManageRoles&&o.jsx("li",{children:" Gestion des rles"}),p.canManageApplications&&o.jsx("li",{children:" Gestion des applications"}),p.canViewAll&&o.jsx("li",{children:" Voir toutes les donnes"}),p.canEditAll&&o.jsx("li",{children:" diter toutes les donnes"}),p.canDeleteAll&&o.jsx("li",{children:" Supprimer toutes les donnes"}),p.allPages&&o.jsx("li",{children:" Accs  toutes les pages"})]})]}),!b&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Pages Accessibles"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto border border-gray-200",children:l.map(m=>o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer hover:bg-gray-100 p-2 rounded transition-colors",children:[o.jsx("input",{type:"checkbox",checked:n.pages_visibles.includes(m.value),onChange:()=>f(m.value),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),o.jsx("span",{className:"text-sm text-gray-700",children:m.label})]},m.value))}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Slectionnez au minimum une page pour ce rle"})]}),!b&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:" Permissions Granulaires (Crer, Modifier, Supprimer...)"}),o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 space-y-4",children:Object.entries(To).map(([m,y])=>o.jsxs("div",{children:[o.jsxs("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:[y.icon," ",y.label]}),o.jsx("div",{className:"grid grid-cols-2 gap-3 ml-4",children:y.permissions.map(v=>{var g;return o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:((g=n.permissions[m])==null?void 0:g[v])||!1,onChange:()=>d(m,v),className:"w-4 h-4 text-primary border-gray-300 rounded focus:ring-primary"}),o.jsx("span",{className:"text-sm text-gray-700",children:xR[v]})]},`${m}-${v}`)})})]},m))})]}),b&&o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-amber-800",children:[" ",o.jsx("strong",{children:"Accs complet:"})," Les administrateurs ont automatiquement accs  toutes les pages et toutes les fonctionnalits."]})}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx(Ae,{variant:"ghost",onClick:r,children:"Annuler"}),o.jsx(Ae,{type:"submit",variant:"primary",children:e?"Modifier":"Crer"})]})]})},sae=({user:e,onEdit:t,onDelete:r,canManage:n=!1})=>{const i=()=>({super_admin:"bg-red-100 text-red-800 border-red-200",admin:"bg-orange-100 text-orange-800 border-orange-200",technicien:"bg-green-100 text-green-800 border-green-200",commercial:"bg-blue-100 text-blue-800 border-blue-200",support:"bg-indigo-100 text-indigo-800 border-indigo-200"})[e.role]||"bg-gray-100 text-gray-800 border-gray-200",a=()=>{const c=aa[e.role];return(c==null?void 0:c.label)||e.role},s=()=>({super_admin:"",admin:"",technicien:"",commercial:"",support:""})[e.role]||"",l=aa[e.role];return o.jsxs("div",{className:"card hover:shadow-xl transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsx("div",{className:"w-14 h-14 bg-primary rounded-full flex items-center justify-center text-white text-xl font-bold",children:RA(e.nom)}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800",children:e.nom}),o.jsxs("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium border ${i()} mt-1`,children:[s()," ",a()]})]})]}),n&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>t(e),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Modifier",children:o.jsx(qn,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Supprimer",children:o.jsx(en,{size:18})})]})]}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-4",children:[o.jsx(Wv,{size:16}),o.jsx("span",{className:"truncate",children:e.email})]}),l&&!l.allPages&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-2 font-medium",children:" Pages accessibles:"}),e.pages_visibles&&e.pages_visibles.length>0?o.jsxs("div",{className:"flex flex-wrap gap-1",children:[e.pages_visibles.slice(0,3).map((c,u)=>o.jsx("span",{className:"text-xs bg-white px-2 py-1 rounded border border-gray-200",children:c},u)),e.pages_visibles.length>3&&o.jsxs("span",{className:"text-xs text-gray-500",children:["+",e.pages_visibles.length-3]})]}):o.jsx("p",{className:"text-xs text-gray-500",children:"Aucune page assigne"})]}),l&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs text-blue-600 font-medium mb-2",children:" Permissions:"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[l.allPages&&o.jsx("span",{className:"text-blue-700",children:" Toutes les pages"}),l.canManageUsers&&o.jsx("span",{className:"text-blue-700",children:" Grer utilisateurs"}),l.canViewAll&&o.jsx("span",{className:"text-blue-700",children:" Voir toutes donnes"}),l.canEditAll&&o.jsx("span",{className:"text-blue-700",children:" diter tout"}),l.canDeleteAll&&o.jsx("span",{className:"text-blue-700",children:" Supprimer tout"}),!l.allPages&&!l.canManageUsers&&!l.canViewAll&&o.jsx("span",{className:"text-gray-500",children:"Accs limit"})]})]})]})},oae=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[i,a]=N.useState(!0),[s,l]=N.useState(""),[c,u]=N.useState("all"),[f,d]=N.useState(!1),[h,p]=N.useState(null),[b,m]=N.useState("create"),{addNotification:y}=sr(),{canManageUsers:v,profile:g}=Et();N.useEffect(()=>{x()},[]),N.useEffect(()=>{j()},[e,s,c]);const x=async()=>{try{a(!0);const O=await Be.getAll();t(O)}catch{y({type:"error",message:"Erreur lors du chargement des utilisateurs"})}finally{a(!1)}},j=()=>{let O=[...e];c!=="all"&&(O=O.filter(P=>P.role===c)),s&&(O=O.filter(P=>{var k,M;return((k=P.nom)==null?void 0:k.toLowerCase().includes(s.toLowerCase()))||((M=P.email)==null?void 0:M.toLowerCase().includes(s.toLowerCase()))})),n(O)},w=()=>{if(!v()){y({type:"error",message:" Vous n'avez pas la permission de crer des utilisateurs"});return}p(null),m("create"),d(!0)},_=O=>{if(!v()){y({type:"error",message:" Vous n'avez pas la permission de modifier des utilisateurs"});return}p(O),m("edit"),d(!0)},S=async O=>{const P=(O==null?void 0:O.id)||O;if(!v()){y({type:"error",message:" Vous n'avez pas la permission de supprimer des utilisateurs"});return}const k=e.find(B=>B.id===P);if((k==null?void 0:k.role)==="super_admin"&&(g==null?void 0:g.role)!=="super_admin"){y({type:"error",message:" Seul un Super Admin peut supprimer un autre Super Admin"});return}const M=` ATTENTION 

tes-vous absolument sr de vouloir supprimer cet utilisateur ?

${k==null?void 0:k.nom}
${k==null?void 0:k.email}

Cette action est IRRVERSIBLE !`;if(!window.confirm(M))return;if(window.prompt('Pour confirmer la suppression, tapez "SUPPRIMER" en majuscules:')!=="SUPPRIMER"){y({type:"info",message:"Suppression annule"});return}try{await Be.delete(P,g),y({type:"success",message:"Utilisateur supprim avec succs"}),x()}catch(B){B.code==="PERMISSION_DENIED"?y({type:"error",message:" "+B.message}):B.code==="USER_HAS_REFERENCES"?y({type:"error",title:" Impossible de supprimer cet utilisateur",message:B.message,duration:1e4}):y({type:"error",message:B.message||"Erreur lors de la suppression"})}},E=async O=>{var P,k;try{if(b==="create"){const M=await Be.create(O,g);M!=null&&M._authCreationFailed?y({type:"warning",title:" Utilisateur cr partiellement",message:M._message||"Utilisateur cr en BDD mais Auth rate limite. L'utilisateur pourra se connecter normalement.",duration:8e3}):y({type:"success",message:"Utilisateur cr avec succs"})}else await Be.update(h.id,O,g),y({type:"success",message:"Utilisateur modifi avec succs"});d(!1),x()}catch(M){M.code==="PERMISSION_DENIED"?y({type:"error",message:" "+M.message}):M.code==="DUPLICATE_EMAIL"?y({type:"error",title:" Email dj utilis",message:M.message,duration:6e3}):M.code==="INVALID_ROLE"?y({type:"error",title:" Rle invalide",message:M.message,duration:6e3}):(P=M.message)!=null&&P.includes("rate limit")?y({type:"warning",title:" Trop de requtes",message:"Supabase Auth a atteint sa limite. L'utilisateur a t cr en BDD et pourra se connecter.",duration:1e4}):(k=M.message)!=null&&k.includes("password")?y({type:"error",title:" Mot de passe trop faible",message:"Le mot de passe doit contenir au moins 6 caractres.",duration:6e3}):y({type:"error",message:M.message||"Erreur lors de l'enregistrement"})}},A={total:e.length,superAdmin:e.filter(O=>O.role==="super_admin").length,admin:e.filter(O=>O.role==="admin").length,technicien:e.filter(O=>O.role==="technicien").length,commercial:e.filter(O=>O.role==="commercial").length,support:e.filter(O=>O.role==="support").length};return i?o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Gestion des Utilisateurs"}),o.jsxs("p",{className:"text-white opacity-90",children:[e.length," utilisateur(s) enregistr(s)"]})]}),o.jsx(ug,{size:64,className:"opacity-50"})]})}),!v()&&o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex gap-3",children:[o.jsx(Nt,{className:"text-amber-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-amber-900",children:" Accs Limit"}),o.jsx("p",{className:"text-sm text-amber-800",children:"Vous n'avez pas les permissions pour grer les utilisateurs. Seuls les administrateurs peuvent crer, modifier ou supprimer des utilisateurs."})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Total"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.total})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-red-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Super Admin"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.superAdmin})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Admin"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.admin})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-green-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Techniciens"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.technicien})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Commerciaux"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.commercial})]}),o.jsxs("div",{className:"card bg-gradient-to-br from-indigo-500 to-indigo-600 text-white",children:[o.jsx("p",{className:"text-sm opacity-90 mb-1",children:"Support"}),o.jsx("h3",{className:"text-3xl font-bold",children:A.support})]})]}),o.jsxs("div",{className:"card",children:[o.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsx(Ta,{value:s,onChange:l,placeholder:"Rechercher un utilisateur..."})}),o.jsx(Ae,{variant:"primary",icon:Oi,onClick:w,disabled:!v(),title:v()?"":"Vous n'avez pas la permission de crer des utilisateurs",children:"Ajouter Utilisateur"})]}),o.jsxs("div",{className:"flex gap-2 mt-4 flex-wrap",children:[o.jsx("button",{onClick:()=>u("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="all"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Tous"}),o.jsx("button",{onClick:()=>u("super_admin"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="super_admin"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Super Admin"}),o.jsx("button",{onClick:()=>u("admin"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="admin"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Admin"}),o.jsx("button",{onClick:()=>u("technicien"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="technicien"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Technicien"}),o.jsx("button",{onClick:()=>u("commercial"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="commercial"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Commercial"}),o.jsx("button",{onClick:()=>u("support"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${c==="support"?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Support"})]})]}),r.length===0?o.jsx("div",{className:"card text-center py-12",children:o.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun utilisateur trouv"})}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(O=>o.jsx(sae,{user:O,onEdit:_,onDelete:S,canManage:v()},O.id))}),o.jsx(Bt,{isOpen:f,onClose:()=>d(!1),title:b==="create"?"Nouvel Utilisateur":"Modifier Utilisateur",children:o.jsx(aae,{user:h,onSubmit:E,onCancel:()=>d(!1)})})]})},lae=()=>{const[e,t]=N.useState(Pe.DASHBOARD),{hasAccess:r,profile:n}=Et();$.useEffect(()=>{if(n){if(n.role==="admin"||n.role==="super_admin"){t(Pe.DASHBOARD),console.log(` ${n.role}  Dashboard`);return}if(n!=null&&n.pages_visibles&&n.pages_visibles.length>0){const l=n.pages_visibles[0],c=Object.values(Pe).find(u=>u.toLowerCase()===l.toLowerCase());c&&(console.log(` Redirection vers: ${c}`),t(c))}}},[n]);const a={[Pe.DASHBOARD]:{title:"Tableau de Bord",subtitle:"Vue d'ensemble de votre activit",component:Sie},[Pe.PROSPECTS]:{title:"Gestion des Prospects",subtitle:"Suivi du pipeline commercial",component:Pie},[Pe.CLIENTS]:{title:"Clients",subtitle:"Base de clients actifs",component:kie},[Pe.INSTALLATIONS]:{title:"Installations",subtitle:"Suivi des dploiements",component:Rie},[Pe.ABONNEMENTS]:{title:"Abonnements",subtitle:"Renouvellements et alertes",component:Die},[Pe.PAIEMENTS]:{title:"Paiements",subtitle:"Historique des transactions",component:Lie},[Pe.SUPPORT]:{title:" Support Technique",subtitle:"Interventions et tickets",component:Uie},[Pe.MISSIONS]:{title:" Tableau de Bord Missions",subtitle:"Suivi statistique et financier en temps rel",component:eae},[Pe.ALERTES]:{title:"Alertes",subtitle:"Notifications importantes",component:tae},[Pe.APPLICATIONS]:{title:"Applications",subtitle:"Catalogue de logiciels",component:iae},[Pe.UTILISATEURS]:{title:"Utilisateurs",subtitle:"Gestion des comptes",component:oae}}[e],s=a.component;return(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="super_admin"?o.jsxs(o.Fragment,{children:[o.jsx(_p,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(bp,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(wp,{title:a.title,subtitle:a.subtitle}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:o.jsx(s,{})})]})]})]}):r(e)?o.jsxs(o.Fragment,{children:[o.jsx(_p,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(bp,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(wp,{title:a.title,subtitle:a.subtitle}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:o.jsx(s,{})})]})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(_p,{}),o.jsxs("div",{className:"flex h-screen bg-gray-50",children:[o.jsx(bp,{currentPage:e,onPageChange:t}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(wp,{title:"Accs Refus",subtitle:"Vous n'avez pas accs  cette page"}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6 flex items-center justify-center",children:o.jsxs("div",{className:"max-w-md w-full text-center bg-white rounded-lg shadow p-8",children:[o.jsx("div",{className:"text-5xl mb-4",children:""}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Accs Refus"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Vous n'avez pas accs  cette page."}),o.jsx("button",{onClick:()=>{if(n!=null&&n.pages_visibles&&n.pages_visibles.length>0){const l=n.pages_visibles[0],c=Object.values(Pe).find(u=>u.toLowerCase()===l.toLowerCase());c&&t(c)}},className:"inline-block bg-primary text-white px-6 py-2 rounded-lg font-medium hover:opacity-90 transition-opacity",children:"Retour  ma page d'accueil"})]})})]})]})]})},Q1={startAutoRenewal(e=36e5){console.log(" Auto-renewal service started"),this.checkAndRenew(),this.intervalId=setInterval(()=>{this.checkAndRenew()},e)},stopAutoRenewal(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,console.log(" Auto-renewal service stopped"))},async checkAndRenew(){try{const e=await Pr.checkAndRenewAcquisitions();e.renewedCount>0&&console.log(` ${e.renewedCount} installation(s) renouvele(s) automatiquement`)}catch(e){console.error(" Erreur lors du renouvellement automatique:",e)}}},cae=()=>{const{isAuthenticated:e,loading:t,profile:r}=Et();return $.useEffect(()=>{r&&console.log(" Utilisateur connect:",{id:r.id,nom:r.nom,email:r.email,role:r.role,pages_visibles:r.pages_visibles})},[r]),$.useEffect(()=>{if(e)return Q1.startAutoRenewal(144e5),()=>{Q1.stopAutoRenewal()}},[e]),t?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-primary mx-auto mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):o.jsxs(K$,{children:[o.jsx(Hm,{path:"/login",element:e?o.jsx(NE,{to:"/",replace:!0}):o.jsx(FR,{})}),o.jsx(Hm,{path:"/*",element:o.jsx(zR,{children:o.jsx(lae,{})})})]})};function uae(){return o.jsx(Y$,{children:o.jsx(bR,{children:o.jsx(wR,{children:o.jsx(cae,{})})})})}Qp.createRoot(document.getElementById("root")).render(o.jsx(uae,{}));
